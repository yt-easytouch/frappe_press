{"version":3,"file":"AddPaymentGateway-B8tdJjYG.js","sources":["../../../../dashboard/src2/components/billing/mpesa/AddPaymentGateway.vue"],"sourcesContent":["<template>\n\t<Dialog :options=\"{ title: 'Add Payment Gateway', size: 'lg' }\">\n\t\t<template #body-content>\n\t\t\t<div class=\"flex flex-col gap-4\">\n\t\t\t\t<FormControl\n\t\t\t\t\tlabel=\"Gateway Name\"\n\t\t\t\t\tv-model=\"paymentGatewayDetails.gateway_name\"\n\t\t\t\t\tname=\"gateway_name\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"Enter Gateway Name\"\n\t\t\t\t/>\n\t\t\t\t<FormControl\n\t\t\t\t\tlabel=\"Endpoint URL\"\n\t\t\t\t\tv-model=\"paymentGatewayDetails.url\"\n\t\t\t\t\tname=\"url\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"https://xyz.com/api/method/<endpoint>\"\n\t\t\t\t/>\n\t\t\t\t<div class=\"flex gap-4\">\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tlabel=\"API Key\"\n\t\t\t\t\t\tv-model=\"paymentGatewayDetails.api_key\"\n\t\t\t\t\t\tname=\"api_key\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Enter API Key\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tlabel=\"API Secret\"\n\t\t\t\t\t\tv-model=\"paymentGatewayDetails.api_secret\"\n\t\t\t\t\t\tname=\"api_secret\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Enter API Secret\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"flex gap-4\">\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tlabel=\"Currency\"\n\t\t\t\t\t\tv-model=\"paymentGatewayDetails.currency\"\n\t\t\t\t\t\tname=\"currency\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"e.g KES\"\n\t\t\t\t\t/>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tlabel=\"Taxes and Charges(%)\"\n\t\t\t\t\t\tv-model=\"paymentGatewayDetails.taxes_and_charges\"\n\t\t\t\t\t\tname=\"taxes_and_charges\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Enter Taxes and Charges\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<FormControl\n\t\t\t\t\tlabel=\"Print Format\"\n\t\t\t\t\tv-model=\"paymentGatewayDetails.print_format\"\n\t\t\t\t\tname=\"print_format\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"Default\"\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<div class=\"mt-4 flex w-full bg-red-300 items-center justify-center\">\n\t\t\t\t<Button\n\t\t\t\t\t@click=\"savePaymentGateway\"\n\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\tclass=\"justify-center w-full font-bold\"\n\t\t\t\t\t>Save</Button\n\t\t\t\t>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n\n<script>\nimport { toast } from 'vue-sonner';\nexport default {\n\tname: 'AddPaymentGateway',\n\tdata() {\n\t\treturn {\n\t\t\tpaymentGatewayDetails: {\n\t\t\t\tcurrency: 'KES',\n\t\t\t\tgateway_name: '',\n\t\t\t\tgateway_setting: 'Mpesa Setup',\n\t\t\t\tgateway_controller: '',\n\t\t\t\turl: '',\n\t\t\t\tapi_key: '',\n\t\t\t\tapi_secret: '',\n\t\t\t\ttaxes_and_charges: '',\n\t\t\t\tprint_format: '',\n\t\t\t},\n\t\t\tintegrationLogo: null,\n\t\t};\n\t},\n\tresources: {\n\t\tgetPaymentGatewayDetails() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.regional_payments.mpesa.utils.get_payment_gateway_details',\n\t\t\t\tonSuccess(data) {\n\t\t\t\t\tObject.assign(this.paymentGatewayDetails, {\n\t\t\t\t\t\tcurrency: data.currency,\n\t\t\t\t\t\tgateway_name: data.gateway_name,\n\t\t\t\t\t\turl: data.url,\n\t\t\t\t\t\tapi_key: data.api_key,\n\t\t\t\t\t\tapi_secret: data.api_secret,\n\t\t\t\t\t\ttaxes_and_charges: data.taxes_and_charges,\n\t\t\t\t\t\tprint_format: data.print_format,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tauto: true,\n\t\t\t};\n\t\t},\n\t\tcreatePaymentGatewaySettings() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.regional_payments.mpesa.utils.update_payment_gateway_settings',\n\t\t\t\tmakeParams() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tgateway_details: this.paymentGatewayDetails,\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tvalidate() {\n\t\t\t\t\tlet fields = Object.values(this.paymentGatewayDetails);\n\t\t\t\t\tif (fields.includes('')) {\n\t\t\t\t\t\tthis.errorMessage = 'Please fill required values';\n\t\t\t\t\t\treturn 'Please fill required values';\n\t\t\t\t\t\t// throw new DashboardError('Please fill required values');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tasync onSuccess(data) {\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\ttoast.success('Payment Gateway settings saved', data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoast.error('Error saving Payment Gateway settings');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tfetchGatewayController() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.regional_payments.mpesa.utils.get_gateway_controller',\n\t\t\t\tmethod: 'GET',\n\t\t\t\tauto: true,\n\t\t\t\tonSuccess: (res) => {\n\t\t\t\t\tObject.assign(this.paymentGatewayDetails, {\n\t\t\t\t\t\tgateway_controller: res,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\thandleFileUpload(event) {\n\t\t\tthis.integrationLogo = event.target.files[0];\n\t\t},\n\n\t\tasync savePaymentGateway() {\n\t\t\ttry {\n\t\t\t\tawait this.$resources.createPaymentGatewaySettings.submit();\n\t\t\t\tthis.$emit('closeDialog');\n\t\t\t} catch (error) {\n\t\t\t\tthis.$toast.error(\n\t\t\t\t\t`Error saving Payment Gateway settings: ${error.message}`,\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t},\n\twatch: {\n\t\tintegrationLogo: function () {\n\t\t\tthis.handleFileUpload();\n\t\t},\n\t},\n};\n</script>\n"],"names":["_sfc_main","data","__async","res","event","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_withCtx","_createElementVNode","$options","_cache","_createTextVNode"],"mappings":"28BA2EA,MAAAA,EAAA,0BAEC,MAAA,CACC,MAAA,wBAEE,SAAA,MACA,aAAA,iCAEA,mBAAA,GACA,IAAA,4BAGA,kBAAA,GACA,aAAA,IAED,gBAAA,6CAKA,MAAA,CACC,IAAA,sEACA,UAAAC,EAAA,CACC,OAAA,OAAA,KAAA,sBAAA,qBAEC,aAAAA,EAAA,uBAEA,QAAAA,EAAA,gCAEA,kBAAAA,EAAA,kBACA,aAAAA,EAAA,YACD,CAAA,GAED,KAAA,KAGF,8BAAA,CACC,MAAA,CACC,IAAA,uFAEC,MAAA,CACC,gBAAA,KAAA,6FAMA,YAAA,aAAA,8BACA,+BAIF,UAAAA,EAAA,QAAAC,EAAA,sBACCD,+HASF,MAAA,CACC,IAAA,8EAEA,KAAA,GACA,UAAAE,GAAA,CACC,OAAA,OAAA,KAAA,sBAAA,qBAEA,CAAA,MAKJ,QAAA,qBAEE,KAAA,gBAAAC,EAAA,OAAA,MAAA,CAAA,uDAIA,GAAA,gGAIC,KAAA,OAAA,4DAGD,MAGF,MAAA,qDAKD,EAvKQC,EAAA,CAAA,MAAA,qBAAA,EAeCC,EAAA,CAAA,MAAA,YAAA,EAkBAC,EAAA,CAAA,MAAA,YAAA,EAyBDC,EAAA,CAAA,MAAA,yDAAA,8GA3DK,eAAAC,EAAA,IAAA,CACVC,EAAA,MAAAL,EAAA,MAEE,MAAA,4IAEA,KAAA,eACA,KAAA,OACA,YAAA,kDAGA,MAAA,0HAEA,KAAA,MACA,KAAA,OACA,YAAA,gEAEDK,EAAA,MAAAJ,EAAA,MAEE,MAAA,6HAEA,KAAA,UACA,KAAA,OACA,YAAA,6CAIA,MAAA,sIAEA,KAAA,aACA,KAAA,OACA,YAAA,6CAIFI,EAAA,MAAAH,EAAA,MAEE,MAAA,gIAEA,KAAA,WACA,KAAA,OACA,YAAA,uCAGA,MAAA,8JAEA,KAAA,oBACA,KAAA,OACA,YAAA,yDAID,MAAA,4IAEA,KAAA,eACA,KAAA,OACA,YAAA,oCAIFG,EAAA,MAAAF,EAAA,MAEG,QAAAG,EAAA,mBACD,QAAA,QACA,MAAA,oCAjEL,QAAAF,EAAA,IAAAG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAAAC,EAAA,MAAA"}