import{x as m,ao as f,r as h,h as b,o as _,w as g,A as y,aA as w,av as A,aF as I,a2 as D,V as o,aa as r,ax as p,z as x,D as S}from"./main-Dpl-JOF2.js";(function(){try{var a=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},s=new Error().stack;s&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[s]="35e5c4bd-84c6-4817-abb6-f80246ec451a",a._sentryDebugIdIdentifier="sentry-dbid-35e5c4bd-84c6-4817-abb6-f80246ec451a")}catch(e){}})();{var l=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};l._sentryModuleMetadata=l._sentryModuleMetadata||{},l._sentryModuleMetadata[new Error().stack]=Object.assign({},l._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const $={props:{site:{type:String,required:!0}},emits:["installed"],components:{ObjectList:f},data(){return{show:!0}},computed:{$site(){return A("Site",this.site)},listOptions(){var s;const a=e=>{if(!this.$site.installApp.loading)if(e.plans&&e.plans.some(t=>t.price_inr>0)){this.show=!1;let t=x(()=>S(()=>import("./SiteAppPlanSelectDialog-CHPvZDxx.js"),__vite__mapDeps([0,1,2,3,4,5])));I(D(t,{app:e,currentPlan:null,onPlanSelected:i=>{o.promise(this.$site.installApp.submit({app:e.app,plan:i.name}),{loading:"Installing app...",success:n=>(p.push({name:"Site Job",params:{name:this.site,id:n}}),this.$emit("installed"),this.show=!1,"App will be installed shortly"),error:n=>r(n)})}}))}else o.promise(this.$site.installApp.submit({app:e.app}),{loading:"Installing app...",success:t=>(p.push({name:"Site Job",params:{name:this.site,id:t}}),this.$emit("installed"),this.show=!1,"App will be installed shortly"),error:t=>r(t)})};return{label:"App",fieldname:"app",fieldtype:"ListSelection",emptyStateMessage:"No apps found"+((s=this.$site.doc)!=null&&s.group_public?"":". Please add them from your bench."),columns:[{label:"Title",fieldname:"title",class:"font-medium",width:2,format:(e,t)=>e||t.app_title},{label:"Repo",fieldname:"repository_owner",class:"text-gray-600",width:"10rem"},{label:"Branch",fieldname:"branch",class:"text-gray-600",width:"20rem"},{label:"",fieldname:"",align:"right",type:"Button",width:"5rem",Button({row:e}){return{label:"Install",onClick:()=>{a(e)}}}}],resource:()=>({url:"press.api.site.available_apps",params:{name:this.site},auto:!0})}}}};function v(a,s,e,t,i,n){const d=h("ObjectList"),u=w;return _(),b(u,{modelValue:i.show,"onUpdate:modelValue":s[0]||(s[0]=c=>i.show=c),options:{title:"Install app on your site",size:"4xl"}},{"body-content":g(()=>[y(d,{options:n.listOptions},null,8,["options"])]),_:1},8,["modelValue"])}const P=m($,[["render",v]]);export{P as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/SiteAppPlanSelectDialog-CHPvZDxx.js","assets/main-Dpl-JOF2.js","assets/main-B0ZLDivw.css","assets/SiteAppPlanSelectorDialog-CH4JlF1b.js","assets/PlansCards-CiqqQthx.js","assets/badge-check-DXteVc7W.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=InstallAppDialog-uC3Vmx4r.js.map
