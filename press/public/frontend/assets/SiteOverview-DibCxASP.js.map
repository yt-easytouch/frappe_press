{"version":3,"mappings":"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","names":["_sfc_main","localTimezone","dayjs","plan_limit","_hoisted_1","_hoisted_2","_openBlock","_createElementBlock","_createElementVNode","_cache","_withCtx","_createTextVNode","$options","_ctx","SiteDailyUsage","Progress","DismissableBanner","_b","_a","res","SitePlansDialog","defineAsyncComponent","v","url","tag","e","getToastErrorMessage","TagsDialog","__vitePreload","renderDialog","h","trialDays","_f","_g","_h","_i","Tooltip","InfoIcon","_j","_c","currency","__spreadValues","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_30","_hoisted_31","_createCommentVNode","_d","_Fragment","_toDisplayString","_hoisted_11","_e","_renderList","_hoisted_28","_createBlock","_resolveDynamicComponent","_hoisted_29"],"sources":["../../../../dashboard/src2/components/SiteDailyUsage.vue","../../../../dashboard/src2/components/SiteOverview.vue"],"sourcesContent":["<template>\n\t<div class=\"rounded-md border\">\n\t\t<div class=\"flex h-12 items-center justify-between border-b px-5\">\n\t\t\t<h2 class=\"text-lg font-medium text-gray-900\">Daily Usage</h2>\n\t\t\t<router-link\n\t\t\t\tclass=\"text-base text-gray-600 hover:text-gray-700\"\n\t\t\t\t:to=\"{ name: 'Site Analytics' }\"\n\t\t\t>\n\t\t\t\tAll analytics â†’\n\t\t\t</router-link>\n\t\t</div>\n\t\t<LineChart\n\t\t\ttitle=\"Daily Usage\"\n\t\t\ttype=\"time\"\n\t\t\t:key=\"dailyUsageData\"\n\t\t\t:data=\"dailyUsageData\"\n\t\t\tunit=\"seconds\"\n\t\t\t:chartTheme=\"[$theme.colors.purple[500]]\"\n\t\t\t:loading=\"$resources.requestCounter.loading\"\n\t\t\t:error=\"$resources.requestCounter.error\"\n\t\t\t:showCard=\"false\"\n\t\t\tclass=\"h-[15.55rem] p-2 pb-3\"\n\t\t/>\n\t</div>\n</template>\n<script>\nimport dayjs from '../utils/dayjs';\nimport LineChart from '@/components/charts/LineChart.vue';\n\nexport default {\n\tname: 'CPUUsage',\n\tprops: ['site'],\n\tcomponents: { LineChart },\n\tresources: {\n\t\trequestCounter() {\n\t\t\tlet localTimezone = dayjs.tz.guess();\n\t\t\treturn {\n\t\t\t\turl: 'press.api.analytics.daily_usage',\n\t\t\t\tparams: { name: this.site, timezone: localTimezone },\n\t\t\t\tauto: true\n\t\t\t};\n\t\t}\n\t},\n\tcomputed: {\n\t\tdailyUsageData() {\n\t\t\tlet dailyUsageData = this.$resources.requestCounter.data?.data;\n\t\t\tif (!dailyUsageData) return;\n\t\t\tlet plan_limit = this.$resources.requestCounter.data.plan_limit;\n\n\t\t\treturn {\n\t\t\t\tdatasets: [\n\t\t\t\t\tdailyUsageData.map(d => [+new Date(d.date), d.value / 1000000])\n\t\t\t\t],\n\t\t\t\t// daily limit marker\n\t\t\t\tmarkLine: {\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'Daily Compute Limit',\n\t\t\t\t\t\t\tyAxis: plan_limit,\n\t\t\t\t\t\t\tlabel: {\n\t\t\t\t\t\t\t\tformatter: '{b}: {c} seconds',\n\t\t\t\t\t\t\t\tposition: 'middle'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlineStyle: {\n\t\t\t\t\t\t\t\tcolor: '#f5222d'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tsymbol: ['none', 'none']\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<div\n\t\tv-if=\"$site?.doc\"\n\t\tclass=\"grid grid-cols-1 items-start gap-5 lg:grid-cols-2\"\n\t>\n\t\t<AlertBanner\n\t\t\tv-if=\"!isSetupWizardComplete\"\n\t\t\tclass=\"col-span-1 lg:col-span-2\"\n\t\t\ttitle=\"Please login and complete the setup wizard on your site. Analytics will be\n\t\t\tcollected only after setup is complete.\"\n\t\t>\n\t\t\t<Button\n\t\t\t\tclass=\"ml-auto\"\n\t\t\t\tvariant=\"outline\"\n\t\t\t\t@click=\"loginAsTeam\"\n\t\t\t\t:loading=\"$site.loginAsAdmin.loading\"\n\t\t\t>\n\t\t\t\tLogin\n\t\t\t</Button>\n\t\t</AlertBanner>\n\n\t\t<AlertBanner\n\t\t\tv-if=\"$site.doc.current_plan?.is_trial_plan\"\n\t\t\tclass=\"col-span-1 lg:col-span-2\"\n\t\t\ttitle=\"Upgrade to a paid plan to continue using your site after the trial period.\"\n\t\t>\n\t\t\t<Button class=\"ml-auto\" variant=\"outline\" @click=\"showPlanChangeDialog\">\n\t\t\t\tUpgrade\n\t\t\t</Button>\n\t\t</AlertBanner>\n\n\t\t<DismissableBanner\n\t\t\tv-if=\"$site.doc.eol_versions.includes($site.doc.version)\"\n\t\t\tclass=\"col-span-1 lg:col-span-2\"\n\t\t\ttitle=\"Your site is on an End of Life version. Upgrade to the latest version to get the latest features and security updates.\"\n\t\t\t:id=\"`${$site.name}-eol`\"\n\t\t>\n\t\t\t<Button\n\t\t\t\tclass=\"ml-auto\"\n\t\t\t\tvariant=\"outline\"\n\t\t\t\tlink=\"https://easytouch.cloud/docs/sites/version-upgrade\"\n\t\t\t>\n\t\t\t\tUpgrade Now\n\t\t\t</Button>\n\t\t</DismissableBanner>\n\t\t<DismissableBanner\n\t\t\tv-else-if=\"\n\t\t\t\t$site.doc.current_plan &&\n\t\t\t\t!$site.doc.current_plan?.private_benches &&\n\t\t\t\t$site.doc.group_public &&\n\t\t\t\t!$site.doc.current_plan?.is_trial_plan\n\t\t\t\"\n\t\t\tclass=\"col-span-1 lg:col-span-2\"\n\t\t\ttitle=\"Your site is currently on a shared bench group. Upgrade plan to enjoy <a href='https://easytouch.cloud/shared-hosting#benches' class='underline' target='_blank'>more benefits</a>.\"\n\t\t\t:id=\"$site.name\"\n\t\t\ttype=\"gray\"\n\t\t>\n\t\t\t<Button class=\"ml-auto\" variant=\"outline\" @click=\"showPlanChangeDialog\">\n\t\t\t\tUpgrade Plan\n\t\t\t</Button>\n\t\t</DismissableBanner>\n\t\t<div class=\"col-span-1 rounded-md border lg:col-span-2\">\n\t\t\t<div class=\"grid grid-cols-2 lg:grid-cols-4\">\n\t\t\t\t<div class=\"border-b border-r p-5 lg:border-b-0\">\n\t\t\t\t\t<div class=\"flex h-full items-center justify-between\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"text-base text-gray-700\">Current Plan</div>\n\t\t\t\t\t\t\t<div class=\"mt-2 flex justify-between\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div class=\"leading-4\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"flex items-center text-base text-gray-900\">\n\t\t\t\t\t\t\t\t\t\t\t<template v-if=\"$site.doc.trial_end_date\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{ trialDays($site.doc.trial_end_date) }}\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t<template v-else-if=\"currentPlan\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{ $format.planTitle(currentPlan) }}\n\t\t\t\t\t\t\t\t\t\t\t\t<span v-if=\"currentPlan.price_inr && $isMobile\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t/mo\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span v-if=\"currentPlan.price_inr && !$isMobile\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t/month\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t<template v-else> No plan set </template>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"ml-2 text-sm leading-3 text-gray-600\"\n\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentPlan &&\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentPlan.support_included &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t!currentPlan.is_trial_plan\n\t\t\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip text=\"Support included\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i-lucide-badge-check class=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Button @click=\"showPlanChangeDialog\">\n\t\t\t\t\t\t\t{{ currentPlan?.is_trial_plan ? 'Upgrade' : 'Change' }}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"border-b p-5 lg:border-b-0 lg:border-r\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex items-center justify-between text-base text-gray-700\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span>Compute</span>\n\t\t\t\t\t\t<div class=\"h-7\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"mt-2\">\n\t\t\t\t\t\t<Progress\n\t\t\t\t\t\t\tsize=\"md\"\n\t\t\t\t\t\t\t:value=\"\n\t\t\t\t\t\t\t\tcurrentPlan\n\t\t\t\t\t\t\t\t\t? (currentUsage.cpu / currentPlan.cpu_time_per_day) * 100\n\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mt-2 flex justify-between\">\n\t\t\t\t\t\t\t\t<div class=\"text-sm text-gray-600\">\n\t\t\t\t\t\t\t\t\t{{ currentUsage.cpu }}\n\t\t\t\t\t\t\t\t\t{{ $format.plural(currentUsage.cpu, 'hour', 'hours') }}\n\t\t\t\t\t\t\t\t\t<template\n\t\t\t\t\t\t\t\t\t\tv-if=\"currentPlan && !$site.doc.is_dedicated_server\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tof {{ currentPlan?.cpu_time_per_day }} hours\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"border-r p-5\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex items-center justify-between text-base text-gray-700\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span>Storage</span>\n\t\t\t\t\t\t<div class=\"h-7\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"mt-2\">\n\t\t\t\t\t\t<Progress\n\t\t\t\t\t\t\tsize=\"md\"\n\t\t\t\t\t\t\t:value=\"\n\t\t\t\t\t\t\t\tcurrentPlan\n\t\t\t\t\t\t\t\t\t? (currentUsage.storage / currentPlan.max_storage_usage) * 100\n\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mt-2 flex justify-between\">\n\t\t\t\t\t\t\t\t<div class=\"text-sm text-gray-600\">\n\t\t\t\t\t\t\t\t\t{{ formatBytes(currentUsage.storage) }}\n\t\t\t\t\t\t\t\t\t<template\n\t\t\t\t\t\t\t\t\t\tv-if=\"currentPlan && !$site.doc.is_dedicated_server\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tof {{ formatBytes(currentPlan.max_storage_usage) }}\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"p-5\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex min-h-[1.75rem] items-center justify-between text-base text-gray-700\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span>Database</span>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\t\t(currentPlan\n\t\t\t\t\t\t\t\t\t? (currentUsage.database / currentPlan.max_database_usage) *\n\t\t\t\t\t\t\t\t\t\t100\n\t\t\t\t\t\t\t\t\t: 0) >= 80\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\tlink=\"https://easytouch.cloud/docs/faq/site#what-is-using-up-all-my-database-size\"\n\t\t\t\t\t\t\ticon=\"help-circle\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"mt-2\">\n\t\t\t\t\t\t<Progress\n\t\t\t\t\t\t\tsize=\"md\"\n\t\t\t\t\t\t\t:value=\"\n\t\t\t\t\t\t\t\tcurrentPlan\n\t\t\t\t\t\t\t\t\t? (currentUsage.database / currentPlan.max_database_usage) *\n\t\t\t\t\t\t\t\t\t\t100\n\t\t\t\t\t\t\t\t\t: 0\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"mt-2 flex justify-between\">\n\t\t\t\t\t\t\t\t<div class=\"text-sm text-gray-600\">\n\t\t\t\t\t\t\t\t\t{{ formatBytes(currentUsage.database) }}\n\t\t\t\t\t\t\t\t\t<template\n\t\t\t\t\t\t\t\t\t\tv-if=\"currentPlan && !$site.doc.is_dedicated_server\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tof\n\t\t\t\t\t\t\t\t\t\t{{ formatBytes(currentPlan.max_database_usage) }}\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"rounded-md border\">\n\t\t\t<div class=\"h-12 border-b px-5 py-4\">\n\t\t\t\t<h2 class=\"text-lg font-medium text-gray-900\">Site Information</h2>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"d in siteInformation\"\n\t\t\t\t\t:key=\"d.label\"\n\t\t\t\t\tclass=\"flex items-center px-5 py-3 last:pb-5 even:bg-gray-50/70\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"w-1/3 text-base text-gray-600\">{{ d.label }}</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex w-2/3 items-center space-x-2 text-base text-gray-900\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div v-if=\"d.prefix\">\n\t\t\t\t\t\t\t<component :is=\"d.prefix\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{{ d.value }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div v-if=\"d.suffix\">\n\t\t\t\t\t\t\t<component :is=\"d.suffix\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<SiteDailyUsage :site=\"site\" />\n\n\t\t<!-- Tags -->\n\t\t<div class=\"col-span-1 flex items-center space-x-2 lg:col-span-2\">\n\t\t\t<Badge\n\t\t\t\tv-for=\"tag in $site.doc.tags\"\n\t\t\t\t:key=\"tag.tag\"\n\t\t\t\t:label=\"tag.tag_name\"\n\t\t\t\tsize=\"lg\"\n\t\t\t\tclass=\"group\"\n\t\t\t>\n\t\t\t\t<template #suffix>\n\t\t\t\t\t<button\n\t\t\t\t\t\t@click=\"removeTag(tag)\"\n\t\t\t\t\t\tclass=\"ml-1 hidden transition group-hover:block\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<i-lucide-x class=\"mt-0.5 h-3 w-3\" />\n\t\t\t\t\t</button>\n\t\t\t\t</template>\n\t\t\t</Badge>\n\t\t\t<Badge\n\t\t\t\tvariant=\"outline\"\n\t\t\t\tsize=\"lg\"\n\t\t\t\tlabel=\"Add Tag\"\n\t\t\t\tclass=\"cursor-pointer\"\n\t\t\t\t@click=\"showAddTagDialog\"\n\t\t\t>\n\t\t\t\t<template #suffix>\n\t\t\t\t\t<i-lucide-plus class=\"h-3 w-3\" />\n\t\t\t\t</template>\n\t\t\t</Badge>\n\t\t</div>\n\t</div>\n</template>\n<script>\nimport { getCachedDocumentResource, Progress, Tooltip } from 'frappe-ui';\nimport { h, defineAsyncComponent } from 'vue';\nimport { toast } from 'vue-sonner';\nimport InfoIcon from '~icons/lucide/info';\nimport DismissableBanner from './DismissableBanner.vue';\nimport { getToastErrorMessage } from '../utils/toast';\nimport { renderDialog } from '../utils/components';\nimport SiteDailyUsage from './SiteDailyUsage.vue';\nimport AlertBanner from './AlertBanner.vue';\nimport { trialDays } from '../utils/site';\n\nexport default {\n\tname: 'SiteOverview',\n\tprops: ['site'],\n\tcomponents: {\n\t\tSiteDailyUsage,\n\t\tProgress,\n\t\tAlertBanner,\n\t\tDismissableBanner,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisSetupWizardComplete: true,\n\t\t};\n\t},\n\tmounted() {\n\t\tif (this.$site?.doc?.status === 'Active') {\n\t\t\tthis.$site.isSetupWizardComplete.submit().then((res) => {\n\t\t\t\tthis.isSetupWizardComplete = res;\n\t\t\t});\n\t\t}\n\t},\n\tmethods: {\n\t\tshowPlanChangeDialog() {\n\t\t\tlet SitePlansDialog = defineAsyncComponent(\n\t\t\t\t() => import('../components/ManageSitePlansDialog.vue'),\n\t\t\t);\n\t\t\trenderDialog(h(SitePlansDialog, { site: this.site }));\n\t\t},\n\t\tformatBytes(v) {\n\t\t\treturn this.$format.bytes(v, 2, 2);\n\t\t},\n\t\tloginAsAdmin() {\n\t\t\tthis.$site.loginAsAdmin\n\t\t\t\t.submit({ reason: '' })\n\t\t\t\t.then((url) => window.open(url, '_blank'));\n\t\t},\n\t\tloginAsTeam() {\n\t\t\tif (this.$site.doc?.additional_system_user_created) {\n\t\t\t\tthis.$site.loginAsTeam\n\t\t\t\t\t.submit({ reason: '' })\n\t\t\t\t\t.then((url) => window.open(url, '_blank'));\n\t\t\t} else {\n\t\t\t\tthis.loginAsAdmin();\n\t\t\t}\n\t\t},\n\t\tremoveTag(tag) {\n\t\t\ttoast.promise(\n\t\t\t\tthis.$site.removeTag.submit({\n\t\t\t\t\ttag: tag.tag_name,\n\t\t\t\t}),\n\t\t\t\t{\n\t\t\t\t\tloading: 'Removing tag...',\n\t\t\t\t\tsuccess: `Tag ${tag.tag_name} removed`,\n\t\t\t\t\terror: (e) => getToastErrorMessage(e),\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tshowAddTagDialog() {\n\t\t\tconst TagsDialog = defineAsyncComponent(\n\t\t\t\t() => import('../dialogs/TagsDialog.vue'),\n\t\t\t);\n\t\t\trenderDialog(h(TagsDialog, { doctype: 'Site', docname: this.site }));\n\t\t},\n\t\ttrialDays,\n\t},\n\tcomputed: {\n\t\tsiteInformation() {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Owned by',\n\t\t\t\t\tvalue: this.$site.doc?.owner_email,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Created by',\n\t\t\t\t\tvalue: this.$site.doc?.signup_by || this.$site.doc?.owner,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Created on',\n\t\t\t\t\tvalue: this.$format.date(\n\t\t\t\t\t\tthis.$site.doc?.signup_time || this.$site.doc?.creation,\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Region',\n\t\t\t\t\tvalue: this.$site.doc?.cluster.title,\n\t\t\t\t\tprefix: h('img', {\n\t\t\t\t\t\tsrc: this.$site.doc?.cluster.image,\n\t\t\t\t\t\talt: this.$site.doc?.cluster.title,\n\t\t\t\t\t\tclass: 'h-4 w-4',\n\t\t\t\t\t}),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Inbound IP',\n\t\t\t\t\tvalue: this.$site.doc?.inbound_ip,\n\t\t\t\t\tsuffix: h(\n\t\t\t\t\t\tTooltip,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: 'Use this for adding A records for your site',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t() => h(InfoIcon, { class: 'h-4 w-4 text-gray-500' }),\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Outbound IP',\n\t\t\t\t\tvalue: this.$site.doc?.outbound_ip,\n\t\t\t\t\tsuffix: h(\n\t\t\t\t\t\tTooltip,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: 'Use this for whitelisting our server on a 3rd party service',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t() => h(InfoIcon, { class: 'h-4 w-4 text-gray-500' }),\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\tcurrentPlan() {\n\t\t\tif (!this.$site?.doc?.current_plan || !this.$team?.doc) return null;\n\n\t\t\tconst currency = this.$team.doc.currency;\n\t\t\treturn {\n\t\t\t\tprice:\n\t\t\t\t\tcurrency === 'INR'\n\t\t\t\t\t\t? this.$site.doc.current_plan.price_inr\n\t\t\t\t\t\t: this.$site.doc.current_plan.price_usd,\n\t\t\t\tprice_per_day:\n\t\t\t\t\tcurrency === 'INR'\n\t\t\t\t\t\t? this.$site.doc.current_plan.price_per_day_inr\n\t\t\t\t\t\t: this.$site.doc.current_plan.price_per_day_usd,\n\t\t\t\tcurrency: currency === 'INR' ? 'â‚¹' : '$',\n\t\t\t\t...this.$site.doc.current_plan,\n\t\t\t};\n\t\t},\n\t\tcurrentUsage() {\n\t\t\treturn this.$site.doc?.current_usage;\n\t\t},\n\t\t$site() {\n\t\t\treturn getCachedDocumentResource('Site', this.site);\n\t\t},\n\t},\n};\n</script>\n"],"file":"assets/SiteOverview-DibCxASP.js"}