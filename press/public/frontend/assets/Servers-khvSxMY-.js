import{x as M,z as P,q as a,o as s,j as c,A as i,a6 as U,w as d,h as o,C as R,X as z,u as _,B as H,a8 as q,F as b,v as y,a5 as K,y as X,t as S,a7 as J,ae as Q,aA as W,D as Y}from"./main-Dpl-JOF2.js";import Z from"./StripeCard-BRr8QCrN.js";import{_ as k,a as C,b as T,c as $}from"./TableHeader-DvqcS5cY.js";import{_ as G}from"./Breadcrumbs-yx7M4N4X.js";import"./StripeLogo-BRF2qIyd.js";import"./AddressForm-Cz0XUJgF.js";import"./Form-CIPLpg2e.js";import"./stripe.esm-D4yu_pm0.js";(function(){try{var t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="16b4dab0-166b-4827-8f60-269ec2b05325",t._sentryDebugIdIdentifier="sentry-dbid-16b4dab0-166b-4827-8f60-269ec2b05325")}catch(D){}})();{var m=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};m._sentryModuleMetadata=m._sentryModuleMetadata||{},m._sentryModuleMetadata[new Error().stack]=Object.assign({},m._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const ee={name:"Servers",components:{Table:$,TableHeader:T,TableRow:C,TableCell:k,StripeCard:P(()=>Y(()=>import("./StripeCard-BRr8QCrN.js"),__vite__mapDeps([0,1,2,3,4,5,6])))},pageMeta(){return{title:"Servers - Easytouch Cloud"}},data(){return{showAddCardDialog:!1,searchTerm:"",server_type:"All Servers",server_tag:"",dropDownOptions:[{label:"Easytouch Cloud Server",onClick:()=>this.$router.replace("/servers/new")},{label:"Self Hosted Server",onClick:()=>this.$router.replace("/selfhosted/new")}]}},resources:{allServers(){return{url:"press.api.server.all",params:{server_filter:{server_type:this.server_type,tag:this.server_tag}},auto:!0,cache:["ServerList",this.server_type,this.server_tag,this.$account.team.name]}},serverTags:{url:"press.api.server.server_tags",auto:!0,initialData:[]}},methods:{dropdownItems(t){return[{label:"Visit Server",condition:()=>this.$account.user.user_type==="System User",onClick:()=>{window.open(`https://${t.route.params.serverName}`,"_blank")}},{label:"New Bench",onClick:()=>{this.$router.push(`/servers/${t.app_server}/bench/new`)}}]},reload(){!this.$resources.allServers.loading&&new Date-this.$resources.allServers.lastLoaded>5e3&&this.$resources.allServers.reload()},showBillingDialog(){this.$account.hasBillingInfo?(this.$account.team.self_hosted_servers_enabled!==1&&this.$router.replace("/servers/new"),this.showAddCardDialog=!1):this.showAddCardDialog=!0}},computed:{servers(){if(!this.$resources.allServers.data)return[];let t=this.$resources.allServers.data.filter(e=>this.$account.hasPermission(e.name,"",!0));return this.searchTerm&&(t=t.filter(e=>e.name.toLowerCase().includes(this.searchTerm.toLowerCase())||e.title.toLowerCase().includes(this.searchTerm.toLowerCase()))),t.map(e=>({name:e.title||e.name,status:e.status,server_region_info:e.region_info,plan:e.plan,tags:e.tags,app_server:e.app_server,route:{name:"ServerOverview",params:{serverName:e.name}}}))},serverStatusFilterOptions(){return[{label:"All Servers",value:"All Servers"},{label:"App Servers",value:"App Servers"},{label:"Database Servers",value:"Database Servers"}]},serverTagFilterOptions(){const t=[{label:"",value:""}];return this.$resources.serverTags.data?[...t,...this.$resources.serverTags.data.map(e=>({label:e,value:e}))]:t}}},se={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-5 py-2.5"},te={class:"mx-5 mt-5"},re={class:"flex"},ae={class:"flex w-full space-x-2 pb-4"},ne={key:1,class:"hidden space-x-1 lg:flex"},le={key:1},oe={key:2,class:"hidden md:block"},ie={key:3,class:"hidden md:block"},de=["src","alt","title"],ue={key:1,class:"text-base text-gray-700"},ce={key:4,class:"w-full text-right"},_e={key:5},pe={class:"mt-8 flex items-center justify-center"},me={key:1,class:"text-base text-gray-700"};function ge(t,e,D,ve,n,p){const g=z,w=R,x=G,A=H,v=q,V=T,h=K,B=X,L=k,I=C,O=Q,F=$,E=Z,N=W;return s(),a("div",null,[c("header",se,[i(x,{items:[{label:"Servers",route:{name:"Servers"}}]},U({_:2},[this.$account.team.enabled?{name:"actions",fn:d(()=>[t.$account.team.self_hosted_servers_enabled===1&&!n.showAddCardDialog?(s(),o(w,{key:0,options:n.dropDownOptions},{default:d(()=>[i(g,{variant:"solid",iconLeft:"plus",label:"Create",class:"ml-2 hidden sm:inline-flex"})]),_:1},8,["options"])):(s(),o(g,{key:1,variant:"solid",iconLeft:"plus",label:"Create",class:"ml-2 hidden sm:inline-flex",onClick:p.showBillingDialog},null,8,["onClick"]))]),key:"0"}:void 0]),1024)]),c("div",null,[c("div",te,[c("div",re,[c("div",ae,[i(v,{label:"Search Servers",modelValue:n.searchTerm,"onUpdate:modelValue":e[0]||(e[0]=l=>n.searchTerm=l)},{prefix:d(()=>[i(A,{name:"search",class:"w-4 text-gray-600"})]),_:1},8,["modelValue"]),i(v,{label:"Server Type",class:"mr-8",type:"select",options:p.serverStatusFilterOptions,modelValue:n.server_type,"onUpdate:modelValue":e[1]||(e[1]=l=>n.server_type=l)},null,8,["options","modelValue"]),t.$resources.serverTags.data.length>0?(s(),o(v,{key:0,label:"Tag",class:"mr-8",type:"select",options:p.serverTagFilterOptions,modelValue:n.server_tag,"onUpdate:modelValue":e[2]||(e[2]=l=>n.server_tag=l)},null,8,["options","modelValue"])):_("",!0)])]),i(F,{columns:[{label:"Server Name",name:"name",width:2},{label:"Status",name:"status"},{label:"Region",name:"region"},{label:"Tags",name:"tags"},{label:"Plan",name:"plan"},{label:"",name:"actions",width:.5}],rows:p.servers},{default:d(({rows:l,columns:j})=>[i(V,{class:"hidden lg:grid"}),(s(!0),a(b,null,y(l,r=>(s(),o(I,{key:r.name,row:r,class:"rounded"},{default:d(()=>[(s(!0),a(b,null,y(j,u=>(s(),o(L,null,{default:d(()=>[u.name==="status"?(s(),o(h,{key:0,label:r.status},null,8,["label"])):u.name==="tags"?(s(),a("div",ne,[(s(!0),a(b,null,y(r.tags.slice(0,1),(f,he)=>(s(),o(h,{theme:"blue",label:f},null,8,["label"]))),256)),r.tags.length>1?(s(),o(B,{key:0,text:r.tags.slice(1).join(", ")},{default:d(()=>[r.tags.length>1?(s(),o(h,{key:0,label:`+${r.tags.length-1}`},null,8,["label"])):_("",!0)]),_:2},1032,["text"])):_("",!0),r.tags.length===0?(s(),a("span",le,"-")):_("",!0)])):u.name==="plan"?(s(),a("span",oe,S(r.plan?`${t.$planTitle(r.plan)}${r.plan.price_usd>0?"/mo":""}`:""),1)):u.name==="region"?(s(),a("div",ie,[r.server_region_info.image?(s(),a("img",{key:0,class:"h-4",src:r.server_region_info.image,alt:`Flag of ${r.server_region_info.title}`,title:r.server_region_info.title},null,8,de)):(s(),a("span",ue,S(r.server_region_info.title),1))])):u.name=="actions"?(s(),a("div",ce,[i(w,{onClick:e[3]||(e[3]=J(()=>{},["prevent"])),options:p.dropdownItems(r)},{default:d(({open:f})=>[i(g,{variant:f?"subtle":"ghost",class:"mr-2",icon:"more-horizontal"},null,8,["variant"])]),_:2},1032,["options"])])):(s(),a("span",_e,S(r[u.name]||""),1))]),_:2},1024))),256))]),_:2},1032,["row"]))),128)),c("div",pe,[t.$resources.allServers.loading?(s(),o(O,{key:0})):t.$resources.allServers.data&&l.length===0?(s(),a("div",me," No Servers ")):_("",!0)])]),_:1},8,["rows"])])]),i(N,{options:{title:"Add card to create new servers"},modelValue:n.showAddCardDialog,"onUpdate:modelValue":e[5]||(e[5]=l=>n.showAddCardDialog=l)},{"body-content":d(()=>[n.showAddCardDialog?(s(),o(E,{key:0,class:"mb-1",onComplete:e[4]||(e[4]=l=>{n.showAddCardDialog=!1,t.$resources.paymentMethods.reload()})})):_("",!0)]),_:1},8,["modelValue"])])}const $e=M(ee,[["render",ge]]);export{$e as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/StripeCard-BRr8QCrN.js","assets/StripeLogo-BRF2qIyd.js","assets/main-Dpl-JOF2.js","assets/main-B0ZLDivw.css","assets/AddressForm-Cz0XUJgF.js","assets/Form-CIPLpg2e.js","assets/stripe.esm-D4yu_pm0.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=Servers-khvSxMY-.js.map
