{"version":3,"mappings":"wmCAoKA,MAAAA,GAAA,CACC,qBACA,OACC,0CAGC,6CAKD,6EAOA,SAAAC,EACA,UAAAC,EACA,WAAAC,EAAA,IACCC,EAAA,wEACD,cAGA,gBACC,4CACA,sBAGA,iCAEC,oEAGA,QACA,mBAEC,kBACA,sCAED,eAID,iCACA,sBAED,GAED,UACC,UACC,oCACC,oGAKD,uCAEEC,EAAA,yEAID,KAAAA,EAAA,MACA,OAAAA,EAAA,OACA,QAAAA,EAAA,QACA,OACC,gBAAAA,EAAA,gBACA,eAAAA,EAAA,gBAED,KAAAA,EAAA,2DAED,gCAGA,OACC,0BAIA,CACC,+BAGD,yBAEC,uBACD,4BAID,MAAAC,EAAA,CACC,CACC,SACA,QACD,yCAKD,CACC,GAAAA,EACA,sCAAAC,IAAA,CACC,MAAAA,EACA,MAAAA,CACD,MAEF,GAED,SACC,oBACC,6BAGC,+DAGF,cAAAF,EAAA,CACC,OACC,CACC,8BAEC,mBACC,oBACA,cAAAA,EAAA,uBACD,IAED,cAAAA,EAAA,mBAED,CACC,gCAEC,mBACC,gEAED,EACD,CACD,0CAEF,CACD,CACD,EA/SGG,GAAA,4FAiBIC,GAAA,oBACCC,GAAA,eACCC,GAAA,+CA+CF,uDAoBA,yDAkByC,2BAkBvCC,GAAA,0DAMH,kJAjIJC,EAAA,SAAAL,GAAA,+DAMmB,QAAAM,EAAA,UAEf,gBACA,mBACA,eACA,aACC,QAAAC,EAAA,iDAMLF,EAAA,MAAAJ,GAAA,CACCI,EAAA,MAAAH,GAAA,CACCG,EAAA,MAAAF,GAAA,MACc,uBAvBlB,WAAAK,EAAA,iCAAAC,EAAA,KAAAA,EAAA,GAAAC,GAAAF,EAAA,WAAAE,KAwBiB,OAAAJ,EAAA,UACG,cAAc,0DAI5B,eACA,aACA,cACC,QAAAC,EAAA,yBAhCP,WAAAC,EAAA,mCAAAC,EAAA,KAAAA,EAAA,GAAAC,GAAAF,EAAA,aAAAE,qCAoCYC,EAAA,mDACN,YACA,aACA,cACC,QAAAJ,EAAA,sBAxCP,WAAAC,EAAA,gCAAAC,EAAA,KAAAA,EAAA,GAAAC,GAAAF,EAAA,UAAAE,sCAAAE,EAAA,6DA+CK,4MAOA,EACA,KAAAL,EAAA,UAvDL,QAAAD,EAAA,OAAAO,EAAA,QAAAC,CAAA,oCA2DIC,EAAA,IAAAC,EAAAC,EAAA,KAAAC,EAAAL,EAAAM,wBAGE,IAAAA,EACD,kBA/DL,QAAAb,EAAA,MAiEKS,EAAA,IAAAC,EAAAC,EAAA,KAAAC,EAAAJ,EAAAM,kBAjEL,QAAAd,EAAA,KAkEmBc,EAAA,mEAEDA,EAAA,eADZL,IAAAC,EAAA,MAAAK,GAAA,uDAME,aACC,MAAAtB,6DAIA,KAAAoB,EAAA,2BA9ET,QAAAb,EAAA,qCAkFU,UAAAa,EAAA,oCAlFVP,EAAA,8BAAAA,EAAA,+CAAAA,EAAA,UAwFkBQ,EAAA,+GAST,WAAAE,EAAA,GAAAH,EAAA,wBAAAR,EAAA,oDAUaS,EAAA,iBAAhBL,IAAAC,EAAA,MAAAO,GAAA,0GAIK,QAAAC,EAAA,iBACD,aACA,6FAOF,MAAAC,EAAA,mBAAAL,EAAA,2FAKJf,EAAA,MAAAD,GAAA,iEACCW,EAAA,EAAAW,EAAAC,EAAA,UAIYhB,EAAA,+BAAAE,EAAA,4CAlIjBD,EAAA,mCA4II,iDA5IJ,WAAAJ,EAAA,wCAAAC,EAAA,KAAAA,EAAA,GAAAC,GAAAF,EAAA,kBAAAE,KA+IoB,eAAAJ,EAAA,yCAEf,yGAjJLM,EAAA","names":["_sfc_main","TableRow","TableCell","defineAsyncComponent","__vitePreload","bench","defaultOptions","tag","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_9","_createElementVNode","_withCtx","$options","$data","_cache","$event","_ctx","_createCommentVNode","rows","columns","_openBlock","_createElementBlock","_Fragment","_renderList","row","column","_hoisted_5","_toDisplayString","_hoisted_8","open","_normalizeClass","_createBlock","_component_LoadingText"],"sources":["../../../../dashboard/src/views/bench/Benches.vue"],"sourcesContent":["<template>\n\t<div>\n\t\t<header\n\t\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-5 py-2.5\"\n\t\t>\n\t\t\t<Breadcrumbs\n\t\t\t\t:items=\"[{ label: 'Benches', route: { name: 'BenchesScreen' } }]\"\n\t\t\t>\n\t\t\t\t<template v-slot:actions>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t\ticon-left=\"plus\"\n\t\t\t\t\t\tlabel=\"Create\"\n\t\t\t\t\t\tclass=\"ml-2\"\n\t\t\t\t\t\t@click=\"showBillingDialog\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t</Breadcrumbs>\n\t\t</header>\n\n\t\t<div class=\"mx-5 mt-5\">\n\t\t\t<div class=\"flex\">\n\t\t\t\t<div class=\"flex w-full space-x-2 pb-4\">\n\t\t\t\t\t<FormControl label=\"Search Benches\" v-model=\"searchTerm\">\n\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t<FeatherIcon name=\"search\" class=\"w-4 text-gray-600\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</FormControl>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tlabel=\"Status\"\n\t\t\t\t\t\tclass=\"mr-8\"\n\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\t:options=\"benchStatusFilterOptions\"\n\t\t\t\t\t\tv-model=\"bench_status\"\n\t\t\t\t\t/>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tv-if=\"$resources.benchTags.data.length > 0\"\n\t\t\t\t\t\tlabel=\"Tag\"\n\t\t\t\t\t\tclass=\"mr-8\"\n\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\t:options=\"benchTagFilterOptions\"\n\t\t\t\t\t\tv-model=\"bench_tag\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"w-10\"></div>\n\t\t\t</div>\n\t\t\t<Table\n\t\t\t\t:columns=\"[\n\t\t\t\t\t{ label: 'Bench Name', name: 'name', width: 2 },\n\t\t\t\t\t{ label: 'Status', name: 'status' },\n\t\t\t\t\t{ label: 'Version', name: 'version' },\n\t\t\t\t\t{ label: 'Tags', name: 'tags' },\n\t\t\t\t\t{ label: 'Stats', name: 'stats' },\n\t\t\t\t\t{ label: '', name: 'actions', width: 0.5 }\n\t\t\t\t]\"\n\t\t\t\t:rows=\"benches\"\n\t\t\t\tv-slot=\"{ rows, columns }\"\n\t\t\t>\n\t\t\t\t<TableHeader class=\"hidden lg:grid\" />\n\t\t\t\t<TableRow\n\t\t\t\t\tv-for=\"row in rows\"\n\t\t\t\t\t:key=\"row.name\"\n\t\t\t\t\t:row=\"row\"\n\t\t\t\t\tclass=\"rounded\"\n\t\t\t\t>\n\t\t\t\t\t<TableCell v-for=\"column in columns\">\n\t\t\t\t\t\t<Badge v-if=\"column.name === 'status'\" :label=\"row.status\" />\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-else-if=\"column.name === 'tags'\"\n\t\t\t\t\t\t\tclass=\"hidden space-x-1 lg:flex\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\tv-for=\"(tag, i) in row.tags.slice(0, 1)\"\n\t\t\t\t\t\t\t\ttheme=\"blue\"\n\t\t\t\t\t\t\t\t:label=\"tag\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\tv-if=\"row.tags.length > 1\"\n\t\t\t\t\t\t\t\t:text=\"row.tags.slice(1).join(', ')\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\tv-if=\"row.tags.length > 1\"\n\t\t\t\t\t\t\t\t\t:label=\"`+${row.tags.length - 1}`\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t<span v-if=\"row.tags.length == 0\">-</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-else-if=\"column.name === 'stats'\"\n\t\t\t\t\t\t\tclass=\"hidden text-sm text-gray-600 md:block\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t`${row.stats.number_of_sites} ${$plural(\n\t\t\t\t\t\t\t\t\trow.stats.number_of_sites,\n\t\t\t\t\t\t\t\t\t'Site',\n\t\t\t\t\t\t\t\t\t'Sites'\n\t\t\t\t\t\t\t\t)}`\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t&middot;\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t`${row.stats.number_of_apps} ${$plural(\n\t\t\t\t\t\t\t\t\trow.stats.number_of_apps,\n\t\t\t\t\t\t\t\t\t'App',\n\t\t\t\t\t\t\t\t\t'Apps'\n\t\t\t\t\t\t\t\t)}`\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-else-if=\"column.name == 'actions'\" class=\"w-full text-right\">\n\t\t\t\t\t\t\t<Dropdown @click.prevent :options=\"dropdownItems(row)\">\n\t\t\t\t\t\t\t\t<template v-slot=\"{ open }\">\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t:variant=\"open ? 'subtle' : 'ghost'\"\n\t\t\t\t\t\t\t\t\t\tclass=\"mr-2\"\n\t\t\t\t\t\t\t\t\t\ticon=\"more-horizontal\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\t:class=\"{ 'hidden md:block': column.name === 'version' }\"\n\t\t\t\t\t\t\t>{{ row[column.name] || '' }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</TableCell>\n\t\t\t\t</TableRow>\n\t\t\t\t<div class=\"mt-8 flex items-center justify-center\">\n\t\t\t\t\t<LoadingText\n\t\t\t\t\t\tv-if=\"$resources.allBenches.loading && !$resources.allBenches.data\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-else-if=\"$resources.allBenches.fetched && rows.length === 0\"\n\t\t\t\t\t\tclass=\"text-base text-gray-700\"\n\t\t\t\t\t>\n\t\t\t\t\t\tNo Benches\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Table>\n\t\t</div>\n\n\t\t<Dialog\n\t\t\t:options=\"{ title: 'Add card to create new benches' }\"\n\t\t\tv-model=\"showAddCardDialog\"\n\t\t>\n\t\t\t<template v-slot:body-content>\n\t\t\t\t<StripeCard\n\t\t\t\t\tclass=\"mb-1\"\n\t\t\t\t\tv-if=\"showAddCardDialog\"\n\t\t\t\t\t@complete=\"\n\t\t\t\t\t\tshowAddCardDialog = false;\n\t\t\t\t\t\t$resources.paymentMethods.reload();\n\t\t\t\t\t\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</Dialog>\n\t</div>\n</template>\n\n<script>\nimport Table from '@/components/Table/Table.vue';\nimport TableCell from '@/components/Table/TableCell.vue';\nimport TableHeader from '@/components/Table/TableHeader.vue';\nimport TableRow from '@/components/Table/TableRow.vue';\nimport { defineAsyncComponent } from 'vue';\n\nexport default {\n\tname: 'BenchesScreen',\n\tdata() {\n\t\treturn {\n\t\t\tshowAddCardDialog: false,\n\t\t\tsearchTerm: '',\n\t\t\tbench_status: 'All',\n\t\t\tbench_tag: ''\n\t\t};\n\t},\n\tpageMeta() {\n\t\treturn {\n\t\t\ttitle: 'Benches - Easytouch Cloud'\n\t\t};\n\t},\n\tcomponents: {\n\t\tTable,\n\t\tTableHeader,\n\t\tTableRow,\n\t\tTableCell,\n\t\tStripeCard: defineAsyncComponent(() =>\n\t\t\timport('@/components/StripeCard.vue')\n\t\t)\n\t},\n\tresources: {\n\t\tpaymentMethods: {\n\t\t\turl: 'press.api.billing.get_payment_methods',\n\t\t\tauto: true\n\t\t},\n\t\tallBenches() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.bench.all',\n\t\t\t\tparams: {\n\t\t\t\t\tbench_filter: { status: this.bench_status, tag: this.bench_tag }\n\t\t\t\t},\n\t\t\t\tauto: true,\n\t\t\t\tcache: [\n\t\t\t\t\t'BenchList',\n\t\t\t\t\tthis.bench_status,\n\t\t\t\t\tthis.bench_tag,\n\t\t\t\t\tthis.$account.team.name\n\t\t\t\t]\n\t\t\t};\n\t\t},\n\t\tbenchTags: {\n\t\t\turl: 'press.api.bench.bench_tags',\n\t\t\tauto: true,\n\t\t\tinitialData: []\n\t\t}\n\t},\n\tcomputed: {\n\t\tbenches() {\n\t\t\tif (!this.$resources.allBenches.data) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tlet benches = this.$resources.allBenches.data.filter(bench =>\n\t\t\t\tthis.$account.hasPermission(bench.name, '', true)\n\t\t\t);\n\t\t\tif (this.searchTerm)\n\t\t\t\tbenches = benches.filter(bench =>\n\t\t\t\t\tbench.title.toLowerCase().includes(this.searchTerm.toLowerCase())\n\t\t\t\t);\n\n\t\t\treturn benches.map(bench => ({\n\t\t\t\tname: bench.title,\n\t\t\t\tstatus: bench.status,\n\t\t\t\tversion: bench.version,\n\t\t\t\tstats: {\n\t\t\t\t\tnumber_of_sites: bench.number_of_sites,\n\t\t\t\t\tnumber_of_apps: bench.number_of_apps\n\t\t\t\t},\n\t\t\t\ttags: bench.tags,\n\t\t\t\troute: { name: 'BenchSiteList', params: { benchName: bench.name } }\n\t\t\t}));\n\t\t},\n\t\tbenchStatusFilterOptions() {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'All',\n\t\t\t\t\tvalue: 'All'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Active',\n\t\t\t\t\tvalue: 'Active'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Awaiting Deploy',\n\t\t\t\t\tvalue: 'Awaiting Deploy'\n\t\t\t\t}\n\t\t\t];\n\t\t},\n\t\tbenchTagFilterOptions() {\n\t\t\tconst defaultOptions = [\n\t\t\t\t{\n\t\t\t\t\tlabel: '',\n\t\t\t\t\tvalue: ''\n\t\t\t\t}\n\t\t\t];\n\n\t\t\tif (!this.$resources.benchTags.data) return defaultOptions;\n\n\t\t\treturn [\n\t\t\t\t...defaultOptions,\n\t\t\t\t...this.$resources.benchTags.data.map(tag => ({\n\t\t\t\t\tlabel: tag,\n\t\t\t\t\tvalue: tag\n\t\t\t\t}))\n\t\t\t];\n\t\t}\n\t},\n\tmethods: {\n\t\tshowBillingDialog() {\n\t\t\tif (!this.$account.hasBillingInfo) {\n\t\t\t\tthis.showAddCardDialog = true;\n\t\t\t} else {\n\t\t\t\tthis.$router.replace('/groups/new');\n\t\t\t}\n\t\t},\n\t\tdropdownItems(bench) {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'New Site',\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\t\tname: 'NewBenchSite',\n\t\t\t\t\t\t\tparams: { bench: bench.route.params.benchName }\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tcondition: () => bench.status === 'Active'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'View Sites',\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\t\tname: 'BenchSiteList',\n\t\t\t\t\t\t\tparams: { benchName: bench.route.params.benchName }\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t].filter(item => (item.condition ? item.condition() : true));\n\t\t}\n\t}\n};\n</script>\n"],"file":"assets/Benches-DYT0tXAc.js"}