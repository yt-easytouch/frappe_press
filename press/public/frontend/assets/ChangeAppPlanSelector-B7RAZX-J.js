import{A as u}from"./AppPlanCard-CuGgjNKV.js";import{x as b,q as l,o as t,A as c,h as d,u as o,a9 as y,X as k,j as p,aK as A,t as P,F as I,v as w}from"./main-Dpl-JOF2.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},a=new Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="b9050fea-f380-430b-977e-47aa777a347a",e._sentryDebugIdIdentifier="sentry-dbid-b9050fea-f380-430b-977e-47aa777a347a")}catch(i){}})();{var n=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};n._sentryModuleMetadata=n._sentryModuleMetadata||{},n._sentryModuleMetadata[new Error().stack]=Object.assign({},n._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const x={name:"ChangeAppPlanSelector",components:{AppPlanCard:u},props:["app","group","frappeVersion","currentPlan","editable"],emits:["change"],data(){return{selectedPlan:null}},resources:{getAppPlans(){return{url:"press.api.marketplace.get_app_plans",params:{app:this.app,include_disabled:!1,release_group:this.group,frappe_version:this.frappeVersion},onSuccess(e){if(this.currentPlan){for(let a of e)if(a.name===this.currentPlan){this.selectedPlan=a;break}}},auto:!0}},getMarketplaceAppInfo(){return{url:"press.api.marketplace.get_app_info",params:{app:this.app},auto:!0}}},methods:{handleCardClick(e){this.selectedPlan=e,this.$emit("change",e)}},computed:{plans(){if(this.$resources.getAppPlans.data&&!this.$resources.getAppPlans.loading)return this.$resources.getAppPlans.data},appInfo(){if(!this.$resources.getMarketplaceAppInfo.loading&&this.$resources.getMarketplaceAppInfo.data)return this.$resources.getMarketplaceAppInfo.data}}},C={key:1,class:"mb-6 flex flex-row items-center"},v={class:"flex flex-col"},M={class:"text-xl font-semibold text-gray-900"},$={key:2,class:"mx-auto grid grid-cols-1 gap-2 md:grid-cols-3"};function B(e,a,i,D,f,s){const g=y,_=k,m=A,h=u;return t(),l("div",null,[c(g,{message:e.$resources.getAppPlans.error},null,8,["message"]),e.$resources.getAppPlans.loading||e.$resources.getMarketplaceAppInfo.loading?(t(),d(_,{key:0,loading:!0,loadingText:"Loading Plans..."})):o("",!0),s.plans&&s.appInfo?(t(),l("div",C,[c(m,{class:"mr-2",size:"lg",shape:"square",image:s.appInfo.image,label:s.appInfo.title},null,8,["image","label"]),p("div",v,[p("h4",M,P(s.appInfo.title),1),a[0]||(a[0]=p("p",{class:"text-base text-gray-600"},"Choose your plans",-1))])])):o("",!0),s.plans?(t(),l("div",$,[(t(!0),l(I,null,w(s.plans,r=>(t(),d(h,{editable:i.editable,plan:r,key:r.name,selected:f.selectedPlan==r,onClick:E=>s.handleCardClick(r)},null,8,["editable","plan","selected","onClick"]))),128))])):o("",!0)])}const S=b(x,[["render",B]]);export{S as _};
//# sourceMappingURL=ChangeAppPlanSelector-B7RAZX-J.js.map
