import{_ as b}from"./LineChart-BDXlcfBY.js";import{x as w,q as o,u as c,o as i,A as r,h as y,w as n,j as p,t as _,F as k,v as D,X as A,Y as x}from"./main-Dpl-JOF2.js";import{_ as S}from"./Card-BCzTSeNK.js";import{_ as $}from"./ListItem-CkkFcC1t.js";import{D as h}from"./datetime-PXpIdgFA.js";import"./tailwind.theme-XeumNAwU.js";(function(){try{var t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="91e3ffc2-36c6-4b19-aa30-7e241d456c58",t._sentryDebugIdIdentifier="sentry-dbid-91e3ffc2-36c6-4b19-aa30-7e241d456c58")}catch(a){}})();{var u=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};u._sentryModuleMetadata=u._sentryModuleMetadata||{},u._sentryModuleMetadata[new Error().stack]=Object.assign({},u._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const T={name:"MarketplaceAppAnalytics",props:{app:Object},components:{LineChart:b},methods:{formatDate(t){return t.map(e=>e.date)},getChartOptions(t){return{axisOptions:{xIsSeries:!0,shortenYAxisNumbers:1},lineOptions:{hideDots:!0,regionFill:!0},tooltipOptions:{formatTooltipX:e=>h.fromISO(e).toLocaleString(h.DATE_MED),formatTooltipY:t}}}},resources:{analytics(){var t;return{url:"press.api.marketplace.analytics",auto:!0,params:{name:(t=this.app)==null?void 0:t.app}}},plausible_analytics(){var t;return{url:"press.api.analytics.plausible_analytics",auto:!0,params:{name:(t=this.app)==null?void 0:t.app}}}},computed:{analytics(){if(!this.$resources.analytics.loading&&this.$resources.analytics.data){const t=this.$resources.analytics.data,{total_installs:e,num_installs_active_sites:a,num_installs_active_benches:d}=t;return[{title:"Total Installs",value:e.toString()+" "+(e==1?"Site":"Sites")},{title:"Active Sites with this App",value:a.toString()+" "+(a==1?"Site":"Sites")},{title:"Active Benches with this App",value:d.toString()+" "+(d==1?"Bench":"Benches")}]}},pageViewsData(){var e;let t=(e=this.$resources.plausible_analytics.data)==null?void 0:e.pageviews;if(t)return{datasets:[t.map(a=>[+new Date(a.date),a.value])]}},visitorsData(){var e;let t=(e=this.$resources.plausible_analytics.data)==null?void 0:e.visitors;if(t)return{datasets:[t.map(a=>[+new Date(a.date),a.value])]}},paymentAnalytics(){if(!this.$resources.analytics.loading&&this.$resources.analytics.data){let t=this.$resources.analytics.data;return{total_payout:{usd:t.total_payout.usd_amount?t.total_payout.usd_amount.toFixed(2):0,inr:t.total_payout.inr_amount?t.total_payout.inr_amount.toFixed(2):0},pending_payout:{usd:t.pending_payout.usd_amount?t.pending_payout.usd_amount.toFixed(2):0,inr:t.pending_payout.inr_amount?t.pending_payout.inr_amount.toFixed(2):0},commission:{usd:t.commission.usd_amount?t.commission.usd_amount.toFixed(2):0,inr:t.commission.inr_amount?t.commission.inr_amount.toFixed(2):0}}}}}},I={key:0,class:"grid grid-cols-1 gap-5 sm:grid-cols-2"},V={class:"text-base font-semibold text-green-500"},B={class:"text-base font-semibold"},C={class:"text-base font-semibold"},E={key:0,class:"divide-y"},F={key:1,class:"py-10 text-center"},O=["href"];function P(t,e,a,d,L,s){const l=$,g=S,v=A,f=b;return t.$resources.analytics.data?(i(),o("div",I,[r(g,{title:"Earnings"},{actions:n(()=>e[0]||(e[0]=[p("a",{class:"text-base text-gray-700 hover:text-gray-800",href:"/support/tickets",target:"_blank"}," Contact Support → ",-1)])),default:n(()=>[r(l,{title:"Total Earnings",subtitle:`Total earnings for ${a.app.title}`},{actions:n(()=>[p("span",V,_("$"+s.paymentAnalytics.total_payout.usd+" + ₹"+s.paymentAnalytics.total_payout.inr),1)]),_:1},8,["subtitle"]),r(l,{title:"Pending Payout",subtitle:"Payout you are yet to receive from Easytouch Cloud"},{actions:n(()=>[p("span",B,_("$"+s.paymentAnalytics.pending_payout.usd+" + ₹"+s.paymentAnalytics.pending_payout.inr),1)]),_:1}),r(l,{title:"Commission",subtitle:"Payouts start once you have passed $500 threshold"},{actions:n(()=>[p("span",C,_("$"+s.paymentAnalytics.commission.usd+" + ₹"+s.paymentAnalytics.commission.inr),1)]),_:1})]),_:1}),r(g,{title:"Installs"},{default:n(()=>[s.analytics?(i(),o("div",E,[(i(!0),o(k,null,D(s.analytics,m=>(i(),y(l,{key:m.title,title:m.title,description:m.value},null,8,["title","description"]))),128))])):c("",!0),t.$resources.analytics.loading?(i(),o("div",F,[r(v,{loading:!0},{default:n(()=>e[1]||(e[1]=[x("Loading")])),_:1})])):c("",!0)]),_:1}),(i(),y(f,{title:"Pageviews",type:"time",key:s.pageViewsData,data:s.pageViewsData,unit:"views",chartTheme:[t.$theme.colors.purple[500]],loading:t.$resources.plausible_analytics.loading,error:t.$resources.plausible_analytics.error},{actions:n(()=>[a.app?(i(),o("a",{key:0,class:"text-base text-gray-700 hover:text-gray-800",href:`/marketplace/apps/${a.app.app}`,target:"_blank"}," View Marketplace Page → ",8,O)):c("",!0)]),_:1},8,["data","chartTheme","loading","error"])),(i(),y(f,{title:"Unique Visitors",type:"time",key:s.visitorsData,data:s.visitorsData,unit:"visitors",chartTheme:[t.$theme.colors.green[500]],loading:t.$resources.plausible_analytics.loading,error:t.$resources.plausible_analytics.error},null,8,["data","chartTheme","loading","error"]))])):c("",!0)}const K=w(T,[["render",P]]);export{K as default};
//# sourceMappingURL=MarketplaceAppAnalytics-Cp-9GaRx.js.map
