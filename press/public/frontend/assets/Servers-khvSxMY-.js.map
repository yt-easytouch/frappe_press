{"version":3,"mappings":"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","names":["_sfc_main","TableRow","TableCell","defineAsyncComponent","__vitePreload","server","defaultOptions","tag","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_9","_hoisted_13","_createElementVNode","_createVNode","_component_Breadcrumbs","_createSlots","_withCtx","$data","$options","_cache","$event","_ctx","_createCommentVNode","rows","columns","_openBlock","_createElementBlock","_Fragment","_renderList","row","column","_hoisted_5","_hoisted_7","_toDisplayString","_hoisted_8","_hoisted_10","_hoisted_11","open","_hoisted_12","_createBlock","_component_LoadingText"],"sources":["../../../../dashboard/src/views/server/Servers.vue"],"sourcesContent":["<template>\n\t<div>\n\t\t<header\n\t\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-5 py-2.5\"\n\t\t>\n\t\t\t<Breadcrumbs :items=\"[{ label: 'Servers', route: { name: 'Servers' } }]\">\n\t\t\t\t<template v-if=\"this.$account.team.enabled\" #actions>\n\t\t\t\t\t<Dropdown\n\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\t$account.team.self_hosted_servers_enabled === 1 &&\n\t\t\t\t\t\t\t!showAddCardDialog\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t:options=\"dropDownOptions\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t\t\ticonLeft=\"plus\"\n\t\t\t\t\t\t\tlabel=\"Create\"\n\t\t\t\t\t\t\tclass=\"ml-2 hidden sm:inline-flex\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Dropdown>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t\ticonLeft=\"plus\"\n\t\t\t\t\t\tlabel=\"Create\"\n\t\t\t\t\t\tclass=\"ml-2 hidden sm:inline-flex\"\n\t\t\t\t\t\t@click=\"showBillingDialog\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t</Breadcrumbs>\n\t\t</header>\n\n\t\t<div>\n\t\t\t<div class=\"mx-5 mt-5\">\n\t\t\t\t<div class=\"flex\">\n\t\t\t\t\t<div class=\"flex w-full space-x-2 pb-4\">\n\t\t\t\t\t\t<FormControl label=\"Search Servers\" v-model=\"searchTerm\">\n\t\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t\t<FeatherIcon name=\"search\" class=\"w-4 text-gray-600\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tlabel=\"Server Type\"\n\t\t\t\t\t\t\tclass=\"mr-8\"\n\t\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\t\t:options=\"serverStatusFilterOptions\"\n\t\t\t\t\t\t\tv-model=\"server_type\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tv-if=\"$resources.serverTags.data.length > 0\"\n\t\t\t\t\t\t\tlabel=\"Tag\"\n\t\t\t\t\t\t\tclass=\"mr-8\"\n\t\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\t\t:options=\"serverTagFilterOptions\"\n\t\t\t\t\t\t\tv-model=\"server_tag\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<Table\n\t\t\t\t\t:columns=\"[\n\t\t\t\t\t\t{ label: 'Server Name', name: 'name', width: 2 },\n\t\t\t\t\t\t{ label: 'Status', name: 'status' },\n\t\t\t\t\t\t{ label: 'Region', name: 'region' },\n\t\t\t\t\t\t{ label: 'Tags', name: 'tags' },\n\t\t\t\t\t\t{ label: 'Plan', name: 'plan' },\n\t\t\t\t\t\t{ label: '', name: 'actions', width: 0.5 }\n\t\t\t\t\t]\"\n\t\t\t\t\t:rows=\"servers\"\n\t\t\t\t\tv-slot=\"{ rows, columns }\"\n\t\t\t\t>\n\t\t\t\t\t<TableHeader class=\"hidden lg:grid\" />\n\t\t\t\t\t<TableRow\n\t\t\t\t\t\tv-for=\"row in rows\"\n\t\t\t\t\t\t:key=\"row.name\"\n\t\t\t\t\t\t:row=\"row\"\n\t\t\t\t\t\tclass=\"rounded\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<TableCell v-for=\"column in columns\">\n\t\t\t\t\t\t\t<Badge v-if=\"column.name === 'status'\" :label=\"row.status\" />\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-else-if=\"column.name === 'tags'\"\n\t\t\t\t\t\t\t\tclass=\"hidden space-x-1 lg:flex\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\tv-for=\"(tag, i) in row.tags.slice(0, 1)\"\n\t\t\t\t\t\t\t\t\ttheme=\"blue\"\n\t\t\t\t\t\t\t\t\t:label=\"tag\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\tv-if=\"row.tags.length > 1\"\n\t\t\t\t\t\t\t\t\t:text=\"row.tags.slice(1).join(', ')\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\tv-if=\"row.tags.length > 1\"\n\t\t\t\t\t\t\t\t\t\t:label=\"`+${row.tags.length - 1}`\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t<span v-if=\"row.tags.length === 0\">-</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span v-else-if=\"column.name === 'plan'\" class=\"hidden md:block\">\n\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\trow.plan\n\t\t\t\t\t\t\t\t\t\t? `${$planTitle(row.plan)}${\n\t\t\t\t\t\t\t\t\t\t\t\trow.plan.price_usd > 0 ? '/mo' : ''\n\t\t\t\t\t\t\t\t\t\t  }`\n\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div v-else-if=\"column.name === 'region'\" class=\"hidden md:block\">\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tv-if=\"row.server_region_info.image\"\n\t\t\t\t\t\t\t\t\tclass=\"h-4\"\n\t\t\t\t\t\t\t\t\t:src=\"row.server_region_info.image\"\n\t\t\t\t\t\t\t\t\t:alt=\"`Flag of ${row.server_region_info.title}`\"\n\t\t\t\t\t\t\t\t\t:title=\"row.server_region_info.title\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span class=\"text-base text-gray-700\" v-else>\n\t\t\t\t\t\t\t\t\t{{ row.server_region_info.title }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-else-if=\"column.name == 'actions'\"\n\t\t\t\t\t\t\t\tclass=\"w-full text-right\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Dropdown @click.prevent :options=\"dropdownItems(row)\">\n\t\t\t\t\t\t\t\t\t<template v-slot=\"{ open }\">\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t:variant=\"open ? 'subtle' : 'ghost'\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"mr-2\"\n\t\t\t\t\t\t\t\t\t\t\ticon=\"more-horizontal\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span v-else>{{ row[column.name] || '' }}</span>\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t\t<div class=\"mt-8 flex items-center justify-center\">\n\t\t\t\t\t\t<LoadingText v-if=\"$resources.allServers.loading\" />\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-else-if=\"$resources.allServers.data && rows.length === 0\"\n\t\t\t\t\t\t\tclass=\"text-base text-gray-700\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tNo Servers\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Table>\n\t\t\t</div>\n\t\t</div>\n\t\t<Dialog\n\t\t\t:options=\"{ title: 'Add card to create new servers' }\"\n\t\t\tv-model=\"showAddCardDialog\"\n\t\t>\n\t\t\t<template v-slot:body-content>\n\t\t\t\t<StripeCard\n\t\t\t\t\tclass=\"mb-1\"\n\t\t\t\t\tv-if=\"showAddCardDialog\"\n\t\t\t\t\t@complete=\"\n\t\t\t\t\t\tshowAddCardDialog = false;\n\t\t\t\t\t\t$resources.paymentMethods.reload();\n\t\t\t\t\t\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</Dialog>\n\t</div>\n</template>\n<script>\nimport Table from '@/components/Table/Table.vue';\nimport TableCell from '@/components/Table/TableCell.vue';\nimport TableHeader from '@/components/Table/TableHeader.vue';\nimport TableRow from '@/components/Table/TableRow.vue';\nimport { defineAsyncComponent } from 'vue';\n\nexport default {\n\tname: 'Servers',\n\tcomponents: {\n\t\tTable,\n\t\tTableHeader,\n\t\tTableRow,\n\t\tTableCell,\n\t\tStripeCard: defineAsyncComponent(() =>\n\t\t\timport('@/components/StripeCard.vue')\n\t\t)\n\t},\n\tpageMeta() {\n\t\treturn {\n\t\t\ttitle: 'Servers - Easytouch Cloud'\n\t\t};\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshowAddCardDialog: false,\n\t\t\tsearchTerm: '',\n\t\t\tserver_type: 'All Servers',\n\t\t\tserver_tag: '',\n\t\t\tdropDownOptions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Easytouch Cloud Server',\n\t\t\t\t\tonClick: () => this.$router.replace('/servers/new')\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Self Hosted Server',\n\t\t\t\t\tonClick: () => this.$router.replace('/selfhosted/new')\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t},\n\tresources: {\n\t\tallServers() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.server.all',\n\t\t\t\tparams: {\n\t\t\t\t\tserver_filter: { server_type: this.server_type, tag: this.server_tag }\n\t\t\t\t},\n\t\t\t\tauto: true,\n\t\t\t\tcache: [\n\t\t\t\t\t'ServerList',\n\t\t\t\t\tthis.server_type,\n\t\t\t\t\tthis.server_tag,\n\t\t\t\t\tthis.$account.team.name\n\t\t\t\t]\n\t\t\t};\n\t\t},\n\t\tserverTags: {\n\t\t\turl: 'press.api.server.server_tags',\n\t\t\tauto: true,\n\t\t\tinitialData: []\n\t\t}\n\t},\n\tmethods: {\n\t\tdropdownItems(server) {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Visit Server',\n\t\t\t\t\tcondition: () => this.$account.user.user_type === 'System User',\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.open(`https://${server.route.params.serverName}`, '_blank');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'New Bench',\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\tthis.$router.push(`/servers/${server.app_server}/bench/new`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t];\n\t\t},\n\t\treload() {\n\t\t\t// refresh if currently not loading and have not reloaded in the last 5 seconds\n\t\t\tif (\n\t\t\t\t!this.$resources.allServers.loading &&\n\t\t\t\tnew Date() - this.$resources.allServers.lastLoaded > 5000\n\t\t\t) {\n\t\t\t\tthis.$resources.allServers.reload();\n\t\t\t}\n\t\t},\n\t\tshowBillingDialog() {\n\t\t\tif (!this.$account.hasBillingInfo) {\n\t\t\t\tthis.showAddCardDialog = true;\n\t\t\t} else {\n\t\t\t\tif (this.$account.team.self_hosted_servers_enabled !== 1) {\n\t\t\t\t\tthis.$router.replace('/servers/new');\n\t\t\t\t}\n\t\t\t\tthis.showAddCardDialog = false;\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tservers() {\n\t\t\tif (!this.$resources.allServers.data) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tlet servers = this.$resources.allServers.data.filter(server =>\n\t\t\t\tthis.$account.hasPermission(server.name, '', true)\n\t\t\t);\n\n\t\t\tif (this.searchTerm)\n\t\t\t\tservers = servers.filter(\n\t\t\t\t\tserver =>\n\t\t\t\t\t\tserver.name.toLowerCase().includes(this.searchTerm.toLowerCase()) ||\n\t\t\t\t\t\tserver.title.toLowerCase().includes(this.searchTerm.toLowerCase())\n\t\t\t\t);\n\n\t\t\treturn servers.map(server => ({\n\t\t\t\tname: server.title || server.name,\n\t\t\t\tstatus: server.status,\n\t\t\t\tserver_region_info: server.region_info,\n\t\t\t\tplan: server.plan,\n\t\t\t\ttags: server.tags,\n\t\t\t\tapp_server: server.app_server,\n\t\t\t\troute: { name: 'ServerOverview', params: { serverName: server.name } }\n\t\t\t}));\n\t\t},\n\t\tserverStatusFilterOptions() {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'All Servers',\n\t\t\t\t\tvalue: 'All Servers'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'App Servers',\n\t\t\t\t\tvalue: 'App Servers'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Database Servers',\n\t\t\t\t\tvalue: 'Database Servers'\n\t\t\t\t}\n\t\t\t];\n\t\t},\n\t\tserverTagFilterOptions() {\n\t\t\tconst defaultOptions = [\n\t\t\t\t{\n\t\t\t\t\tlabel: '',\n\t\t\t\t\tvalue: ''\n\t\t\t\t}\n\t\t\t];\n\n\t\t\tif (!this.$resources.serverTags.data) return defaultOptions;\n\n\t\t\treturn [\n\t\t\t\t...defaultOptions,\n\t\t\t\t...this.$resources.serverTags.data.map(tag => ({\n\t\t\t\t\tlabel: tag,\n\t\t\t\t\tvalue: tag\n\t\t\t\t}))\n\t\t\t];\n\t\t}\n\t}\n};\n</script>\n"],"file":"assets/Servers-khvSxMY-.js"}