import{x as N,af as b,r as S,h as c,q as y,o as u,w as r,j as m,a7 as I,A as i,u as f,a8 as q,F as A,Y as n,t as v,a9 as B,X as F}from"./main-Dpl-JOF2.js";import{_ as w}from"./Form-CIPLpg2e.js";import{L as T}from"./LoginBox-DSVNkn_s.js";import"./YooltechLogo-DH5Linvn.js";import"./ETLogo-Ziye5dPH.js";import"./toast-Dk0nDfLL.js";(function(){try{var t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="62c66a5b-f89b-4c8f-a414-92b5df20e457",t._sentryDebugIdIdentifier="sentry-dbid-62c66a5b-f89b-4c8f-a414-92b5df20e457")}catch(l){}})();{var d=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};d._sentryModuleMetadata=d._sentryModuleMetadata||{},d._sentryModuleMetadata[new Error().stack]=Object.assign({},d._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const P={name:"SetupAccount",components:{LoginBox:T,Link:b,Form:w},props:["requestKey","joinRequest"],data(){return{email:null,firstName:null,lastName:null,password:null,errorMessage:null,userExists:null,invitationToTeam:null,isInvitation:null,oauthSignup:0,country:null,termsAccepted:!1,invitedByParentTeam:!1,countries:[],saasProduct:null,signupValues:{}}},resources:{validateRequestKey(){return{url:"press.api.account.validate_request_key",params:{key:this.requestKey,timezone:window.Intl?Intl.DateTimeFormat().resolvedOptions().timeZone:null},auto:!0,onSuccess(t){t&&t.email&&(this.email=t.email,this.firstName=t.first_name,this.lastName=t.last_name,this.country=t.country,this.userExists=t.user_exists,this.invitationToTeam=t.team,this.isInvitation=t.is_invitation,this.invitedByParentTeam=t.invited_by_parent_team,this.oauthSignup=t.oauth_signup,this.countries=t.countries,this.saasProduct=t.product_trial)}}},setupAccount(){return{url:"press.api.account.setup_account",params:{key:this.requestKey,password:this.password,first_name:this.firstName,last_name:this.lastName,country:this.country,is_invitation:this.isInvitation,user_exists:this.userExists,invited_by_parent_team:this.invitedByParentTeam,accepted_user_terms:this.termsAccepted,oauth_signup:this.oauthSignup,signup_values:this.signupValues},onSuccess(t){t&&this.$router.push(t.dashboard_route||"/"),window.location.reload()}}}},methods:{showFormFields(){let t=!0;return t=!this.userExists,t=this.oauthSignup==0,t}},computed:{signupFields(){var e;return(((e=this.saasProduct)==null?void 0:e.signup_fields)||[]).map(l=>(l.fieldtype=="Select"&&(l.options=l.options.split(`
`).map(g=>g.trim()).filter(Boolean)),l.required=!0,l))}}},E={class:"space-y-4"},C={class:"mt-4 flex items-start"},K={class:"text-base text-gray-900"},L={key:1,class:"mt-20 px-6 text-center"},D={key:2};function U(t,e,l,g,s,_){const a=q,V=w,p=b,h=B,k=F,x=S("LoginBox");return!t.$resources.validateRequestKey.loading&&s.email?(u(),c(x,{key:0,title:s.isInvitation?`Invitation to join team: ${s.invitationToTeam}`:"Set up your account"},{default:r(()=>[m("form",{class:"flex flex-col",onSubmit:e[6]||(e[6]=I(o=>t.$resources.setupAccount.submit(),["prevent"]))},[m("div",E,[s.oauthSignup==0?(u(),c(a,{key:0,label:"Email",type:"text",modelValue:s.email,disabled:""},null,8,["modelValue"])):f("",!0),s.oauthSignup==0?(u(),y(A,{key:1},[i(a,{label:"First Name",type:"text",modelValue:s.firstName,"onUpdate:modelValue":e[0]||(e[0]=o=>s.firstName=o),name:"fname",autocomplete:"given-name",required:""},null,8,["modelValue"]),i(a,{label:"Last Name",type:"text",modelValue:s.lastName,"onUpdate:modelValue":e[1]||(e[1]=o=>s.lastName=o),name:"lname",autocomplete:"family-name",required:""},null,8,["modelValue"]),i(a,{label:"Password",type:"password",modelValue:s.password,"onUpdate:modelValue":e[2]||(e[2]=o=>s.password=o),name:"password",autocomplete:"new-password",required:""},null,8,["modelValue"])],64)):f("",!0),s.isInvitation?f("",!0):(u(),c(a,{key:2,type:"select",options:s.countries,label:"Country",modelValue:s.country,"onUpdate:modelValue":e[3]||(e[3]=o=>s.country=o),required:""},null,8,["options","modelValue"])),_.signupFields.length>0?(u(),c(V,{key:3,fields:_.signupFields,modelValue:s.signupValues,"onUpdate:modelValue":e[4]||(e[4]=o=>s.signupValues=o)},null,8,["fields","modelValue"])):f("",!0),m("div",C,[m("label",K,[i(a,{type:"checkbox",modelValue:s.termsAccepted,"onUpdate:modelValue":e[5]||(e[5]=o=>s.termsAccepted=o)},null,8,["modelValue"]),e[10]||(e[10]=n(" By clicking on ")),m("span",null,v(s.isInvitation?"Accept":"Create account"),1),e[11]||(e[11]=n(", you accept our ")),i(p,{href:"https://easytouch.cloud/terms",target:"_blank"},{default:r(()=>e[7]||(e[7]=[n("Terms of Service ")])),_:1}),e[12]||(e[12]=n(", ")),i(p,{href:"https://easytouch.cloud/privacy",target:"_blank"},{default:r(()=>e[8]||(e[8]=[n(" Privacy Policy ")])),_:1}),e[13]||(e[13]=n(" & ")),i(p,{href:"https://easytouch.cloud/cookie-policy",target:"_blank"},{default:r(()=>e[9]||(e[9]=[n(" Cookie Policy ")])),_:1})])])]),i(h,{class:"mt-4",message:t.$resources.setupAccount.error},null,8,["message"]),i(k,{class:"mt-4",variant:"solid",loading:t.$resources.setupAccount.loading},{default:r(()=>[n(v(s.isInvitation?"Accept":"Create account"),1)]),_:1},8,["loading"])],32)]),_:1},8,["title"])):!t.$resources.validateRequestKey.loading&&!s.email?(u(),y("div",L,[e[15]||(e[15]=n(" Verification link is invalid or expired. ")),i(p,{to:"/signup"},{default:r(()=>e[14]||(e[14]=[n("Sign up")])),_:1}),e[16]||(e[16]=n(" for a new account. "))])):(u(),y("div",D))}const Y=N(P,[["render",U]]);export{Y as default};
//# sourceMappingURL=SetupAccount-D_0fetc1.js.map
