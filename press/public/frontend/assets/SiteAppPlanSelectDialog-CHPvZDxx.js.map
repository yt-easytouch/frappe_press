{"version":3,"file":"SiteAppPlanSelectDialog-CHPvZDxx.js","sources":["../../../../dashboard/src2/components/site/SiteAppPlanSelectDialog.vue"],"sourcesContent":["<template>\n\t<SiteAppPlanSelectorDialog\n\t\tv-model=\"showDialog\"\n\t\t:app=\"app\"\n\t\t:currentPlan=\"currentPlan\"\n\t\t@plan-select=\"onPlanSelect\"\n\t/>\n</template>\n\n<script>\nimport { getToastErrorMessage } from '../../utils/toast';\nimport SiteAppPlanSelectorDialog from './SiteAppPlanSelectorDialog.vue';\nimport { toast } from 'vue-sonner';\n\nexport default {\n\tcomponents: {\n\t\tSiteAppPlanSelectorDialog\n\t},\n\tprops: ['app', 'currentPlan'],\n\temits: ['plan-changed', 'plan-selected'],\n\tdata() {\n\t\treturn {\n\t\t\tshowDialog: true\n\t\t};\n\t},\n\tresources: {\n\t\tchangeAppPlan: {\n\t\t\turl: 'press.api.marketplace.change_app_plan'\n\t\t}\n\t},\n\tmethods: {\n\t\tonPlanSelect(plan) {\n\t\t\t// if current plan is specified it's for changing plan\n\t\t\t// else it's for selecting plan while installing app\n\t\t\tif (this.currentPlan)\n\t\t\t\ttoast.promise(\n\t\t\t\t\tthis.$resources.changeAppPlan.submit({\n\t\t\t\t\t\tsubscription: this.app.subscription.name,\n\t\t\t\t\t\tnew_plan: plan.name\n\t\t\t\t\t}),\n\t\t\t\t\t{\n\t\t\t\t\t\tloading: 'Changing plan...',\n\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\tthis.$emit('plan-changed', plan);\n\t\t\t\t\t\t\treturn 'Plan changed successfully';\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: e => getToastErrorMessage(e)\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\telse this.$emit('plan-selected', plan);\n\t\t}\n\t}\n};\n</script>\n"],"names":["_sfc_main","plan","e","getToastErrorMessage","$data","_cache","$event","$props","$options"],"mappings":"y1BAcA,MAAAA,EAAA,sEAKC,MAAA,CAAA,eAAA,eAAA,EACA,MAAA,CACC,MAAA,CACC,WAAA,gBAID,cAAA,CACC,IAAA,uCACD,GAED,QAAA,CACC,aAAAC,EAAA,CAGC,KAAA,sBAEE,KAAA,WAAA,cAAA,OAAA,CACC,aAAA,KAAA,IAAA,aAAA,KACA,SAAAA,EAAA,IACD,CAAA,EACA,yCAGE,KAAA,MAAA,eAAAA,CAAA,EACA,6BAED,MAAAC,GAAAC,EAAAD,CAAA,CACD,GAEF,KAAA,MAAA,gBAAAD,CAAA,CACD,CACD,CACD,iFApDA,WAAAG,EAAA,WAAA,sBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAF,EAAA,WAAAE,GAGG,IAAAC,EAAA,IACA,YAAAA,EAAA,YACA,aAAAC,EAAA"}