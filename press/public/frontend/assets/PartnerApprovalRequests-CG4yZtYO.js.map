{"version":3,"file":"PartnerApprovalRequests-CG4yZtYO.js","sources":["../../../../dashboard/src2/components/partners/PartnerApprovalRequests.vue"],"sourcesContent":["<template>\n\t<div class=\"p-5\">\n\t\t<ObjectList :options=\"options\" />\n\t</div>\n</template>\n<script>\nimport { h } from 'vue';\nimport { toast } from 'vue-sonner';\nimport { FeatherIcon, Tooltip, Badge, Button } from 'frappe-ui';\nimport ObjectList from '../ObjectList.vue';\nimport Clock from '~icons/lucide/clock';\nexport default {\n\tname: 'PartnerApprovalRequests',\n\tcomponents: {\n\t\tObjectList,\n\t},\n\tcomputed: {\n\t\toptions() {\n\t\t\treturn {\n\t\t\t\tdoctype: 'Partner Approval Request',\n\t\t\t\tfields: ['approved_by_partner', 'status'],\n\t\t\t\tcolumns: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Customer Email',\n\t\t\t\t\t\tfieldname: 'customer_email',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'customer team id',\n\t\t\t\t\t\tfieldname: 'requested_by',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Raised On',\n\t\t\t\t\t\tfieldname: 'creation',\n\t\t\t\t\t\twidth: 0.6,\n\t\t\t\t\t\tformat(value) {\n\t\t\t\t\t\t\treturn Intl.DateTimeFormat('en-US', {\n\t\t\t\t\t\t\t\tyear: 'numeric',\n\t\t\t\t\t\t\t\tmonth: 'long',\n\t\t\t\t\t\t\t\tday: 'numeric',\n\t\t\t\t\t\t\t}).format(new Date(value));\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Approval By Frappe',\n\t\t\t\t\t\tfieldname: 'approved_by_frappe',\n\t\t\t\t\t\ttype: 'Component',\n\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\twidth: 0.6,\n\t\t\t\t\t\tcomponent({ row }) {\n\t\t\t\t\t\t\tif (row.approved_by_frappe) {\n\t\t\t\t\t\t\t\treturn h(\n\t\t\t\t\t\t\t\t\tTooltip,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttext: 'Approved',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\th(FeatherIcon, {\n\t\t\t\t\t\t\t\t\t\t\tname: 'check-circle',\n\t\t\t\t\t\t\t\t\t\t\tclass: 'h-4 w-4 text-green-600',\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn h(\n\t\t\t\t\t\t\t\t\tTooltip,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttext: 'Approval Pending',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\th(Clock, {\n\t\t\t\t\t\t\t\t\t\t\tclass: 'h-4 w-4 text-yellow-500',\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Partner Approval',\n\t\t\t\t\t\tfieldname: 'approved_by_partner',\n\t\t\t\t\t\ttype: 'Component',\n\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\twidth: 0.6,\n\t\t\t\t\t\tcomponent({ row }) {\n\t\t\t\t\t\t\tif (row.approved_by_partner) {\n\t\t\t\t\t\t\t\treturn h(\n\t\t\t\t\t\t\t\t\tTooltip,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttext: 'Approved',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\th(FeatherIcon, {\n\t\t\t\t\t\t\t\t\t\t\tname: 'check-circle',\n\t\t\t\t\t\t\t\t\t\t\tclass: 'h-4 w-4 text-green-600',\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn h(\n\t\t\t\t\t\t\t\t\tTooltip,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttext: 'Approval Pending',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\th(Clock, {\n\t\t\t\t\t\t\t\t\t\t\tclass: 'h-4 w-4 text-yellow-500',\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: '',\n\t\t\t\t\t\ttype: 'Component',\n\t\t\t\t\t\twidth: 0.8,\n\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\tcomponent({ row, listResource }) {\n\t\t\t\t\t\t\tif (row.status === 'Pending' && row.approved_by_partner === 0) {\n\t\t\t\t\t\t\t\treturn h(Button, {\n\t\t\t\t\t\t\t\t\tlabel: 'Approve',\n\t\t\t\t\t\t\t\t\tclass: 'text-md',\n\t\t\t\t\t\t\t\t\tvariant: 'subtle',\n\t\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\t\ttoast.promise(\n\t\t\t\t\t\t\t\t\t\t\tlistResource.runDocMethod.submit({\n\t\t\t\t\t\t\t\t\t\t\t\tmethod: 'approve_partner_request',\n\t\t\t\t\t\t\t\t\t\t\t\tname: row.name,\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tloading: 'Approving...',\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess: 'Approval request sent to Frappe',\n\t\t\t\t\t\t\t\t\t\t\t\terror: 'Failed to Approve',\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\trow.status === 'Pending' &&\n\t\t\t\t\t\t\t\trow.approved_by_frappe === 0\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn h(Badge, {\n\t\t\t\t\t\t\t\t\tlabel: \"Waiting for Frappe's approval\",\n\t\t\t\t\t\t\t\t\ttheme: 'blue',\n\t\t\t\t\t\t\t\t\tvariant: 'subtle',\n\t\t\t\t\t\t\t\t\tsize: 'md',\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tfilters: {\n\t\t\t\t\tpartner: this.$team.doc.name,\n\t\t\t\t},\n\t\t\t\torderBy: 'creation desc',\n\t\t\t};\n\t\t},\n\t},\n};\n</script>\n"],"names":["_sfc_main","row","h","Tooltip","FeatherIcon","Clock","Button","listResource","Badge","_hoisted_1","_openBlock","_createElementBlock"],"mappings":"slCAWAA,EAAA,CACC,KAAA,oDAIA,SAAA,CACC,SAAA,CACC,MAAA,CACC,QAAA,2BACA,OAAA,CAAA,sBAAA,QAAA,EACA,QAAA,CACC,CACC,MAAA,6CAGD,oDAIA,CACC,MAAA,YACA,UAAA,WACA,MAAA,aAEC,OAAA,KAAA,eAAA,QAAA,CACC,KAAA,6DAMH,4BAEC,UAAA,qBACA,KAAA,YACA,MAAA,SACA,MAAA,GACA,UAAA,CAAA,IAAAC,GAAA,6BAEEC,EACCC,EACA,CACC,KAAA,YAED,IACCD,EAAAE,EAAA,CACC,KAAA,6CAED,CAAA,GAGFF,EACCC,EACA,0BAGA,IACCD,EAAAG,EAAA,gCAEA,CAAA,KAKL,0BAEC,UAAA,sBACA,KAAA,YACA,MAAA,SACA,MAAA,GACA,UAAA,CAAA,IAAAJ,GAAA,8BAEEC,EACCC,EACA,CACC,KAAA,YAED,IACCD,EAAAE,EAAA,CACC,KAAA,6CAED,CAAA,GAGFF,EACCC,EACA,0BAGA,IACCD,EAAAG,EAAA,gCAEA,CAAA,KAKL,CACC,MAAA,GACA,KAAA,YACA,MAAA,GACA,MAAA,8FAGE,OAAAH,EAAAI,EAAA,CACC,MAAA,UACA,MAAA,UACA,QAAA,gCAGEC,EAAA,aAAA,OAAA,CACC,OAAA,qCAED,CAAA,EACA,wBAEC,QAAA,8DAKJ,CAAA,EACD,kDAIC,OAAAL,EAAAM,EAAA,CACC,MAAA,6CAEA,QAAA,SACA,KAAA,IACD,CAAA,KAKJ,QAAA,wDAOJ,EAzJMC,EAAA,CAAA,MAAA,KAAA,kDAAL,OAAAC,EAAA,EAAAC,EAAA,MAAAF,EAAA"}