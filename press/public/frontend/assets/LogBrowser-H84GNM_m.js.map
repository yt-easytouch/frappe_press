{"version":3,"file":"LogBrowser-H84GNM_m.js","sources":["../../../../dashboard/src2/pages/devtools/log-browser/LogList.vue","../../../../dashboard/src2/pages/devtools/log-browser/LogViewer.vue","../../../../dashboard/src2/pages/devtools/log-browser/LogBrowser.vue"],"sourcesContent":["<template>\n\t<div class=\"m-4 mr-0 flex h-full w-1/4 flex-col\">\n\t\t<FormControl\n\t\t\tclass=\"mb-4 mr-4\"\n\t\t\tlabel=\"Search log files\"\n\t\t\tv-model=\"searchLogQuery\"\n\t\t>\n\t\t\t<template #prefix>\n\t\t\t\t<i-lucide-search class=\"h-4 w-4 text-gray-500\" />\n\t\t\t</template>\n\t\t</FormControl>\n\t\t<div class=\"h-[81.5vh] space-y-2 overflow-auto pr-4\">\n\t\t\t<div\n\t\t\t\tv-if=\"$resources.benchLogs?.loading || $resources.siteLogs?.loading\"\n\t\t\t\tclass=\"mt-20 flex justify-center space-x-2 text-sm text-gray-700\"\n\t\t\t>\n\t\t\t\t<Spinner class=\"w-4\" />\n\t\t\t\t<span> Fetching logs... </span>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-else-if=\"logs.length === 0\"\n\t\t\t\tclass=\"mt-20 flex justify-center text-sm text-gray-700\"\n\t\t\t>\n\t\t\t\tNo logs found\n\t\t\t</div>\n\t\t\t<template v-else v-for=\"log in logs\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"cursor-pointer rounded border border-gray-200 p-3 hover:bg-gray-50\"\n\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t'border-gray-800': logId === log.name\n\t\t\t\t\t}\"\n\t\t\t\t\t@click=\"\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\tlogId = log.name;\n\t\t\t\t\t\t\t$router.push({\n\t\t\t\t\t\t\t\tname: 'Log Browser',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tmode,\n\t\t\t\t\t\t\t\t\tdocName: mode === 'bench' ? bench : site,\n\t\t\t\t\t\t\t\t\tlogId: log.name\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"flex items-center justify-between\">\n\t\t\t\t\t\t<div class=\"space-y-1\">\n\t\t\t\t\t\t\t<p class=\"text-base text-gray-700\">{{ log.name }}</p>\n\t\t\t\t\t\t\t<p class=\"text-xs text-gray-500\">\n\t\t\t\t\t\t\t\t{{ $format.date(log.modified, 'YYYY-MM-DD HH:mm') }}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p class=\"text-sm text-gray-500\">\n\t\t\t\t\t\t\t{{ $format.bytes(log.size) }}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tprops: {\n\t\tmode: String,\n\t\tdocName: String\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsearchLogQuery: '',\n\t\t\tlogId: this.$route.params.logId\n\t\t};\n\t},\n\tresources: {\n\t\tbenchLogs() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.bench.logs',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.bench?.split('-').slice(0, 2).join('-'), // TODO: fetch group instead of hardcoding\n\t\t\t\t\tbench: this.bench\n\t\t\t\t},\n\t\t\t\tauto: this.mode === 'bench' && this.bench,\n\t\t\t\tcache: ['BenchLogs', this.bench]\n\t\t\t};\n\t\t},\n\t\tsiteLogs() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.logs',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site\n\t\t\t\t},\n\t\t\t\tauto: this.mode === 'site' && this.site,\n\t\t\t\tcache: ['SiteLogs', this.site]\n\t\t\t};\n\t\t}\n\t},\n\tcomputed: {\n\t\tlogs() {\n\t\t\tlet logs = [];\n\t\t\tif (this.mode === 'bench') {\n\t\t\t\tlogs = this.$resources.benchLogs?.data || [];\n\t\t\t} else if (this.mode === 'site') {\n\t\t\t\tlogs = this.$resources.siteLogs?.data || [];\n\t\t\t}\n\n\t\t\t// filter out rotated logs that ends with .1, .2, .3, etc\n\t\t\t// TODO: do the filtering in agent instead\n\t\t\t// logs = logs.filter(log => !log.name.match(/\\.\\d+$/));\n\n\t\t\tif (this.searchLogQuery) {\n\t\t\t\tlogs = logs.filter(log =>\n\t\t\t\t\tlog.name.toLowerCase().includes(this.searchLogQuery.toLowerCase())\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn logs;\n\t\t},\n\t\tbench() {\n\t\t\tif (this.mode === 'bench') {\n\t\t\t\treturn this.docName;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tsite() {\n\t\t\tif (this.mode === 'site') {\n\t\t\t\treturn this.docName;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<div class=\"flex flex-1 flex-shrink-0 flex-col overflow-hidden\">\n\t\t<div class=\"relative flex h-full w-full flex-col overflow-hidden\">\n\t\t\t<div>\n\t\t\t\t<div class=\"mb-4 flex justify-between\">\n\t\t\t\t\t<div class=\"space-x-2\">\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\t\tlabel=\"Filter By Level\"\n\t\t\t\t\t\t\t:options=\"[\n\t\t\t\t\t\t\t\t{ label: 'All', value: '' },\n\t\t\t\t\t\t\t\t{ label: 'Info', value: 'Info' },\n\t\t\t\t\t\t\t\t{ label: 'Warning', value: 'warning' },\n\t\t\t\t\t\t\t\t{ label: 'Error', value: 'error' },\n\t\t\t\t\t\t\t\t{ label: 'Critical', value: 'critical' }\n\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t\tclass=\"w-24\"\n\t\t\t\t\t\t\tv-if=\"columns.includes('level')\"\n\t\t\t\t\t\t\tv-model=\"levelFilter\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flex space-x-2\">\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\t\tlabel=\"Sort By\"\n\t\t\t\t\t\t\t:options=\"[\n\t\t\t\t\t\t\t\t{ label: 'Sort By', disabled: true },\n\t\t\t\t\t\t\t\t{ label: 'Newest First', value: 'desc' },\n\t\t\t\t\t\t\t\t{ label: 'Oldest First', value: 'asc' }\n\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t\tclass=\"w-32\"\n\t\t\t\t\t\t\tv-if=\"columns.includes('time')\"\n\t\t\t\t\t\t\tv-model=\"sortOrder\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tclass=\"w-80\"\n\t\t\t\t\t\t\tlabel=\"Search log\"\n\t\t\t\t\t\t\tv-model=\"searchLogQuery\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t\t<i-lucide-search class=\"h-4 w-4 text-gray-500\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"flex h-[81.5vh] w-full flex-col overflow-hidden rounded border\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"relative flex flex-1 flex-col overflow-auto\">\n\t\t\t\t\t\t<table\n\t\t\t\t\t\t\tv-if=\"columns?.length || props.log?.length\"\n\t\t\t\t\t\t\tclass=\"w-full border-separate border-spacing-0\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<thead class=\"z-5 sticky top-0 w-full rounded bg-gray-100\">\n\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\tv-for=\"headerGroup in table.getHeaderGroups()\"\n\t\t\t\t\t\t\t\t\t:key=\"headerGroup.id\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\t\t\tv-for=\"header in headerGroup.headers\"\n\t\t\t\t\t\t\t\t\t\t:key=\"header.id\"\n\t\t\t\t\t\t\t\t\t\t:colSpan=\"header.colSpan\"\n\t\t\t\t\t\t\t\t\t\tclass=\"text-gray-800\"\n\t\t\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t\t\t'w-2/12': header.column.columnDef.id === 'level',\n\t\t\t\t\t\t\t\t\t\t\t'w-3/12': header.column.columnDef.id === 'time'\n\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center truncate px-3 py-2 text-base font-semibold\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<FlexRender\n\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"!header.isPlaceholder\"\n\t\t\t\t\t\t\t\t\t\t\t\t:render=\"header.column.columnDef.header\"\n\t\t\t\t\t\t\t\t\t\t\t\t:props=\"header.getContext()\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<template\n\t\t\t\t\t\t\t\t\tv-for=\"(row, index) in table.getRowModel().rows\"\n\t\t\t\t\t\t\t\t\t:key=\"row.id\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<tr class=\"hover:bg-gray-50\">\n\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\tv-for=\"cell in row.getVisibleCells()\"\n\t\t\t\t\t\t\t\t\t\t\t:key=\"cell.id\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"max-w-[35rem] cursor-pointer truncate border-b px-3 py-2\"\n\t\t\t\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t'border-b-0': row.getIsExpanded()\n\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t@click=\"handleExpand(row)\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"cell.column.columnDef.id === 'level'\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center space-x-2\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<i-lucide-info\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"getBadgeLabel(cell) === 'Info'\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-blue-500\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<i-lucide-alert-triangle\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-else-if=\"getBadgeLabel(cell) === 'Warning'\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-yellow-500\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<i-lucide-alert-circle\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-else-if=\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetBadgeLabel(cell) === 'Error' ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetBadgeLabel(cell) === 'Critical'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-red-500\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"text-xs\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'text-blue-500': getBadgeLabel(cell) === 'Info',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'text-yellow-500':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetBadgeLabel(cell) === 'Warning',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'text-red-500':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetBadgeLabel(cell) === 'Error' ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetBadgeLabel(cell) === 'Critical'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>{{ getBadgeLabel(cell) }}</span\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"truncate font-mono text-sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t\t\t\t\t'font-mono ': cell.column.columnDef.id === 'time',\n\t\t\t\t\t\t\t\t\t\t\t\t\t'font-mono text-gray-600':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcell.column.columnDef.id === 'description'\n\t\t\t\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<FlexRender\n\t\t\t\t\t\t\t\t\t\t\t\t\t:render=\"cell.column.columnDef.cell\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:props=\"cell.getContext()\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"row.getIsExpanded()\"\n\t\t\t\t\t\t\t\t\t\t\t:colspan=\"row.getAllCells().length\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"max-w-[39.75rem] whitespace-pre-wrap break-words border-b bg-gray-900 px-3 py-4 font-mono text-sm text-gray-200\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{ row.original.description }}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<tr height=\"99%\" class=\"border-b\"></tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\n\t\t\t\t\t\t<div v-if=\"table.getRowModel().rows.length === 0\" class=\"p-8\">\n\t\t\t\t\t\t\t<p class=\"text-center text-sm text-gray-500\">\n\t\t\t\t\t\t\t\tNo log entries found\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"flex justify-between rounded rounded-t-none border-t p-1\">\n\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t<div class=\"flex flex-shrink-0 items-center justify-end gap-3\">\n\t\t\t\t\t\t\t<p class=\"tnum text-sm text-gray-600\">\n\t\t\t\t\t\t\t\t{{ pageStart }} - {{ pageEnd }} of {{ totalRows }} rows\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<div class=\"flex gap-2\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t@click=\"table.previousPage()\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!table.getCanPreviousPage()\"\n\t\t\t\t\t\t\t\t\ticonLeft=\"arrow-left\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tPrev\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t@click=\"table.nextPage()\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!table.getCanNextPage()\"\n\t\t\t\t\t\t\t\t\ticonRight=\"arrow-right\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tNext\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\nimport {\n\tFlexRender,\n\tgetCoreRowModel,\n\tgetSortedRowModel,\n\tgetFilteredRowModel,\n\tgetExpandedRowModel,\n\tgetPaginationRowModel,\n\tuseVueTable\n} from '@tanstack/vue-table';\nimport { computed, ref } from 'vue';\n\nconst props = defineProps({\n\tlog: {\n\t\ttype: Array,\n\t\trequired: true\n\t}\n});\n\nconst searchLogQuery = ref('');\nconst levelFilter = ref('');\nconst sortOrder = ref('desc');\n\nconst columnFilters = computed(() => {\n\tconst filters = [];\n\tif (levelFilter.value) {\n\t\tfilters.push({\n\t\t\tid: 'level',\n\t\t\tvalue: levelFilter.value\n\t\t});\n\t}\n\tif (searchLogQuery.value) {\n\t\tfilters.push({\n\t\t\tid: 'description',\n\t\t\tvalue: searchLogQuery.value\n\t\t});\n\t}\n\treturn filters;\n});\n\nconst logEntries = computed(() => props.log);\nconst columns = computed(() => {\n\tconst columns = Object.keys(logEntries.value[0] || {});\n\tcolumns.sort((a, b) => {\n\t\tif (a === 'description') return 1;\n\t\tif (b === 'description') return -1;\n\t\treturn 0;\n\t});\n\n\treturn columns.length ? columns : ['description'];\n});\nconst sortingState = computed(() => {\n\tif (!sortOrder.value) return [];\n\treturn [\n\t\t{\n\t\t\tid: 'time',\n\t\t\tdesc: sortOrder.value === 'desc'\n\t\t}\n\t];\n});\n\nconst table = useVueTable({\n\tdata: logEntries.value,\n\tcolumns: columns.value.map(column => {\n\t\treturn {\n\t\t\tid: column,\n\t\t\theader: capitalizeFirstLetter(column),\n\t\t\taccessorKey: column,\n\t\t\tenableSorting: column === 'time' ? true : false,\n\t\t\tsortingFn: column === 'time' ? 'datetime' : null,\n\t\t\tisNumber: false\n\t\t};\n\t}),\n\tstate: {\n\t\tget columnFilters() {\n\t\t\treturn columnFilters.value;\n\t\t},\n\t\tget sorting() {\n\t\t\treturn sortingState.value;\n\t\t}\n\t},\n\tinitialState: {\n\t\tpagination: {\n\t\t\tpageSize: 20,\n\t\t\tpageIndex: 0\n\t\t}\n\t},\n\t// debugTable: true, // Uncomment to see the table state in the console\n\tgetRowCanExpand: _row => true,\n\tgetCoreRowModel: getCoreRowModel(),\n\tgetSortedRowModel: getSortedRowModel(),\n\tgetExpandedRowModel: getExpandedRowModel(),\n\tgetFilteredRowModel: getFilteredRowModel(),\n\tgetPaginationRowModel: getPaginationRowModel()\n});\n\nconst pageLength = computed(() => table.getState().pagination.pageSize);\nconst currPage = computed(() => table.getState().pagination.pageIndex + 1);\n\nconst totalRows = computed(() => props.log.length);\nconst pageStart = computed(() =>\n\ttotalRows.value ? (currPage.value - 1) * pageLength.value + 1 : 0\n);\nconst pageEnd = computed(() => {\n\tconst end = currPage.value * pageLength.value;\n\treturn end > props.log.length ? props.log.length : end;\n});\n\nfunction capitalizeFirstLetter(string) {\n\tif (!string) return '';\n\treturn string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n}\n\nfunction getBadgeLabel(cell) {\n\treturn capitalizeFirstLetter(getValueFromCell(cell));\n}\n\nfunction getValueFromCell(cell) {\n\treturn cell.row.original[cell.column.columnDef.accessorKey];\n}\n\nfunction handleExpand(row) {\n\tconst toggleExpandedHandler = row.getToggleExpandedHandler();\n\tif (row.getCanExpand()) toggleExpandedHandler();\n}\n</script>\n","<template>\n\t<div class=\"flex flex-col\">\n\t\t<Header class=\"bg-white\">\n\t\t\t<div\n\t\t\t\tclass=\"flex w-full flex-col gap-2 md:flex-row md:items-center md:justify-between\"\n\t\t\t>\n\t\t\t\t<div class=\"flex flex-row items-center gap-2\">\n\t\t\t\t\t<!-- Title -->\n\t\t\t\t\t<Breadcrumbs\n\t\t\t\t\t\t:items=\"[\n\t\t\t\t\t\t\t{ label: 'Dev Tools', route: { name: 'Log Browser' } }, // Dev tools has no seperate page as its own, so it doesn't need a different route\n\t\t\t\t\t\t\t{ label: 'Log Browser', route: { name: 'Log Browser' } }\n\t\t\t\t\t\t]\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex flex-row gap-2\">\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tclass=\"w-20\"\n\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\t:options=\"[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: 'Select Mode',\n\t\t\t\t\t\t\t\tdisabled: true\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: 'Bench',\n\t\t\t\t\t\t\t\tvalue: 'bench'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: 'Site',\n\t\t\t\t\t\t\t\tvalue: 'site'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\"\n\t\t\t\t\t\t:modelValue=\"mode\"\n\t\t\t\t\t\t@update:modelValue=\"\n\t\t\t\t\t\t\te => $router.push({ name: 'Log Browser', params: { mode: e } })\n\t\t\t\t\t\t\"\n\t\t\t\t\t/>\n\t\t\t\t\t<LinkControl\n\t\t\t\t\t\tv-show=\"mode === 'site'\"\n\t\t\t\t\t\t:options=\"{\n\t\t\t\t\t\t\tdoctype: 'Site',\n\t\t\t\t\t\t\tfilters: { status: 'Active' },\n\t\t\t\t\t\t\tinitialData: [{ label: site, value: site }]\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\tplaceholder=\"Select a site\"\n\t\t\t\t\t\t:modelValue=\"site\"\n\t\t\t\t\t\t@update:modelValue=\"\n\t\t\t\t\t\t\tsite => {\n\t\t\t\t\t\t\t\tthis.site = site;\n\t\t\t\t\t\t\t\t$router.push({\n\t\t\t\t\t\t\t\t\tname: 'Log Browser',\n\t\t\t\t\t\t\t\t\tparams: { mode: 'site', docName: site }\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\"\n\t\t\t\t\t/>\n\t\t\t\t\t<LinkControl\n\t\t\t\t\t\tclass=\"w-52\"\n\t\t\t\t\t\tv-show=\"mode === 'bench'\"\n\t\t\t\t\t\t:options=\"{\n\t\t\t\t\t\t\tdoctype: 'Bench',\n\t\t\t\t\t\t\tfilters: { status: 'Active' },\n\t\t\t\t\t\t\tinitialData: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: bench,\n\t\t\t\t\t\t\t\t\tvalue: bench\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\tplaceholder=\"Select a bench\"\n\t\t\t\t\t\t:modelValue=\"bench\"\n\t\t\t\t\t\t@update:modelValue=\"\n\t\t\t\t\t\t\tbench => {\n\t\t\t\t\t\t\t\tthis.bench = bench;\n\t\t\t\t\t\t\t\t$router.push({\n\t\t\t\t\t\t\t\t\tname: 'Log Browser',\n\t\t\t\t\t\t\t\t\tparams: { mode: 'bench', docName: bench }\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Tooltip text=\"This is an experimental feature\">\n\t\t\t\t\t\t<div class=\"rounded-md bg-purple-100 p-1.5\">\n\t\t\t\t\t\t\t<i-lucide-flask-conical class=\"h-4 w-4 text-purple-500\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tlink=\"https://easytouch.cloud/docs/devtools/log-browser\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<i-lucide-help-circle class=\"h-4 w-4\" />\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Header>\n\t\t<div class=\"flex\">\n\t\t\t<div\n\t\t\t\tv-if=\"(mode === 'bench' && !bench) || (mode === 'site' && !site)\"\n\t\t\t\tclass=\"w-full\"\n\t\t\t>\n\t\t\t\t<p\n\t\t\t\t\tclass=\"flex h-full min-h-[80vh] w-full items-center justify-center gap-2 text-gray-700\"\n\t\t\t\t>\n\t\t\t\t\tSelect a {{ mode }} to view logs\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div v-else-if=\"mode\" class=\"flex h-full w-full\">\n\t\t\t\t<LogList :mode=\"mode\" :docName=\"docName\" />\n\t\t\t\t<div class=\"m-4 flex h-full w-3/4 flex-col\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"$resources.log.loading\"\n\t\t\t\t\t\tclass=\"flex h-full min-h-[90vh] w-full items-center justify-center gap-2 text-gray-700\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Spinner class=\"h-4 w-4\" />\n\t\t\t\t\t\t<span> Fetching the log... </span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ErrorMessage\n\t\t\t\t\t\tv-else-if=\"$resources.log.error\"\n\t\t\t\t\t\t:message=\"$resources.log.error\"\n\t\t\t\t\t/>\n\t\t\t\t\t<LogViewer v-else-if=\"logId\" :log=\"log\" />\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\tclass=\"flex h-full min-h-[90vh] w-full items-center justify-center gap-2 text-gray-700\"\n\t\t\t\t\t>\n\t\t\t\t\t\tSelect a log to view\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport Header from '../../../components/Header.vue';\nimport LinkControl from '../../../components/LinkControl.vue';\nimport LogList from './LogList.vue';\nimport LogViewer from './LogViewer.vue';\nimport { Breadcrumbs } from 'frappe-ui';\n\nexport default {\n\tcomponents: {\n\t\tHeader,\n\t\tLogList,\n\t\tLogViewer,\n\t\tLinkControl,\n\t\tBreadcrumbs\n\t},\n\tprops: {\n\t\tmode: String,\n\t\tlogId: String,\n\t\tdocName: String\n\t},\n\tmounted() {\n\t\tif (!this.mode) {\n\t\t\tthis.$router.push({ name: 'Log Browser', params: { mode: 'bench' } });\n\t\t}\n\t},\n\tupdated() {\n\t\tif (!this.mode) {\n\t\t\tthis.$router.push({ name: 'Log Browser', params: { mode: 'bench' } });\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsite: this.mode === 'site' ? this.docName : null || null,\n\t\t\tbench: this.mode === 'bench' ? this.docName : null || null,\n\t\t\tsearchLogQuery: ''\n\t\t};\n\t},\n\tresources: {\n\t\tlog() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.log_browser.get_log',\n\t\t\t\tparams: {\n\t\t\t\t\tlog_type: this.mode,\n\t\t\t\t\tdoc_name: this.docName,\n\t\t\t\t\tlog_name: this.logId\n\t\t\t\t},\n\t\t\t\tinitialData: [],\n\t\t\t\tauto: this.logId\n\t\t\t};\n\t\t}\n\t},\n\tcomputed: {\n\t\tlog() {\n\t\t\treturn this.$resources.log?.data;\n\t\t}\n\t}\n};\n</script>\n"],"names":["_sfc_main","_a","logs","_b","log","_hoisted_1","_hoisted_2","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_openBlock","_createElementBlock","$data","_cache","$event","_withCtx","_createElementVNode","_hoisted_3","$options","_Fragment","_renderList","_ctx","_toDisplayString","props","__props","searchLogQuery","ref","levelFilter","sortOrder","columnFilters","computed","filters","logEntries","columns","a","b","sortingState","table","useVueTable","column","capitalizeFirstLetter","_row","getCoreRowModel","getSortedRowModel","getExpandedRowModel","getFilteredRowModel","getPaginationRowModel","pageLength","currPage","totalRows","pageStart","pageEnd","end","string","getBadgeLabel","cell","getValueFromCell","handleExpand","row","toggleExpandedHandler","Header","LogList","LogViewer","_hoisted_4","$props","e","site","bench","_hoisted_11","_createCommentVNode"],"mappings":"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"}