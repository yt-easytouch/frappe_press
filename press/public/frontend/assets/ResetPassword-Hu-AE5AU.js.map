{"version":3,"file":"ResetPassword-Hu-AE5AU.js","sources":["../../../../dashboard/src2/pages/ResetPassword.vue"],"sourcesContent":["<template>\n\t<LoginBox\n\t\tv-if=\"!$resources.validateResetKey.loading && email\"\n\t\ttitle=\"Set a new password for your account\"\n\t>\n\t\t<form class=\"flex flex-col\" @submit.prevent=\"handleSubmit\">\n\t\t\t<div v-if=\"ask2FA\">\n\t\t\t\t<FormControl\n\t\t\t\t\tlabel=\"2FA Code from your Authenticator App\"\n\t\t\t\t\tplaceholder=\"123456\"\n\t\t\t\t\tv-model=\"twoFactorCode\"\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div v-else class=\"space-y-4\">\n\t\t\t\t<FormControl\n\t\t\t\t\tlabel=\"Email\"\n\t\t\t\t\tclass=\"pointer-events-none\"\n\t\t\t\t\t:modelValue=\"email\"\n\t\t\t\t\tname=\"email\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tdisabled\n\t\t\t\t/>\n\t\t\t\t<FormControl\n\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tv-model=\"password\"\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\tautocomplete=\"new-password\"\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<ErrorMessage\n\t\t\t\tclass=\"mt-6\"\n\t\t\t\t:message=\"\n\t\t\t\t\t$resources.resetPassword.error ||\n\t\t\t\t\t$resources.verify2FA.error ||\n\t\t\t\t\t$resources.is2FAEnabled.error\n\t\t\t\t\"\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\tclass=\"mt-6\"\n\t\t\t\tvariant=\"solid\"\n\t\t\t\t:disabled=\"!password\"\n\t\t\t\t:loading=\"\n\t\t\t\t\t$resources.resetPassword.loading ||\n\t\t\t\t\t$resources.verify2FA.loading ||\n\t\t\t\t\t$resources.is2FAEnabled.loading\n\t\t\t\t\"\n\t\t\t>\n\t\t\t\tSubmit\n\t\t\t</Button>\n\t\t</form>\n\t</LoginBox>\n\t<div\n\t\tclass=\"mt-20 px-6 text-center\"\n\t\tv-else-if=\"!$resources.validateResetKey.loading && !email\"\n\t>\n\t\tAccount Key <strong>{{ requestKey }}</strong> is invalid or expired. Go back\n\t\tto <router-link class=\"underline\" to=\"/login\">login</router-link>.\n\t</div>\n</template>\n\n<script>\nimport LoginBox from '../components/auth/LoginBox.vue';\n\nexport default {\n\tname: 'ResetPassword',\n\tcomponents: {\n\t\tLoginBox,\n\t},\n\tprops: ['requestKey'],\n\tdata() {\n\t\treturn {\n\t\t\temail: null,\n\t\t\task2FA: false,\n\t\t\tpassword: null,\n\t\t};\n\t},\n\tresources: {\n\t\tvalidateResetKey() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.account.get_user_for_reset_password_key',\n\t\t\t\tparams: {\n\t\t\t\t\tkey: this.requestKey,\n\t\t\t\t},\n\t\t\t\tonSuccess(email) {\n\t\t\t\t\tthis.email = email || null;\n\t\t\t\t},\n\t\t\t\tauto: true,\n\t\t\t};\n\t\t},\n\t\tresetPassword() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.account.reset_password',\n\t\t\t\tparams: {\n\t\t\t\t\tkey: this.requestKey,\n\t\t\t\t\tpassword: this.password,\n\t\t\t\t},\n\t\t\t\tonSuccess() {\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tis2FAEnabled() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.account.is_2fa_enabled',\n\t\t\t};\n\t\t},\n\t\tverify2FA() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.account.verify_2fa',\n\t\t\t\tonSuccess: async () => {\n\t\t\t\t\tawait this.$resources.resetPassword.submit();\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\thandleSubmit() {\n\t\t\tif (this.ask2FA) {\n\t\t\t\tthis.$resources.verify2FA.submit({\n\t\t\t\t\tuser: this.email,\n\t\t\t\t\ttotp_code: this.twoFactorCode,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.$resources.is2FAEnabled.submit(\n\t\t\t\t\t{\n\t\t\t\t\t\tuser: this.email,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tonSuccess: (is2FAEnabled) => {\n\t\t\t\t\t\t\tif (is2FAEnabled) {\n\t\t\t\t\t\t\t\tthis.ask2FA = true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.$resources.resetPassword.submit();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t},\n};\n</script>\n"],"names":["_sfc_main","LoginBox","email","__async","is2FAEnabled","_ctx","$data","_withCtx","_openBlock","_createElementBlock","_hoisted_1","_cache","$event","_hoisted_2","_createTextVNode","_hoisted_3","_createElementVNode","_toDisplayString","$props","_createCommentVNode"],"mappings":"8kCAkEA,MAAAA,EAAA,CACC,KAAA,4BAEC,SAAAC,GAED,MAAA,CAAA,YAAA,EACA,MAAA,CACC,MAAA,iDAOA,kBAAA,CACC,MAAA,yDAEC,OAAA,CACC,IAAA,KAAA,YAED,UAAAC,EAAA,qBAGA,KAAA,KAGF,eAAA,CACC,MAAA,CACC,IAAA,mCACA,OAAA,CACC,IAAA,KAAA,2EAQH,cAAA,CACC,MAAA,CACC,IAAA,iDAID,MAAA,CACC,IAAA,+BACA,UAAA,IAAAC,EAAA,sBACC,MAAA,KAAA,WAAA,cAAA,OAAA,OAKJ,QAAA,CACC,cAAA,CACC,KAAA,OACC,KAAA,WAAA,UAAA,OAAA,CACC,KAAA,KAAA,kCAED,CAAA,EAEA,KAAA,WAAA,aAAA,OACC,CACC,KAAA,KAAA,OAED,eAEEC,EACC,KAAA,OAAA,GAEA,KAAA,WAAA,cAAA,OAAA,MAQR,qBAjIe,MAAA,sBAyCb,MAAA,uGArDO,MAAA,CAAAC,EAAA,WAAA,iBAAA,SAAAC,EAAA,sBACP,MAAA,wCAHF,QAAAC,EAAA,IAAA,WAKQ,MAAA,8GACLC,IAAAC,EAAA,MAAAC,EAAA,MAEE,MAAA,uCACA,YAAA,SATL,WAAAL,EAAA,cAAA,sBAAAM,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAP,EAAA,cAAAO,GAWK,SAAA,+BAGFJ,IAAAC,EAAA,MAAAI,EAAA,MAEE,MAAA,QACA,MAAA,sBACC,WAAAP,EAAA,MACD,KAAA,QACA,aAAA,MACA,SAAA,gCAGA,MAAA,WACA,KAAA,WAzBL,WAAAA,EAAA,SAAA,sBAAAK,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAN,EAAA,SAAAM,GA2BK,KAAA,WACA,aAAA,eACA,SAAA,mCAID,MAAA,yIAQA,MAAA,OACA,QAAA,QACC,SAAA,CAAAN,EAAA,yHA3CL,QAAAC,EAAA,IAAAI,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAAAG,EAAA,UAAA,kDAwDc,CAAAT,EAAA,WAAA,iBAAA,SAAA,CAAAC,EAAA,OAFbE,IAAAC,EAAA,MAAAM,EAAA,CAtDDJ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAAA,eAAA,GA0DcE,EAAA,SAAA,KAAAC,EAAAC,EAAA,UAAA,EAAA,CAAA,EA1DdP,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAAA,qCAAA,QA2DkB,MAAA,YAAkB,GAAA,WA3DpC,QAAAP,EAAA,IAAAI,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAAAG,EAAA,OAAA,WAAAH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAAA,IAAA,MAAAK,EAAA,GAAA,EAAA"}