{"version":3,"file":"AddTagDialog-DX4KI-Zn.js","sources":["../../../../dashboard/src2/components/AddTagDialog.vue"],"sourcesContent":["<template>\n\t<Dialog\n\t\t:options=\"{\n\t\t\ttitle: 'Add tag',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Add',\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tonClick: () =>\n\t\t\t\t\t\taddNewTag(\n\t\t\t\t\t\t\tselectedTag?.value === '__new__' ? newTag : selectedTag.value\n\t\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t]\n\t\t}\"\n\t\tv-model=\"show\"\n\t>\n\t\t<template #body-content>\n\t\t\t<FormControl\n\t\t\t\tv-if=\"selectedTag?.value !== '__new__'\"\n\t\t\t\tlabel=\"Select tag\"\n\t\t\t\ttype=\"autocomplete\"\n\t\t\t\tv-model=\"selectedTag\"\n\t\t\t\t:options=\"tagOptions\"\n\t\t\t/>\n\t\t\t<FormControl\n\t\t\t\tv-if=\"selectedTag?.value === '__new__'\"\n\t\t\t\tv-model=\"newTag\"\n\t\t\t\tlabel=\"Enter new tag and press enter\"\n\t\t\t\tplaceholder=\"production, staging, testing\"\n\t\t\t\t@keydown.enter=\"e => addNewTag(e.target.value)\"\n\t\t\t/>\n\t\t</template>\n\t</Dialog>\n</template>\n<script>\nimport {\n\tAutocomplete,\n\tDialog,\n\tFormControl,\n\tgetCachedDocumentResource\n} from 'frappe-ui';\n\nexport default {\n\tname: 'AddTagDialog',\n\tprops: ['doctype', 'docname'],\n\temits: ['added', 'removed'],\n\tcomponents: { Dialog, Autocomplete, FormControl },\n\tdata() {\n\t\treturn {\n\t\t\tselectedTag: null,\n\t\t\tnewTag: '',\n\t\t\tshow: true\n\t\t};\n\t},\n\tresources: {\n\t\texistingTags() {\n\t\t\treturn {\n\t\t\t\ttype: 'list',\n\t\t\t\tdoctype: 'Press Tag',\n\t\t\t\tfilters: { doctype_name: this.doctype },\n\t\t\t\tfields: ['tag'],\n\t\t\t\tpageLength: 1000,\n\t\t\t\tauto: true\n\t\t\t};\n\t\t}\n\t},\n\tmethods: {\n\t\taddNewTag(value) {\n\t\t\tif (!value) return;\n\t\t\tlet $doc = getCachedDocumentResource(this.doctype, this.docname);\n\t\t\tif (!$doc) return;\n\t\t\treturn $doc.addTag.submit({ tag: value }).then(() => {\n\t\t\t\tthis.$emit('added', value);\n\t\t\t\tthis.show = false;\n\t\t\t});\n\t\t}\n\t},\n\tcomputed: {\n\t\ttagOptions() {\n\t\t\treturn [\n\t\t\t\t{ label: 'Create new tag', value: '__new__' },\n\t\t\t\t...(this.$resources.existingTags.data || []).map(d => ({\n\t\t\t\t\tlabel: d.tag,\n\t\t\t\t\tvalue: d.tag\n\t\t\t\t}))\n\t\t\t];\n\t\t}\n\t}\n};\n</script>\n"],"names":["_sfc_main","Dialog","Autocomplete","FormControl","value","$doc","_a","$data","_cache","$event","_withCtx","$options","_createCommentVNode","_b"],"mappings":"0vBA2CA,MAAAA,EAAA,CACC,KAAA,qEAGA,WAAA,CAAAC,OAAAA,eAAAC,EAAA,YAAAC,CAAA,EACA,MAAA,CACC,MAAA,CACC,YAAA,KACA,OAAA,GACA,KAAA,gBAID,cAAA,CACC,MAAA,aAEC,QAAA,YACA,QAAA,CAAA,aAAA,KAAA,OAAA,EACA,OAAA,CAAA,KAAA,EACA,WAAA,IACA,KAAA,GAEF,GAED,QAAA,CACC,UAAAC,EAAA,CACC,GAAA,CAAAA,EAAA,0CAEA,GAAAC,kEAGC,KAAA,KAAA,EACD,CAAA,CACD,GAED,SAAA,cAEE,MAAA,CACC,CAAA,MAAA,iBAAA,MAAA,SAAA,6EAIA,EAAA,EAEF,CACD,CACD,+JAvF6IC,EAAAC,EAAA,cAAA,YAAAD,EAAA,SAAA,UAAAC,EAAA,OAAAA,EAAA,YAAA,WAF7I,WAAAA,EAAA,KAAA,sBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAF,EAAA,KAAAE,KAiBa,eAAAC,EAAA,IAAA,SAAA,SAEHJ,EAAAC,EAAA,cAAA,YAAAD,EAAA,SAAA,0BACN,MAAA,aACA,KAAA,eArBJ,WAAAC,EAAA,YAAA,sBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAF,EAAA,YAAAE,GAuBK,QAAAE,EAAA,8CAvBLC,EAAA,GAAA,EAAA,IA0BUC,EAAAN,EAAA,cAAA,YAAAM,EAAA,SAAA,0BA1BV,WAAAN,EAAA,OAAA,sBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAF,EAAA,OAAAE,GA4BI,MAAA,gCACA,YAAA,2HA7BJG,EAAA,GAAA,EAAA"}