{"version":3,"file":"Servers-C3SrZfZy.js","sources":["../../../../dashboard/src/views/security/Servers.vue"],"sourcesContent":["<template>\n\t<div>\n\t\t<header\n\t\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-5 py-2.5\"\n\t\t>\n\t\t\t<Breadcrumbs :items=\"[{ label: 'Security', route: '/security' }]\">\n\t\t\t</Breadcrumbs>\n\t\t</header>\n\t\t<div>\n\t\t\t<div class=\"mx-5 mt-5\">\n\t\t\t\t<div class=\"flex\">\n\t\t\t\t\t<div class=\"flex w-full space-x-2 pb-4\">\n\t\t\t\t\t\t<FormControl label=\"Search Servers\" v-model=\"searchTerm\">\n\t\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t\t<FeatherIcon name=\"search\" class=\"w-4 text-gray-600\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tlabel=\"Server Type\"\n\t\t\t\t\t\t\tclass=\"mr-8\"\n\t\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\t\t:options=\"serverTypeFilterOptions()\"\n\t\t\t\t\t\t\tv-model=\"server_type\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<Table\n\t\t\t\t\t:columns=\"[\n\t\t\t\t\t\t{ label: 'Server Name', name: 'name' },\n\t\t\t\t\t\t{ label: 'Security Updates', name: 'security_updates_status' },\n\t\t\t\t\t\t{ label: '', name: 'actions', width: 0.5 }\n\t\t\t\t\t]\"\n\t\t\t\t\t:rows=\"servers\"\n\t\t\t\t\tv-slot=\"{ rows, columns }\"\n\t\t\t\t>\n\t\t\t\t\t<TableHeader class=\"hidden sm:grid\" />\n\t\t\t\t\t<TableRow v-for=\"row in rows\" :key=\"row.name\" :row=\"row\">\n\t\t\t\t\t\t<TableCell v-for=\"column in columns\">\n\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\tv-if=\"column.name === 'security_updates_status'\"\n\t\t\t\t\t\t\t\t:label=\"row[column.name]\"\n\t\t\t\t\t\t\t\t:theme=\"row[column.name] === 'Up to date' ? 'green' : 'red'\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-else-if=\"column.name == 'actions'\"\n\t\t\t\t\t\t\t\tclass=\"w-full text-right\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Dropdown @click.prevent :options=\"dropdownItems(row)\">\n\t\t\t\t\t\t\t\t\t<template v-slot=\"{ open }\">\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t:variant=\"open ? 'subtle' : 'ghost'\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"mr-2\"\n\t\t\t\t\t\t\t\t\t\t\ticon=\"more-horizontal\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span v-else>\n\t\t\t\t\t\t\t\t{{ row[column.name] || '' }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t\t<div class=\"mt-8 flex items-center justify-center\">\n\t\t\t\t\t\t<LoadingText\n\t\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\t\t$resources.allServers.loading && !$resources.allServers.data\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-else-if=\"$resources.allServers.fetched && rows.length === 0\"\n\t\t\t\t\t\t\tclass=\"text-base text-gray-700\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tNo Servers\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Table>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport Table from '@/components/Table/Table.vue';\nimport TableCell from '@/components/Table/TableCell.vue';\nimport TableHeader from '@/components/Table/TableHeader.vue';\nimport TableRow from '@/components/Table/TableRow.vue';\n\nexport default {\n\tname: 'Servers',\n\tcomponents: {\n\t\tTable,\n\t\tTableHeader,\n\t\tTableRow,\n\t\tTableCell\n\t},\n\tpageMeta() {\n\t\treturn {\n\t\t\ttitle: 'Security - Easytouch Cloud'\n\t\t};\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsearchTerm: '',\n\t\t\tserver_type: 'All Servers'\n\t\t};\n\t},\n\tresources: {\n\t\tallServers() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.security.get_servers',\n\t\t\t\tparams: {\n\t\t\t\t\tserver_filter: { server_type: this.server_type, tag: '' }\n\t\t\t\t},\n\t\t\t\tauto: true,\n\t\t\t\tcache: ['SecurityServerList', this.server_type, this.$account.team.name]\n\t\t\t};\n\t\t}\n\t},\n\tcomputed: {\n\t\tservers() {\n\t\t\tif (!this.$resources.allServers.data) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tlet servers = this.$resources.allServers.data.filter(server =>\n\t\t\t\tthis.$account.hasPermission(server.name, '', true)\n\t\t\t);\n\n\t\t\tif (this.searchTerm)\n\t\t\t\tservers = servers.filter(server =>\n\t\t\t\t\tserver.name.toLowerCase().includes(this.searchTerm.toLowerCase())\n\t\t\t\t);\n\n\t\t\treturn servers.map(server => ({\n\t\t\t\t...server,\n\t\t\t\tname: server.title || server.name,\n\t\t\t\troute: { name: 'SecurityOverview', params: { serverName: server.name } }\n\t\t\t}));\n\t\t}\n\t},\n\tmethods: {\n\t\tgetServerFilterHeading() {\n\t\t\treturn this.serverFilter;\n\t\t},\n\t\tserverFilterOptions() {\n\t\t\tconst options = [\n\t\t\t\t{\n\t\t\t\t\tgroup: 'Types',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: 'All Servers',\n\t\t\t\t\t\t\tonClick: () => (this.serverFilter = 'All Servers')\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: 'App Servers',\n\t\t\t\t\t\t\tonClick: () => (this.serverFilter = 'App Servers')\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: 'Database Servers',\n\t\t\t\t\t\t\tonClick: () => (this.serverFilter = 'Database Servers')\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t];\n\n\t\t\treturn options;\n\t\t},\n\t\tserverTypeFilterOptions() {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'All Servers',\n\t\t\t\t\tvalue: 'All Servers'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'App Servers',\n\t\t\t\t\tvalue: 'App Servers'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Database Servers',\n\t\t\t\t\tvalue: 'Database Servers'\n\t\t\t\t}\n\t\t\t];\n\t\t},\n\t\tdropdownItems(server) {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'View Security Updates',\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\tthis.$router.push(\n\t\t\t\t\t\t\t`/security/${server.route.params.serverName}/security_update`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Manage Firewall',\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\tthis.$router.push(`/security/${server.app_server}/firewall`);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'SSH Sessions',\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\tthis.$router.push(`/security/${server.app_server}/ssh_session_log`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\t}\n};\n</script>\n"],"names":["_sfc_main","TableRow","TableCell","servers","server","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_7","_createElementVNode","$data","_cache","$event","_withCtx","$options","rows","columns","_openBlock","_createElementBlock","_Fragment","_renderList","row","column","_hoisted_5","open","_hoisted_6","_toDisplayString","_createBlock","_component_LoadingText","_ctx","_createCommentVNode"],"mappings":"+0CAuFA,MAAAA,GAAA,CACC,KAAA,4CAIC,SAAAC,EACAC,UAAAA,cAGA,MAAA,CACC,MAAA,+BAGF,MAAA,CACC,MAAA,mEAOC,MAAA,CACC,IAAA,iCACA,OAAA,sDAGA,KAAA,GACA,MAAA,CAAA,qBAAA,KAAA,YAAA,KAAA,SAAA,KAAA,IAAA,EAEF,GAED,SAAA,CACC,SAAA,CACC,GAAA,CAAA,KAAA,WAAA,WAAA,KACC,MAAA,CAAA,6FAOD,OAAA,KAAA,aACCC,EAAAA,EAAA,OAAAC,GACCA,EAAA,KAAA,YAAA,EAAA,SAAA,KAAA,WAAA,YAAA,CAAA,oBAIDA,IACA,KAAAA,EAAA,OAAAA,EAAA,KACA,MAAA,CAAA,KAAA,mBAAA,OAAA,CAAA,WAAAA,EAAA,IAAA,CAAA,CACD,EAAA,CACD,GAED,QAAA,oDAIC,qBAAA,QAEE,eAEC,MAAA,CACC,CACC,MAAA,cACA,QAAA,IAAA,KAAA,aAAA,eAED,CACC,MAAA,cACA,QAAA,IAAA,KAAA,aAAA,eAED,0EAGA,CACD,CACD,8BAMD,MAAA,CACC,CACC,MAAA,cACA,MAAA,eAED,CACC,MAAA,cACA,MAAA,eAED,kDAGA,IAGF,cAAAA,EAAA,CACC,MAAA,CACC,4CAGE,KAAA,QAAA,8DAGD,GAED,6FAIC,GAED,CACC,MAAA,4BAEC,KAAA,QAAA,KAAA,aAAAA,EAAA,UAAA,kBAAA,CACD,CACD,EAEF,CACD,CACD,EA7MGC,GAAA,CAAA,MAAA,mFAAA,EAMKC,GAAA,CAAA,MAAA,WAAA,EACCC,GAAA,CAAA,MAAA,MAAA,EACCC,GAAA,CAAA,MAAA,4BAAA,YAkCF,MAAA,gCAiBEC,GAAA,CAAA,MAAA,uCAAA,YAQH,MAAA,gIApELC,EAAA,SAAAL,GAAA,qEAOCK,EAAA,MAAAJ,GAAA,CACCI,EAAA,MAAAH,GAAA,CACCG,EAAA,MAAAF,GAAA,MACc,MAAA,iBAZnB,WAAAG,EAAA,WAAA,sBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAF,EAAA,WAAAE,KAakB,OAAAC,EAAA,IAAA,MACG,KAAA,SAAc,MAAA,oDAI5B,MAAA,cACA,MAAA,OACA,KAAA,SACC,QAAAC,EAAA,wBAAA,EArBR,WAAAJ,EAAA,YAAA,sBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAF,EAAA,YAAAE,8CA2BM,QAAA,+HAIA,EACA,KAAAE,EAAA,UAhCN,QAAAD,EAAA,CAAA,CAAA,KAAAE,EAAA,QAAAC,CAAA,IAAA,gCAoCKC,EAAA,EAAA,EAAAC,EAAAC,EAAA,KAAAC,EAAAL,EAAAM,wBAA+C,IAAAA,IApCpD,QAAAR,EAAA,IAAA,EAqCMI,EAAA,EAAA,EAAAC,EAAAC,EAAA,KAAAC,EAAAJ,EAAAM,kBArCN,QAAAT,EAAA,IAAA,CAuCcS,EAAA,OAAA,0CACL,MAAAD,EAAAC,EAAA,IAAA,EACA,MAAAD,EAAAC,EAAA,IAAA,IAAA,aAAA,QAAA,kCAGUA,EAAA,MAAA,WADZL,IAAAC,EAAA,MAAAK,GAAA,0GAOK,QAAAC,EAAA,SAAA,QACD,MAAA,OACA,KAAA,oEAKJP,IAAAC,EAAA,OAAAO,GAAAC,EAAAL,EAAAC,EAAA,IAAA,GAAA,EAAA,EAAA,CAAA,qDAKFb,EAAA,MAAAD,GAAA,iEACCS,EAAA,EAAAU,EAAAC,EAAA,CAAA,IAAA,CAAA,CAAA,GAMYC,EAAA,WAAA,WAAA,SAAAd,EAAA,SAAA,mCArElBe,EAAA,GAAA,EAAA"}