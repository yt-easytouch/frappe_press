{"version":3,"file":"MarketplaceAppAnalytics-Cp-9GaRx.js","sources":["../../../../dashboard/src/views/marketplace/MarketplaceAppAnalytics.vue"],"sourcesContent":["<template>\n\t<div\n\t\tv-if=\"$resources.analytics.data\"\n\t\tclass=\"grid grid-cols-1 gap-5 sm:grid-cols-2\"\n\t>\n\t\t<Card title=\"Earnings\">\n\t\t\t<template #actions>\n\t\t\t\t<a\n\t\t\t\t\tclass=\"text-base text-gray-700 hover:text-gray-800\"\n\t\t\t\t\thref=\"/support/tickets\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t>\n\t\t\t\t\tContact Support →\n\t\t\t\t</a>\n\t\t\t</template>\n\t\t\t<ListItem\n\t\t\t\ttitle=\"Total Earnings\"\n\t\t\t\t:subtitle=\"`Total earnings for ${app.title}`\"\n\t\t\t>\n\t\t\t\t<template #actions>\n\t\t\t\t\t<span class=\"text-base font-semibold text-green-500\">{{\n\t\t\t\t\t\t'$' +\n\t\t\t\t\t\tpaymentAnalytics.total_payout.usd +\n\t\t\t\t\t\t' + ' +\n\t\t\t\t\t\t'₹' +\n\t\t\t\t\t\tpaymentAnalytics.total_payout.inr\n\t\t\t\t\t}}</span>\n\t\t\t\t</template>\n\t\t\t</ListItem>\n\t\t\t<ListItem\n\t\t\t\ttitle=\"Pending Payout\"\n\t\t\t\tsubtitle=\"Payout you are yet to receive from Easytouch Cloud\"\n\t\t\t>\n\t\t\t\t<template #actions>\n\t\t\t\t\t<span class=\"text-base font-semibold\">{{\n\t\t\t\t\t\t'$' +\n\t\t\t\t\t\tpaymentAnalytics.pending_payout.usd +\n\t\t\t\t\t\t' + ' +\n\t\t\t\t\t\t'₹' +\n\t\t\t\t\t\tpaymentAnalytics.pending_payout.inr\n\t\t\t\t\t}}</span>\n\t\t\t\t</template>\n\t\t\t</ListItem>\n\t\t\t<ListItem\n\t\t\t\ttitle=\"Commission\"\n\t\t\t\tsubtitle=\"Payouts start once you have passed $500 threshold\"\n\t\t\t>\n\t\t\t\t<template #actions>\n\t\t\t\t\t<span class=\"text-base font-semibold\">{{\n\t\t\t\t\t\t'$' +\n\t\t\t\t\t\tpaymentAnalytics.commission.usd +\n\t\t\t\t\t\t' + ' +\n\t\t\t\t\t\t'₹' +\n\t\t\t\t\t\tpaymentAnalytics.commission.inr\n\t\t\t\t\t}}</span>\n\t\t\t\t</template>\n\t\t\t</ListItem>\n\t\t</Card>\n\t\t<Card title=\"Installs\">\n\t\t\t<div class=\"divide-y\" v-if=\"analytics\">\n\t\t\t\t<ListItem\n\t\t\t\t\tv-for=\"stat in analytics\"\n\t\t\t\t\t:key=\"stat.title\"\n\t\t\t\t\t:title=\"stat.title\"\n\t\t\t\t\t:description=\"stat.value\"\n\t\t\t\t>\n\t\t\t\t</ListItem>\n\t\t\t</div>\n\n\t\t\t<div class=\"py-10 text-center\" v-if=\"$resources.analytics.loading\">\n\t\t\t\t<Button :loading=\"true\">Loading</Button>\n\t\t\t</div>\n\t\t</Card>\n\t\t<LineChart\n\t\t\ttitle=\"Pageviews\"\n\t\t\ttype=\"time\"\n\t\t\t:key=\"pageViewsData\"\n\t\t\t:data=\"pageViewsData\"\n\t\t\tunit=\"views\"\n\t\t\t:chartTheme=\"[$theme.colors.purple[500]]\"\n\t\t\t:loading=\"$resources.plausible_analytics.loading\"\n\t\t\t:error=\"$resources.plausible_analytics.error\"\n\t\t>\n\t\t\t<template #actions>\n\t\t\t\t<a\n\t\t\t\t\tv-if=\"app\"\n\t\t\t\t\tclass=\"text-base text-gray-700 hover:text-gray-800\"\n\t\t\t\t\t:href=\"`/marketplace/apps/${app.app}`\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t>\n\t\t\t\t\tView Marketplace Page →\n\t\t\t\t</a>\n\t\t\t</template>\n\t\t</LineChart>\n\t\t<LineChart\n\t\t\ttitle=\"Unique Visitors\"\n\t\t\ttype=\"time\"\n\t\t\t:key=\"visitorsData\"\n\t\t\t:data=\"visitorsData\"\n\t\t\tunit=\"visitors\"\n\t\t\t:chartTheme=\"[$theme.colors.green[500]]\"\n\t\t\t:loading=\"$resources.plausible_analytics.loading\"\n\t\t\t:error=\"$resources.plausible_analytics.error\"\n\t\t/>\n\t</div>\n</template>\n\n<script>\nimport { DateTime } from 'luxon';\nimport LineChart from '@/components/charts/LineChart.vue';\n\nexport default {\n\tname: 'MarketplaceAppAnalytics',\n\tprops: {\n\t\tapp: Object\n\t},\n\tcomponents: {\n\t\tLineChart\n\t},\n\tmethods: {\n\t\tformatDate(data) {\n\t\t\treturn data.map(d => d.date);\n\t\t},\n\t\tgetChartOptions(yFormatter) {\n\t\t\treturn {\n\t\t\t\taxisOptions: {\n\t\t\t\t\txIsSeries: true,\n\t\t\t\t\tshortenYAxisNumbers: 1\n\t\t\t\t},\n\t\t\t\tlineOptions: {\n\t\t\t\t\thideDots: true,\n\t\t\t\t\tregionFill: true\n\t\t\t\t},\n\t\t\t\ttooltipOptions: {\n\t\t\t\t\tformatTooltipX: d => {\n\t\t\t\t\t\treturn DateTime.fromISO(d).toLocaleString(DateTime.DATE_MED);\n\t\t\t\t\t},\n\t\t\t\t\tformatTooltipY: yFormatter\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tresources: {\n\t\tanalytics() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.marketplace.analytics',\n\t\t\t\tauto: true,\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.app?.app\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tplausible_analytics() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.analytics.plausible_analytics',\n\t\t\t\tauto: true,\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.app?.app\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tcomputed: {\n\t\tanalytics() {\n\t\t\tif (\n\t\t\t\t!this.$resources.analytics.loading &&\n\t\t\t\tthis.$resources.analytics.data\n\t\t\t) {\n\t\t\t\tconst analyticsData = this.$resources.analytics.data;\n\t\t\t\tconst {\n\t\t\t\t\ttotal_installs,\n\t\t\t\t\tnum_installs_active_sites,\n\t\t\t\t\tnum_installs_active_benches\n\t\t\t\t} = analyticsData;\n\n\t\t\t\treturn [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: 'Total Installs',\n\t\t\t\t\t\tvalue:\n\t\t\t\t\t\t\ttotal_installs.toString() +\n\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\t(total_installs == 1 ? 'Site' : 'Sites')\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: 'Active Sites with this App',\n\t\t\t\t\t\tvalue:\n\t\t\t\t\t\t\tnum_installs_active_sites.toString() +\n\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\t(num_installs_active_sites == 1 ? 'Site' : 'Sites')\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: 'Active Benches with this App',\n\t\t\t\t\t\tvalue:\n\t\t\t\t\t\t\tnum_installs_active_benches.toString() +\n\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\t(num_installs_active_benches == 1 ? 'Bench' : 'Benches')\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t}\n\t\t},\n\t\tpageViewsData() {\n\t\t\tlet pageViews = this.$resources.plausible_analytics.data?.pageviews;\n\t\t\tif (!pageViews) return;\n\n\t\t\treturn {\n\t\t\t\tdatasets: [pageViews.map(d => [+new Date(d.date), d.value])]\n\t\t\t};\n\t\t},\n\t\tvisitorsData() {\n\t\t\tlet visitorsData = this.$resources.plausible_analytics.data?.visitors;\n\t\t\tif (!visitorsData) return;\n\n\t\t\treturn {\n\t\t\t\tdatasets: [visitorsData.map(d => [+new Date(d.date), d.value])]\n\t\t\t};\n\t\t},\n\t\tpaymentAnalytics() {\n\t\t\tif (\n\t\t\t\t!this.$resources.analytics.loading &&\n\t\t\t\tthis.$resources.analytics.data\n\t\t\t) {\n\t\t\t\tlet data = this.$resources.analytics.data;\n\t\t\t\treturn {\n\t\t\t\t\ttotal_payout: {\n\t\t\t\t\t\tusd: data.total_payout.usd_amount\n\t\t\t\t\t\t\t? data.total_payout.usd_amount.toFixed(2)\n\t\t\t\t\t\t\t: 0.0,\n\t\t\t\t\t\tinr: data.total_payout.inr_amount\n\t\t\t\t\t\t\t? data.total_payout.inr_amount.toFixed(2)\n\t\t\t\t\t\t\t: 0.0\n\t\t\t\t\t},\n\t\t\t\t\tpending_payout: {\n\t\t\t\t\t\tusd: data.pending_payout.usd_amount\n\t\t\t\t\t\t\t? data.pending_payout.usd_amount.toFixed(2)\n\t\t\t\t\t\t\t: 0.0,\n\t\t\t\t\t\tinr: data.pending_payout.inr_amount\n\t\t\t\t\t\t\t? data.pending_payout.inr_amount.toFixed(2)\n\t\t\t\t\t\t\t: 0.0\n\t\t\t\t\t},\n\t\t\t\t\tcommission: {\n\t\t\t\t\t\tusd: data.commission.usd_amount\n\t\t\t\t\t\t\t? data.commission.usd_amount.toFixed(2)\n\t\t\t\t\t\t\t: 0.0,\n\t\t\t\t\t\tinr: data.commission.inr_amount\n\t\t\t\t\t\t\t? data.commission.inr_amount.toFixed(2)\n\t\t\t\t\t\t\t: 0.0\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n"],"names":["_sfc_main","LineChart","data","d","_a","total_installs","analyticsData","num_installs_active_sites","num_installs_active_benches","pageViews","visitorsData","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_7","_openBlock","_createElementBlock","_hoisted_1","_withCtx","_cache","_createElementVNode","_toDisplayString","_hoisted_5","_Fragment","_renderList","$options","stat","_createCommentVNode","_hoisted_6","_createTextVNode","_ctx"],"mappings":"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"}