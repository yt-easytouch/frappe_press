{"version":3,"file":"SiteDatabase-Dx4q4cw1.js","sources":["../../../../dashboard/src/components/global/FormatDate.vue","../../../../dashboard/src/components/SiteRestoreSelector.vue","../../../../dashboard/src/views/site/SiteDatabaseBackups.vue","../../../../dashboard/src/views/site/DatabaseAccessDialog.vue","../../../../dashboard/src/views/site/SiteDatabaseRestore.vue","../../../../dashboard/src/views/site/SiteDatabase.vue"],"sourcesContent":["<script>\nimport { DateTime } from 'luxon';\nimport { h } from 'vue';\n\nexport default {\n\tname: 'FormatDate',\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\tdefault: 'full'\n\t\t}\n\t},\n\trender() {\n\t\tlet node = this.$slots.default()[0];\n\t\tlet value = node.children;\n\t\tvalue = value.trim();\n\n\t\tlet formattedDate = this.formatDate(value, this.type);\n\t\treturn h(\n\t\t\t'span',\n\t\t\t{\n\t\t\t\ttitle: this.$date(value).toLocaleString(DateTime.DATETIME_FULL)\n\t\t\t},\n\t\t\tformattedDate\n\t\t);\n\t}\n};\n</script>\n","<template>\n\t<div class=\"max-h-96 overflow-auto my-2\">\n\t\t<div\n\t\t\tv-for=\"(site, index) in sites\"\n\t\t\t:key=\"site.name\"\n\t\t\t@click=\"$emit('update:selectedSite', site)\"\n\t\t\tclass=\"focus-within:shadow-outline flex cursor-pointer border px-4 py-3 text-left text-base\"\n\t\t\t:class=\"[\n\t\t\t\tselectedSite === site ? 'bg-blue-50' : 'hover:bg-blue-50',\n\t\t\t\t{\n\t\t\t\t\t'border-b-0':\n\t\t\t\t\t\tsites.length > 1 && ![sites.length - 1, 0].includes(index),\n\t\t\t\t\t'rounded-b-md': sites.length > 1 && index === sites.length - 1,\n\t\t\t\t\t'rounded-t-md border-b-0': sites.length > 1 && index === 0,\n\t\t\t\t\t'rounded-md border': sites.length == 1\n\t\t\t\t}\n\t\t\t]\"\n\t\t>\n\t\t\t<div class=\"flex flex-row items-center gap-2\">\n\t\t\t\t<input type=\"radio\" :checked=\"selectedSite === site\" />\n\t\t\t\t<div class=\"text-lg font-medium text-gray-900 group-select\">\n\t\t\t\t\t{{ site.name }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tname: 'SiteRestoreSelector',\n\tprops: ['sites', 'selectedSite'],\n\temits: ['update:selectedSite']\n};\n</script>\n","<template>\n\t<Card\n\t\tv-if=\"site\"\n\t\ttitle=\"Backups\"\n\t\tsubtitle=\"Backups are enabled and are scheduled to run every day.\"\n\t>\n\t\t<template #actions>\n\t\t\t<Button\n\t\t\t\tv-if=\"site?.status === 'Active' || site?.status === 'Suspended'\"\n\t\t\t\t@click=\"$resources.scheduleBackup.fetch()\"\n\t\t\t\t:loading=\"$resources.scheduleBackup.loading\"\n\t\t\t\tclass=\"py-5\"\n\t\t\t>\n\t\t\t\tCreate Backup\n\t\t\t</Button>\n\t\t\t<Dialog\n\t\t\t\t:options=\"{ title: 'Restore Backup on Another Site' }\"\n\t\t\t\tv-model=\"showRestoreOnAnotherSiteDialog\"\n\t\t\t>\n\t\t\t\t<template v-slot:body-content>\n\t\t\t\t\t<p class=\"text-base\">\n\t\t\t\t\t\tSelect the site where you want to restore the backup\n\t\t\t\t\t</p>\n\t\t\t\t\t<SiteRestoreSelector\n\t\t\t\t\t\t:sites=\"\n\t\t\t\t\t\t\t$resources.sites.data.filter(site => site.name !== this.site.name)\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t:selectedSite=\"selectedSite\"\n\t\t\t\t\t\t@update:selectedSite=\"value => (selectedSite = value)\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div v-if=\"selectedSite\" class=\"mt-4\">\n\t\t\t\t\t\t<p class=\"text-base\">\n\t\t\t\t\t\t\tAre you sure you want to restore the backup from\n\t\t\t\t\t\t\t<b>{{ site?.name }}</b> taken on\n\t\t\t\t\t\t\t<b>{{ formatDate(backupToRestore.creation) }}</b> to your site\n\t\t\t\t\t\t\t<b>{{ selectedSite.name }}</b\n\t\t\t\t\t\t\t>?\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ErrorMessage\n\t\t\t\t\t\tclass=\"mt-2\"\n\t\t\t\t\t\t:message=\"restoreOnAnotherSiteErrorMessage\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t\t<template #actions>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t\tclass=\"w-full\"\n\t\t\t\t\t\tv-if=\"selectedSite\"\n\t\t\t\t\t\t@click=\"restoreOffsiteBackupOnAnotherSite(backupToRestore)\"\n\t\t\t\t\t>\n\t\t\t\t\t\tRestore\n\t\t\t\t\t</Button>\n\t\t\t\t</template>\n\t\t\t</Dialog>\n\t\t</template>\n\t\t<div class=\"divide-y\" v-if=\"backups.data.length\">\n\t\t\t<div\n\t\t\t\tclass=\"flex items-center justify-between py-2\"\n\t\t\t\tv-for=\"backup in backups.data\"\n\t\t\t\t:key=\"backup.database_url\"\n\t\t\t>\n\t\t\t\t<div class=\"text-base\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-if=\"backup.status === 'Success'\"\n\t\t\t\t\t\tclass=\"flex items-center justify-between\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\tBackup on <FormatDate>{{ backup.creation }}</FormatDate>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span v-else> Performing Backup... </span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex items-center space-x-2\">\n\t\t\t\t\t<Badge v-if=\"backup.offsite\" label=\"Offsite\" theme=\"green\" />\n\t\t\t\t\t<Dropdown :options=\"dropdownItems(backup)\">\n\t\t\t\t\t\t<template v-slot=\"{ open }\">\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t:text=\"\n\t\t\t\t\t\t\t\t\t!permissions.backups\n\t\t\t\t\t\t\t\t\t\t? `You don't have enough permissions to perform this action`\n\t\t\t\t\t\t\t\t\t\t: 'Download Backups'\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ticon=\"more-horizontal\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!permissions.backups\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</Dropdown>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"mt-2 text-base text-gray-600\" v-else>\n\t\t\t<Button\n\t\t\t\tv-if=\"$resources.backups.loading\"\n\t\t\t\t:loading=\"true\"\n\t\t\t\tloading-text=\"Loading\"\n\t\t\t/>\n\t\t\t<span v-else> No backups found </span>\n\t\t</div>\n\t</Card>\n</template>\n<script>\nimport SiteRestoreSelector from '@/components/SiteRestoreSelector.vue';\nimport { notify } from '@/utils/toast';\n\nexport default {\n\tname: 'SiteDatabaseBackups',\n\tprops: ['site'],\n\tcomponents: {\n\t\tSiteRestoreSelector\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisRestorePending: false,\n\t\t\tbackupToRestore: null,\n\t\t\tshowRestoreOnAnotherSiteDialog: false,\n\t\t\trestoreOnAnotherSiteErrorMessage: null,\n\t\t\tselectedSite: null\n\t\t};\n\t},\n\tresources: {\n\t\tsites() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.all',\n\t\t\t\tinitialData: [],\n\t\t\t\tauto: true\n\t\t\t};\n\t\t},\n\t\tbackups() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.backups',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site?.name\n\t\t\t\t},\n\t\t\t\tinitialData: [],\n\t\t\t\tauto: true\n\t\t\t};\n\t\t},\n\t\tscheduleBackup() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.backup',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site?.name,\n\t\t\t\t\twith_files: true\n\t\t\t\t},\n\t\t\t\tonSuccess: () => {\n\t\t\t\t\tthis.$resources.backups.reload();\n\t\t\t\t},\n\t\t\t\tonError: err => {\n\t\t\t\t\tnotify({\n\t\t\t\t\t\ttitle: \"Couldn't create backup\",\n\t\t\t\t\t\tmessage: err.messages.join('\\n'),\n\t\t\t\t\t\tcolor: 'red',\n\t\t\t\t\t\ticon: err.messages[0].includes('suspension')\n\t\t\t\t\t\t\t? 'info'\n\t\t\t\t\t\t\t: 'alert-triangle'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.$socket.on('agent_job_update', data => {\n\t\t\tif (data.site === this.site.name && data.name === 'Backup Site') {\n\t\t\t\tif (data.status === 'Success') {\n\t\t\t\t\tthis.$resources.backups.reload();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tcomputed: {\n\t\tbackups() {\n\t\t\treturn this.$resources.backups;\n\t\t},\n\t\tpermissions() {\n\t\t\treturn {\n\t\t\t\tbackups: this.$account.hasPermission(\n\t\t\t\t\tthis.site.name,\n\t\t\t\t\t'press.api.site.get_backup_link'\n\t\t\t\t)\n\t\t\t};\n\t\t}\n\t},\n\tmethods: {\n\t\tdropdownItems(backup) {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tgroup: 'Download',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: `Database (${this.formatBytes(\n\t\t\t\t\t\t\t\tbackup.database_size || 0\n\t\t\t\t\t\t\t)})`,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tthis.downloadBackup(\n\t\t\t\t\t\t\t\t\tbackup.name,\n\t\t\t\t\t\t\t\t\t'database',\n\t\t\t\t\t\t\t\t\tbackup.database_url,\n\t\t\t\t\t\t\t\t\tbackup.offsite\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: `Public Files (${this.formatBytes(\n\t\t\t\t\t\t\t\tbackup.public_size || 0\n\t\t\t\t\t\t\t)})`,\n\t\t\t\t\t\t\tcondition: () => backup.public_file,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tthis.downloadBackup(\n\t\t\t\t\t\t\t\t\tbackup.name,\n\t\t\t\t\t\t\t\t\t'public',\n\t\t\t\t\t\t\t\t\tbackup.public_url,\n\t\t\t\t\t\t\t\t\tbackup.offsite\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: `Private Files (${this.formatBytes(\n\t\t\t\t\t\t\t\tbackup.private_size || 0\n\t\t\t\t\t\t\t)})`,\n\t\t\t\t\t\t\tcondition: () => backup.private_file,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tthis.downloadBackup(\n\t\t\t\t\t\t\t\t\tbackup.name,\n\t\t\t\t\t\t\t\t\t'private',\n\t\t\t\t\t\t\t\t\tbackup.private_url,\n\t\t\t\t\t\t\t\t\tbackup.offsite\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: `Site Config (${this.formatBytes(\n\t\t\t\t\t\t\t\tbackup.config_file_size || 0\n\t\t\t\t\t\t\t)})`,\n\t\t\t\t\t\t\tcondition: () => backup.config_file_size,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tthis.downloadBackup(\n\t\t\t\t\t\t\t\t\tbackup.name,\n\t\t\t\t\t\t\t\t\t'config',\n\t\t\t\t\t\t\t\t\tbackup.config_file_url,\n\t\t\t\t\t\t\t\t\tbackup.offsite\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tgroup: 'Restore',\n\t\t\t\t\tcondition: () => backup.offsite,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: 'Restore Backup',\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tthis.$confirm({\n\t\t\t\t\t\t\t\t\ttitle: 'Restore Backup',\n\t\t\t\t\t\t\t\t\t// prettier-ignore\n\t\t\t\t\t\t\t\t\tmessage: `Are you sure you want to restore your site to <b>${this.formatDate(backup.creation)}</b>?`,\n\t\t\t\t\t\t\t\t\tactionLabel: 'Restore',\n\t\t\t\t\t\t\t\t\taction: closeDialog => {\n\t\t\t\t\t\t\t\t\t\tcloseDialog();\n\t\t\t\t\t\t\t\t\t\tthis.restoreOffsiteBackup(backup);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: 'Restore Backup on Another Site',\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tthis.showRestoreOnAnotherSiteDialog = true;\n\t\t\t\t\t\t\t\tthis.backupToRestore = backup;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t].filter(d => (d.condition ? d.condition() : true));\n\t\t},\n\t\tasync downloadBackup(name, file, database_url, offsite) {\n\t\t\tlet link = offsite\n\t\t\t\t? await this.$call('press.api.site.get_backup_link', {\n\t\t\t\t\t\tname: this.site.name,\n\t\t\t\t\t\tbackup: name,\n\t\t\t\t\t\tfile: file\n\t\t\t\t  })\n\t\t\t\t: database_url;\n\t\t\twindow.open(link);\n\t\t},\n\t\tasync restoreOffsiteBackup(backup) {\n\t\t\tthis.isRestorePending = true;\n\t\t\tthis.$call('press.api.site.restore', {\n\t\t\t\tname: this.site.name,\n\t\t\t\tfiles: {\n\t\t\t\t\tdatabase: backup.remote_database_file,\n\t\t\t\t\tpublic: backup.remote_public_file,\n\t\t\t\t\tprivate: backup.remote_private_file\n\t\t\t\t}\n\t\t\t}).then(() => {\n\t\t\t\tthis.isRestorePending = false;\n\t\t\t\tthis.$router.push(`/sites/${this.site.name}/jobs`);\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t}, 1000);\n\t\t\t});\n\t\t},\n\t\tasync restoreOffsiteBackupOnAnotherSite(backup) {\n\t\t\tthis.isRestorePending = true;\n\t\t\tthis.$call('press.api.site.restore', {\n\t\t\t\tname: this.selectedSite.name,\n\t\t\t\tfiles: {\n\t\t\t\t\tdatabase: backup.remote_database_file,\n\t\t\t\t\tpublic: backup.remote_public_file,\n\t\t\t\t\tprivate: backup.remote_private_file\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.isRestorePending = false;\n\t\t\t\t\tthis.showRestoreOnAnotherSiteDialog = false;\n\t\t\t\t\tthis.$router.push(`/sites/${this.selectedSite.name}/jobs`);\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}, 1000);\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tthis.restoreOnAnotherSiteErrorMessage = error;\n\t\t\t\t});\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<Dialog\n\t\t:options=\"{ title: 'Access Database' }\"\n\t\tv-if=\"site\"\n\t\tv-model=\"showDialog\"\n\t\t@close=\"dialogClosed\"\n\t>\n\t\t<template v-slot:body-content>\n\t\t\t<LoadingText v-if=\"$resources.fetchDatabaseAccessInfo.loading\" />\n\n\t\t\t<!-- Not available on current plan, upsell higher plans -->\n\t\t\t<div v-else-if=\"!databaseAccessInfo?.is_available_on_current_plan\">\n\t\t\t\t<div>\n\t\t\t\t\t<p class=\"text-base\">\n\t\t\t\t\t\tDatabase access is not available on your current plan. Please\n\t\t\t\t\t\tupgrade your plan to access your site database.\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclass=\"mt-4 w-full\"\n\t\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t\t@click=\"showChangePlanDialog = true\"\n\t\t\t\t\t\t>Upgrade Site Plan</Button\n\t\t\t\t\t>\n\t\t\t\t</div>\n\n\t\t\t\t<Dialog\n\t\t\t\t\t:options=\"{\n\t\t\t\t\t\ttitle: 'Upgrade Plan',\n\t\t\t\t\t\tactions: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: 'Submit',\n\t\t\t\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\t\t\t\tloading: $resources.changePlan.loading,\n\t\t\t\t\t\t\t\tonClick: () => $resources.changePlan.submit()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\"\n\t\t\t\t\tv-model=\"showChangePlanDialog\"\n\t\t\t\t>\n\t\t\t\t\t<template v-slot:body-content>\n\t\t\t\t\t\t<SitePlansTable\n\t\t\t\t\t\t\tclass=\"mt-3\"\n\t\t\t\t\t\t\t:plans=\"plans\"\n\t\t\t\t\t\t\tv-model:selectedPlan=\"selectedPlan\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ErrorMessage class=\"mt-4\" :message=\"$resources.changePlan.error\" />\n\t\t\t\t\t</template>\n\t\t\t\t</Dialog>\n\t\t\t</div>\n\n\t\t\t<!-- Available on the current plan -->\n\t\t\t<div v-else>\n\t\t\t\t<div v-if=\"databaseAccessInfo\">\n\t\t\t\t\t<div v-if=\"databaseAccessInfo.is_database_access_enabled\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p class=\"mb-2 text-base font-semibold text-gray-700\">\n\t\t\t\t\t\t\t\tUsing an Analytics or Business Intelligence Tool\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p class=\"mb-2 text-base\">\n\t\t\t\t\t\t\t\tUse following credentials with your analytics or business\n\t\t\t\t\t\t\t\tintelligence tool\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p class=\"ml-1 font-mono text-sm\">\n\t\t\t\t\t\t\t\tHost: {{ databaseAccessInfo.credentials.host }}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p class=\"ml-1 font-mono text-sm\">\n\t\t\t\t\t\t\t\tPort: {{ databaseAccessInfo.credentials.port }}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p class=\"ml-1 font-mono text-sm\">\n\t\t\t\t\t\t\t\tDatabase Name: {{ databaseAccessInfo.credentials.database }}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p class=\"ml-1 font-mono text-sm\">\n\t\t\t\t\t\t\t\tUsername: {{ databaseAccessInfo.credentials.username }}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p class=\"ml-1 font-mono text-sm\">\n\t\t\t\t\t\t\t\tPassword: {{ databaseAccessInfo.credentials.password }}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"pb-2 pt-5\">\n\t\t\t\t\t\t\t<p class=\"mb-2 text-base font-semibold text-gray-700\">\n\t\t\t\t\t\t\t\tUsing MariaDB Client\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p class=\"mb-2 text-base\">\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t>Run this command in your terminal to access MariaDB\n\t\t\t\t\t\t\t\t\tconsole</span\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<ClickToCopyField class=\"ml-1\" :textContent=\"dbAccessCommand\" />\n\t\t\t\t\t\t\t<p class=\"mt-3 text-sm\">\n\t\t\t\t\t\t\t\tNote: You should have a\n\t\t\t\t\t\t\t\t<span class=\"font-mono\">mariadb</span> client installed on your\n\t\t\t\t\t\t\t\tcomputer.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-else>\n\t\t\t\t\t\t<p class=\"mb-2 text-sm\">\n\t\t\t\t\t\t\tDatabase console access is disabled for this site.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"mt-4\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\tdatabaseAccessInfo &&\n\t\t\t\t\t\t\t!databaseAccessInfo.is_database_access_enabled\n\t\t\t\t\t\t\"\n\t\t\t\t\t\tclass=\"mb-2\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<!-- Enable Read-Write Access -->\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tlabel=\"Enable Read-Write Access\"\n\t\t\t\t\t\t\tv-model=\"enableReadWriteAccess\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ErrorMessage\n\t\t\t\t\t\t\tclass=\"mt-2\"\n\t\t\t\t\t\t\t:message=\"\n\t\t\t\t\t\t\t\terror ||\n\t\t\t\t\t\t\t\t(enableReadWriteAccess &&\n\t\t\t\t\t\t\t\t\t'Your credentials can be used to modify or wipe your database')\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\tdatabaseAccessInfo &&\n\t\t\t\t\t\t\t!databaseAccessInfo.is_database_access_enabled\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t@click=\"$resources.enableDatabaseAccess.submit()\"\n\t\t\t\t\t\t:loading=\"\n\t\t\t\t\t\t\t$resources.enableDatabaseAccess.loading || pollingAgentJob\n\t\t\t\t\t\t\"\n\t\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t\tclass=\"mt-2 w-full\"\n\t\t\t\t\t\t>Enable\n\t\t\t\t\t\t{{ enableReadWriteAccess ? 'Read-Write' : 'Read-Only' }}\n\t\t\t\t\t\tAccess</Button\n\t\t\t\t\t>\n\n\t\t\t\t\t<Button\n\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\tdatabaseAccessInfo &&\n\t\t\t\t\t\t\tdatabaseAccessInfo.is_database_access_enabled\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t@click=\"$resources.disableDatabaseAccess.submit()\"\n\t\t\t\t\t\t:loading=\"\n\t\t\t\t\t\t\t$resources.disableDatabaseAccess.loading || pollingAgentJob\n\t\t\t\t\t\t\"\n\t\t\t\t\t\tclass=\"w-full\"\n\t\t\t\t\t\t>Disable Access</Button\n\t\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n\n<script>\nimport ClickToCopyField from '@/components/ClickToCopyField.vue';\nimport SitePlansTable from '@/components/SitePlansTable.vue';\nimport { notify } from '@/utils/toast';\nimport { frappeRequest } from 'frappe-ui';\n\nexport default {\n\tprops: ['site', 'modelValue'],\n\temits: ['update:modelValue'],\n\tdata() {\n\t\treturn {\n\t\t\tpollingAgentJob: false,\n\t\t\tshowChangePlanDialog: false,\n\t\t\tselectedPlan: null,\n\t\t\tenableReadWriteAccess: false,\n\t\t\terror: null\n\t\t};\n\t},\n\tcomponents: {\n\t\tClickToCopyField,\n\t\tSitePlansTable\n\t},\n\tresources: {\n\t\tfetchDatabaseAccessInfo() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.get_database_access_info',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site\n\t\t\t\t},\n\t\t\t\tauto: true\n\t\t\t};\n\t\t},\n\t\tenableDatabaseAccess() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.enable_database_access',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site,\n\t\t\t\t\tmode: this.enableReadWriteAccess ? 'read_write' : 'read_only'\n\t\t\t\t},\n\t\t\t\tonSuccess(d) {\n\t\t\t\t\tthis.pollDatabaseAccessJob(d);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tdisableDatabaseAccess() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.disable_database_access',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site\n\t\t\t\t},\n\t\t\t\tonSuccess(d) {\n\t\t\t\t\tthis.pollDatabaseAccessJob(d);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tplans() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.get_plans',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site\n\t\t\t\t},\n\t\t\t\tinitialData: [],\n\t\t\t\tauto: true\n\t\t\t};\n\t\t},\n\t\tchangePlan() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.change_plan',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site,\n\t\t\t\t\tplan: this.selectedPlan?.name\n\t\t\t\t},\n\t\t\t\tonSuccess() {\n\t\t\t\t\tnotify({\n\t\t\t\t\t\ttitle: `Plan changed to ${this.selectedPlan.plan_title}`,\n\t\t\t\t\t\ticon: 'check',\n\t\t\t\t\t\tcolor: 'green'\n\t\t\t\t\t});\n\t\t\t\t\tthis.showChangePlanDialog = false;\n\t\t\t\t\tthis.selectedPlan = null;\n\t\t\t\t\tthis.$resources.plans.reset();\n\t\t\t\t\tthis.$resources.fetchDatabaseAccessInfo.fetch();\n\t\t\t\t},\n\t\t\t\tonError(error) {\n\t\t\t\t\tthis.showChangePlanDialog = false;\n\t\t\t\t\tnotify({\n\t\t\t\t\t\ttitle: error,\n\t\t\t\t\t\ticon: 'x',\n\t\t\t\t\t\tcolor: 'red'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tcomputed: {\n\t\tdatabaseAccessInfo() {\n\t\t\tif (\n\t\t\t\t!this.$resources.fetchDatabaseAccessInfo.loading &&\n\t\t\t\tthis.$resources.fetchDatabaseAccessInfo.data\n\t\t\t) {\n\t\t\t\treturn this.$resources.fetchDatabaseAccessInfo.data;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tdbAccessCommand() {\n\t\t\tif (this.databaseAccessInfo) {\n\t\t\t\tconst { credentials } = this.databaseAccessInfo;\n\t\t\t\treturn `mysql -u ${credentials.username} -p -h ${credentials.host} -P ${credentials.port} --ssl --ssl-verify-server-cert`;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tplans() {\n\t\t\tlet processedPlans = this.$resources.plans.data.map(plan => {\n\t\t\t\tif (!plan.database_access) {\n\t\t\t\t\tplan.disabled = true;\n\t\t\t\t}\n\n\t\t\t\treturn plan;\n\t\t\t});\n\n\t\t\treturn processedPlans;\n\t\t},\n\t\tshowDialog: {\n\t\t\tget() {\n\t\t\t\treturn this.modelValue;\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tthis.$emit('update:modelValue', value);\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tdialogClosed() {\n\t\t\tthis.$emit('update:show', null);\n\t\t},\n\t\tpollDatabaseAccessJob(jobName) {\n\t\t\tthis.pollingAgentJob = true;\n\n\t\t\tfrappeRequest({\n\t\t\t\turl: 'press.api.site.get_job_status',\n\t\t\t\tparams: {\n\t\t\t\t\tjob_name: jobName\n\t\t\t\t}\n\t\t\t}).then(message => {\n\t\t\t\tconsole.log(message);\n\t\t\t\tif (message.status === 'Success') {\n\t\t\t\t\tthis.pollingAgentJob = false;\n\t\t\t\t\tthis.$resources.fetchDatabaseAccessInfo.fetch();\n\t\t\t\t} else if (message.status === 'Failure') {\n\t\t\t\t\tthis.pollingAgentJob = false;\n\t\t\t\t\tthis.error = 'Something went wrong. Please try again.';\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.pollDatabaseAccessJob(jobName);\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<Card\n\t\tv-if=\"site\"\n\t\ttitle=\"Restore, Migrate & Reset\"\n\t\t:subtitle=\"\n\t\t\tsite.status === 'Suspended'\n\t\t\t\t? 'Activate the site to enable these actions'\n\t\t\t\t: ''\n\t\t\"\n\t>\n\t\t<div class=\"divide-y\">\n\t\t\t<div class=\"flex items-center justify-between py-3\">\n\t\t\t\t<div>\n\t\t\t\t\t<h3 class=\"text-lg\">Restore</h3>\n\t\t\t\t\t<p class=\"mt-1 text-base text-gray-600\">\n\t\t\t\t\t\tRestore your database using a previous backup\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<Tooltip\n\t\t\t\t\t:text=\"\n\t\t\t\t\t\t!permissions.restore\n\t\t\t\t\t\t\t? `You don't have enough permissions to perform this action`\n\t\t\t\t\t\t\t: 'Restore Database'\n\t\t\t\t\t\"\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttheme=\"red\"\n\t\t\t\t\t\t:disabled=\"site.status === 'Suspended' || !permissions.restore\"\n\t\t\t\t\t\t@click=\"showRestoreDialog = true\"\n\t\t\t\t\t>\n\t\t\t\t\t\tRestore\n\t\t\t\t\t</Button>\n\t\t\t\t</Tooltip>\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center justify-between py-3\">\n\t\t\t\t<div>\n\t\t\t\t\t<h3 class=\"text-lg\">Migrate</h3>\n\t\t\t\t\t<p class=\"mt-1 text-base text-gray-600\">\n\t\t\t\t\t\tRun bench migrate command on your database\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<Tooltip\n\t\t\t\t\t:text=\"\n\t\t\t\t\t\t!permissions.migrate\n\t\t\t\t\t\t\t? `You don't have enough permissions to perform this action`\n\t\t\t\t\t\t\t: 'Migrate Database'\n\t\t\t\t\t\"\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttheme=\"red\"\n\t\t\t\t\t\t:disabled=\"site.status === 'Suspended' || !permissions.migrate\"\n\t\t\t\t\t\t@click=\"showMigrateDialog = true\"\n\t\t\t\t\t>\n\t\t\t\t\t\tMigrate\n\t\t\t\t\t</Button>\n\t\t\t\t</Tooltip>\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center justify-between py-3\">\n\t\t\t\t<div>\n\t\t\t\t\t<h3 class=\"text-lg\">Reset</h3>\n\t\t\t\t\t<p class=\"mt-1 text-base text-gray-600\">\n\t\t\t\t\t\tReset your database to a clean state\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<Tooltip\n\t\t\t\t\t:text=\"\n\t\t\t\t\t\t!permissions.reset\n\t\t\t\t\t\t\t? `You don't have enough permissions to perform this action`\n\t\t\t\t\t\t\t: 'Reset Database'\n\t\t\t\t\t\"\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttheme=\"red\"\n\t\t\t\t\t\t:disabled=\"site.status === 'Suspended' || !permissions.reset\"\n\t\t\t\t\t\t@click=\"showResetDialog = true\"\n\t\t\t\t\t>\n\t\t\t\t\t\tReset\n\t\t\t\t\t</Button>\n\t\t\t\t</Tooltip>\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center justify-between py-3\">\n\t\t\t\t<div>\n\t\t\t\t\t<h3 class=\"text-lg\">Clear Cache</h3>\n\t\t\t\t\t<p class=\"mt-1 text-base text-gray-600\">Clear your site's cache</p>\n\t\t\t\t</div>\n\t\t\t\t<Button\n\t\t\t\t\t:disabled=\"site.status === 'Suspended'\"\n\t\t\t\t\t@click=\"confirmClearCache\"\n\t\t\t\t>\n\t\t\t\t\tClear\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclass=\"flex items-center justify-between py-3\"\n\t\t\t\tv-if=\"$account.team.database_access_enabled\"\n\t\t\t>\n\t\t\t\t<div>\n\t\t\t\t\t<h3 class=\"text-lg\">Access</h3>\n\t\t\t\t\t<p class=\"mt-1 text-base text-gray-600\">Connect to your database</p>\n\t\t\t\t</div>\n\t\t\t\t<Tooltip\n\t\t\t\t\t:text=\"\n\t\t\t\t\t\t!permissions.access\n\t\t\t\t\t\t\t? `You don't have enough permissions to perform this action`\n\t\t\t\t\t\t\t: 'Access Database'\n\t\t\t\t\t\"\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t:disabled=\"!permissions.access\"\n\t\t\t\t\t\ticon-left=\"database\"\n\t\t\t\t\t\t@click=\"showDatabaseAccessDialog = true\"\n\t\t\t\t\t>\n\t\t\t\t\t\tAccess</Button\n\t\t\t\t\t>\n\t\t\t\t</Tooltip>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<Dialog\n\t\t\t:options=\"{\n\t\t\t\ttitle: 'Migrate Database',\n\t\t\t\tactions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Migrate',\n\t\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\t\ttheme: 'red',\n\t\t\t\t\t\tloading: $resources.migrateDatabase.loading,\n\t\t\t\t\t\tonClick: migrateDatabase\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\"\n\t\t\tv-model=\"showMigrateDialog\"\n\t\t\t@close=\"\n\t\t\t\t() => {\n\t\t\t\t\t$resources.migrateDatabase.reset();\n\t\t\t\t\twantToSkipFailingPatches = false;\n\t\t\t\t}\n\t\t\t\"\n\t\t>\n\t\t\t<template v-slot:body-content>\n\t\t\t\t<p class=\"text-base\">\n\t\t\t\t\t<b>bench migrate</b> command will be executed on your database. Are\n\t\t\t\t\tyou sure you want to run this command? We recommend that you download\n\t\t\t\t\ta database backup before continuing.\n\t\t\t\t</p>\n\t\t\t\t<p class=\"mt-4 text-base\">\n\t\t\t\t\tPlease type\n\t\t\t\t\t<span class=\"font-semibold\">{{ site.name }}</span> to confirm.\n\t\t\t\t</p>\n\t\t\t\t<FormControl class=\"mt-4 w-full\" v-model=\"confirmSiteName\" />\n\t\t\t\t<ErrorMessage\n\t\t\t\t\tclass=\"mt-2\"\n\t\t\t\t\t:message=\"$resources.migrateDatabase.error\"\n\t\t\t\t/>\n\t\t\t\t<div class=\"mt-2\">\n\t\t\t\t\t<!-- Skip Failing Checkbox -->\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"skip-failing\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tclass=\"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n\t\t\t\t\t\tv-model=\"wantToSkipFailingPatches\"\n\t\t\t\t\t/>\n\t\t\t\t\t<label for=\"skip-failing\" class=\"ml-2 text-sm text-gray-900\">\n\t\t\t\t\t\tSkip failing patches (if any patch fails)\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</Dialog>\n\n\t\t<Dialog\n\t\t\t:options=\"{\n\t\t\t\ttitle: 'Restore',\n\t\t\t\tactions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Restore',\n\t\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\t\tloading: $resources.restoreBackup.loading,\n\t\t\t\t\t\tonClick: () => $resources.restoreBackup.submit()\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\"\n\t\t\tv-model=\"showRestoreDialog\"\n\t\t>\n\t\t\t<template v-slot:body-content>\n\t\t\t\t<div class=\"space-y-4\">\n\t\t\t\t\t<p class=\"text-base\">\n\t\t\t\t\t\tRestore your database using a previous backup.\n\t\t\t\t\t</p>\n\t\t\t\t\t<BackupFilesUploader v-model:backupFiles=\"selectedFiles\" />\n\t\t\t\t</div>\n\t\t\t\t<p class=\"mt-4 text-base\">\n\t\t\t\t\tPlease type\n\t\t\t\t\t<span class=\"font-semibold\">{{ site.name }}</span> to confirm.\n\t\t\t\t</p>\n\t\t\t\t<FormControl class=\"mt-4 w-full\" v-model=\"confirmSiteName\" />\n\t\t\t\t<div class=\"mt-3\">\n\t\t\t\t\t<!-- Skip Failing Checkbox -->\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"skip-failing\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tclass=\"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n\t\t\t\t\t\tv-model=\"wantToSkipFailingPatches\"\n\t\t\t\t\t/>\n\t\t\t\t\t<label for=\"skip-failing\" class=\"ml-2 text-sm text-gray-900\">\n\t\t\t\t\t\tSkip failing patches (if any patch fails)\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<ErrorMessage class=\"mt-2\" :message=\"$resources.restoreBackup.error\" />\n\t\t\t</template>\n\t\t</Dialog>\n\n\t\t<DatabaseAccessDialog\n\t\t\tv-if=\"showDatabaseAccessDialog\"\n\t\t\t:site=\"site.name\"\n\t\t\tv-model=\"showDatabaseAccessDialog\"\n\t\t/>\n\n\t\t<Dialog\n\t\t\t:options=\"{\n\t\t\t\ttitle: 'Reset Database',\n\t\t\t\tactions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Reset',\n\t\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\t\ttheme: 'red',\n\t\t\t\t\t\tloading: $resources.resetDatabase.loading,\n\t\t\t\t\t\tonClick: () => $resources.resetDatabase.submit()\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\"\n\t\t\tv-model=\"showResetDialog\"\n\t\t>\n\t\t\t<template v-slot:body-content>\n\t\t\t\t<p class=\"text-base\">\n\t\t\t\t\tAll the data from your site will be lost. Are you sure you want to\n\t\t\t\t\treset your database?\n\t\t\t\t</p>\n\t\t\t\t<p class=\"mt-4 text-base\">\n\t\t\t\t\tPlease type\n\t\t\t\t\t<span class=\"font-semibold\">{{ site.name }}</span> to confirm.\n\t\t\t\t</p>\n\t\t\t\t<FormControl class=\"mt-4 w-full\" v-model=\"confirmSiteName\" />\n\t\t\t\t<ErrorMessage class=\"mt-2\" :message=\"$resources.resetDatabase.error\" />\n\t\t\t</template>\n\t\t</Dialog>\n\t</Card>\n</template>\n\n<script>\nimport FileUploader from '@/components/FileUploader.vue';\nimport BackupFilesUploader from '@/components/BackupFilesUploader.vue';\nimport DatabaseAccessDialog from './DatabaseAccessDialog.vue';\n\nexport default {\n\tname: 'SiteDatabase',\n\tcomponents: {\n\t\tFileUploader,\n\t\tBackupFilesUploader,\n\t\tDatabaseAccessDialog\n\t},\n\tprops: ['site'],\n\tdata() {\n\t\treturn {\n\t\t\tconfirmSiteName: '',\n\t\t\tshowResetDialog: false,\n\t\t\tshowMigrateDialog: false,\n\t\t\tshowRestoreDialog: false,\n\t\t\tshowDatabaseAccessDialog: false,\n\t\t\tselectedFiles: {\n\t\t\t\tdatabase: null,\n\t\t\t\tpublic: null,\n\t\t\t\tprivate: null\n\t\t\t},\n\t\t\twantToSkipFailingPatches: false\n\t\t};\n\t},\n\tresources: {\n\t\trestoreBackup() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.restore',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site?.name,\n\t\t\t\t\tfiles: this.selectedFiles,\n\t\t\t\t\tskip_failing_patches: this.wantToSkipFailingPatches\n\t\t\t\t},\n\t\t\t\tvalidate() {\n\t\t\t\t\tif (this.confirmSiteName !== this.site?.name) {\n\t\t\t\t\t\treturn 'Please type the site name to confirm.';\n\t\t\t\t\t}\n\t\t\t\t\tif (!this.filesUploaded) {\n\t\t\t\t\t\treturn 'Please upload database, public and private files to restore.';\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonSuccess(jobName) {\n\t\t\t\t\tthis.selectedFiles = {};\n\t\t\t\t\tthis.$router.push({ name: 'SiteJobs', params: { jobName } });\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tresetDatabase() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.reinstall',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site?.name\n\t\t\t\t},\n\t\t\t\tvalidate() {\n\t\t\t\t\tif (this.confirmSiteName !== this.site?.name) {\n\t\t\t\t\t\treturn 'Please type the site name to confirm.';\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonSuccess(jobName) {\n\t\t\t\t\tthis.$router.push({ name: 'SiteJobs', params: { jobName } });\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tmigrateDatabase() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.migrate',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site?.name\n\t\t\t\t},\n\t\t\t\tvalidate() {\n\t\t\t\t\tif (this.confirmSiteName !== this.site?.name) {\n\t\t\t\t\t\treturn 'Please type the site name to confirm.';\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonSuccess() {\n\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\tname: 'SiteOverview',\n\t\t\t\t\t\tparams: { site: this.site?.name }\n\t\t\t\t\t});\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tclearCache() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.clear_cache',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site?.name\n\t\t\t\t},\n\t\t\t\tonSuccess() {\n\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\tname: 'SiteOverview',\n\t\t\t\t\t\tparams: { site: this.site?.name }\n\t\t\t\t\t});\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tmethods: {\n\t\tmigrateDatabase() {\n\t\t\tthis.$resources.migrateDatabase.submit({\n\t\t\t\tname: this.site.name,\n\t\t\t\tskip_failing_patches: this.wantToSkipFailingPatches\n\t\t\t});\n\t\t},\n\t\tconfirmClearCache() {\n\t\t\tthis.$confirm({\n\t\t\t\ttitle: 'Clear Cache',\n\t\t\t\tmessage: `\n\t\t\t\t\t<b>bench clear-cache</b> and <b>bench clear-website-cache</b> commands will be executed on your site. Are you sure\n\t\t\t\t\tyou want to run these command?\n\t\t\t\t`,\n\t\t\t\tactionLabel: 'Clear Cache',\n\t\t\t\tactionColor: 'red',\n\t\t\t\taction: closeDialog => {\n\t\t\t\t\tthis.$resources.clearCache.submit();\n\t\t\t\t\tcloseDialog();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tcomputed: {\n\t\tpermissions() {\n\t\t\treturn {\n\t\t\t\tmigrate: this.$account.hasPermission(\n\t\t\t\t\tthis.site.name,\n\t\t\t\t\t'press.api.site.migrate'\n\t\t\t\t),\n\t\t\t\trestore: this.$account.hasPermission(\n\t\t\t\t\tthis.site.name,\n\t\t\t\t\t'press.api.site.restore'\n\t\t\t\t),\n\t\t\t\treset: this.$account.hasPermission(\n\t\t\t\t\tthis.site.name,\n\t\t\t\t\t'press.api.site.reset'\n\t\t\t\t),\n\t\t\t\taccess: this.$account.hasPermission(\n\t\t\t\t\tthis.site.name,\n\t\t\t\t\t'press.api.site.enable_database_access'\n\t\t\t\t)\n\t\t\t};\n\t\t},\n\t\tfilesUploaded() {\n\t\t\treturn this.selectedFiles.database;\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<div v-if=\"site\" class=\"grid grid-cols-1 gap-5 md:grid-cols-2\">\n\t\t<SiteDatabaseBackups :site=\"site\" />\n\t\t<SiteDatabaseRestore :site=\"site\" />\n\t</div>\n</template>\n\n<script>\nimport SiteDatabaseBackups from './SiteDatabaseBackups.vue';\nimport SiteDatabaseRestore from './SiteDatabaseRestore.vue';\n\nexport default {\n\tname: 'SiteDatabase',\n\tprops: ['site'],\n\tcomponents: { SiteDatabaseBackups, SiteDatabaseRestore }\n};\n</script>\n"],"names":["_sfc_main","value","h","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_openBlock","_createElementBlock","_Fragment","_renderList","$props","site","index","_createElementVNode","_toDisplayString","SiteRestoreSelector","_a","notify","err","data","backup","closeDialog","d","link","offsite","file","__async","error","_hoisted_7","_withCtx","_b","_cache","$event","_ctx","_createTextVNode","_createCommentVNode","$data","$options","_hoisted_8","ClickToCopyField","credentials","plan","jobName","frappeRequest","message","_hoisted_6","_hoisted_9","_hoisted_10","_hoisted_12","_createBlock","_component_LoadingText","_hoisted_11","_hoisted_13","BackupFilesUploader","DatabaseAccessDialog","_hoisted_14","_hoisted_15"],"mappings":"87CAIA,MAAAA,GAAA,CACC,KAAA,aACA,MAAA,iCAIC,GAED,QAAA,OACC,KAAA,OAAA,QAAA,EAAA,CAAA,WAEAC,EAAAA,EAAA,KAAA,qCAGA,OAAAC,EACC,OACA,wDAKF,CACD,ECEAF,GAAA,4BAEC,MAAA,CAAA,QAAA,cAAA,+BAED,EA/BMG,GAAA,CAAA,MAAA,6BAAA,EADNC,GAAA,CAAA,SAAA,EAkBQC,GAAA,CAAA,MAAA,kCAAA,EAlBRC,GAAA,CAAA,SAAA,EAoBSC,GAAA,CAAA,MAAA,gDAAA,2BAnBR,OAAAC,EAAA,EAAAC,EAAA,MAAAN,GAAA,EACCK,EAAA,EAAA,EAAAC,EAAAC,EAAA,KAAAC,EAAAC,EAAA,MAAA,CAAAC,EAAAC,0KAKeF,EAAA,eAAAC,EAAA,aAAA,qFAA2K,eAAAD,EAAA,MAAA,OAAA,GAAAE,IAAAF,EAAA,MAAA,OAAA,oDAA2I,oBAAAA,EAAA,MAAA,QAAA,QAWpUG,EAAA,MAAAV,GAAA,YACQ,KAAA,kCAnBX,EAAA,KAAA,EAAAC,EAAA,EAoBIS,EAAA,MAAAR,GAAAS,EAAAH,EAAA,IAAA,EAAA,CAAA,GApBJ,EAAA,GAAAT,EAAA,0CC4GAJ,GAAA,4BAEC,MAAA,CAAA,MAAA,cAECiB,oBAAAA,GAED,MAAA,CACC,MAAA,qBAEC,gBAAA,KACA,+BAAA,GACA,iCAAA,KACA,aAAA,kBAID,OAAA,CACC,MAAA,0BAEC,YAAA,CAAA,EACA,KAAA,KAGF,SAAA,OACC,MAAA,8BAEC,OAAA,CACC,MAAAC,EAAA,KAAA,OAAA,YAAAA,EAAA,MAED,YAAA,CAAA,EACA,KAAA,KAGF,gBAAA,OACC,MAAA,6BAEC,OAAA,CACC,MAAAA,EAAA,KAAA,OAAA,YAAAA,EAAA,KACA,WAAA,IAED,UAAA,IAAA,CACC,KAAA,WAAA,QAAA,OAAA,eAGAC,EAAA,gCAEC,QAAAC,EAAA,SAAA,KAAA;AAAA,CAAA,cAEA,KAAAA,EAAA,SAAA,CAAA,EAAA,SAAA,YAAA,EACC,OACA,gBACF,CAAA,CACD,EAEF,GAED,SAAA,CACC,KAAA,QAAA,GAAA,mBAAAC,GAAA,wEAGG,KAAA,WAAA,QAAA,OAAA,CAGH,CAAA,GAED,SAAA,CACC,SAAA,+CAIC,MAAA,CACC,QAAA,KAAA,SAAA,cACC,KAAA,KAAA,KACA,gCACD,EAEF,GAED,QAAA,CACC,cAAAC,EAAA,CACC,MAAA,CACC,CACC,MAAA,WACA,MAAA,CACC,CACC,MAAA,aAAA,KAAA,gDAIC,KAAA,iCAGCA,EAAA,uBAGF,GAED,CACC,MAAA,iBAAA,KAAA,YACCA,EAAA,aAAA,MAED,UAAA,IAAAA,EAAA,yBAEC,KAAA,sBAEC,SACAA,EAAA,qBAGF,GAED,CACC,MAAA,kBAAA,KAAA,YACCA,EAAA,cAAA,MAED,UAAA,IAAAA,EAAA,0BAEC,KAAA,sBAEC,UACAA,EAAA,sBAGF,GAED,CACC,MAAA,gBAAA,KAAA,sCAGA,UAAA,IAAAA,EAAA,8BAEC,KAAA,sBAEC,qCAIF,CACD,CACD,GAED,CACC,MAAA,kCAEA,MAAA,CACC,CACC,MAAA,8BAEC,KAAA,SAAA,CACC,MAAA,iBAEA,QAAA,oDAAA,KAAA,WAAAA,EAAA,QAAA,CAAA,QACA,YAAA,UACA,OAAAC,GAAA,KAEC,KAAA,qBAAAD,CAAA,CACD,CACD,CAAA,CACD,GAED,CACC,MAAA,8CAEC,KAAA,+BAAA,yBAED,CACD,CACD,CACD,CACD,EAAA,OAAAE,GAAAA,EAAA,UAAAA,EAAA,UAAA,EAAA,EAAA,0DAGA,IAAAC,EAAAC,qDAEG,KAAA,KAAA,KAAA,cAEA,KAAAC,MAGH,OAAA,KAAAF,CAAA,KAED,qBAAAH,EAAA,QAAAM,EAAA,+CAEC,KAAA,MAAA,yBAAA,CACC,KAAA,KAAA,KAAA,KACA,MAAA,CACC,SAAAN,EAAA,qBACA,OAAAA,EAAA,mBACA,QAAAA,EAAA,mBACD,0FAIA,WAAA,IAAA,yBAEA,EAAA,GAAA,CACD,CAAA,kGAIA,KAAA,MAAA,yBAAA,6BAEC,MAAA,CACC,SAAAA,EAAA,qBACA,OAAAA,EAAA,mBACA,QAAAA,EAAA,mBACD,uCAIC,KAAA,+BAAA,8DAEA,WAAA,IAAA,yBAEA,EAAA,GAAA,IAED,MAAAO,GAAA,CACC,KAAA,iCAAAA,CACD,CAAA,CACF,GACD,CACD,YA3S8B,MAAA,QACrBzB,GAAA,CAAA,MAAA,WAAA,YAyBF,MAAA,YAMEE,GAAA,CAAA,MAAA,WAAA,YAGH,MAAA,gDAQGwB,GAAA,CAAA,MAAA,6BAAA,YAqBF,MAAA,6IA3FL,MAAA,UACA,SAAA,4DAEW,QAAAC,EAAA,IAAA,SAAA,SAEHb,EAAAN,EAAA,OAAA,YAAAM,EAAA,UAAA,YAAAc,EAAApB,EAAA,OAAA,YAAAoB,EAAA,UAAA,4BACL,QAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAC,EAAA,WAAA,eAAA,MAAA,GACA,QAAAA,EAAA,WAAA,eAAA,QACD,MAAA,SAXJ,QAAAJ,EAAA,IAAAE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAAAG,EAAA,iBAAA,0BAAAC,EAAA,GAAA,EAAA,OAgBK,QAAA,CAAA,MAAA,gCAAA,EAhBL,WAAAC,EAAA,+BAAA,sBAAAL,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAI,EAAA,+BAAAJ,KAmBqB,eAAAH,EAAA,IAAA,OAAA,OAChBE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAlB,EAAA,IAAA,CAAA,MAAA,WAAA,EAAA,yDAAA,EAAA,cAIiBoB,EAAA,WAAA,MAAA,KAAA,OAAAtB,GAAAA,EAAA,OAAA,KAAA,KAAA,IAAA,EAGf,aAAAyB,EAAA,aACA,wBAAAL,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAhC,GAAAqC,EAAA,aAAArC,qDAEFO,IAAAC,EAAA,MAAAN,GAAA,CACCY,EAAA,IAAAX,GAAA,CA/BN6B,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAAA,oDAAA,mDAAAH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAAA,YAAA,GAkCOrB,EAAA,IAAA,KAAAC,EAAAmB,EAAA,WAAAG,EAAA,gBAAA,QAAA,CAAA,EAAA,CAAA,EAlCPL,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAAA,gBAAA,wCAAAH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAAA,IAAA,QAAAC,EAAA,GAAA,EAAA,OAwCM,MAAA,OACC,QAAAC,EAAA,yDAGQ,QAAAP,EAAA,IAAA,gCAET,QAAA,QACA,MAAA,0FA/CN,QAAAA,EAAA,IAAAE,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CAAAG,EAAA,WAAA,YAAAC,EAAA,GAAA,EAAA,8BAAA,QAAAN,EAAA,IAAA,wBAwDEvB,IAAAC,EAAA,MAAAJ,GAAA,EACCG,EAAA,EAAA,EAAAC,EAAAC,EAAA,KAAAC,EAAA4B,EAAA,QAAA,KAAAjB,iBACC,MAAA,8DAIAP,EAAA,MAAAT,GAAA,CAEQgB,EAAA,SAAA,WADPd,IAAAC,EAAA,OAAAF,GAAA,gBA/DL0B,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAAA,aAAA,aAAA,QAAAL,EAAA,IAAA,oFAyEIhB,EAAA,MAAAe,GAAA,CACcR,EAAA,wBAAgB,MAAA,UAAgB,MAAA,WA1ElDe,EAAA,GAAA,EAAA,qEA8E0BE,EAAA,YAAA,wFA9E1B,QAAAR,EAAA,IAAA,MAqFS,KAAA,oIASPvB,IAAAC,EAAA,MAAA+B,GAAA,8CAGG,QAAA,GACD,eAAA,iEAlGJH,EAAA,GAAA,EAAA,iCC2KArC,GAAA,yDAGC,MAAA,CACC,MAAA,CACC,gBAAA,2BAEA,aAAA,8BAEA,MAAA,mBAID,iBAAAyC,yDAKC,MAAA,CACC,IAAA,0CACA,OAAA,iBAGA,KAAA,4BAID,MAAA,CACC,IAAA,wCACA,OAAA,CACC,KAAA,KAAA,yGAKD,4BAID,MAAA,CACC,IAAA,yCACA,OAAA,2DAKA,IAGF,OAAA,CACC,MAAA,CACC,IAAA,2BACA,OAAA,iBAGA,YAAA,CAAA,EACA,KAAA,wBAID,MAAA,CACC,IAAA,6BACA,OAAA,CACC,KAAA,KAAA,iEAIAtB,EAAA,mFAIA,CAAA,EACA,KAAA,qBAAA,yGAKD,QAAAU,EAAA,CACC,KAAA,qBAAA,GACAV,EAAA,SAEC,KAAA,eAED,CAAA,CACD,EAEF,GAED,SAAA,CACC,oBAAA,CACC,wDAEC,KAAA,WAAA,wBAAA,wDAMF,iBAAA,6BAEE,KAAA,CAAA,YAAAuB,GAAA,KAAA,6GAED,cAGD,OAAA,CASC,8DANEC,EAAA,SAAA,MAIF,qBAMC,OAAA,KAAA,mBAGA,KAAA,MAAA,oBAAA1C,CAAA,CACD,CACD,GAED,QAAA,CACC,cAAA,CACC,KAAA,MAAA,cAAA,IAAA,GAED,sBAAA2C,EAAA,yBAGCC,EAAA,CACC,IAAA,gCACA,OAAA,CACC,SAAAD,CACD,CACD,CAAA,EAAA,KAAAE,GAAA,CACC,QAAA,IAAAA,CAAA,EACAA,EAAA,SAAA,oFAGAA,EAAA,SAAA,yFAIC,WAAA,IAAA,CACC,KAAA,sBAAAF,CAAA,CACD,EAAA,GAAA,CAEF,CAAA,CACD,CACD,CACD,8CArQUrC,GAAA,CAAA,MAAA,wBAAA,EAGAwC,GAAA,CAAA,MAAA,wBAAA,EAGAjB,GAAA,CAAA,MAAA,wBAAA,EAGAU,GAAA,CAAA,MAAA,wBAAA,EAGAQ,GAAA,CAAA,MAAA,wBAAA,EAICC,GAAA,CAAA,MAAA,WAAA,aAyBFC,GAAA,CAAA,MAAA,MAAA,YAOH,MAAA,iGA7GH,QAAA,CAAA,MAAA,iBAAA,EAFH,WAAAX,EAAA,WAAA,sBAAAN,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAK,EAAA,WAAAL,GAKG,QAAAK,EAAA,eAEgB,eAAAR,EAAA,IAAA,OAAA,qDAChBvB,EAAA,EAAA2C,EAAAC,EAAA,CAAA,IAAA,CAAA,CAAA,IAGiBlC,EAAAqB,EAAA,qBAAA,MAAArB,EAAA,8BAyCjBV,IAAAC,EAAA,MAAAL,GAAA,uBACCI,IAAAC,EAAA,MAAAJ,GAAA,CACYkC,EAAA,mBAAA,4BAAX/B,IAAAC,EAAA,MAAAH,GAAA,eAEE2B,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAlB,EAAA,IAAA,CAAA,MAAA,4CAAA,EAAA,qDAAA,EAAA,GAGAkB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAlB,EAAA,IAAA,CAAA,MAAA,gBAAA,EAAA,gFAAA,EAAA,6VAoBDA,EAAA,MAAAkC,GAAA,CACChB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAlB,EAAA,IAAA,CAAA,MAAA,4CAAA,EAAA,yBAAA,EAAA,iDAICA,EAAA,OAAA,KAAA,6DAAA,aAKiB,MAAA,OAAc,YAAAwB,EAAA,qFAzFvCH,EAAA,2BAAA,EA4FQrB,EAAA,OAAA,CAAA,MAAA,WAAA,EAAA,SAAA,EA5FRqB,EAAA,sCAAA,cAiGK5B,EAAA,EAAAC,EAAA,MAAA4C,GAAApB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CACClB,EAAA,IAAA,CAAA,MAAA,cAAA,EAAA,uDAAA,EAAA,SAlGNsB,EAAA,GAAA,EAAA,EAwGItB,EAAA,MAAAmC,GAAA,uBAE8C,CAAAX,EAAA,mBAAA,4BAD7C/B,IAAAC,EAAA,MAAA6C,GAAA,MAUE,KAAA,WACA,MAAA,2BApHP,WAAAhB,EAAA,sBAAA,sBAAAL,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAI,EAAA,sBAAAJ,gCAwHO,MAAA,wIAxHPG,EAAA,GAAA,EAAA,wBAkIkD,CAAAE,EAAA,mBAAA,2CAK3C,QAAAN,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAC,EAAA,WAAA,qBAAA,OAAA,WACiBA,EAAA,WAAA,qBAAA,SAAAG,EAAA,gBAGlB,QAAA,QACA,MAAA,gBA5IN,QAAAP,EAAA,IAAA,CAAAK,EAAA,UAAApB,EAAAsB,EAAA,sBAAA,aAAA,WAAA,EAAA,UAAA,CAAA,yBAAAD,EAAA,GAAA,EAAA,wBAmJiDE,EAAA,mBAAA,2CAK1C,QAAAN,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAC,EAAA,WAAA,sBAAA,OAAA,WACiBA,EAAA,WAAA,sBAAA,SAAAG,EAAA,gBAGlB,MAAA,WA5JN,QAAAP,EAAA,IAAAE,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CAAAG,EAAA,gBAAA,0BAAAC,EAAA,GAAA,EAAA,QAWG7B,IAAAC,EAAA,MAAAN,GAAA,eAEE8B,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAlB,EAAA,IAAA,CAAA,MAAA,WAAA,EAAA,kHAAA,EAAA,QAMC,MAAA,cACA,QAAA,QACC,QAAAkB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAI,EAAA,qBAAA,MArBP,QAAAP,EAAA,IAAAE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAAAG,EAAA,mBAAA,iLAAA,WAAAE,EAAA,qBAAA,sBAAAL,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAI,EAAA,qBAAAJ,KAwCsB,eAAAH,EAAA,IAAA,MAEf,MAAA,OACC,MAAAQ,EAAA,MACO,aAAAD,EAAA,aA5Cf,wBAAAL,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAI,EAAA,aAAAJ,0CA8CoB,MAAA,OAAc,QAAAC,EAAA,WAAA,WAAA,sGA9ClCE,EAAA,GAAA,EAAA,iCC6PArC,GAAA,CACC,KAAA,2CAGC,oBAAAuD,EACA,qBAAAC,IAED,MAAA,CAAA,MAAA,EACA,MAAA,CACC,MAAA,CACC,gBAAA,GACA,gBAAA,6CAGA,yBAAA,GACA,cAAA,kFASD,eAAA,OACC,MAAA,8BAEC,OAAA,CACC,MAAAtC,EAAA,KAAA,OAAA,YAAAA,EAAA,mGAKA,GAAA,KAAA,oBAAAA,EAAA,KAAA,OAAA,YAAAA,EAAA,MACC,MAAA,qIAMF,UAAA0B,EAAA,CACC,KAAA,cAAA,CAAA,0DAEA,WAAA,IAAA,yBAEA,EAAA,GAAA,CACD,IAGF,eAAA,OACC,MAAA,CACC,IAAA,2BACA,OAAA,CACC,MAAA1B,EAAA,KAAA,OAAA,YAAAA,EAAA,uBAGA,GAAA,KAAA,oBAAAA,EAAA,KAAA,OAAA,YAAAA,EAAA,MACC,MAAA,yCAGF,UAAA0B,EAAA,yDAEC,WAAA,IAAA,yBAEA,EAAA,GAAA,CACD,IAGF,iBAAA,OACC,MAAA,8BAEC,OAAA,CACC,MAAA1B,EAAA,KAAA,OAAA,YAAAA,EAAA,uBAGA,GAAA,KAAA,oBAAAA,EAAA,KAAA,OAAA,YAAAA,EAAA,MACC,MAAA,2DAID,KAAA,QAAA,KAAA,CACC,KAAA,8DAED,CAAA,EACA,WAAA,IAAA,yBAEA,EAAA,GAAA,CACD,uBAID,MAAA,CACC,IAAA,6BACA,OAAA,CACC,MAAAA,EAAA,KAAA,OAAA,YAAAA,EAAA,wBAGA,KAAA,QAAA,KAAA,CACC,KAAA,8DAED,CAAA,EACA,WAAA,IAAA,yBAEA,EAAA,GAAA,CACD,EAEF,GAED,QAAA,CACC,iBAAA,CACC,KAAA,WAAA,gBAAA,OAAA,CACC,KAAA,KAAA,KAAA,uDAED,CAAA,GAED,mBAAA,CACC,KAAA,SAAA,CACC,MAAA,cACA,QAAA;AAAA;AAAA;AAAA,gCAKA,YAAA,MACA,OAAAK,GAAA,CACC,KAAA,WAAA,WAAA,OAAA,KAED,CACD,CAAA,CACD,GAED,SAAA,eAEE,MAAA,CACC,QAAA,KAAA,SAAA,cACC,KAAA,KAAA,+BAGD,QAAA,KAAA,SAAA,cACC,KAAA,KAAA,+BAGD,MAAA,KAAA,SAAA,cACC,KAAA,KAAA,KACA,wBAED,OAAA,KAAA,SAAA,cACC,KAAA,KAAA,KACA,uCACD,IAGF,eAAA,CACC,OAAA,KAAA,cAAA,QACD,CACD,CACD,EA/YOpB,GAAA,CAAA,MAAA,UAAA,EACCC,GAAA,CAAA,MAAA,wCAAA,EAuBAC,GAAA,CAAA,MAAA,wCAAA,EAuBAC,GAAA,CAAA,MAAA,wCAAA,EAuBAC,GAAA,CAAA,MAAA,wCAAA,YAaJ,MAAA,0CAoDGuB,GAAA,CAAA,MAAA,gBAAA,EAEIU,GAAA,CAAA,MAAA,eAAA,EAOFQ,GAAA,CAAA,MAAA,MAAA,EA8BAC,GAAA,CAAA,MAAA,WAAA,EAMFI,GAAA,CAAA,MAAA,gBAAA,EAEIH,GAAA,CAAA,MAAA,eAAA,EAGFI,GAAA,CAAA,MAAA,MAAA,EA0CFG,GAAA,CAAA,MAAA,gBAAA,EAEIC,GAAA,CAAA,MAAA,eAAA,uHA5OT,MAAA,oCACe9C,EAAA,KAAA,SAAA,6DAJjB,QAAAmB,EAAA,IAAA,CAUEhB,EAAA,MAAAZ,GAAA,CACCY,EAAA,MAAAX,GAAA,6BAEEW,EAAA,KAAA,CAAA,MAAA,SAAA,EAAA,SAAA,EACAA,EAAA,IAAA,CAAA,MAAA,8BAAA,EAAA,iDAAA,kBAKewB,EAAA,YAAA,wFAnBpB,QAAAR,EAAA,IAAA,MA0BM,MAAA,MACC,SAAAnB,EAAA,KAAA,SAAA,aAAA,CAAA2B,EAAA,YAAA,QACA,QAAAN,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAI,EAAA,kBAAA,MA5BP,QAAAP,EAAA,IAAAE,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CAAAG,EAAA,WAAA,+CAkCGrB,EAAA,MAAAV,GAAA,6BAEEU,EAAA,KAAA,CAAA,MAAA,SAAA,EAAA,SAAA,EACAA,EAAA,IAAA,CAAA,MAAA,8BAAA,EAAA,8CAAA,kBAKewB,EAAA,YAAA,wFA1CpB,QAAAR,EAAA,IAAA,MAiDM,MAAA,MACC,SAAAnB,EAAA,KAAA,SAAA,aAAA,CAAA2B,EAAA,YAAA,QACA,QAAAN,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAI,EAAA,kBAAA,MAnDP,QAAAP,EAAA,IAAAE,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CAAAG,EAAA,WAAA,+CAyDGrB,EAAA,MAAAT,GAAA,6BAEES,EAAA,KAAA,CAAA,MAAA,SAAA,EAAA,OAAA,EACAA,EAAA,IAAA,CAAA,MAAA,8BAAA,EAAA,wCAAA,kBAKewB,EAAA,YAAA,oFAjEpB,QAAAR,EAAA,IAAA,MAwEM,MAAA,MACC,SAAAnB,EAAA,KAAA,SAAA,aAAA,CAAA2B,EAAA,YAAA,MACA,QAAAN,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAI,EAAA,gBAAA,MA1EP,QAAAP,EAAA,IAAAE,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CAAAG,EAAA,SAAA,+CAgFGrB,EAAA,MAAAR,GAAA,6BAEEQ,EAAA,KAAA,CAAA,MAAA,SAAA,EAAA,aAAA,EACAA,EAAA,IAAA,CAAA,MAAA,8BAAA,EAAA,yBAAA,kDAIC,QAAAwB,EAAA,oBAvFN,QAAAR,EAAA,IAAAE,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CAAAG,EAAA,SAAA,+EA4FG5B,IAAAC,EAAA,MAAAsC,GAAA,6BAKEhC,EAAA,KAAA,CAAA,MAAA,SAAA,EAAA,QAAA,EACAA,EAAA,IAAA,CAAA,MAAA,8BAAA,EAAA,0BAAA,kBAGewB,EAAA,YAAA,sFArGpB,QAAAR,EAAA,IAAA,qCA6GM,YAAA,WACC,QAAAE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAI,EAAA,yBAAA,MA9GP,QAAAP,EAAA,IAAAE,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CAAAG,EAAA,SAAA,gDAAAC,EAAA,GAAA,EAAA,2KAAA,WAAAC,EAAA,kBAAA,sBAAAL,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAI,EAAA,kBAAAJ,mGA2IoB,eAAAH,EAAA,IAAA,0CAEfhB,EAAA,IAAA,KAAA,eAAA,EA7ILqB,EAAA,6JAAA,QAiJIrB,EAAA,IAAAe,GAAA,CAjJJG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAAA,eAAA,GAmJKrB,EAAA,OAAAyB,GAAAxB,EAAAJ,EAAA,KAAA,IAAA,EAAA,CAAA,EAnJLqB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAAA,eAAA,UAqJiB,MAAA,cArJjB,WAAAE,EAAA,gBAAA,sBAAAL,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAI,EAAA,gBAAAJ,gCAuJK,MAAA,OACC,QAAAC,EAAA,WAAA,gBAAA,2BAEFpB,EAAA,MAAAiC,GAAA,cAGE,GAAA,eACA,KAAA,WACA,MAAA,oEA/JN,sBAAAf,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAI,EAAA,yBAAAJ,yEAkKY,IAAA,eAAmB,MAAA,4RAlK/B,WAAAI,EAAA,kBAAA,sBAAAL,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAC,GAAAI,EAAA,kBAAAJ,KAuLoB,eAAAH,EAAA,IAAA,CAChBhB,EAAA,MAAAkC,GAAA,CACChB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAlB,EAAA,IAAA,CAAA,MAAA,WAAA,EAAA,mDAAA,EAAA,QAG6B,YAAAuB,EAAA,cA5LlC,uBAAAL,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAI,EAAA,cAAAJ,8BA8LInB,EAAA,IAAAsC,GAAA,CA9LJpB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAAA,eAAA,GAgMKrB,EAAA,OAAAmC,GAAAlC,EAAAJ,EAAA,KAAA,IAAA,EAAA,CAAA,EAhMLqB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAAA,eAAA,UAkMiB,MAAA,cAlMjB,WAAAE,EAAA,gBAAA,sBAAAL,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAI,EAAA,gBAAAJ,2BAmMInB,EAAA,MAAAuC,GAAA,cAGE,GAAA,eACA,KAAA,WACA,MAAA,oEAxMN,sBAAArB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAC,GAAAI,EAAA,yBAAAJ,yEA2MY,IAAA,eAAmB,MAAA,wFAIb,MAAA,OAAc,QAAAC,EAAA,WAAA,cAAA,0HA/MhC,WAAAG,EAAA,yBAAA,sBAAAL,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAC,GAAAI,EAAA,yBAAAJ,mCAAAG,EAAA,GAAA,EAAA,yLAAA,WAAAC,EAAA,gBAAA,sBAAAL,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAC,GAAAI,EAAA,gBAAAJ,KAwOoB,eAAAH,EAAA,IAAA,CAChBE,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAlB,EAAA,IAAA,CAAA,MAAA,WAAA,EAAA,4FAAA,EAAA,GAIAA,EAAA,IAAA0C,GAAA,CA7OJxB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAAA,eAAA,GA+OKrB,EAAA,OAAA2C,GAAA1C,EAAAJ,EAAA,KAAA,IAAA,EAAA,CAAA,EA/OLqB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAG,EAAA,eAAA,UAiPiB,MAAA,cAjPjB,WAAAE,EAAA,gBAAA,sBAAAL,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAC,GAAAI,EAAA,gBAAAJ,gCAkPkB,MAAA,OAAc,QAAAC,EAAA,WAAA,cAAA,sFAlPhCE,EAAA,GAAA,EAAA,iCCWArC,GAAA,CACC,KAAA,eACA,MAAA,CAAA,MAAA,4DAED,YAdkB,MAAA,6IAAjBQ,IAAAC,EAAA,MAAAN,GAAA,0EADDkC,EAAA,GAAA,EAAA"}