{"version":3,"file":"Tags-ByxkPMV0.js","sources":["../../../../dashboard/src/components/Tags.vue"],"sourcesContent":["<template>\n\t<Card title=\"Tags\">\n\t\t<template #actions>\n\t\t\t<Button label=\"Add Tag\" @click=\"showAddDialog = true\" />\n\t\t</template>\n\t\t<div class=\"divide-y\" v-if=\"addedTags?.length\">\n\t\t\t<ListItem v-for=\"tag in addedTags\" :key=\"tag.name\" :title=\"tag.tag\">\n\t\t\t\t<template #actions>\n\t\t\t\t\t<Button icon=\"x\" @click=\"removeTag(tag.name)\" />\n\t\t\t\t</template>\n\t\t\t</ListItem>\n\t\t</div>\n\t\t<div v-else class=\"m-4 text-center\">\n\t\t\t<p class=\"text-base text-gray-500\">No tags added yet</p>\n\t\t</div>\n\t\t<ErrorMessage\n\t\t\t:message=\"\n\t\t\t\t$resources.addTag.error ||\n\t\t\t\t$resources.createTag.error ||\n\t\t\t\t$resources.removeTag.error\n\t\t\t\"\n\t\t/>\n\t</Card>\n\t<Dialog\n\t\t:options=\"{ title: `Add a New Tag for ${doctype}` }\"\n\t\tv-model=\"showAddDialog\"\n\t>\n\t\t<template #body-content>\n\t\t\t<Autocomplete\n\t\t\t\tplaceholder=\"Tags\"\n\t\t\t\t:options=\"getAutocompleteOptions\"\n\t\t\t\tv-model=\"chosenTag\"\n\t\t\t\t@update:modelValue=\"handleAutocompleteSelection\"\n\t\t\t/>\n\t\t\t<FormControl\n\t\t\t\tv-if=\"showNewTagInput\"\n\t\t\t\tv-model=\"newTag\"\n\t\t\t\tclass=\"mt-4\"\n\t\t\t\tplaceholder=\"Enter New Tag's name\"\n\t\t\t/>\n\t\t</template>\n\t\t<template #actions>\n\t\t\t<Button variant=\"solid\" class=\"w-full\" @click=\"addTag()\">{{\n\t\t\t\tshowNewTagInput ? 'Create a New Tag' : 'Add Tag'\n\t\t\t}}</Button>\n\t\t</template>\n\t</Dialog>\n</template>\n<script>\nexport default {\n\tname: 'Tags',\n\tprops: ['name', 'doctype', 'resourceTags', 'tags'],\n\tdata() {\n\t\treturn {\n\t\t\tshowAddDialog: false,\n\t\t\tshowNewTagInput: false,\n\t\t\tchosenTag: '',\n\t\t\tnewTag: '',\n\t\t\taddedTags: [],\n\t\t\tcreateErrorMessage: ''\n\t\t};\n\t},\n\tresources: {\n\t\taddTag() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.dashboard.add_tag',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.name,\n\t\t\t\t\tdoctype: this.doctype,\n\t\t\t\t\ttag: this.newTag\n\t\t\t\t},\n\t\t\t\tvalidate() {\n\t\t\t\t\tif (this.addedTags.find(t => t.name == this.newTag)) {\n\t\t\t\t\t\treturn 'Tag already added';\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonSuccess(d) {\n\t\t\t\t\tthis.addedTags.push(this.tags.find(t => t.name == d));\n\t\t\t\t\tthis.showAddDialog = false;\n\t\t\t\t\tthis.newTag = '';\n\t\t\t\t\tthis.chosenTag = '';\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tremoveTag() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.dashboard.remove_tag',\n\t\t\t\tonSuccess(d) {\n\t\t\t\t\tthis.addedTags = this.addedTags.filter(t => t.name != d);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tcreateTag() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.dashboard.create_new_tag',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.name,\n\t\t\t\t\tdoctype: this.doctype,\n\t\t\t\t\ttag: this.newTag\n\t\t\t\t},\n\t\t\t\tvalidate() {\n\t\t\t\t\tif (this.tags.find(t => t.tag === this.newTag)) {\n\t\t\t\t\t\treturn 'Tag already exists';\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonSuccess(d) {\n\t\t\t\t\tthis.addedTags.push({ name: d.name, tag: d.tag });\n\t\t\t\t\tthis.showNewTagInput = false;\n\t\t\t\t\tthis.newTag = '';\n\t\t\t\t\tthis.chosenTag = '';\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tmethods: {\n\t\taddTag() {\n\t\t\tif (this.showNewTagInput) {\n\t\t\t\tthis.$resources.createTag.submit();\n\t\t\t} else {\n\t\t\t\tthis.$resources.addTag.submit();\n\t\t\t}\n\t\t\tthis.showAddDialog = false;\n\t\t},\n\t\tremoveTag(tagName) {\n\t\t\tthis.$resources.removeTag.submit({\n\t\t\t\tname: this.name,\n\t\t\t\tdoctype: this.doctype,\n\t\t\t\ttag: tagName\n\t\t\t});\n\t\t},\n\t\thandleAutocompleteSelection() {\n\t\t\tif (this.chosenTag.value === 'new_tag') {\n\t\t\t\tthis.showNewTagInput = true;\n\t\t\t} else {\n\t\t\t\tthis.newTag = this.chosenTag.value;\n\t\t\t\tthis.showNewTagInput = false;\n\t\t\t}\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.addedTags = this.resourceTags;\n\t},\n\tcomputed: {\n\t\tgetAutocompleteOptions() {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tgroup: 'New Tag',\n\t\t\t\t\titems: [{ label: 'Create a New Tag', value: 'new_tag' }]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tgroup: 'Existing Tags',\n\t\t\t\t\titems: this.tags.map(t => ({ label: t.tag, value: t.name }))\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\t}\n};\n</script>\n"],"names":["_sfc_main","t","d","tagName","_openBlock","_createElementBlock","_Fragment","_withCtx","_cache","$event","$data","_a","_hoisted_1","_renderList","tag","$options","_hoisted_2","_createElementVNode","$props","_createCommentVNode","_createTextVNode","_toDisplayString"],"mappings":"43BAiDA,MAAAA,EAAA,4DAGC,MAAA,CACC,MAAA,CACC,cAAA,GACA,gBAAA,gBAEA,OAAA,gBAEA,mBAAA,gBAID,QAAA,CACC,MAAA,CACC,IAAA,8BACA,OAAA,CACC,KAAA,KAAA,KACA,QAAA,KAAA,QACA,IAAA,KAAA,kLAUA,KAAA,OAAA,GACA,KAAA,UAAA,EACD,gBAID,MAAA,CACC,IAAA,gGAGA,gBAID,MAAA,CACC,IAAA,qCACA,OAAA,CACC,KAAA,KAAA,KACA,QAAA,KAAA,QACA,IAAA,KAAA,mBAGA,GAAA,KAAA,KAAA,KAAAC,GAAAA,EAAA,MAAA,KAAA,MAAA,2CAKA,KAAA,UAAA,KAAA,CAAA,KAAAC,EAAA,KAAA,IAAAA,EAAA,IAAA,0BAEA,KAAA,OAAA,GACA,KAAA,UAAA,EACD,EAEF,GAED,QAAA,CACC,QAAA,sBAEE,KAAA,WAAA,UAAA,OAAA,EAEA,KAAA,WAAA,OAAA,OAAA,yBAIF,UAAAC,EAAA,CACC,KAAA,WAAA,UAAA,OAAA,CACC,KAAA,KAAA,KACA,QAAA,KAAA,aAED,CAAA,iCAGA,KAAA,UAAA,QAAA,mCAGC,KAAA,OAAA,KAAA,UAAA,8BAGF,GAED,SAAA,CACC,KAAA,UAAA,KAAA,cAED,SAAA,0BAEE,MAAA,CACC,CACC,MAAA,8DAGD,CACC,MAAA,oEAED,EAEF,CACD,CACD,WAvJO,MAAA,qBAOO,MAAA,6EAZd,OAAAC,EAAA,EAAAC,EAAAC,EAAA,KAAA,qBAEa,QAAAC,EAAA,IAAA,MACF,MAAA,UAAiB,QAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAC,EAAA,cAAA,QAH5B,QAAAH,EAAA,IAAA,OAAA,QAK8BI,EAAAD,EAAA,YAAA,MAAAC,EAAA,QAA5BP,IAAAC,EAAA,MAAAO,EAAA,EACCR,EAAA,EAAA,EAAAC,EAAAC,EAAA,KAAAO,EAAAH,EAAA,UAAAI,sCACY,QAAAP,EAAA,IAAA,MACF,KAAA,IAAU,QAAAE,GAAAM,EAAA,UAAAD,EAAA,IAAA,0DAIrBV,EAAA,EAAAC,EAAA,MAAAW,EAAAR,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CACCS,EAAA,IAAA,CAAA,MAAA,yBAAA,EAAA,oBAAA,EAAA,4IAWA,QAAA,CAAA,MAAA,qBAAAC,EAAA,OAAA,EAAA,EAxBH,WAAAR,EAAA,cAAA,sBAAAF,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAC,EAAA,cAAAD,KA2Ba,eAAAF,EAAA,IAAA,MAET,YAAA,OACC,QAAAQ,EAAA,uBA9BL,WAAAL,EAAA,UAAA,sBAAA,wJAAA,WAAAA,EAAA,OAAA,sBAAAF,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAC,EAAA,OAAAD,GAqCI,MAAA,OACA,YAAA,gDAtCJU,EAAA,GAAA,EAAA,IAyCa,QAAAZ,EAAA,IAAA,MACF,QAAA,QAAgB,MAAA,SAAgB,QAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAM,EAAA,YA1C3C,QAAAR,EAAA,IAAA,CAAAa,EAAAC,EAAAX,EAAA,gBAAA,mBAAA,SAAA,EAAA,CAAA"}