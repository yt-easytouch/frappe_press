import{x as u,ao as p,r as f,q as y,o as g,A as h,a2 as r,z as a,ap as b,aF as v,V as c,aB as C,am as E,B as l,y as D,D as n}from"./main-Dpl-JOF2.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},t=new Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="789a995c-ba5c-40f8-ad2a-b27f3c63ad63",e._sentryDebugIdIdentifier="sentry-dbid-789a995c-ba5c-40f8-ad2a-b27f3c63ad63")}catch(i){}})();{var s=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};s._sentryModuleMetadata=s._sentryModuleMetadata||{},s._sentryModuleMetadata[new Error().stack]=Object.assign({},s._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const x={name:"BillingPaymentMethods",props:["tab"],components:{ObjectList:p},computed:{options(){return{doctype:"Stripe Payment Method",fields:["name","is_default","expiry_month","expiry_year","brand","stripe_mandate_id"],emptyStateMessage:"No cards added.",columns:[{label:"Name on Card",fieldname:"name_on_card"},{label:"Card",fieldname:"last_4",width:1.5,format(e){return`•••• ${e}`},prefix:e=>this.cardBrandIcon(e.brand),suffix(e){if(e.is_default)return r(E,{theme:"green"},()=>"Default")}},{label:"Expiry",width:.5,format(e,t){return`${t.expiry_month}/${t.expiry_year}`}},{label:"Mandated",type:"Component",width:1,align:"center",component({row:e}){if(e.stripe_mandate_id)return r(l,{name:"check-circle",class:"h-4 w-4 text-green-600"})}},{label:"",type:"Component",align:"right",component({row:e}){if(e.is_default&&e.stripe_payment_method)return r(D,{text:"The last payment failed on this card. Please use a different card."},()=>r(l,{name:"alert-circle",class:"h-4 w-4 text-red-600"}))}},{label:"",fieldname:"creation",type:"Timestamp",align:"right"}],rowActions:({listResource:e,row:t})=>[{label:"Set as default",onClick:()=>{c.promise(e.runDocMethod.submit({method:"set_default",name:t.name}),{loading:"Setting as default...",success:"Default card set",error:"Could not set default card"})},condition:()=>!t.is_default},{label:"Remove",onClick:()=>{if(t.is_default&&this.$team.doc.payment_mode==="Card"){c.error("Cannot remove default card");return}C({title:"Remove Card",message:"Are you sure you want to remove this card?",onSuccess:({hide:i})=>{c.promise(e.delete.submit(t.name,{onSuccess(){i()}}),{loading:"Removing card...",success:"Card removed",error:o=>{var d;return(d=o.messages)!=null&&d.length?o.messages.join(`
`):o.message||"Could not remove card"}})}})}}],orderBy:"creation desc",primaryAction(){return{label:"Add Card",slots:{prefix:b("plus")},onClick:()=>{let e=a(()=>n(()=>import("./StripeCardDialog-Zd3h2F4i.js"),__vite__mapDeps([0,1,2,3,4])));v(e)}}}}}},methods:{formatCurrency(e){return e===0?"":this.$format.userCurrency(e)},cardBrandIcon(e){let t={"master-card":a(()=>n(()=>import("./MasterCard-DnwQYAr9.js"),__vite__mapDeps([5,1,2]))),visa:a(()=>n(()=>import("./Visa-DlT9BIbR.js"),__vite__mapDeps([6,1,2]))),amex:a(()=>n(()=>import("./Amex-DeZE9HZ9.js"),__vite__mapDeps([7,1,2]))),jcb:a(()=>n(()=>import("./JCB-D_ER5-Zn.js"),__vite__mapDeps([8,1,2]))),generic:a(()=>n(()=>import("./Generic-B8KQIWkl.js"),__vite__mapDeps([9,1,2]))),"union-pay":a(()=>n(()=>import("./UnionPay-B_wR_MmY.js"),__vite__mapDeps([10,1,2])))}[e||"generic"];return r(t,{class:"h-4 w-6"})}}},w={class:"p-5"};function A(e,t,i,o,d,_){const m=f("ObjectList");return g(),y("div",w,[h(m,{options:_.options},null,8,["options"])])}const P=u(x,[["render",A]]);export{P as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/StripeCardDialog-Zd3h2F4i.js","assets/main-Dpl-JOF2.js","assets/main-B0ZLDivw.css","assets/CardForm-DBdGk3af.js","assets/stripe.esm-D4yu_pm0.js","assets/MasterCard-DnwQYAr9.js","assets/Visa-DlT9BIbR.js","assets/Amex-DeZE9HZ9.js","assets/JCB-D_ER5-Zn.js","assets/Generic-B8KQIWkl.js","assets/UnionPay-B_wR_MmY.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=BillingPaymentMethods-CdykVhS9.js.map
