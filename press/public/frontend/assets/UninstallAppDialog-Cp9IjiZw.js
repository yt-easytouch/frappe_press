import{E as A,aC as C,aM as M,aD as E,l as b,ac as O,h as y,o as i,w as S,j as n,q as U,u as g,Y as p,t as w,A as B,a8 as I,Z as j,aA as F,V as N,aa as q}from"./main-Dpl-JOF2.js";(function(){try{var a=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},l=new Error().stack;l&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[l]="0407abe4-d5ff-4669-964d-6bcb0ea0ea8b",a._sentryDebugIdIdentifier="sentry-dbid-0407abe4-d5ff-4669-964d-6bcb0ea0ea8b")}catch(v){}})();{var r=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};r._sentryModuleMetadata=r._sentryModuleMetadata||{},r._sentryModuleMetadata[new Error().stack]=Object.assign({},r._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const P={class:"space-y-4"},T={class:"text-p-base text-gray-800"},$={key:0,class:"space-y-4"},_=A({__name:"UninstallAppDialog",props:C({site:{type:Object,required:!0},app:{type:Object,required:!0}},{modelValue:{type:Boolean,default:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const l=a,v=M(),m=E(a,"modelValue"),d=b(!1),o=b(""),f=b(""),x=["Switched to another tool","Was just testing, not a long-term user","Missing features I needed","Setup and onboarding were too complex","Prefer self-hosting over Easytouch Cloud","Too expensive for my use case","Other"].map(t=>({label:t,value:t})),k=O({url:"press.api.client.run_doc_method",makeParams:()=>{var t;return{dt:"Site",dn:(t=l.site.doc)==null?void 0:t.name,method:"uninstall_app",args:{app:l.app.app,feedback:o.value==="Other"?f.value:o.value}}}}),h=()=>{k.loading||N.promise(k.submit(),{loading:"Scheduling app uninstall...",success:t=>(m.value=!1,v.push({name:"Site Job",params:{name:l.site.name,id:t.message}}),"App uninstall scheduled"),error:t=>q(t)})};return(t,e)=>{const c=I,D=F;return i(),y(D,{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=u=>m.value=u),options:{title:`Uninstall ${a.app.title}`,actions:[{label:"Uninstall",variant:"solid",onClick:h}]}},{"body-content":S(()=>{var u,V;return[n("div",P,[n("p",T,[e[4]||(e[4]=p(" Are you sure you want to uninstall the app ")),n("b",null,w(a.app.title),1),e[5]||(e[5]=p(" from the site ")),n("b",null,w(((u=a.site.doc)==null?void 0:u.host_name)||((V=a.site.doc)==null?void 0:V.name)),1),e[6]||(e[6]=p(" ? ")),e[7]||(e[7]=n("br",null,null,-1)),e[8]||(e[8]=p(" All doctypes and modules related to this app will be removed. "))]),a.app.collect_feedback?(i(),U("div",$,[B(c,{type:"checkbox",label:"Give feedback",modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s)},null,8,["modelValue"]),d.value?(i(),y(c,{key:0,type:"select",label:"Feedback",modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value=s),options:j(x)},null,8,["modelValue","options"])):g("",!0),d.value&&o.value==="Other"?(i(),y(c,{key:1,type:"textarea",label:"Specify feedback",modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=s=>f.value=s)},null,8,["modelValue"])):g("",!0)])):g("",!0)])]}),_:1},8,["modelValue","options"])}}});export{_ as default};
//# sourceMappingURL=UninstallAppDialog-Cp9IjiZw.js.map
