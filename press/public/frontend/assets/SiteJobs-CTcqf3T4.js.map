{"version":3,"file":"SiteJobs-CTcqf3T4.js","sources":["../../../../dashboard/src2/components/site/SiteJobs.vue"],"sourcesContent":["<template>\n\t<ObjectList class=\"p-5\" :options=\"logsOptions\" />\n</template>\n\n<script>\nimport { isMobile } from '../../utils/device';\nimport { duration } from '../../utils/format';\nimport ObjectList from '../ObjectList.vue';\n\nexport default {\n\tname: 'SiteJobs',\n\tprops: ['name'],\n\tcomponents: {\n\t\tObjectList\n\t},\n\tcomputed: {\n\t\tlogsOptions() {\n\t\t\tconst doctype = 'Site';\n\t\t\treturn {\n\t\t\t\tdoctype: 'Agent Job',\n\t\t\t\tfilters: {\n\t\t\t\t\tsite: this.name\n\t\t\t\t},\n\t\t\t\troute(row) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: 'Site Job',\n\t\t\t\t\t\tparams: { id: row.name }\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\torderBy: 'creation desc',\n\t\t\t\tsearchField: 'job_type',\n\t\t\t\tfields: ['end', 'job_id'],\n\t\t\t\tfilterControls() {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'select',\n\t\t\t\t\t\t\tlabel: 'Status',\n\t\t\t\t\t\t\tfieldname: 'status',\n\t\t\t\t\t\t\tclass: !isMobile() ? 'w-24' : '',\n\t\t\t\t\t\t\toptions: ['', 'Pending', 'Running', 'Success', 'Failure']\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'link',\n\t\t\t\t\t\t\tlabel: 'Type',\n\t\t\t\t\t\t\tfieldname: 'job_type',\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tdoctype: 'Agent Job Type',\n\t\t\t\t\t\t\t\torderBy: 'name asc',\n\t\t\t\t\t\t\t\tpageLength: 100\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\t\t\t\t},\n\t\t\t\tcolumns: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Job Type',\n\t\t\t\t\t\tfieldname: 'job_type',\n\t\t\t\t\t\tclass: 'font-medium'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Status',\n\t\t\t\t\t\tfieldname: 'status',\n\t\t\t\t\t\ttype: 'Badge',\n\t\t\t\t\t\twidth: 0.5\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Site',\n\t\t\t\t\t\tfieldname: 'site',\n\t\t\t\t\t\twidth: 1.2,\n\t\t\t\t\t\tcondition: () => doctype !== 'Site'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Duration',\n\t\t\t\t\t\tfieldname: 'duration',\n\t\t\t\t\t\twidth: 0.35,\n\t\t\t\t\t\tformat(value, row) {\n\t\t\t\t\t\t\tif (row.job_id === 0 || !row.end) return;\n\t\t\t\t\t\t\treturn duration(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Created By',\n\t\t\t\t\t\tfieldname: 'owner'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: '',\n\t\t\t\t\t\tfieldname: 'creation',\n\t\t\t\t\t\ttype: 'Timestamp',\n\t\t\t\t\t\twidth: 0.5,\n\t\t\t\t\t\talign: 'right'\n\t\t\t\t\t}\n\t\t\t\t].filter(c => (c.condition ? c.condition() : true))\n\t\t\t};\n\t\t}\n\t}\n};\n</script>\n"],"names":["_sfc_main","ObjectList","doctype","row","value","duration","c","$options"],"mappings":"6tBASA,MAAAA,EAAA,CACC,KAAA,WACA,MAAA,CAAA,MAAA,cAEC,WAAAC,GAED,SAAA,eAEE,MAAAC,EAAA,OACA,MAAA,CACC,QAAA,YACA,QAAA,0BAIC,MAAA,CACC,KAAA,WACA,OAAA,CAAA,GAAAC,EAAA,IAAA,2EAMF,gBAAA,CACC,MAAA,CACC,eAEC,MAAA,SACA,UAAA,mFAID,0BAGC,UAAA,WACA,QAAA,0BAEC,QAAA,yBAED,CACD,IAGF,QAAA,CACC,CACC,MAAA,WACA,UAAA,WACA,MAAA,eAED,CACC,MAAA,SACA,UAAA,sBAEA,MAAA,IAED,cAEC,UAAA,OACA,MAAA,8BAGD,CACC,MAAA,WACA,UAAA,qBAEA,OAAAC,EAAAD,EAAA,CACC,GAAA,EAAAA,EAAA,SAAA,GAAA,CAAAA,EAAA,KACA,OAAAE,EAAAD,CAAA,CACD,GAED,CACC,MAAA,aACA,UAAA,SAED,CACC,MAAA,GACA,UAAA,WACA,KAAA,YACA,MAAA,gBAED,CACD,EAAA,OAAAE,GAAAA,EAAA,UAAAA,EAAA,UAAA,EAAA,EAAA,EAEF,CACD,CACD,kEA9Fa,MAAA,MAAa,QAAAC,EAAA"}