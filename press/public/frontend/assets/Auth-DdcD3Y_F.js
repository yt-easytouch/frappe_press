var B=Object.defineProperty,C=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var E=(s,e,t)=>e in s?B(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,w=(s,e)=>{for(var t in e||(e={}))A.call(e,t)&&E(s,t,e[t]);if(S)for(var t of S(e))D.call(e,t)&&E(s,t,e[t]);return s},h=(s,e)=>C(s,j(e));var L=(s,e,t)=>new Promise((k,o)=>{var n=l=>{try{c(t.next(l))}catch(y){o(y)}},f=l=>{try{c(t.throw(l))}catch(y){o(y)}},c=l=>l.done?k(l.value):Promise.resolve(l.value).then(n,f);c((t=t.apply(s,e)).next())});import{_ as q}from"./GoogleIconSolid-CpO1UNWZ.js";import{x as N,r as x,q as a,o as r,A as i,w as p,u as m,j as g,Y as u,t as _,a7 as R,F as v,h as V,a8 as U,X as M,a9 as O,n as W}from"./main-Dpl-JOF2.js";import{L as z}from"./LoginBox-DSVNkn_s.js";import"./YooltechLogo-DH5Linvn.js";import"./ETLogo-Ziye5dPH.js";import"./toast-Dk0nDfLL.js";(function(){try{var s=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},e=new Error().stack;e&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[e]="e4338c5a-9e01-49cd-b546-fb993d97b724",s._sentryDebugIdIdentifier="sentry-dbid-e4338c5a-9e01-49cd-b546-fb993d97b724")}catch(t){}})();{var b=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};b._sentryModuleMetadata=b._sentryModuleMetadata||{},b._sentryModuleMetadata[new Error().stack]=Object.assign({},b._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const K={name:"Signup",components:{LoginBox:z,GoogleIconSolid:q},data(){return{email:null,password:null,signupEmailSent:!1,resetPasswordEmailSent:!1,loginError:null}},resources:{signup(){return{url:"press.api.account.signup",params:{email:this.email,referrer:this.getReferrerIfAny(),product:this.$route.query.product},onSuccess(){this.signupEmailSent=!0}}},googleLogin(){return{url:"press.api.oauth.google_login",onSuccess(s){window.location=s}}},resetPassword(){return{url:"press.api.account.send_reset_password_email",params:{email:this.email},onSuccess(){this.resetPasswordEmailSent=!0}}},signupSettings(){return{url:"press.api.account.signup_settings",params:{product:this.$route.query.product},auto:!0}}},methods:{submitForm(){return L(this,null,function*(){if(this.isLogin){if(this.email&&this.password)try{yield this.$auth.login(this.email,this.password)}catch(s){console.log(s),this.loginError=s.messages.join(`
`)}}else this.hasForgotPassword?this.$resources.resetPassword.submit():this.$resources.signup.submit()})},getReferrerIfAny(){const s=location.search;return new URLSearchParams(s).get("referrer")}},computed:{saasProduct(){var s;return(s=this.$resources.signupSettings.data)==null?void 0:s.product_trial},isLogin(){return this.$route.name=="Login"&&!this.$route.query.forgot},hasForgotPassword(){return this.$route.name=="Login"&&this.$route.query.forgot}}},T={class:"h-screen bg-gray-50"},X={key:0},Y={key:0,class:"mb-8 text-center text-p-base text-gray-900"},$={key:0},G={key:1},H={class:"font-semibold"},J={key:0,class:"mt-2"},Q={key:1,class:"flex flex-col"},Z={class:"flex items-center"},ee={key:2,class:"mt-6 text-center"},se={key:1,class:"text-p-base text-gray-700"},oe={key:0},te={class:"font-semibold"},re={key:1},ne={class:"font-semibold"};function ae(s,e,t,k,o,n){const f=U,c=x("router-link"),l=M,y=O,F=q,I=x("LoginBox");return r(),a("div",T,[i(I,{class:W({"pointer-events-none":s.$resources.signup.loading})},{default:p(()=>{var P;return[o.signupEmailSent||o.resetPasswordEmailSent?(r(),a("div",se,[o.signupEmailSent?(r(),a("p",oe,[e[14]||(e[14]=u(" We have sent an email to ")),g("span",te,_(o.email),1),e[15]||(e[15]=u(". Please click on the link received to verify your email and set up your account. "))])):m("",!0),o.resetPasswordEmailSent?(r(),a("p",re,[e[16]||(e[16]=u(" We have sent an email to ")),g("span",ne,_(o.email),1),e[17]||(e[17]=u(". Please click on the link received to reset your password. "))])):m("",!0)])):(r(),a("div",X,[n.hasForgotPassword||n.saasProduct?(r(),a("div",Y,[n.hasForgotPassword?(r(),a("div",$,"Reset password")):n.saasProduct?(r(),a("div",G,[e[6]||(e[6]=u(" Sign in to Easytouch Cloud to start using ")),g("span",H,_(n.saasProduct.title),1)])):m("",!0)])):m("",!0),g("form",{class:"flex flex-col",onSubmit:e[4]||(e[4]=R((...d)=>n.submitForm&&n.submitForm(...d),["prevent"]))},[n.hasForgotPassword?(r(),a(v,{key:0},[i(f,{label:"Email",type:"email",placeholder:"johndoe@mail.com",autocomplete:"email",modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=d=>o.email=d),required:""},null,8,["modelValue"]),n.hasForgotPassword?(r(),V(c,{key:0,class:"mt-2 text-sm",to:{name:"Login",query:h(w({},s.$route.query),{forgot:void 0})}},{default:p(()=>e[7]||(e[7]=[u(" I remember my password ")])),_:1},8,["to"])):m("",!0),i(l,{class:"mt-4",loading:s.$resources.resetPassword.loading,variant:"solid"},{default:p(()=>e[8]||(e[8]=[u(" Reset Password ")])),_:1},8,["loading"])],64)):n.isLogin?(r(),a(v,{key:1},[i(f,{label:"Email",placeholder:"johndoe@mail.com",autocomplete:"email",modelValue:o.email,"onUpdate:modelValue":e[1]||(e[1]=d=>o.email=d),required:""},null,8,["modelValue"]),i(f,{class:"mt-4",label:"Password",type:"password",placeholder:"•••••",modelValue:o.password,"onUpdate:modelValue":e[2]||(e[2]=d=>o.password=d),name:"password",autocomplete:"current-password",required:""},null,8,["modelValue"]),n.isLogin?(r(),a("div",J,[i(c,{class:"text-sm",to:{name:"Login",query:h(w({},s.$route.query),{forgot:1})}},{default:p(()=>e[9]||(e[9]=[u(" Forgot Password? ")])),_:1},8,["to"])])):m("",!0),i(l,{class:"mt-4",variant:"solid"},{default:p(()=>e[10]||(e[10]=[u(" Log in with email ")])),_:1}),i(y,{class:"mt-2",message:o.loginError},null,8,["message"])],64)):(r(),a(v,{key:2},[i(f,{label:"Email",type:"email",placeholder:"johndoe@mail.com",autocomplete:"email",modelValue:o.email,"onUpdate:modelValue":e[3]||(e[3]=d=>o.email=d),required:""},null,8,["modelValue"]),i(l,{class:"mt-2",loading:s.$resources.signup.loading,variant:"solid"},{default:p(()=>e[11]||(e[11]=[u(" Sign up with email ")])),_:1},8,["loading"])],64)),i(y,{class:"mt-2",message:s.$resources.signup.error},null,8,["message"])],32),n.hasForgotPassword?m("",!0):(r(),a("div",Q,[e[13]||(e[13]=g("div",{class:"-mb-2 mt-6 border-t text-center"},[g("div",{class:"-translate-y-1/2 transform"},[g("span",{class:"relative bg-white px-2 text-sm font-medium leading-8 text-gray-800"}," Or continue with ")])],-1)),((P=s.$resources.signupSettings.data)==null?void 0:P.enable_google_oauth)===1?(r(),V(l,{key:0,variant:"solid",loading:s.$resources.googleLogin.loading,onClick:e[5]||(e[5]=d=>s.$resources.googleLogin.submit())},{default:p(()=>[g("div",Z,[i(F,{class:"w-4"}),e[12]||(e[12]=g("span",{class:"ml-2"},"Google",-1))])]),_:1},8,["loading"])):m("",!0)])),o.signupEmailSent||o.resetPasswordEmailSent?m("",!0):(r(),a("div",ee,[i(c,{class:"text-center text-base font-medium",to:{name:s.$route.name=="Login"?"Signup":"Login",query:h(w({},s.$route.query),{forgot:void 0})}},{default:p(()=>[u(_(s.$route.name=="Login"?"New member? Create a new account.":"Already have an account? Log in."),1)]),_:1},8,["to"])]))]))]}),_:1},8,["class"])])}const ce=N(K,[["render",ae]]);export{ce as default};
//# sourceMappingURL=Auth-DdcD3Y_F.js.map
