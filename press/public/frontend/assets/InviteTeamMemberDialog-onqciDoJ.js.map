{"version":3,"file":"InviteTeamMemberDialog-onqciDoJ.js","sources":["../../../../dashboard/src2/components/settings/InviteTeamMemberDialog.vue"],"sourcesContent":["<template>\n\t<Dialog\n\t\t:options=\"{\n\t\t\ttitle: 'Add New Member',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Invite Member',\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tonClick: inviteMember,\n\t\t\t\t},\n\t\t\t],\n\t\t}\"\n\t\tv-model=\"show\"\n\t>\n\t\t<template #body-content>\n\t\t\t<div class=\"space-y-4\">\n\t\t\t\t<FormControl label=\"Email\" v-model=\"email\" />\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"$resources.roles.data?.length > 0\"\n\t\t\t\t\tclass=\"flex items-center space-x-2\"\n\t\t\t\t>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tclass=\"w-full\"\n\t\t\t\t\t\ttype=\"autocomplete\"\n\t\t\t\t\t\tlabel=\"Select Roles\"\n\t\t\t\t\t\t:options=\"roleOptions\"\n\t\t\t\t\t\tv-model=\"selectedRole\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tlabel=\"Add\"\n\t\t\t\t\t\ticon-left=\"plus\"\n\t\t\t\t\t\t:disabled=\"!selectedRole\"\n\t\t\t\t\t\t@click=\"addRole\"\n\t\t\t\t\t\tclass=\"mt-5\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"selectedRoles.length > 0\"\n\t\t\t\t\tclass=\"divide-y rounded border border-gray-300 px-1.5\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex w-full items-center space-x-2 py-1.5\"\n\t\t\t\t\t\tv-for=\"role in selectedRoles\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"flex w-full items-center justify-between px-3 py-2\">\n\t\t\t\t\t\t\t<div class=\"text-base text-gray-800\">{{ role.label }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclass=\"ml-auto\"\n\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\ticon=\"x\"\n\t\t\t\t\t\t\t@click=\"removeRole(role.value)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n\n<script>\nimport { toast } from 'vue-sonner';\nimport { DashboardError } from '../../utils/error';\nimport { getToastErrorMessage } from '../../utils/toast';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\temail: '',\n\t\t\tshow: true,\n\t\t\tselectedRoles: [],\n\t\t\tselectedRole: null,\n\t\t};\n\t},\n\tresources: {\n\t\troles() {\n\t\t\treturn {\n\t\t\t\ttype: 'list',\n\t\t\t\tdoctype: 'Press Role',\n\t\t\t\tfields: ['name', 'title'],\n\t\t\t\tinitialData: [],\n\t\t\t\tauto: true,\n\t\t\t};\n\t\t},\n\t},\n\tcomputed: {\n\t\troleOptions() {\n\t\t\treturn this.$resources.roles.data\n\t\t\t\t.filter((role) => {\n\t\t\t\t\treturn !this.selectedRoles.some(\n\t\t\t\t\t\t(selectedRole) => selectedRole.value === role.name,\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t\t.map((role) => ({\n\t\t\t\t\tlabel: role.title,\n\t\t\t\t\tvalue: role.name,\n\t\t\t\t}));\n\t\t},\n\t},\n\tmethods: {\n\t\taddRole() {\n\t\t\tif (this.selectedRole) {\n\t\t\t\tthis.selectedRoles.push(this.selectedRole);\n\t\t\t\tthis.selectedRole = null;\n\t\t\t}\n\t\t},\n\t\tremoveRole(roleToRemove) {\n\t\t\tthis.selectedRoles = this.selectedRoles.filter(\n\t\t\t\t(role) => role.value !== roleToRemove,\n\t\t\t);\n\t\t},\n\t\tinviteMember() {\n\t\t\ttoast.promise(\n\t\t\t\tthis.$team.inviteTeamMember.submit(\n\t\t\t\t\t{\n\t\t\t\t\t\temail: this.email,\n\t\t\t\t\t\troles: this.selectedRoles.map((role) => role.value),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tvalidate: () => {\n\t\t\t\t\t\t\tif (!this.email) {\n\t\t\t\t\t\t\t\tthrow new DashboardError('Email is required');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t\t{\n\t\t\t\t\tloading: 'Sending Invite...',\n\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\tthis.show = false;\n\t\t\t\t\t\treturn 'Invite Sent!';\n\t\t\t\t\t},\n\t\t\t\t\terror: (e) => getToastErrorMessage(e),\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t},\n};\n</script>\n"],"names":["_sfc_main","role","roleToRemove","DashboardError","getToastErrorMessage","_hoisted_1","_hoisted_4","_hoisted_5","_hoisted_6","$data","_cache","$event","_withCtx","_createElementVNode","_a","_ctx","_openBlock","_createElementBlock","_hoisted_2","$options","_createCommentVNode","_hoisted_3","_Fragment","_renderList","_toDisplayString"],"mappings":"gyBAiEA,MAAAA,EAAA,CACC,MAAA,CACC,MAAA,CACC,MAAA,GACA,KAAA,GACA,cAAA,CAAA,EACA,aAAA,kBAID,OAAA,CACC,MAAA,aAEC,QAAA,qCAEA,YAAA,CAAA,EACA,KAAA,MAIH,SAAA,eAEE,OAAA,KAAA,WAAA,MAAA,KACC,OAAAC,GACC,CAAA,KAAA,cAAA,2BAID,IAAAA,IAAA,CACC,MAAAA,EAAA,MACA,MAAAA,EAAA,IACD,EAAA,IAGH,QAAA,CACC,SAAA,CACC,KAAA,eACC,KAAA,cAAA,KAAA,KAAA,YAAA,yCAKD,KAAA,cAAA,KAAA,cAAA,OACCA,GAAAA,EAAA,QAAAC,IAGF,cAAA,WAEE,KAAA,MAAA,iBAAA,OACC,CACC,MAAA,KAAA,gDAGD,eAEE,GAAA,CAAA,KAAA,MACC,MAAA,IAAAC,EAAA,mBAAA,KAKJ,0CAGE,KAAA,KAAA,GACA,gBAED,MAAA,GAAAC,EAAA,CAAA,KAKL,EA1HQC,EAAA,CAAA,MAAA,WAAA,WAIH,MAAA,wCAmBA,MAAA,kDAGCC,EAAA,CAAA,MAAA,2CAAA,EAGKC,EAAA,CAAA,MAAA,oDAAA,EACCC,EAAA,CAAA,MAAA,yBAAA,sKA7CZ,WAAAC,EAAA,KAAA,sBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAF,EAAA,KAAAE,KAca,eAAAC,EAAA,IAAA,OAAA,OACVC,EAAA,MAAAR,EAAA,MACc,MAAA,QAhBjB,WAAAI,EAAA,MAAA,sBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAF,EAAA,MAAAE,6BAkBWG,EAAAC,EAAA,WAAA,MAAA,OAAA,YAAAD,EAAA,QAAA,GADPE,IAAAC,EAAA,MAAAC,EAAA,MAKE,MAAA,SACA,KAAA,eACA,MAAA,eACC,QAAAC,EAAA,YAzBP,WAAAV,EAAA,aAAA,sBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAF,EAAA,aAAAE,0CA6BM,MAAA,MACA,YAAA,OACC,SAAA,CAAAF,EAAA,aACA,QAAAU,EAAA,QACD,MAAA,0CAjCNC,EAAA,GAAA,EAAA,EAqCWX,EAAA,cAAA,OAAA,GADPO,IAAAC,EAAA,MAAAI,EAAA,EAICL,EAAA,EAAA,EAAAC,EAAAK,EAAA,KAAAC,EAAAd,EAAA,cAAAR,IAAAe,EAAA,EAAAC,EAAA,MAAAX,EAAA,CAICO,EAAA,MAAAN,EAAA,CACCM,EAAA,MAAAL,EAAAgB,EAAAvB,EAAA,KAAA,EAAA,CAAA,SAGA,MAAA,UACA,QAAA,QACA,KAAA,IACC,QAAAU,GAAAQ,EAAA,WAAAlB,EAAA,KAAA,oCAnDRmB,EAAA,GAAA,EAAA"}