import{x as A,z as r,D as d,r as h,h as _,o as i,w as a,A as s,q as g,u as b,X as k,Y as u,j as l,F as $,v as M,k as V,t as D,a5 as P,C as T,aA as S,af as F}from"./main-Dpl-JOF2.js";import{_ as I}from"./Card-BCzTSeNK.js";import{_ as U}from"./ListItem-CkkFcC1t.js";import z from"./StripeCard-BRr8QCrN.js";import{F as O}from"./FinalizeInvoicesDialog-A1jpR8yn.js";import"./StripeLogo-BRF2qIyd.js";import"./AddressForm-Cz0XUJgF.js";import"./Form-CIPLpg2e.js";import"./stripe.esm-D4yu_pm0.js";(function(){try{var t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="758858ad-7eb5-4429-a6fc-4313c1b74001",t._sentryDebugIdIdentifier="sentry-dbid-758858ad-7eb5-4429-a6fc-4313c1b74001")}catch(w){}})();{var v=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};v._sentryModuleMetadata=v._sentryModuleMetadata||{},v._sentryModuleMetadata[new Error().stack]=Object.assign({},v._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const N={name:"AccountBillingDetails",emits:["updated"],components:{UpdateBillingDetails:r(()=>d(()=>import("./UpdateBillingDetails-DpNU6Kwd.js"),__vite__mapDeps([0,1,2,3,4])))},resources:{billingDetails:"press.api.billing.details"},data(){return{editBillingDetails:!1}}},x={key:0,class:"divide-y"};function j(t,e,w,B,n,m){const p=k,f=h("UpdateBillingDetails"),c=U,C=I;return i(),_(C,{title:"Billing details",subtitle:"Your billing details are shown in the monthly invoice"},{actions:a(()=>[s(p,{onClick:e[0]||(e[0]=y=>n.editBillingDetails=!0)},{default:a(()=>e[3]||(e[3]=[u("Update")])),_:1})]),default:a(()=>[s(f,{modelValue:n.editBillingDetails,"onUpdate:modelValue":e[1]||(e[1]=y=>n.editBillingDetails=y),onUpdated:e[2]||(e[2]=y=>{n.editBillingDetails=!1,t.$resources.billingDetails.reload()})},null,8,["modelValue"]),t.$resources.billingDetails.data?(i(),g("div",x,[s(c,{title:"Billing Name",description:t.$resources.billingDetails.data.billing_name},null,8,["description"]),s(c,{title:"Billing Address",description:t.$resources.billingDetails.data.billing_address||"Not set"},null,8,["description"]),t.$account.team.country=="India"?(i(),_(c,{key:0,title:"Tax ID",description:t.$resources.billingDetails.data.gstin||"Not set"},null,8,["description"])):b("",!0)])):b("",!0)]),_:1})}const Y=A(N,[["render",j]]),q={name:"AccountBillingCards",data(){return{showAddCardDialog:!1,showRemoveCardDialog:!1,showFinalizeDialog:!1,cardToRemove:null}},resources:{paymentMethods:{url:"press.api.billing.get_payment_methods",auto:!0},setAsDefault:{url:"press.api.billing.set_as_default"},remove(){return{url:"press.api.billing.remove_payment_method",onSuccess:t=>{t==="Unpaid Invoices"&&(this.showFinalizeDialog=!0)}}}},components:{StripeCard:r(()=>d(()=>import("./StripeCard-BRr8QCrN.js"),__vite__mapDeps([5,6,1,2,3,4,7]))),FinalizeInvoicesDialog:O},computed:{subtitle(){var t;return this.$resources.paymentMethods.loading||((t=this.$resources.paymentMethods.data)==null?void 0:t.length)>0?"Cards you have added for automatic billing":"You haven't added any cards yet"},cardBrand(){return{mastercard:r(()=>d(()=>import("./MasterCard-DnwQYAr9.js"),__vite__mapDeps([8,1,2]))),visa:r(()=>d(()=>import("./Visa-DlT9BIbR.js"),__vite__mapDeps([9,1,2]))),amex:r(()=>d(()=>import("./Amex-DeZE9HZ9.js"),__vite__mapDeps([10,1,2]))),jcb:r(()=>d(()=>import("./JCB-D_ER5-Zn.js"),__vite__mapDeps([11,1,2]))),generic:r(()=>d(()=>import("./Generic-B8KQIWkl.js"),__vite__mapDeps([12,1,2]))),"union-pay":r(()=>d(()=>import("./UnionPay-B_wR_MmY.js"),__vite__mapDeps([13,1,2])))}}},methods:{dropdownItems(t){return[!t.is_default&&{label:"Set as default",onClick:()=>this.confirmSetAsDefault(t)},{label:"Remove",onClick:()=>{this.cardToRemove=t,this.showRemoveCardDialog=!0}}]},confirmSetAsDefault(t){this.$confirm({title:"Set as default",message:"Set this card as the default payment method?",actionLabel:"Set as default",resource:this.$resources.setAsDefault,action:e=>{this.$resources.setAsDefault.submit({name:t.name}).then(()=>{this.$resources.paymentMethods.reload(),e()})}})}}},K={class:"space-y-3"},X={class:"flex"},H={class:"my-auto"},J={class:"text-lg font-medium text-gray-900"},Q={class:"mt-1 text-sm text-gray-600"},W={key:0};function Z(t,e,w,B,n,m){const p=k,f=z,c=S,C=P,y=T,E=I,R=h("FinalizeInvoicesDialog"),L=F;return i(),g($,null,[s(E,{title:"Payment methods",subtitle:m.subtitle},{actions:a(()=>[s(p,{onClick:e[0]||(e[0]=o=>n.showAddCardDialog=!0)},{default:a(()=>e[5]||(e[5]=[u(" Add Card ")])),_:1}),s(c,{options:{title:"Add new card"},modelValue:n.showAddCardDialog,"onUpdate:modelValue":e[2]||(e[2]=o=>n.showAddCardDialog=o)},{"body-content":a(()=>[n.showAddCardDialog?(i(),_(f,{key:0,class:"mb-1",onComplete:e[1]||(e[1]=o=>{n.showAddCardDialog=!1,t.$resources.paymentMethods.reload()})})):b("",!0)]),_:1},8,["modelValue"])]),default:a(()=>[l("div",K,[(i(!0),g($,null,M(t.$resources.paymentMethods.data,o=>(i(),g("div",{class:"flex items-center justify-between rounded-lg border p-5",key:o.name},[l("div",X,[o.brand?(i(),_(V(m.cardBrand[o.brand]),{key:0,class:"mr-6 w-12 h-12"})):(i(),_(V(m.cardBrand.generic),{key:1,class:"mr-6 w-12 h-12"})),l("div",H,[l("div",J,[u(D(o.name_on_card)+" ",1),e[6]||(e[6]=l("span",{class:"text-gray-500"},"••••",-1)),u(" "+D(o.last_4)+" ",1),o.is_default?(i(),_(C,{key:0,label:"Default"})):b("",!0)]),l("div",Q,[l("span",null," Valid till "+D(o.expiry_month)+"/"+D(o.expiry_year),1),e[7]||(e[7]=u(" · ")),l("span",null,"Added on "+D(t.$date(o.creation).toLocaleString()),1)])])]),s(y,{options:m.dropdownItems(o),right:""},{default:a(({open:ne})=>[s(p,{icon:"more-horizontal"})]),_:2},1032,["options"])]))),128))])]),_:1},8,["subtitle"]),s(R,{modelValue:n.showFinalizeDialog,"onUpdate:modelValue":e[3]||(e[3]=o=>n.showFinalizeDialog=o)},null,8,["modelValue"]),s(c,{options:{title:"Remove Payment Method",actions:[{label:"Remove",variant:"solid",theme:"red",onClick:()=>{t.$resources.remove.submit({name:n.cardToRemove.name}).then(()=>{t.$resources.paymentMethods.reload(),this.showRemoveCardDialog=!1})}},{label:"Cancel",onClick:()=>this.showRemoveCardDialog=!1}]},modelValue:n.showRemoveCardDialog,"onUpdate:modelValue":e[4]||(e[4]=o=>n.showRemoveCardDialog=o)},{"body-content":a(()=>[e[11]||(e[11]=l("span",null,"Are you sure you want to remove this payment method?",-1)),e[12]||(e[12]=l("br",null,null,-1)),e[13]||(e[13]=l("br",null,null,-1)),t.$resources.paymentMethods.data.length===1?(i(),g("span",W,[e[9]||(e[9]=u(" If you intend to close your account please check the docs for ")),s(L,{target:"_blank",href:"https://easytouch.cloud/docs/billing/disable-account"},{default:a(()=>e[8]||(e[8]=[u("cancelling subscription.")])),_:1}),e[10]||(e[10]=u(" Easytouch Cloud is not responsible for any refund if the account is not closed properly. "))])):b("",!0)]),_:1},8,["options","modelValue"])],64)}const G=A(q,[["render",Z]]),ee={name:"BillingScreen",pageMeta(){return{title:"Billing - Easytouch Cloud"}},props:["invoiceName"],components:{AccountBillingDetails:Y,AccountBillingCards:G}},te={class:"space-y-5"};function oe(t,e,w,B,n,m){const p=h("AccountBillingDetails"),f=h("AccountBillingCards");return i(),g("div",te,[s(p),s(f)])}const ce=A(ee,[["render",oe]]);export{ce as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/UpdateBillingDetails-DpNU6Kwd.js","assets/main-Dpl-JOF2.js","assets/main-B0ZLDivw.css","assets/AddressForm-Cz0XUJgF.js","assets/Form-CIPLpg2e.js","assets/StripeCard-BRr8QCrN.js","assets/StripeLogo-BRF2qIyd.js","assets/stripe.esm-D4yu_pm0.js","assets/MasterCard-DnwQYAr9.js","assets/Visa-DlT9BIbR.js","assets/Amex-DeZE9HZ9.js","assets/JCB-D_ER5-Zn.js","assets/Generic-B8KQIWkl.js","assets/UnionPay-B_wR_MmY.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=PaymentMethods-DscSrwJj.js.map
