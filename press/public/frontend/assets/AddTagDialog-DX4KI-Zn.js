import{x as _,a8 as p,ar as w,aA as c,h as l,o as r,w as y,u as g,bf as T,av as b}from"./main-Dpl-JOF2.js";(function(){try{var t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="1816d937-539e-4ef1-beed-ea578d1f7044",t._sentryDebugIdIdentifier="sentry-dbid-1816d937-539e-4ef1-beed-ea578d1f7044")}catch(f){}})();{var s=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};s._sentryModuleMetadata=s._sentryModuleMetadata||{},s._sentryModuleMetadata[new Error().stack]=Object.assign({},s._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const h={name:"AddTagDialog",props:["doctype","docname"],emits:["added","removed"],components:{Dialog:c,Autocomplete:w,FormControl:p},data(){return{selectedTag:null,newTag:"",show:!0}},resources:{existingTags(){return{type:"list",doctype:"Press Tag",filters:{doctype_name:this.doctype},fields:["tag"],pageLength:1e3,auto:!0}}},methods:{addNewTag(t){if(!t)return;let e=b(this.doctype,this.docname);if(e)return e.addTag.submit({tag:t}).then(()=>{this.$emit("added",t),this.show=!1})}},computed:{tagOptions(){return[{label:"Create new tag",value:"__new__"},...(this.$resources.existingTags.data||[]).map(t=>({label:t.tag,value:t.tag}))]}}};function v(t,e,f,V,n,d){const i=p,m=c;return r(),l(m,{options:{title:"Add tag",actions:[{label:"Add",variant:"solid",onClick:()=>{var o;return d.addNewTag(((o=n.selectedTag)==null?void 0:o.value)==="__new__"?n.newTag:n.selectedTag.value)}}]},modelValue:n.show,"onUpdate:modelValue":e[3]||(e[3]=o=>n.show=o)},{"body-content":y(()=>{var o,u;return[((o=n.selectedTag)==null?void 0:o.value)!=="__new__"?(r(),l(i,{key:0,label:"Select tag",type:"autocomplete",modelValue:n.selectedTag,"onUpdate:modelValue":e[0]||(e[0]=a=>n.selectedTag=a),options:d.tagOptions},null,8,["modelValue","options"])):g("",!0),((u=n.selectedTag)==null?void 0:u.value)==="__new__"?(r(),l(i,{key:1,modelValue:n.newTag,"onUpdate:modelValue":e[1]||(e[1]=a=>n.newTag=a),label:"Enter new tag and press enter",placeholder:"production, staging, testing",onKeydown:e[2]||(e[2]=T(a=>d.addNewTag(a.target.value),["enter"]))},null,8,["modelValue"])):g("",!0)]}),_:1},8,["options","modelValue"])}const k=_(h,[["render",v]]);export{k as default};
//# sourceMappingURL=AddTagDialog-DX4KI-Zn.js.map
