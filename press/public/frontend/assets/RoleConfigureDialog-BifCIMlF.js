import{x as M,aR as A,aS as C,az as T,r as v,h as p,u as g,o as a,w as c,A as r,j as t,n as N,t as W,q as m,ar as $,X as E,F,v as L,$ as R,aA as j,V,aa as y}from"./main-Dpl-JOF2.js";import{_ as U}from"./Switch.vue_vue_type_script_setup_true_lang-5F9QrvuO.js";import{_ as z}from"./UserWithAvatarCell-B71k87PQ.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},l=new Error().stack;l&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[l]="49a786f0-48f5-48f5-972e-57225eb0d9cc",e._sentryDebugIdIdentifier="sentry-dbid-49a786f0-48f5-48f5-972e-57225eb0d9cc")}catch(n){}})();{var _=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};_._sentryModuleMetadata=_._sentryModuleMetadata||{},_._sentryModuleMetadata[new Error().stack]=Object.assign({},_._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const q={props:{roleId:{type:String,required:!0}},components:{UserWithAvatarCell:z,FTabs:T,TabPanel:C,TabList:A,Switch:U},data(){return{member:{},show:!0,tabIndex:0}},resources:{role(){return{type:"document",doctype:"Press Role",name:this.roleId,whitelistedMethods:{addUser:"add_user",removeUser:"remove_user",bulkDelete:"delete_permissions"}}}},computed:{role(){return this.$resources.role.doc},roleUsers(){var e;return((e=this.role)==null?void 0:e.users)||[]},autoCompleteList(){var l;const e=n=>!this.roleUsers.map(({user:w})=>w).includes(n);return(l=this.$team.doc.team_members)==null?void 0:l.filter(({user:n})=>e(n)).map(({user:n})=>({label:n,value:n}))},adminAccess:{get(){var e;return!!((e=this.role)!=null&&e.admin_access)},set(e){this.$resources.role.setValue.submit({admin_access:e},{onSuccess:this.$session.roles.reload})}},allowBilling:{get(){var e;return!!((e=this.role)!=null&&e.allow_billing)},set(e){this.$resources.role.setValue.submit({allow_billing:e},{onSuccess:this.$session.roles.reload})}},allowApps:{get(){var e;return!!((e=this.role)!=null&&e.allow_apps)},set(e){this.$resources.role.setValue.submit({allow_apps:e},{onSuccess:this.$session.roles.reload})}},allowPartner:{get(){var e;return!!((e=this.role)!=null&&e.allow_partner)},set(e){this.$resources.role.setValue.submit({allow_partner:e},{onSuccess:this.$session.roles.reload})}},allowSiteCreation:{get(){var e;return!!((e=this.role)!=null&&e.allow_site_creation)},set(e){this.$resources.role.setValue.submit({allow_site_creation:e},{onSuccess:this.$session.roles.reload})}},allowBenchCreation:{get(){var e;return!!((e=this.role)!=null&&e.allow_bench_creation)},set(e){this.$resources.role.setValue.submit({allow_bench_creation:e},{onSuccess:this.$session.roles.reload})}},allowServerCreation:{get(){var e;return!!((e=this.role)!=null&&e.allow_server_creation)},set(e){this.$resources.role.setValue.submit({allow_server_creation:e},{onSuccess:this.$session.roles.reload})}},allowWebhookConfiguration:{get(){var e;return!!((e=this.role)!=null&&e.allow_webhook_configuration)},set(e){this.$resources.role.setValue.submit({allow_webhook_configuration:e},{onSuccess:this.$session.roles.reload})}}},methods:{addUser(e){return V.promise(this.$resources.role.addUser.submit({user:e}),{loading:`Adding ${e} to ${this.role.title}`,success:()=>(this.member={},`${e} added to ${this.role.title}`),error:l=>y(l)})},removeUser(e){return V.promise(this.$resources.role.removeUser.submit({user:e}),{loading:`Removing ${e} from ${this.role.title}`,success:()=>`${e} removed from ${this.role.title}`,error:l=>y(l)})}}},K={key:0,class:"text-base"},O={class:"my-4 flex gap-2"},X={class:"flex-1"},G={class:"rounded border px-3"},H={key:0,class:"p-6 text-center text-gray-500"},J={key:1,class:"flex flex-col divide-y"},Q={class:"flex justify-between py-3"},Y={key:1,class:"mt-4 text-base"},Z={class:"space-y-3"},ee={class:"rounded border p-4"},le={class:"space-y-1 rounded border p-4"};function se(e,l,n,w,i,s){const x=A,k=$,f=E,S=v("UserWithAvatarCell"),B=R,d=U,I=C,P=v("FTabs"),D=j;return s.role?(a(),p(D,{key:0,options:{title:`${s.role.title}`,size:"xl"},modelValue:i.show,"onUpdate:modelValue":l[11]||(l[11]=u=>i.show=u)},{"body-content":c(()=>[r(P,{tabs:[{label:"Members",value:"members"},{label:"Settings",value:"settings"}],modelValue:i.tabIndex,"onUpdate:modelValue":l[10]||(l[10]=u=>i.tabIndex=u)},{default:c(()=>[r(x,{class:"pl-0"},{default:c(({tab:u,selected:b})=>[t("div",{class:N(["flex cursor-pointer items-center gap-1.5 border-b border-transparent py-3 text-base text-gray-600 duration-300 ease-in-out hover:border-gray-400 hover:text-gray-900 focus:outline-none focus:transition-none [&>div]:pl-0",{"text-gray-900":b}])},[t("span",null,W(u.label),1)],2)]),_:1}),r(I,null,{default:c(({tab:u})=>{var b,h;return[u.value==="members"?(a(),m("div",K,[t("div",O,[t("div",X,[r(k,{options:s.autoCompleteList,modelValue:i.member,"onUpdate:modelValue":l[0]||(l[0]=o=>i.member=o),placeholder:"Select a member to add"},null,8,["options","modelValue"])]),r(f,{variant:"solid",label:"Add Member",disabled:!((b=i.member)!=null&&b.value),loading:(h=e.$resources.role.addUser)==null?void 0:h.loading,onClick:l[1]||(l[1]=()=>s.addUser(i.member.value))},null,8,["disabled","loading"])]),t("div",G,[l[13]||(l[13]=t("div",{class:"mt-2 text-gray-600"},"Members",-1)),s.roleUsers.length===0?(a(),m("div",H,l[12]||(l[12]=[t("span",null,"No members added to this role.",-1)]))):(a(),m("div",J,[(a(!0),m(F,null,L(s.roleUsers,o=>(a(),m("div",Q,[(a(),p(S,{avatarImage:o.user_image,fullName:o.full_name,email:o.user,key:o.user},null,8,["avatarImage","fullName","email"])),r(f,{variant:"ghost",onClick:()=>s.removeUser(o.user)},{icon:c(()=>[r(B,{class:"h-4 w-4 text-gray-600"})]),_:2},1032,["onClick"])]))),256))]))])])):u.value==="settings"?(a(),m("div",Y,[t("div",Z,[t("div",ee,[r(d,{class:"ml-2",modelValue:s.adminAccess,"onUpdate:modelValue":l[2]||(l[2]=o=>s.adminAccess=o),label:"Admin Access",description:"Grants team owner like access to the members. Includes access to all pages and settings."},null,8,["modelValue"])]),t("div",le,[l[14]||(l[14]=t("h2",{class:"mb-2 ml-2 font-semibold"},"Page Access",-1)),r(d,{modelValue:s.allowBilling,"onUpdate:modelValue":l[3]||(l[3]=o=>s.allowBilling=o),label:"Allow Billing Access",disabled:s.adminAccess},null,8,["modelValue","disabled"]),r(d,{modelValue:s.allowApps,"onUpdate:modelValue":l[4]||(l[4]=o=>s.allowApps=o),label:"Allow Apps Access",disabled:s.adminAccess},null,8,["modelValue","disabled"]),e.$team.doc.erpnext_partner?(a(),p(d,{key:0,modelValue:s.allowPartner,"onUpdate:modelValue":l[5]||(l[5]=o=>s.allowPartner=o),label:"Allow Partner Access",disabled:s.adminAccess},null,8,["modelValue","disabled"])):g("",!0),r(d,{modelValue:s.allowSiteCreation,"onUpdate:modelValue":l[6]||(l[6]=o=>s.allowSiteCreation=o),label:"Allow Site Creation",disabled:s.adminAccess},null,8,["modelValue","disabled"]),r(d,{modelValue:s.allowBenchCreation,"onUpdate:modelValue":l[7]||(l[7]=o=>s.allowBenchCreation=o),label:"Allow Bench Group Creation",disabled:s.adminAccess},null,8,["modelValue","disabled"]),r(d,{modelValue:s.allowServerCreation,"onUpdate:modelValue":l[8]||(l[8]=o=>s.allowServerCreation=o),label:"Allow Server Creation",disabled:s.adminAccess},null,8,["modelValue","disabled"]),r(d,{modelValue:s.allowWebhookConfiguration,"onUpdate:modelValue":l[9]||(l[9]=o=>s.allowWebhookConfiguration=o),label:"Allow Webhook Configuration",disabled:s.adminAccess},null,8,["modelValue","disabled"])])])])):g("",!0)]}),_:1})]),_:1},8,["modelValue"])]),_:1},8,["options","modelValue"])):g("",!0)}const ae=M(q,[["render",se]]);export{ae as R};
//# sourceMappingURL=RoleConfigureDialog-BifCIMlF.js.map
