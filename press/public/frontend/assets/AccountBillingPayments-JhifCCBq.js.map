{"version":3,"file":"AccountBillingPayments-JhifCCBq.js","sources":["../../../../dashboard/src/components/InvoiceUsageCard.vue","../../../../dashboard/src/views/billing/AccountBillingPayments.vue"],"sourcesContent":["<template>\n\t<Card v-if=\"invoice\" :title=\"title\">\n\t\t<template #actions-left>\n\t\t\t<Button route=\"/billing/invoices\"> ‚Üê Back </Button>\n\t\t</template>\n\t\t<InvoiceUsageTable :invoice=\"invoice\" @doc=\"doc = $event\" />\n\t</Card>\n</template>\n<script>\nimport InvoiceUsageTable from './InvoiceUsageTable.vue';\nexport default {\n\tname: 'InvoiceUsageCard',\n\tprops: ['invoice'],\n\tcomponents: {\n\t\tInvoiceUsageTable\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tdoc: null\n\t\t};\n\t},\n\tcomputed: {\n\t\ttitle() {\n\t\t\tlet doc = this.doc;\n\t\t\tif (!doc) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tif (!doc.period_start || !doc.period_end) {\n\t\t\t\treturn `Invoice Details for ${this.invoice}`;\n\t\t\t}\n\t\t\tlet periodStart = this.$date(doc.period_start);\n\t\t\tlet periodEnd = this.$date(doc.period_end);\n\t\t\tlet start = periodStart.toLocaleString({ month: 'long', day: 'numeric' });\n\t\t\tlet end = periodEnd.toLocaleString({ month: 'short', day: 'numeric' });\n\t\t\treturn `Invoice for ${start} - ${end} ${periodEnd.year}`;\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<Card title=\"Past Invoices\" :subtitle=\"subtitle\" v-if=\"!invoiceName\">\n\t\t<template #actions>\n\t\t\t<FormControl\n\t\t\t\tv-if=\"$resources.pastInvoices.data?.length\"\n\t\t\t\ttype=\"select\"\n\t\t\t\t:options=\"selectItems\"\n\t\t\t\tv-model=\"invoiceStatus\"\n\t\t\t/>\n\t\t</template>\n\t\t<div class=\"max-h-96 divide-y\" v-if=\"filteredInvoices?.length\">\n\t\t\t<div\n\t\t\t\tclass=\"grid grid-cols-3 items-center gap-x-8 py-4 text-base text-gray-600 md:grid-cols-7\"\n\t\t\t>\n\t\t\t\t<span>Date</span>\n\t\t\t\t<span class=\"hidden md:inline\">Description</span>\n\t\t\t\t<span class=\"hidden md:inline\">Amount</span>\n\t\t\t\t<span class=\"hidden md:inline\">Amount Due</span>\n\t\t\t\t<span>Status</span>\n\t\t\t\t<span class=\"hidden md:inline\">Payment Date</span>\n\t\t\t\t<span>Download</span>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\t:key=\"invoice.name\"\n\t\t\t\tv-for=\"invoice in filteredInvoices\"\n\t\t\t\tclass=\"grid grid-cols-3 items-center gap-x-8 py-4 text-base text-gray-900 md:grid-cols-7\"\n\t\t\t>\n\t\t\t\t<div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t$date(invoice.date).toLocaleString({\n\t\t\t\t\t\t\t\tmonth: 'long',\n\t\t\t\t\t\t\t\tday: 'numeric',\n\t\t\t\t\t\t\t\tyear: 'numeric'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"mt-2 md:hidden\">\n\t\t\t\t\t\t{{ invoice.formatted_total }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<span class=\"hidden md:inline\">\n\t\t\t\t\t<Link\n\t\t\t\t\t\tv-if=\"invoice.type == 'Subscription'\"\n\t\t\t\t\t\t:to=\"'/billing/' + invoice.name + '/invoices'\"\n\t\t\t\t\t>\n\t\t\t\t\t\tInvoice for\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t$date(invoice.period_end).toLocaleString({\n\t\t\t\t\t\t\t\tmonth: 'long',\n\t\t\t\t\t\t\t\tyear: 'numeric'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}}\n\t\t\t\t\t</Link>\n\t\t\t\t\t<span v-if=\"invoice.type === 'Prepaid Credits'\">\n\t\t\t\t\t\tPrepaid Credits\n\t\t\t\t\t</span>\n\t\t\t\t\t<span v-if=\"invoice.type === 'Transferred Credits'\">\n\t\t\t\t\t\tTransferred Credits\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"hidden md:inline\">{{ invoice.formatted_total }}</span>\n\t\t\t\t<span v-if=\"invoice.formatted_amount_due\" class=\"hidden md:inline\">{{\n\t\t\t\t\tinvoice.formatted_amount_due\n\t\t\t\t}}</span>\n\t\t\t\t<span v-else>-</span>\n\t\t\t\t<span>\n\t\t\t\t\t<Badge :label=\"invoice.status\" />\n\t\t\t\t</span>\n\t\t\t\t<span class=\"hidden md:inline\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\tinvoice.status == 'Paid' &&\n\t\t\t\t\t\t\tinvoice.type !== 'Prepaid Credits' &&\n\t\t\t\t\t\t\tinvoice.payment_date\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t$date(invoice.payment_date).toLocaleString({\n\t\t\t\t\t\t\t\tmonth: 'long',\n\t\t\t\t\t\t\t\tday: 'numeric',\n\t\t\t\t\t\t\t\tyear: 'numeric'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span v-else>-</span>\n\t\t\t\t</span>\n\t\t\t\t<div class=\"flex items-center justify-end space-x-2\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tv-if=\"invoice.invoice_pdf\"\n\t\t\t\t\t\ticon-left=\"download\"\n\t\t\t\t\t\tclass=\"shrink-0\"\n\t\t\t\t\t\t:link=\"invoice.invoice_pdf\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"text-sm\">Download Invoice</span>\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tv-if=\"invoice.status != 'Paid' && invoice.stripe_invoice_url\"\n\t\t\t\t\t\ticon-left=\"external-link\"\n\t\t\t\t\t\tclass=\"shrink-0\"\n\t\t\t\t\t\t@click=\"payNow(invoice)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"text-sm\">Pay Now</span>\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</Card>\n\t<InvoiceUsageCard :invoice=\"invoiceName\" v-else />\n</template>\n<script>\nimport InvoiceUsageCard from '@/components/InvoiceUsageCard.vue';\n\nexport default {\n\tname: 'AccountBillingPayments',\n\tprops: ['invoiceName'],\n\tcomponents: {\n\t\tInvoiceUsageCard\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tinvoiceStatus: '',\n\t\t\tselectItems: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'All Invoices',\n\t\t\t\t\tvalue: ''\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Unpaid Invoices',\n\t\t\t\t\tvalue: 'Unpaid'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Paid Invoices',\n\t\t\t\t\tvalue: 'Paid'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t},\n\tcreated() {\n\t\tif (this.$route.query.invoiceStatus)\n\t\t\tthis.invoiceStatus = this.$route.query.invoiceStatus;\n\t},\n\tresources: {\n\t\tpastInvoices: 'press.api.billing.invoices_and_payments'\n\t},\n\tcomputed: {\n\t\tfilteredInvoices() {\n\t\t\tif (this.invoiceStatus === '') {\n\t\t\t\treturn this.$resources.pastInvoices.data;\n\t\t\t} else {\n\t\t\t\treturn this.$resources.pastInvoices.data.filter(\n\t\t\t\t\tinvoice => invoice.status === this.invoiceStatus\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tsubtitle() {\n\t\t\tif (\n\t\t\t\tthis.$resources.pastInvoices.loading ||\n\t\t\t\tthis.filteredInvoices.length > 0\n\t\t\t) {\n\t\t\t\treturn `History of your ${this.invoiceStatus} invoice payments`;\n\t\t\t}\n\t\t\treturn `No ${this.invoiceStatus} invoices have been generated yet`;\n\t\t}\n\t},\n\tmethods: {\n\t\tasync refreshLink(invoiceName) {\n\t\t\tlet refreshed_link = await this.$call(\n\t\t\t\t'press.api.billing.refresh_invoice_link',\n\t\t\t\t{\n\t\t\t\t\tinvoice: invoiceName\n\t\t\t\t}\n\t\t\t);\n\t\t\tif (refreshed_link) {\n\t\t\t\twindow.open(refreshed_link, '_blank');\n\t\t\t}\n\t\t},\n\t\tpayNow(invoice) {\n\t\t\tif (invoice.stripe_link_expired) {\n\t\t\t\tthis.refreshLink(invoice.name);\n\t\t\t} else {\n\t\t\t\twindow.open(invoice.stripe_invoice_url, '_blank');\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n"],"names":["_sfc_main","InvoiceUsageTable","doc","periodStart","periodEnd","start","end","$options","_withCtx","_cache","_createTextVNode","$props","_createCommentVNode","InvoiceUsageCard","invoice","refreshed_link","invoiceName","_hoisted_2","_hoisted_3","_hoisted_6","_hoisted_9","_hoisted_12","_a","_ctx","$data","$event","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_Fragment","_renderList","_toDisplayString","_hoisted_7"],"mappings":"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"}