var p=(e,a,t)=>new Promise((d,s)=>{var i=n=>{try{c(t.next(n))}catch(l){s(l)}},r=n=>{try{c(t.throw(n))}catch(l){s(l)}},c=n=>n.done?d(n.value):Promise.resolve(n.value).then(i,r);c((t=t.apply(e,a)).next())});import{x as u,ao as f,r as m,q as _,o as y,A as g,ap as h,ai as b}from"./main-Dpl-JOF2.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},a=new Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="c4f01c00-6a60-4649-80c4-7d0c2a55f5b6",e._sentryDebugIdIdentifier="sentry-dbid-c4f01c00-6a60-4649-80c4-7d0c2a55f5b6")}catch(t){}})();{var o=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};o._sentryModuleMetadata=o._sentryModuleMetadata||{},o._sentryModuleMetadata[new Error().stack]=Object.assign({},o._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const w={name:"BillingMpesaInvoices",data(){return{invoices:[],loading:!1,errorMessage:null}},components:{ObjectList:f},methods:{fetchInvoices(){return p(this,null,function*(){this.loading=!0;try{const e=yield b({url:"/api/method/press.api.regional_payments.mpesa.utils.display_invoices_by_partner",method:"GET"});this.invoices=e}catch(e){this.errorMessage=`Failed to load invoices. ${e}`}finally{this.loading=!1}})},formatCurrency(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"Ksh"}).format(e)}},computed:{options(){return{doctype:"Mpesa Payment Record",fields:["name","posting_date","amount","local_invoice","payment_partner","amount_usd","exchange_rate"],columns:[{label:"Invoice Name",fieldname:"name",width:1},{label:"Date",fieldname:"posting_date",width:.7},{label:"Amount",fieldname:"amount",align:"center",width:.6},{label:"Amount (USD)",fieldname:"amount_usd",align:"center",width:.6},{label:"Exchange Rate",fieldname:"exchange_rate",align:"center",width:.6},{label:"Payment Partner",fieldname:"payment_partner"},{label:"",type:"Button",align:"right",Button:({row:e})=>{if(e.local_invoice)return{label:"Download Invoice",slots:{prefix:h("download")},onClick:()=>{window.open(e.local_invoice)}}}}],orderBy:"posting_date desc"}}},mounted(){this.fetchInvoices()}},v={class:"p-5"};function I(e,a,t,d,s,i){const r=m("ObjectList");return y(),_("div",v,[g(r,{options:i.options},null,8,["options"])])}const D=u(w,[["render",I]]);export{D as default};
//# sourceMappingURL=BillingMpesaInvoices-MuwtEFI-.js.map
