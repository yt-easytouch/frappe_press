{"version":3,"file":"ChurnFeedbackDialog-DNx_SsAV.js","sources":["../../../../dashboard/src/components/StarRatingInput.vue","../../../../dashboard/src2/components/ChurnFeedbackDialog.vue"],"sourcesContent":["<script setup>\nimport { ref } from 'vue';\n\n// For v-model binding\nconst props = defineProps({\n\tmodelValue: {\n\t\ttype: Number,\n\t\tdefault: 5\n\t}\n});\nconst emit = defineEmits(['update:modelValue']);\n\nconst tempValue = ref(null);\nconst value = ref(props.modelValue);\nconst ratings = [1, 2, 3, 4, 5];\n\nconst starOver = index => {\n\ttempValue.value = value.value;\n\treturn (value.value = index);\n};\n\nconst starOut = () => {\n\treturn (value.value = tempValue.value);\n};\n\nconst set = newValue => {\n\ttempValue.value = value.value;\n\temit('update:modelValue', value.value);\n\treturn (value.value = newValue);\n};\n</script>\n\n<template>\n\t<div class=\"star-rating\">\n\t\t<label\n\t\t\tclass=\"star-rating__star\"\n\t\t\tv-for=\"rating in ratings\"\n\t\t\tv-on:click=\"set(rating)\"\n\t\t\tv-on:mouseover=\"starOver(rating)\"\n\t\t\tv-on:mouseout=\"starOut\"\n\t\t>\n\t\t\t<input\n\t\t\t\tclass=\"star-rating star-rating__checkbox\"\n\t\t\t\ttype=\"radio\"\n\t\t\t\t:value=\"rating\"\n\t\t\t\tv-model=\"value\" />\n\t\t\t<svg\n\t\t\t\tclass=\"h-4 w-4\"\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\tviewBox=\"0 0 14 14\"\n\t\t\t\tfill=\"none\"\n\t\t\t>\n\t\t\t\t<path\n\t\t\t\t\td=\"M6.56866 0.735724C6.76184 0.406233 7.23816 0.406233 7.43134 0.735725L9.16063 3.68535C9.23112 3.80559 9.34861 3.89095 9.48475 3.92084L12.8244 4.65401C13.1974 4.73591 13.3446 5.18892 13.091 5.47446L10.8201 8.03059C10.7275 8.1348 10.6826 8.27291 10.6963 8.41162L11.031 11.8144C11.0684 12.1945 10.683 12.4745 10.3331 12.3214L7.20032 10.9516C7.07261 10.8958 6.92739 10.8958 6.79968 10.9516L3.66691 12.3214C3.31696 12.4745 2.9316 12.1945 2.96899 11.8144L3.30371 8.41162C3.31736 8.27291 3.27248 8.1348 3.17991 8.03059L0.90903 5.47446C0.655358 5.18892 0.802551 4.73591 1.17561 4.65401L4.51525 3.92084C4.65139 3.89095 4.76888 3.80559 4.83937 3.68535L6.56866 0.735724Z\"\n\t\t\t\t\t:fill=\"value >= rating && value != null ? '#ECAC4B' : '#C0C6CC'\"\n\t\t\t\t/></svg\n\t\t></label>\n\t</div>\n</template>\n\n<style>\n.star-rating__checkbox {\n\tposition: absolute;\n\toverflow: hidden;\n\tclip: rect(0 0 0 0);\n\theight: 1px;\n\twidth: 1px;\n\tmargin: -1px;\n\tpadding: 0;\n\tborder: 0;\n}\n\n.star-rating__star {\n\tdisplay: inline-block;\n}\n\n.star-rating__star:hover {\n\tcursor: pointer;\n}\n</style>\n","<template>\n\t<Dialog\n\t\t:options=\"{\n\t\t\ttitle: 'Tell us why you are leaving',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Submit',\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tloading: $resources.submitFeedback.loading,\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t$resources.submitFeedback.submit({\n\t\t\t\t\t\t\tfeedback: this.feedback\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t}\"\n\t\tv-model=\"show\"\n\t>\n\t\t<template v-slot:body-content>\n\t\t\t<p class=\"mb-5 text-sm text-gray-800\">\n\t\t\t\tHelp us improve your experience by sharing your thoughts.\n\t\t\t</p>\n\t\t\t<div class=\"mt-3\">\n\t\t\t\t<span class=\"mb-2 block text-sm leading-4 text-gray-600\">\n\t\t\t\t\tPlease rate your experience\n\t\t\t\t</span>\n\t\t\t\t<StarRatingInput v-model=\"rating\" />\n\t\t\t</div>\n\t\t\t<FormControl\n\t\t\t\tclass=\"mt-4\"\n\t\t\t\ttype=\"select\"\n\t\t\t\t:options=\"options\"\n\t\t\t\tsize=\"md\"\n\t\t\t\tvariant=\"outline\"\n\t\t\t\tplaceholder=\"Select a reason\"\n\t\t\t\tv-model=\"feedback\"\n\t\t\t\trequired\n\t\t\t/>\n\t\t\t<FormControl\n\t\t\t\tclass=\"mt-4\"\n\t\t\t\ttype=\"textarea\"\n\t\t\t\tvariant=\"outline\"\n\t\t\t\tplaceholder=\"I am leaving Easytouch Cloud because...\"\n\t\t\t\tsize=\"md\"\n\t\t\t\tv-model=\"note\"\n\t\t\t/>\n\t\t\t<ErrorMessage class=\"mt-2\" :message=\"$resources.submitFeedback.error\" />\n\t\t</template>\n\t</Dialog>\n</template>\n\n<script>\nimport FormControl from 'frappe-ui/src/components/FormControl.vue';\nimport StarRatingInput from '../../src/components/StarRatingInput.vue';\nimport { DashboardError } from '../utils/error';\n\nexport default {\n\tname: 'ChurnFeedbackDialog',\n\temits: ['updated'],\n\tprops: ['team'],\n\tcomponents: {\n\t\tStarRatingInput\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tfeedback: '',\n\t\t\troute: '',\n\t\t\tnote: '',\n\t\t\tshow: true,\n\t\t\trating: 0\n\t\t};\n\t},\n\tresources: {\n\t\tsubmitFeedback() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.account.feedback',\n\t\t\t\tmakeParams() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tteam: this.team,\n\t\t\t\t\t\tmessage: this.feedback,\n\t\t\t\t\t\troute: this.$route?.name,\n\t\t\t\t\t\tnote: this.note,\n\t\t\t\t\t\trating: this.rating\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tvalidate() {\n\t\t\t\t\tif (!this.feedback) {\n\t\t\t\t\t\tthrow new DashboardError('Please select a reason');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.rating == 0) {\n\t\t\t\t\t\tthrow new DashboardError('Please rate your experience');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t'Payment issues',\n\t\t\t\t\t\t\t'Features were missing',\n\t\t\t\t\t\t\t'My reason is not listed here'\n\t\t\t\t\t\t].includes(this.feedback) &&\n\t\t\t\t\t\t!this.note\n\t\t\t\t\t) {\n\t\t\t\t\t\tthrow new DashboardError('Please provide a brief reason');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonSuccess() {\n\t\t\t\t\tthis.show = false;\n\t\t\t\t\tthis.$emit('updated');\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\twindow.location.href = '/dashboard';\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tcomputed: {\n\t\toptions() {\n\t\t\treturn [\n\t\t\t\t'I am moving to a different product e.g ZOHO, Quickbooks, etc.',\n\t\t\t\t'I was just exploring the product',\n\t\t\t\t'I prefer self-hosting my instance',\n\t\t\t\t'Moved site to another Easytouch Cloud account',\n\t\t\t\t'I did not like the Easytouch Cloud experience',\n\t\t\t\t'Easytouch Cloud is too expensive for me',\n\t\t\t\t'Payment issues',\n\t\t\t\t'Features were missing',\n\t\t\t\t'My reason is not listed here'\n\t\t\t];\n\t\t}\n\t}\n};\n</script>\n"],"names":["props","__props","emit","__emit","tempValue","ref","value","ratings","starOver","index","starOut","set","newValue","_sfc_main","StarRatingInput","DashboardError","_hoisted_1","$data","_cache","$event","_withCtx","_createElementVNode","$options","_ctx"],"mappings":"kkCAIA,MAAAA,EAAAC,EAMAC,EAAAC,EAEAC,EAAAC,EAAA,IAAA,EACAC,EAAAD,EAAAL,EAAA,UAAA,EACAO,EAAA,CAAA,EAAA,EAAA,EAAA,EAAA,CAAA,EAEAC,EAAAC,IACAL,EAAA,MAAAE,EAAA,MACAA,EAAA,MAAAG,GAGAC,EAAA,IACAJ,EAAA,MAAAF,EAAA,MAGAO,EAAAC,IACAR,EAAA,MAAAE,EAAA,MACAJ,EAAA,oBAAAI,EAAA,KAAA,EACAA,EAAA,MAAAM,uiCC6BAC,EAAA,4BAEC,MAAA,CAAA,SAAA,EACA,MAAA,CAAA,MAAA,cAECC,gBAAAA,GAED,MAAA,CACC,MAAA,aAEC,MAAA,GACA,KAAA,GACA,KAAA,GACA,OAAA,eAID,gBAAA,CACC,MAAA,CACC,IAAA,gDAEC,MAAA,CACC,KAAA,KAAA,KACA,QAAA,KAAA,mDAEA,KAAA,KAAA,KACA,OAAA,KAAA,oBAID,GAAA,CAAA,KAAA,SACC,MAAA,IAAAC,EAAA,wBAAA,EAGD,GAAA,KAAA,QAAA,6CAIA,GACC,CACC,iBACA,iFAGD,CAAA,KAAA,+DAMD,KAAA,KAAA,GACA,KAAA,MAAA,SAAA,EAEA,WAAA,IAAA,CACC,OAAA,SAAA,KAAA,YACD,EAAA,GAAA,CACD,EAEF,GAED,SAAA,CACC,SAAA,CACC,MAAA,oGAGC,oCACA,gDACA,gDACA,0CACA,iBACA,uDAGF,CACD,CACD,EA7GQC,EAAA,CAAA,MAAA,MAAA,gRAvBR,WAAAC,EAAA,KAAA,sBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAF,EAAA,KAAAE,KAmBmB,eAAAC,EAAA,IAAA,CAChBF,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAAA,IAAA,CAAA,MAAA,4BAAA,EAAA,8DAAA,EAAA,GAGAA,EAAA,MAAAL,EAAA,CACCE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAAA,OAAA,CAAA,MAAA,4CAAA,EAAA,gCAAA,EAAA,QAxBJ,WAAAJ,EAAA,OAAA,sBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAF,EAAA,OAAAE,kCA8BI,MAAA,OACA,KAAA,SACC,QAAAG,EAAA,QACD,KAAA,KACA,QAAA,UACA,YAAA,kBAnCJ,WAAAL,EAAA,SAAA,sBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAF,EAAA,SAAAE,GAqCI,SAAA,0CAGA,MAAA,OACA,KAAA,WACA,QAAA,UACA,YAAA,0CACA,KAAA,KA5CJ,WAAAF,EAAA,KAAA,sBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAF,EAAA,KAAAE,gCA+CiB,MAAA,OAAc,QAAAI,EAAA,WAAA,eAAA"}