{"version":3,"file":"NavigationItems-CTm64EbM.js","sources":["../../../../dashboard/src2/components/NavigationItems.vue"],"sourcesContent":["<template>\n\t<div>\n\t\t<slot :navigation=\"navigation\" />\n\t</div>\n</template>\n<script>\nimport { h } from 'vue';\nimport DoorOpen from '~icons/lucide/door-open';\nimport PanelTopInactive from '~icons/lucide/panel-top-inactive';\nimport Package from '~icons/lucide/package';\nimport Boxes from '~icons/lucide/boxes';\nimport Server from '~icons/lucide/server';\nimport WalletCards from '~icons/lucide/wallet-cards';\nimport Settings from '~icons/lucide/settings';\nimport App from '~icons/lucide/layout-grid';\nimport DatabaseZap from '~icons/lucide/database-zap';\nimport Activity from '~icons/lucide/activity';\nimport Logs from '~icons/lucide/scroll-text';\nimport Globe from '~icons/lucide/globe';\nimport Shield from '~icons/lucide/shield';\nimport Notification from '~icons/lucide/inbox';\nimport Code from '~icons/lucide/code';\nimport { unreadNotificationsCount } from '../data/notifications';\n\nexport default {\n\tname: 'NavigationItems',\n\tcomputed: {\n\t\tnavigation() {\n\t\t\tif (!this.$team?.doc) return [];\n\n\t\t\tconst routeName = this.$route?.name || '';\n\t\t\tconst onboardingComplete = this.$team.doc.onboarding.complete;\n\t\t\tconst isSaasUser = this.$team.doc.is_saas_user;\n\t\t\tconst enforce2FA = Boolean(\n\t\t\t\t!this.$team.doc.is_desk_user &&\n\t\t\t\t\tthis.$team.doc.enforce_2fa &&\n\t\t\t\t\t!this.$team.doc.user_info?.is_2fa_enabled,\n\t\t\t);\n\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tname: 'Welcome',\n\t\t\t\t\ticon: () => h(DoorOpen),\n\t\t\t\t\troute: '/welcome',\n\t\t\t\t\tisActive: routeName === 'Welcome',\n\t\t\t\t\tcondition: !onboardingComplete,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Notifications',\n\t\t\t\t\ticon: () => h(Notification),\n\t\t\t\t\troute: '/notifications',\n\t\t\t\t\tisActive: routeName === 'Press Notification List',\n\t\t\t\t\tcondition: onboardingComplete && !isSaasUser,\n\t\t\t\t\tbadge: () => {\n\t\t\t\t\t\tif (unreadNotificationsCount.data > 0) {\n\t\t\t\t\t\t\treturn h(\n\t\t\t\t\t\t\t\t'span',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tclass: '!ml-auto px-1.5 py-0.5 text-xs text-gray-600',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tunreadNotificationsCount.data > 99\n\t\t\t\t\t\t\t\t\t? '99+'\n\t\t\t\t\t\t\t\t\t: unreadNotificationsCount.data,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdisabled: enforce2FA,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Sites',\n\t\t\t\t\ticon: () => h(PanelTopInactive),\n\t\t\t\t\troute: '/sites',\n\t\t\t\t\tisActive:\n\t\t\t\t\t\t['Site List', 'Site Detail', 'New Site'].includes(routeName) ||\n\t\t\t\t\t\trouteName.startsWith('Site Detail'),\n\t\t\t\t\tdisabled: enforce2FA,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Benches',\n\t\t\t\t\ticon: () => h(Package),\n\t\t\t\t\troute: '/benches',\n\t\t\t\t\tisActive: routeName.startsWith('Bench'),\n\t\t\t\t\tcondition: this.$team.doc?.is_desk_user,\n\t\t\t\t\tdisabled: !onboardingComplete || enforce2FA,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Bench Groups',\n\t\t\t\t\ticon: () => h(Boxes),\n\t\t\t\t\troute: '/groups',\n\t\t\t\t\tisActive:\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t'Release Group List',\n\t\t\t\t\t\t\t'Release Group Detail',\n\t\t\t\t\t\t\t'New Release Group',\n\t\t\t\t\t\t\t'Release Group New Site',\n\t\t\t\t\t\t\t'Deploy Candidate',\n\t\t\t\t\t\t].includes(routeName) ||\n\t\t\t\t\t\trouteName.startsWith('Release Group Detail'),\n\t\t\t\t\tcondition: onboardingComplete && !isSaasUser,\n\t\t\t\t\tdisabled: enforce2FA,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Servers',\n\t\t\t\t\ticon: () => h(Server),\n\t\t\t\t\troute: '/servers',\n\t\t\t\t\tisActive:\n\t\t\t\t\t\t['New Server'].includes(routeName) ||\n\t\t\t\t\t\trouteName.startsWith('Server'),\n\t\t\t\t\tcondition: onboardingComplete && !isSaasUser,\n\t\t\t\t\tdisabled: enforce2FA,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Marketplace',\n\t\t\t\t\ticon: () => h(App),\n\t\t\t\t\troute: '/apps',\n\t\t\t\t\tisActive: routeName.startsWith('Marketplace'),\n\t\t\t\t\tcondition:\n\t\t\t\t\t\tthis.$team.doc?.is_desk_user ||\n\t\t\t\t\t\t(!!this.$team.doc.is_developer && this.$session.hasAppsAccess),\n\t\t\t\t\tdisabled: enforce2FA,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Dev Tools',\n\t\t\t\t\ticon: () => h(Code),\n\t\t\t\t\troute: '/devtools',\n\t\t\t\t\tcondition: onboardingComplete && !isSaasUser,\n\t\t\t\t\tdisabled: enforce2FA,\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'SQL Playground',\n\t\t\t\t\t\t\ticon: () => h(DatabaseZap),\n\t\t\t\t\t\t\troute: '/sql-playground',\n\t\t\t\t\t\t\tisActive: routeName === 'SQL Playground',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'Log Browser',\n\t\t\t\t\t\t\ticon: () => h(Logs),\n\t\t\t\t\t\t\troute: '/log-browser',\n\t\t\t\t\t\t\tisActive: routeName === 'Log Browser',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'DB Analyzer',\n\t\t\t\t\t\t\ticon: () => h(Activity),\n\t\t\t\t\t\t\troute: '/database-analyzer',\n\t\t\t\t\t\t\tisActive: routeName === 'DB Analyzer',\n\t\t\t\t\t\t},\n\t\t\t\t\t].filter((item) => item.condition ?? true),\n\t\t\t\t\tisActive: ['SQL Playground', 'DB Analyzer', 'Log Browser'].includes(\n\t\t\t\t\t\trouteName,\n\t\t\t\t\t),\n\t\t\t\t\tdisabled: enforce2FA,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Billing',\n\t\t\t\t\ticon: () => h(WalletCards),\n\t\t\t\t\troute: '/billing',\n\t\t\t\t\tisActive: routeName.startsWith('Billing'),\n\t\t\t\t\tcondition:\n\t\t\t\t\t\tthis.$team.doc?.is_desk_user || this.$session.hasBillingAccess,\n\t\t\t\t\tdisabled: enforce2FA,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Partnership',\n\t\t\t\t\ticon: () => h(Globe),\n\t\t\t\t\troute: '/partners',\n\t\t\t\t\tisActive: routeName === 'Partnership',\n\t\t\t\t\tcondition: Boolean(this.$team.doc.erpnext_partner),\n\t\t\t\t\tdisabled: enforce2FA,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Settings',\n\t\t\t\t\ticon: () => h(Settings),\n\t\t\t\t\troute: '/settings',\n\t\t\t\t\tisActive: routeName.startsWith('Settings'),\n\t\t\t\t\tdisabled: enforce2FA,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'Partner Admin',\n\t\t\t\t\ticon: () => h(Shield),\n\t\t\t\t\troute: '/partner-admin',\n\t\t\t\t\tisActive: routeName === 'Partner Admin',\n\t\t\t\t\tcondition: Boolean(this.$team.doc.is_desk_user),\n\t\t\t\t},\n\t\t\t].filter((item) => item.condition ?? true);\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.$socket.emit('doctype_subscribe', 'Press Notification');\n\t\tthis.$socket.on('press_notification', (data) => {\n\t\t\tif (data.team === this.$team.doc.name) {\n\t\t\t\tunreadNotificationsCount.setData((data) => data + 1);\n\t\t\t}\n\t\t});\n\t},\n\tunmounted() {\n\t\tthis.$socket.off('press_notification');\n\t},\n};\n</script>\n"],"names":["_sfc_main","routeName","_b","isSaasUser","_c","h","DoorOpen","onboardingComplete","unreadNotificationsCount","enforce2FA","Package","_d","Boxes","Server","App","Code","Logs","Activity","item","_a","Globe","Settings","Shield","data"],"mappings":"klOAwBAA,GAAA,wBAEC,SAAA,yEAIE,MAAAC,IAAAC,EAAA,KAAA,SAAA,YAAAA,EAAA,OAAA,wCAEAC,EAAA,KAAA,MAAA,IAAA,4EAIE,GAAAC,EAAA,KAAA,MAAA,IAAA,YAAA,MAAAA,EAAA,iBAGF,MAAA,CACC,CACC,KAAA,UACA,KAAA,IAAAC,EAAAC,CAAA,EACA,MAAA,WACA,SAAAL,IAAA,wBAGD,CACC,KAAA,sDAGA,SAAAA,IAAA,0BACA,UAAAM,GAAA,CAAAJ,aAEC,GAAAK,EAAA,KAAA,EACC,OAAAH,EACC,OACA,uDAGAG,EAAA,KAAA,SAECA,EAAA,OAIJ,SAAAC,GAED,4BAGC,MAAA,SACA,6DAECR,EAAA,WAAA,aAAA,EACD,SAAAQ,GAED,CACC,KAAA,UACA,KAAA,IAAAJ,EAAAK,CAAA,EACA,MAAA,WACA,SAAAT,EAAA,WAAA,OAAA,EACA,WAAAU,EAAA,KAAA,MAAA,MAAA,YAAAA,EAAA,aACA,SAAA,CAAAJ,GAAAE,GAED,CACC,KAAA,eACA,KAAA,IAAAJ,EAAAO,CAAA,EACA,MAAA,UACA,SACC,CACC,qBACA,uBACA,oBACA,yBACA,iCAEDX,EAAA,WAAA,sBAAA,EACD,UAAAM,GAAA,CAAAJ,EACA,SAAAM,GAED,CACC,KAAA,UACA,KAAA,IAAAJ,EAAAQ,CAAA,EACA,MAAA,WACA,SACC,CAAA,YAAA,EAAA,SAAAZ,CAAA,GACAA,EAAA,WAAA,QAAA,EACD,UAAAM,GAAA,CAAAJ,EACA,SAAAM,GAED,CACC,KAAA,cACA,KAAA,IAAAJ,EAAAS,EAAA,gBAEA,SAAAb,EAAA,WAAA,aAAA,EACA,uHAGA,SAAAQ,GAED,CACC,KAAA,YACA,KAAA,IAAAJ,EAAAU,CAAA,EACA,MAAA,YACA,UAAAR,GAAA,CAAAJ,EACA,SAAAM,EACA,SAAA,CACC,CACC,KAAA,wDAGA,SAAAR,IAAA,kBAED,CACC,KAAA,cACA,KAAA,IAAAI,EAAAW,EAAA,EACA,MAAA,eACA,SAAAf,IAAA,eAED,CACC,KAAA,cACA,KAAA,IAAAI,EAAAY,EAAA,6BAEA,SAAAhB,IAAA,cAEF,EAAA,OAAAiB,GAAA,OAAA,OAAAC,EAAAD,EAAA,YAAA,KAAAC,EAAA,GAAA,mEAEClB,GAED,SAAAQ,GAED,CACC,KAAA,wBAEA,MAAA,WACA,SAAAR,EAAA,WAAA,SAAA,EACA,2FAEA,SAAAQ,GAED,CACC,KAAA,cACA,KAAA,IAAAJ,EAAAe,EAAA,EACA,MAAA,YACA,SAAAnB,IAAA,yDAEA,SAAAQ,GAED,CACC,KAAA,WACA,KAAA,IAAAJ,EAAAgB,EAAA,EACA,MAAA,YACA,SAAApB,EAAA,WAAA,UAAA,EACA,SAAAQ,GAED,CACC,KAAA,gBACA,KAAA,IAAAJ,EAAAiB,EAAA,yBAEA,SAAArB,IAAA,wDAGF,EAAA,OAAAiB,GAAA,OAAA,OAAAC,EAAAD,EAAA,YAAA,KAAAC,EAAA,GAAA,IAGF,SAAA,6DAEC,KAAA,QAAA,GAAA,qBAAAI,GAAA,CACCA,EAAA,OAAA,KAAA,MAAA,IAAA,uBAGD,CAAA,eAGA,KAAA,QAAA,IAAA,oBAAA,EAEF"}