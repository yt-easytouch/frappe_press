import{x as v,q as a,o as r,j as t,a9 as x,z as h,al as B,am as I,r as D,A as m,w as d,Y as u,u as l,t as i,F as E,v as L,n as M,h as p,a5 as j,X as N,D as T}from"./main-Dpl-JOF2.js";import V from"./StripeCard-BRr8QCrN.js";import{L as z}from"./LoginBox-DSVNkn_s.js";import"./StripeLogo-BRF2qIyd.js";import"./AddressForm-Cz0XUJgF.js";import"./Form-CIPLpg2e.js";import"./stripe.esm-D4yu_pm0.js";import"./YooltechLogo-DH5Linvn.js";import"./ETLogo-Ziye5dPH.js";import"./toast-Dk0nDfLL.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},s=new Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="9b1a88a6-5b99-4074-9f0d-1c1fac5a2757",e._sentryDebugIdIdentifier="sentry-dbid-9b1a88a6-5b99-4074-9f0d-1c1fac5a2757")}catch(_){}})();{var c=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};c._sentryModuleMetadata=c._sentryModuleMetadata||{},c._sentryModuleMetadata[new Error().stack]=Object.assign({},c._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const A={},F={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"};function O(e,s){return r(),a("svg",F,s[0]||(s[0]=[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule":"evenodd"},null,-1)]))}const k=v(A,[["render",O]]),Y={name:"Subscription",props:["site"],components:{LoginBox:z,Badge:I,TextInput:B,CheckCircleIcon:k,StripeCard:h(()=>T(()=>import("./StripeCard-BRr8QCrN.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),ErrorMessage:x},data(){return{currentStep:1,selectedPlan:null,success:!1}},resources:{subscription(){return{url:"press.api.saas.subscription",params:{site:this.site},auto:!0,onSuccess(e){e!=null&&e.current_plan&&(e!=null&&e.plans)&&(this.selectedPlan=e.plans.find(s=>s.name===e.current_plan))}}},setSubscriptionPlan(){var e;return{url:"press.api.saas.set_subscription_plan",params:{site:this.site,plan:(e=this.selectedPlan)==null?void 0:e.name},onSuccess(){this.currentStep=1,this.selectedPlan=null,this.$resources.subscription.reload()}}}}},q={class:"min-h-screen bg-gray-50"},K={class:"mt-4"},R={class:"text-xl font-medium text-gray-900"},U={key:0,class:"mt-1 text-base text-gray-700"},X={key:0,class:"mt-8"},H={class:"text-sm font-medium text-gray-700"},J={key:0,class:"text-sm font-bold text-gray-900"},Q={key:0,class:"mt-2 space-y-2"},W=["onClick"],Z={class:"flex items-center justify-between"},G={class:"text-base font-medium text-gray-900"},ee={class:"mt-1 text-sm text-gray-600"},se={class:"flex justify-end"},te={key:0,class:"mt-2"};function ne(e,s,_,re,o,oe){const w=x,S=j,C=k,f=N,P=V,$=D("LoginBox");return r(),a("div",q,[m($,null,{default:d(()=>{var g,b,y;return[s[11]||(s[11]=t("h1",{class:"text-base text-gray-600"},"Manage Subscription",-1)),t("div",K,[t("div",R,i(_.site),1),(g=e.$resources.subscription.data)!=null&&g.trial_end_date?(r(),a("div",U," Trial ends "+i(e.trialEndsInDaysText((b=e.$resources.subscription.data)==null?void 0:b.trial_end_date)),1)):l("",!0)]),u(" "+i(o.success?"You have subscribed to the plan":"")+" ",1),m(w,{class:"mt-2",message:e.$resources.subscription.error},null,8,["message"]),e.$resources.subscription.data?(r(),a("div",X,[t("div",null,[t("button",{class:"flex w-full items-center justify-between rounded-sm bg-gray-100 p-2 hover:bg-gray-200",onClick:s[0]||(s[0]=n=>o.currentStep=1)},[t("span",H,i(e.$resources.subscription.data.current_plan?"Change plan":"Step 1: Select plan"),1),o.currentStep===2?(r(),a("span",J,[u(i(o.selectedPlan.plan_title),1),s[4]||(s[4]=t("span",{class:"font-normal"},"/mo",-1))])):l("",!0)]),o.currentStep==1?(r(),a("div",Q,[(r(!0),a(E,null,L(e.$resources.subscription.data.plans,n=>(r(),a("button",{class:M(["block w-full rounded border px-4 py-2.5 text-left",[n===o.selectedPlan?"border-gray- outline outline-gray-900":""]]),key:n.name,onClick:ie=>o.selectedPlan=n},[t("div",Z,[t("div",null,[t("span",G,i(n.plan_title),1),s[5]||(s[5]=t("span",{class:"text-base text-gray-600"},"/mo",-1))]),e.$resources.subscription.data.current_plan==n.name?(r(),p(S,{key:0},{default:d(()=>s[6]||(s[6]=[u(" Current Plan ")])),_:1})):o.selectedPlan==n?(r(),p(C,{key:1,class:"h-5 w-5"})):l("",!0)]),t("div",ee,[t("span",null," CPU "+i(n.cpu_time_per_day)+" "+i(n.cpu_time_per_day==1?"hour":"hours")+"/day ",1),s[7]||(s[7]=t("span",{class:"mx-1"}," Â· ",-1)),t("span",null,i(e.formatBytes(n.max_storage_usage,0,2))+" Database ",1)])],10,W))),128)),t("div",se,[e.$resources.subscription.data.current_plan?((y=o.selectedPlan)==null?void 0:y.name)!==e.$resources.subscription.data.current_plan?(r(),p(f,{key:1,variant:"solid",loading:e.$resources.setSubscriptionPlan.loading,onClick:s[2]||(s[2]=n=>e.$resources.setSubscriptionPlan.submit())},{default:d(()=>s[9]||(s[9]=[u(" Change plan ")])),_:1},8,["loading"])):l("",!0):(r(),p(f,{key:0,variant:"solid",onClick:s[1]||(s[1]=n=>o.currentStep=2)},{default:d(()=>s[8]||(s[8]=[u(" Next ")])),_:1}))])])):l("",!0)]),o.currentStep==2?(r(),a("div",te,[s[10]||(s[10]=t("div",{class:"rounded-sm bg-gray-100 p-2 text-sm font-medium text-gray-700"}," Step 2: Setup billing ",-1)),m(P,{class:"mt-4",onComplete:s[3]||(s[3]=n=>e.$resources.setSubscriptionPlan.submit())})])):l("",!0)])):l("",!0)]}),_:1})])}const be=v(Y,[["render",ne]]);export{be as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/StripeCard-BRr8QCrN.js","assets/StripeLogo-BRF2qIyd.js","assets/main-Dpl-JOF2.js","assets/main-B0ZLDivw.css","assets/AddressForm-Cz0XUJgF.js","assets/Form-CIPLpg2e.js","assets/stripe.esm-D4yu_pm0.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=Subscription-D7qtycri.js.map
