{"version":3,"file":"BuyPrepaidCreditsForm-TYMK1T5x.js","sources":["../../../../dashboard/src2/components/BuyPrepaidCreditsStripe.vue","../../../../dashboard/src2/components/BuyPrepaidCreditsRazorpay.vue","../../../../dashboard/src2/components/BuyPrepaidCreditsBiti.vue","../../../../dashboard/src2/components/BuyPrepaidCreditsForm.vue"],"sourcesContent":["<template>\n\t<div>\n\t\t<label\n\t\t\tclass=\"block\"\n\t\t\t:class=\"{\n\t\t\t\t'pointer-events-none h-0.5 opacity-0': step != 'Add Card Details',\n\t\t\t\t'mt-4': step == 'Add Card Details'\n\t\t\t}\"\n\t\t>\n\t\t\t<span class=\"text-sm leading-4 text-gray-700\">\n\t\t\t\tCredit or Debit Card\n\t\t\t</span>\n\t\t\t<div class=\"form-input mt-2 block w-full pl-3\" ref=\"card-element\"></div>\n\t\t\t<ErrorMessage class=\"mt-1\" :message=\"cardErrorMessage\" />\n\t\t</label>\n\n\t\t<div v-if=\"step == 'Setting up Stripe'\" class=\"mt-8 flex justify-center\">\n\t\t\t<Spinner class=\"h-4 w-4 text-gray-600\" />\n\t\t</div>\n\t\t<ErrorMessage\n\t\t\tclass=\"mt-2\"\n\t\t\t:message=\"$resources.createPaymentIntent.error || errorMessage\"\n\t\t/>\n\t\t<div class=\"mt-4 flex w-full justify-between\">\n\t\t\t<div></div>\n\t\t\t<div v-if=\"step == 'Get Amount'\">\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t@click=\"$resources.createPaymentIntent.submit()\"\n\t\t\t\t\t:loading=\"$resources.createPaymentIntent.loading\"\n\t\t\t\t>\n\t\t\t\t\tProceed to payment using Stripe\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t\t<div v-if=\"step == 'Add Card Details'\">\n\t\t\t\t<Button\n\t\t\t\t\tclass=\"ml-2\"\n\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t@click=\"onBuyClick\"\n\t\t\t\t\t:loading=\"paymentInProgress\"\n\t\t\t\t>\n\t\t\t\t\tMake payment via Stripe\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script>\nimport StripeLogo from '@/components/StripeLogo.vue';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { toast } from 'vue-sonner';\nimport { DashboardError } from '../utils/error';\n\nexport default {\n\tname: 'BuyPrepaidCreditsStripe',\n\tcomponents: {\n\t\tStripeLogo\n\t},\n\tprops: {\n\t\tamount: {\n\t\t\tdefault: 0\n\t\t},\n\t\tminimumAmount: {\n\t\t\tdefault: 0\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tstep: 'Get Amount', // Get Amount / Add Card Details\n\t\t\tclientSecret: null,\n\t\t\tcardErrorMessage: null,\n\t\t\terrorMessage: null,\n\t\t\tpaymentInProgress: false\n\t\t};\n\t},\n\tresources: {\n\t\tcreatePaymentIntent() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.billing.create_payment_intent_for_buying_credits',\n\t\t\t\tparams: {\n\t\t\t\t\tamount: this.amount\n\t\t\t\t},\n\t\t\t\tvalidate() {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.amount < this.minimumAmount &&\n\t\t\t\t\t\t!this.$team.doc.erpnext_partner\n\t\t\t\t\t) {\n\t\t\t\t\t\tthrow new DashboardError(\n\t\t\t\t\t\t\t`Amount must be greater than or equal to ${this.minimumAmount}`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tasync onSuccess(data) {\n\t\t\t\t\tthis.step = 'Setting up Stripe';\n\t\t\t\t\tlet { publishable_key, client_secret } = data;\n\t\t\t\t\tthis.clientSecret = client_secret;\n\t\t\t\t\tthis.stripe = await loadStripe(publishable_key);\n\t\t\t\t\tthis.elements = this.stripe.elements();\n\t\t\t\t\tlet theme = this.$theme;\n\t\t\t\t\tlet style = {\n\t\t\t\t\t\tbase: {\n\t\t\t\t\t\t\tcolor: theme.colors.black,\n\t\t\t\t\t\t\tfontFamily: theme.fontFamily.sans.join(', '),\n\t\t\t\t\t\t\tfontSmoothing: 'antialiased',\n\t\t\t\t\t\t\tfontSize: '13px',\n\t\t\t\t\t\t\t'::placeholder': {\n\t\t\t\t\t\t\t\tcolor: theme.colors.gray['400']\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinvalid: {\n\t\t\t\t\t\t\tcolor: theme.colors.red['600'],\n\t\t\t\t\t\t\ticonColor: theme.colors.red['600']\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tthis.card = this.elements.create('card', {\n\t\t\t\t\t\thidePostalCode: true,\n\t\t\t\t\t\tstyle: style,\n\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\tcomplete: '',\n\t\t\t\t\t\t\tfocus: 'bg-gray-100'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.step = 'Add Card Details';\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tthis.card.mount(this.$refs['card-element']);\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.card.addEventListener('change', event => {\n\t\t\t\t\t\tthis.cardErrorMessage = event.error?.message || null;\n\t\t\t\t\t});\n\t\t\t\t\tthis.card.addEventListener('ready', () => {\n\t\t\t\t\t\tthis.ready = true;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tmethods: {\n\t\tsetupStripe() {\n\t\t\tthis.$resources.createPaymentIntent.submit();\n\t\t},\n\t\tasync onBuyClick() {\n\t\t\tthis.paymentInProgress = true;\n\t\t\tlet payload = await this.stripe.confirmCardPayment(this.clientSecret, {\n\t\t\t\tpayment_method: {\n\t\t\t\t\tcard: this.card\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (payload.error) {\n\t\t\t\tthis.errorMessage = payload.error.message;\n\t\t\t\tthis.paymentInProgress = false;\n\t\t\t} else {\n\t\t\t\ttoast.success(\n\t\t\t\t\t'Payment processed successfully, we will update your account shortly on confirmation from Stripe'\n\t\t\t\t);\n\t\t\t\tthis.paymentInProgress = false;\n\t\t\t\tthis.$emit('success');\n\t\t\t\tthis.errorMessage = null;\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\ttotalAmount() {\n\t\t\tlet { currency, billing_info } = this.$account\n\t\t\t\t? this.$account.team\n\t\t\t\t: this.$team.doc;\n\t\t\tif (currency === 'INR') {\n\t\t\t\treturn Number(\n\t\t\t\t\t(\n\t\t\t\t\t\tthis.amount +\n\t\t\t\t\t\tthis.amount * (billing_info.gst_percentage || 0)\n\t\t\t\t\t).toFixed(2)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn this.amount;\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<div>\n\t\t<p v-if=\"$team.doc.currency === 'INR'\" class=\"mt-3 text-p-sm\">\n\t\t\tIf you select Razorpay, you can pay using Credit Card, Debit Card, Net\n\t\t\tBanking, UPI, Wallets, etc. If you are using Net Banking, it may take upto\n\t\t\t5 days for balance to reflect.\n\t\t</p>\n\t\t<ErrorMessage\n\t\t\tclass=\"mt-3\"\n\t\t\t:message=\"$resources.createRazorpayOrder.error\"\n\t\t/>\n\t\t<div class=\"mt-4 flex w-full justify-between\">\n\t\t\t<div></div>\n\t\t\t<Button\n\t\t\t\tvariant=\"solid\"\n\t\t\t\t:loading=\"$resources.createRazorpayOrder.loading\"\n\t\t\t\tv-if=\"!isPaymentComplete\"\n\t\t\t\t@click=\"buyCreditsWithRazorpay\"\n\t\t\t>\n\t\t\t\tProceed to payment using Razorpay\n\t\t\t</Button>\n\t\t\t<Button v-else variant=\"solid\" :loading=\"isVerifyingPayment\"\n\t\t\t\t>Confirming payment</Button\n\t\t\t>\n\t\t</div>\n\t</div>\n</template>\n<script>\nimport { toast } from 'vue-sonner';\nimport { DashboardError } from '../utils/error';\n\nexport default {\n\tname: 'BuyPrepaidCreditsRazorpay',\n\tprops: {\n\t\tamount: {\n\t\t\tdefault: 0\n\t\t},\n\t\tminimumAmount: {\n\t\t\tdefault: 0\n\t\t},\n\t\tisOnboarding: {\n\t\t\tdefault: false\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisPaymentComplete: false,\n\t\t\tisVerifyingPayment: false\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.razorpayCheckoutJS = document.createElement('script');\n\t\tthis.razorpayCheckoutJS.setAttribute(\n\t\t\t'src',\n\t\t\t'https://checkout.razorpay.com/v1/checkout.js'\n\t\t);\n\t\tthis.razorpayCheckoutJS.async = true;\n\t\tdocument.head.appendChild(this.razorpayCheckoutJS);\n\t},\n\tresources: {\n\t\tcreateRazorpayOrder() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.billing.create_razorpay_order',\n\t\t\t\tparams: {\n\t\t\t\t\tamount: this.amount\n\t\t\t\t},\n\t\t\t\tonSuccess(data) {\n\t\t\t\t\tthis.processOrder(data);\n\t\t\t\t},\n\t\t\t\tvalidate() {\n\t\t\t\t\tif (this.amount < this.minimumAmount) {\n\t\t\t\t\t\tthrow new DashboardError(\n\t\t\t\t\t\t\t'Amount less than minimum amount required'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\thandlePaymentFailed() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.billing.handle_razorpay_payment_failed',\n\t\t\t\tonSuccess() {\n\t\t\t\t\tconsole.log('Payment Failed.');\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tmethods: {\n\t\tbuyCreditsWithRazorpay() {\n\t\t\tthis.$resources.createRazorpayOrder.submit();\n\t\t},\n\t\tprocessOrder(data) {\n\t\t\tconst options = {\n\t\t\t\tkey: data.key_id,\n\t\t\t\torder_id: data.order_id,\n\t\t\t\tname: 'Easytouch Cloud',\n\t\t\t\timage: '/assets/press/images/frappe-cloud-logo.png',\n\t\t\t\tprefill: {\n\t\t\t\t\temail: this.$team.doc.user\n\t\t\t\t},\n\t\t\t\thandler: this.handlePaymentSuccess,\n\t\t\t\ttheme: { color: '#171717' }\n\t\t\t};\n\n\t\t\tconst rzp = new Razorpay(options);\n\n\t\t\t// Opens the payment checkout frame\n\t\t\trzp.open();\n\n\t\t\t// Attach failure handler\n\t\t\trzp.on('payment.failed', this.handlePaymentFailed);\n\t\t\t// rzp.on('payment.success', this.handlePaymentSuccess);\n\t\t},\n\t\thandlePaymentFailed(response) {\n\t\t\tthis.$resources.handlePaymentFailed.submit({ response });\n\t\t\ttoast.error('Payment failed');\n\t\t},\n\t\thandlePaymentSuccess() {\n\t\t\tthis.isPaymentComplete = true;\n\t\t\tif (this.isOnboarding) {\n\t\t\t\tthis.checkForOnboardingPaymentCompletion();\n\t\t\t} else {\n\t\t\t\tthis.$emit('success');\n\t\t\t\ttoast.success('Payment successful');\n\t\t\t}\n\t\t},\n\t\tasync checkForOnboardingPaymentCompletion() {\n\t\t\tthis.isVerifyingPayment = true;\n\t\t\tawait this.$team.reload();\n\t\t\tif (!this.$team.doc.payment_mode) {\n\t\t\t\tsetTimeout(this.checkForOnboardingPaymentCompletion, 2000);\n\t\t\t} else {\n\t\t\t\tthis.isVerifyingPayment = false;\n\t\t\t\tthis.$emit('success');\n\t\t\t}\n\t\t}\n\t},\n\tbeforeUnmount() {\n\t\tthis.razorpayCheckoutJS?.remove();\n\t}\n};\n</script>\n","<template>\n\t<div>\n\t\t<p v-if=\"$team.doc.currency === 'INR'\" class=\"mt-3 text-p-sm\">\n\t\t\tIf you select Razorpay, you can pay using Credit Card, Debit Card, Net\n\t\t\tBanking, UPI, Wallets, etc. If you are using Net Banking, it may take upto\n\t\t\t5 days for balance to reflect.\n\t\t</p>\n\t\t<ErrorMessage\n\t\t\tclass=\"mt-3\"\n\t\t\t:message=\"$resources.createRazorpayOrder.error\"\n\t\t/>\n\t\t<div class=\"mt-4 flex w-full justify-between\">\n\t\t\t<div></div>\n\t\t\t<Button\n\t\t\t\tvariant=\"solid\"\n\t\t\t\t:loading=\"$resources.createRazorpayOrder.loading\"\n\t\t\t\tv-if=\"!isPaymentComplete\"\n\t\t\t\t@click=\"buyCreditsWithRazorpay\"\n\t\t\t>\n\t\t\t\tProceed to payment using Razorpay\n\t\t\t</Button>\n\t\t\t<Button v-else variant=\"solid\" :loading=\"isVerifyingPayment\"\n\t\t\t\t>Confirming payment</Button\n\t\t\t>\n\t\t</div>\n\t</div>\n</template>\n<script>\nimport { toast } from 'vue-sonner';\nimport { DashboardError } from '../utils/error';\n\nexport default {\n\tname: 'BuyPrepaidCreditsBiti',\n\tprops: {\n\t\tamount: {\n\t\t\tdefault: 0\n\t\t},\n\t\tminimumAmount: {\n\t\t\tdefault: 0\n\t\t},\n\t\tisOnboarding: {\n\t\t\tdefault: false\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisPaymentComplete: false,\n\t\t\tisVerifyingPayment: false\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.razorpayCheckoutJS = document.createElement('script');\n\t\tthis.razorpayCheckoutJS.setAttribute(\n\t\t\t'src',\n\t\t\t'https://checkout.razorpay.com/v1/checkout.js'\n\t\t);\n\t\tthis.razorpayCheckoutJS.async = true;\n\t\tdocument.head.appendChild(this.razorpayCheckoutJS);\n\t},\n\tresources: {\n\t\tcreateRazorpayOrder() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.billing.create_biti_order',\n\t\t\t\tparams: {\n\t\t\t\t\tamount: this.amount\n\t\t\t\t},\n\t\t\t\tonSuccess(data) {\n\t\t\t\t\tthis.processOrder(data);\n\t\t\t\t},\n\t\t\t\tvalidate() {\n\t\t\t\t\tif (this.amount < this.minimumAmount) {\n\t\t\t\t\t\tthrow new DashboardError(\n\t\t\t\t\t\t\t'Amount less than minimum amount required'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\thandlePaymentFailed() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.billing.handle_razorpay_payment_failed',\n\t\t\t\tonSuccess() {\n\t\t\t\t\tconsole.log('Payment Failed.');\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tmethods: {\n\t\tbuyCreditsWithRazorpay() {\n\t\t\tthis.$resources.createRazorpayOrder.submit();\n\t\t},\n\t\tprocessOrder(data) {\n\t\t\tconst options = {\n\t\t\t\tkey: data.key_id,\n\t\t\t\torder_id: data.order_id,\n\t\t\t\tname: 'Easytouch Cloud',\n\t\t\t\timage: '/assets/press/images/frappe-cloud-logo.png',\n\t\t\t\tprefill: {\n\t\t\t\t\temail: this.$team.doc.user\n\t\t\t\t},\n\t\t\t\thandler: this.handlePaymentSuccess,\n\t\t\t\ttheme: { color: '#171717' }\n\t\t\t};\n\n\t\t\tconst rzp = new Razorpay(options);\n\n\t\t\t// Opens the payment checkout frame\n\t\t\trzp.open();\n\n\t\t\t// Attach failure handler\n\t\t\trzp.on('payment.failed', this.handlePaymentFailed);\n\t\t\t// rzp.on('payment.success', this.handlePaymentSuccess);\n\t\t},\n\t\thandlePaymentFailed(response) {\n\t\t\tthis.$resources.handlePaymentFailed.submit({ response });\n\t\t\ttoast.error('Payment failed');\n\t\t},\n\t\thandlePaymentSuccess() {\n\t\t\tthis.isPaymentComplete = true;\n\t\t\tif (this.isOnboarding) {\n\t\t\t\tthis.checkForOnboardingPaymentCompletion();\n\t\t\t} else {\n\t\t\t\tthis.$emit('success');\n\t\t\t\ttoast.success('Payment successful');\n\t\t\t}\n\t\t},\n\t\tasync checkForOnboardingPaymentCompletion() {\n\t\t\tthis.isVerifyingPayment = true;\n\t\t\tawait this.$team.reload();\n\t\t\tif (!this.$team.doc.payment_mode) {\n\t\t\t\tsetTimeout(this.checkForOnboardingPaymentCompletion, 2000);\n\t\t\t} else {\n\t\t\t\tthis.isVerifyingPayment = false;\n\t\t\t\tthis.$emit('success');\n\t\t\t}\n\t\t}\n\t},\n\tbeforeUnmount() {\n\t\tthis.razorpayCheckoutJS?.remove();\n\t}\n};\n</script>\n","<template>\n\t<div>\n\t\t<FormControl\n\t\t\t:label=\"`Amount (Minimum Amount: ${minimumAmount})`\"\n\t\t\tclass=\"mb-3\"\n\t\t\tv-model.number=\"creditsToBuy\"\n\t\t\tname=\"amount\"\n\t\t\tautocomplete=\"off\"\n\t\t\ttype=\"number\"\n\t\t\t:min=\"minimumAmount\"\n\t\t>\n\t\t\t<template #prefix>\n\t\t\t\t<div class=\"grid w-4 place-items-center text-sm text-gray-700\">\n\t\t\t\t\t{{ $team.doc.currency === 'INR' ? '₹' : '$' }}\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</FormControl>\n\t\t<FormControl\n\t\t\tv-if=\"$team.doc.currency === 'INR'\"\n\t\t\t:label=\"`Total Amount + GST (${\n\t\t\t\t$team.doc?.billing_info.gst_percentage * 100\n\t\t\t}%)`\"\n\t\t\tdisabled\n\t\t\t:modelValue=\"totalAmount\"\n\t\t\tname=\"total\"\n\t\t\tautocomplete=\"off\"\n\t\t\ttype=\"number\"\n\t\t>\n\t\t\t<template #prefix>\n\t\t\t\t<div class=\"grid w-4 place-items-center text-sm text-gray-700\">\n\t\t\t\t\t{{ $team.doc.currency === 'INR' ? '₹' : '$' }}\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</FormControl>\n\t</div>\n\n\t<div class=\"mt-4\">\n\t\t<div class=\"text-xs text-gray-600\">Select Payment Gateway</div>\n\t\t<div class=\"mt-1.5 grid grid-cols-1 gap-2 sm:grid-cols-2\">\n\t\t\t<button\n\t\t\t\tv-if=\"$team.doc.currency === 'INR' || $team.doc.razorpay_enabled\"\n\t\t\t\t@click=\"paymentGateway = 'Razorpay'\"\n\t\t\t\tlabel=\"Razorpay\"\n\t\t\t\tclass=\"flex h-10 items-center justify-center rounded border\"\n\t\t\t\t:class=\"{\n\t\t\t\t\t'border-gray-300': paymentGateway !== 'Razorpay',\n\t\t\t\t\t'border-gray-900 ring-1 ring-gray-900': paymentGateway === 'Razorpay'\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<img\n\t\t\t\t\tclass=\"w-24\"\n\t\t\t\t\t:src=\"`/assets/press/images/razorpay-logo.svg`\"\n\t\t\t\t\talt=\"Razorpay Logo\"\n\t\t\t\t/>\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\t@click=\"paymentGateway = 'BitiWallet'\"\n\t\t\t\tlabel=\"BitiWallet\"\n\t\t\t\tclass=\"flex h-10 items-center justify-center rounded border\"\n\t\t\t\t:class=\"{\n\t\t\t\t\t'border-gray-300': paymentGateway !== 'BitiWallet',\n\t\t\t\t\t'border-gray-900 ring-1 ring-gray-900': paymentGateway === 'BitiWallet'\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<img\n\t\t\t\t\tclass=\"h-7 w-24\"\n\t\t\t\t\t:src=\"`/assets/press/images/biti-logo.svg`\"\n\t\t\t\t\talt=\"BitiWallet\"\n\t\t\t\t/>\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\t@click=\"paymentGateway = 'Stripe'\"\n\t\t\t\tlabel=\"Stripe\"\n\t\t\t\tclass=\"flex h-10 items-center justify-center rounded border\"\n\t\t\t\t:class=\"{\n\t\t\t\t\t'border-gray-300': paymentGateway !== 'Stripe',\n\t\t\t\t\t'border-gray-900 ring-1 ring-gray-900': paymentGateway === 'Stripe'\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<img\n\t\t\t\t\tclass=\"h-7 w-24\"\n\t\t\t\t\t:src=\"`/assets/press/images/stripe-logo.svg`\"\n\t\t\t\t\talt=\"Stripe Logo\"\n\t\t\t\t/>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\n\t<BuyPrepaidCreditsStripe\n\t\tv-if=\"paymentGateway === 'Stripe'\"\n\t\t:amount=\"creditsToBuy\"\n\t\t:minimumAmount=\"minimumAmount\"\n\t\t@success=\"onSuccess\"\n\t\t@cancel=\"onCancel\"\n\t/>\n\n\t<BuyPrepaidCreditsRazorpay\n\t\tv-if=\"paymentGateway === 'Razorpay'\"\n\t\t:amount=\"creditsToBuy\"\n\t\t:minimumAmount=\"minimumAmount\"\n\t\t:isOnboarding=\"isOnboarding\"\n\t\t@success=\"onSuccess\"\n\t\t@cancel=\"onCancel\"\n\t/>\n\t<BuyPrepaidCreditsBiti\n\t\tv-if=\"paymentGateway === 'BitiWallet'\"\n\t\t:amount=\"creditsToBuy\"\n\t\t:minimumAmount=\"minimumAmount\"\n\t\t:isOnboarding=\"isOnboarding\"\n\t\t@success=\"onSuccess\"\n\t\t@cancel=\"onCancel\"\n\t/>\n</template>\n<script>\nimport BuyPrepaidCreditsStripe from './BuyPrepaidCreditsStripe.vue';\nimport BuyPrepaidCreditsRazorpay from './BuyPrepaidCreditsRazorpay.vue';\nimport BuyPrepaidCreditsBiti from './BuyPrepaidCreditsBiti.vue';\n\nexport default {\n\tname: 'BuyPrepaidCreditsForm',\n\tcomponents: {\n\t\tBuyPrepaidCreditsStripe,\n\t\tBuyPrepaidCreditsRazorpay,\n\t\tBuyPrepaidCreditsBiti\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tpaymentGateway: null,\n\t\t\tcreditsToBuy: this.minimumAmount\n\t\t};\n\t},\n\tmounted() {\n\t\tif (this.$team.doc.currency === 'USD' && !this.$team.doc.razorpay_enabled) {\n\t\t\tthis.paymentGateway = 'Stripe';\n\t\t}\n\t},\n\tprops: {\n\t\tmodelValue: {\n\t\t\tdefault: false\n\t\t},\n\t\tminimumAmount: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0\n\t\t},\n\t\tisOnboarding: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\temits: ['success'],\n\tmethods: {\n\t\tonSuccess() {\n\t\t\tthis.$emit('success');\n\t\t}\n\t},\n\tcomputed: {\n\t\ttotalAmount() {\n\t\t\tlet creditsToBuy = this.creditsToBuy || 0;\n\t\t\tif (this.$team.doc.currency === 'INR') {\n\t\t\t\treturn (\n\t\t\t\t\tcreditsToBuy +\n\t\t\t\t\tcreditsToBuy * (this.$team.doc.billing_info.gst_percentage || 0)\n\t\t\t\t).toFixed(2);\n\t\t\t} else {\n\t\t\t\treturn creditsToBuy;\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n"],"names":["_sfc_main","StripeLogo","data","__async","publishable_key","client_secret","loadStripe","theme","style","event","payload","currency","billing_info","_hoisted_3","_cache","_createElementVNode","_hoisted_1","$data","_openBlock","_createElementBlock","_hoisted_2","_createCommentVNode","_ctx","_hoisted_4","$event","_withCtx","_createTextVNode","_hoisted_5","$options","toast","_a","BuyPrepaidCreditsBiti","creditsToBuy","_Fragment","$props","_toDisplayString"],"mappings":"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"}