{"version":3,"file":"LogPage-i5SDDRW-.js","sources":["../../../../dashboard/src2/pages/LogPage.vue"],"sourcesContent":["<template>\n\t<div class=\"p-5\">\n\t\t<div class=\"flex items-center space-x-2\">\n\t\t\t<Button\n\t\t\t\t:route=\"{\n\t\t\t\t\tname:\n\t\t\t\t\t\tobject.doctype === 'Site'\n\t\t\t\t\t\t\t? 'Site Logs'\n\t\t\t\t\t\t\t: `${object.doctype} Detail Logs`\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<template #icon>\n\t\t\t\t\t<i-lucide-arrow-left class=\"inline-block h-4 w-4\" />\n\t\t\t\t</template>\n\t\t\t</Button>\n\t\t\t<h2 class=\"text-lg font-medium text-gray-900\">{{ logName }}</h2>\n\t\t\t<div class=\"!ml-auto flex gap-2\">\n\t\t\t\t<Button\n\t\t\t\t\t:route=\"{\n\t\t\t\t\t\tname: 'Log Browser',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tmode: object.doctype === 'Site' ? 'site' : 'bench',\n\t\t\t\t\t\t\tdocName: name,\n\t\t\t\t\t\t\tlogId: logName\n\t\t\t\t\t\t}\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t<i-lucide-sparkle class=\"h-4 w-4\" />\n\t\t\t\t\t</template>\n\t\t\t\t\tView in Log Browser\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\t@click=\"$resources.log.reload()\"\n\t\t\t\t\t:loading=\"$resources.log.loading\"\n\t\t\t\t>\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<i-lucide-refresh-ccw class=\"h-4 w-4\" />\n\t\t\t\t\t</template>\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"mt-3\">\n\t\t\t<div class=\"mt-8 space-y-4\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"overflow-auto rounded border border-gray-100 bg-gray-900 px-2.5 py-2 text-sm text-gray-200\"\n\t\t\t\t>\n\t\t\t\t\t<pre>{{\n\t\t\t\t\t\t$resources.log.loading ? 'Loading...' : log || 'No output'\n\t\t\t\t\t}}</pre>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { FeatherIcon } from 'frappe-ui';\nimport { getObject } from '../objects';\nimport { unreachable } from '../objects/common';\n\nexport default {\n\tname: 'LogPage',\n\tprops: ['name', 'logName', 'objectType'],\n\tcomponents: { FeatherIcon },\n\tresources: {\n\t\tlog() {\n\t\t\tconst url = this.forSite ? 'press.api.site.log' : 'press.api.bench.log';\n\t\t\tconst params = { log: this.logName, name: this.name };\n\t\t\tif (!this.forSite) {\n\t\t\t\tparams.name = `bench-${this.name?.split('-')[1]}`;\n\t\t\t\tparams.bench = this.name;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tauto: true,\n\t\t\t\ttransform(log) {\n\t\t\t\t\treturn log[this.logName];\n\t\t\t\t},\n\t\t\t\tonSuccess() {\n\t\t\t\t\tthis.lastLoaded = Date.now();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tcomputed: {\n\t\tforSite() {\n\t\t\tif (this.objectType === 'Site') return true;\n\t\t\tif (this.objectType === 'Bench') return false;\n\t\t\tthrow unreachable;\n\t\t},\n\t\tobject() {\n\t\t\treturn getObject(this.objectType);\n\t\t},\n\t\tlog() {\n\t\t\treturn this.$resources.log.data;\n\t\t}\n\t}\n};\n</script>\n"],"names":["_sfc_main","url","params","log","unreachable","getObject","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_openBlock","_createElementBlock","_createElementVNode","$options","_withCtx","_cache","_createTextVNode","$event","_ctx","_toDisplayString"],"mappings":"o2BA8DA,MAAAA,EAAA,CACC,KAAA,UACA,MAAA,CAAA,OAAA,UAAA,YAAA,oDAIE,MAAAC,EAAA,KAAA,QAAA,qBAAA,sBACAC,EAAA,CAAA,IAAA,KAAA,QAAA,KAAA,KAAA,IAAA,EACA,OAAA,KAAA,0FAKA,CACC,IAAAD,EACA,OAAAC,EACA,KAAA,GACA,UAAAC,EAAA,+DAKA,EAEF,GAED,SAAA,CACC,SAAA,CACC,GAAA,KAAA,aAAA,OAAA,MAAA,GACA,GAAA,KAAA,aAAA,QAAA,MAAA,GACA,MAAAC,GAED,QAAA,CACC,OAAAC,EAAA,KAAA,UAAA,SAGA,OAAA,KAAA,WAAA,IAAA,IACD,CACD,CACD,EApGMC,EAAA,CAAA,MAAA,KAAA,EACCC,EAAA,CAAA,MAAA,6BAAA,EAaAC,EAAA,CAAA,MAAA,mCAAA,EACCC,EAAA,CAAA,MAAA,qBAAA,EA2BDC,EAAA,CAAA,MAAA,MAAA,EACCC,EAAA,CAAA,MAAA,gBAAA,EAEHC,EAAA,CAAA,MAAA,4FAAA,gDA7CJ,OAAAC,EAAA,EAAAC,EAAA,MAAAR,EAAA,CACCS,EAAA,MAAAR,EAAA,kBAE6BS,EAAA,OAAA,UAAA,mBAA2D,GAAAA,EAAA,OAAA,OAAA,kBAO3E,KAAAC,EAAA,IAAA,kFAKZF,EAAA,MAAAN,EAAA,wCAEoE,KAAAO,EAAA,OAAA,UAAA,OAAA,OAAA,2CASvD,OAAAC,EAAA,IAAA,0BA3BhB,QAAAA,EAAA,IAAA,CAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAAA,uBAAA,4BAiCM,QAAAD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAE,GAAAC,EAAA,WAAA,IAAA,OAAA,GACA,QAAAA,EAAA,WAAA,IAAA,UAEU,KAAAJ,EAAA,IAAA,kDAOdF,EAAA,MAAAL,EAAA,CACCK,EAAA,MAAAJ,EAAA,CACCI,EAAA,MAAAH,EAAA,CAGCG,EAAA,MAAA,KAAAO,EAAAD,EAAA,WAAA,IAAA,QAAA,aAAAL,EAAA,KAAA,WAAA,EAAA,CAAA"}