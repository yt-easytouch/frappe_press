import{_ as c}from"./WizardCard-D6pRuZbe.js";import{x as v,h as w,o as p,w as u,j as a,A as l,q as d,u as k,ag as h,F as A,v as x,t as V,bx as $,a9 as N,X as S,Y as B}from"./main-Dpl-JOF2.js";import{_ as f}from"./SelectAppFromGithub-O0_GyuCD.js";(function(){try{var s=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},e=new Error().stack;e&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[e]="63b935fc-1864-405a-a4ab-0924015a5a81",s._sentryDebugIdIdentifier="sentry-dbid-63b935fc-1864-405a-a4ab-0924015a5a81")}catch(n){}})();{var o=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};o._sentryModuleMetadata=o._sentryModuleMetadata||{},o._sentryModuleMetadata[new Error().stack]=Object.assign({},o._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const C={name:"NewMarketplaceApp",components:{WizardCard:c,SelectAppFromGithub:f},data(){return{app:null,version:null}},resources:{frappeVersions(){return{url:"press.api.marketplace.frappe_versions",auto:!0,onSuccess(s){s&&(this.version=s[0])}}},addApp(){var s,e,n,i,t;return{url:"press.api.marketplace.new_app",params:{app:{name:(s=this.app)==null?void 0:s.name,title:(e=this.app)==null?void 0:e.title,repository_url:(n=this.app)==null?void 0:n.repository_url,branch:(i=this.app)==null?void 0:i.branch,github_installation_id:(t=this.app)==null?void 0:t.github_installation_id,version:this.version}},onSuccess(){this.$router.push(`/marketplace/apps/${this.app.name}`)}}}},computed:{versionList(){return!this.$resources.frappeVersions.data||this.$resources.frappeVersions.loading?[]:this.$resources.frappeVersions.data}}},D={key:0};function M(s,e,n,i,t,m){const _=f,b=N,g=S,y=c;return p(),w(y,null,{default:u(()=>[e[5]||(e[5]=a("div",{class:"mb-6 text-center"},[a("h1",{class:"text-2xl font-bold"},"Add a New App"),a("p",{class:"text-base text-gray-700"},"Add an app to marketplace")],-1)),l(_,{onOnSelect:e[0]||(e[0]=r=>t.app=r)}),t.app?(p(),d("div",D,[e[4]||(e[4]=a("label",{class:"mb-3 text-base",for:"version-select"},"Compatible Frappe Version",-1)),h(a("select",{id:"version-select",class:"form-select mb-4 block","onUpdate:modelValue":e[1]||(e[1]=r=>t.version=r)},[(p(!0),d(A,null,x(m.versionList,r=>(p(),d("option",{key:r},V(r),1))),128))],512),[[$,t.version]]),l(b,{class:"mb-3",message:s.$resources.addApp.error},null,8,["message"]),l(g,{loading:s.$resources.addApp.loading,onClick:e[2]||(e[2]=r=>s.$resources.addApp.submit()),variant:"solid",class:"w-full"},{default:u(()=>e[3]||(e[3]=[B("Add to marketplace")])),_:1},8,["loading"])])):k("",!0)]),_:1})}const L=v(C,[["render",M]]);export{L as default};
//# sourceMappingURL=NewMarketplaceApp-BN2XTMX0.js.map
