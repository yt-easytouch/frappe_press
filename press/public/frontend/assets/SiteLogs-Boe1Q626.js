import y from"./CardWithDetails-8Q6clK2F.js";import{x as N,h as l,o as e,w as g,j as r,q as s,u as $,A as f,X as b,Y as C,t as m,aV as B,F as v,v as w,r as h,n as S}from"./main-Dpl-JOF2.js";import{_ as I}from"./ListItem-CkkFcC1t.js";import{_ as k}from"./CardDetails-BY8v0wfH.js";import"./Card-BCzTSeNK.js";(function(){try{var t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},a=new Error().stack;a&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[a]="5ab80cb7-c3a0-49a7-9360-73f15cfbad93",t._sentryDebugIdIdentifier="sentry-dbid-5ab80cb7-c3a0-49a7-9360-73f15cfbad93")}catch(o){}})();{var u=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};u._sentryModuleMetadata=u._sentryModuleMetadata||{},u._sentryModuleMetadata[new Error().stack]=Object.assign({},u._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const V={name:"SiteLogsDetail",props:["siteName","logName"],components:{CardDetails:k},inject:["viewportWidth"],resources:{log(){return{url:"press.api.site.log",params:{name:this.siteName,log:this.logName},auto:!!this.logName}}},computed:{log(){return this.$resources.log.data&&this.$resources.log.data[this.logName]},logLines(){return this.log&&this.logName?this.log.split(`
`):[]}}},E={class:"px-6 py-5"},W={key:0,class:"flex items-center"},j={class:"text-lg font-medium"},z={class:""},A={key:1},F={key:1,class:"text-base text-gray-600"},M={key:0,class:"flex-auto overflow-auto px-6 font-mono text-xs"},T={class:"overflow-x-auto"};function q(t,a,o,D,x,n){const d=b,_=k;return e(),l(_,{showDetails:n.log},{default:g(()=>[r("div",E,[n.log!=null?(e(),s("div",W,[f(d,{class:"mr-3 md:hidden",onClick:a[0]||(a[0]=c=>t.$router.back()),icon:"chevron-left"}),r("h4",j,[C(m(o.logName)+" ",1),r("span",z,"("+m(n.logLines.length)+" lines)",1)])])):(e(),s("div",A,[t.$resources.log.loading?(e(),l(d,{key:0,loading:!0,"loading-text":"Loading..."})):(e(),s("span",F,m(o.logName?"Invalid Log":"No log selected"),1))]))]),n.log?(e(),s("div",M,[r("div",{class:"mb-6 whitespace-pre-line rounded-md bg-gray-100 px-2 py-2.5",style:B({width:n.viewportWidth<768?"calc(100vw - 6rem)":""})},[r("div",T,[(e(!0),s(v,null,w(n.logLines,(c,p)=>(e(),s("div",{key:p},m(c),1))),128))])],4)])):$("",!0)]),_:1},8,["showDetails"])}const K=N(V,[["render",q]]),O={name:"SiteLogs",props:["siteName","logName"],components:{CardWithDetails:y,SiteLogsDetail:K},resources:{logs(){return{url:"press.api.site.logs",params:{name:this.siteName},auto:!0}}}},P={key:0},U={key:1},X={key:1,class:"text-base text-gray-600"};function Y(t,a,o,D,x,n){const d=I,_=h("router-link"),c=b,p=h("SiteLogsDetail"),L=y;return e(),l(L,{title:"Logs",subtitle:"Available logs for your site",showDetails:o.logName},{details:g(()=>[f(p,{siteName:o.siteName,logName:o.logName},null,8,["siteName","logName"])]),default:g(()=>[t.$resources.logs.data&&t.$resources.logs.data.length?(e(),s("div",P,[(e(!0),s(v,null,w(t.$resources.logs.data,i=>(e(),l(_,{class:S(["block cursor-pointer rounded-md px-2.5",o.logName===i.name?"bg-gray-100":"hover:bg-gray-50"]),key:i.name,to:`/sites/${o.siteName}/logs/${i.name}`},{default:g(()=>[f(d,{title:i.name,description:`${t.formatDate(i.modified,t.isUTC=!0)+`
`+i.size} kB`},null,8,["title","description"]),a[0]||(a[0]=r("div",{class:"border-b"},null,-1))]),_:2},1032,["class","to"]))),128))])):(e(),s("div",U,[t.$resources.logs.loading?(e(),l(c,{key:0,loading:!0,"loading-text":"Loading..."})):(e(),s("span",X,"No logs"))]))]),_:1},8,["showDetails"])}const G=N(O,[["render",Y]]);export{G as default};
//# sourceMappingURL=SiteLogs-Boe1Q626.js.map
