var O=Object.defineProperty,U=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var y=(s,e,r)=>e in s?O(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,b=(s,e)=>{for(var r in e||(e={}))H.call(e,r)&&y(s,r,e[r]);if(f)for(var r of f(e))z.call(e,r)&&y(s,r,e[r]);return s},h=(s,e)=>U(s,j(e));import{_ as w,a as k,b as T,c as C}from"./TableHeader-DvqcS5cY.js";import{x as P,q as l,o as t,j as i,A as a,w as u,B as R,a8 as q,F as S,v as g,h as d,a5 as K,C as X,a7 as J,X as Q,t as W,u as Y,ae as Z}from"./main-Dpl-JOF2.js";import{_ as G}from"./Breadcrumbs-yx7M4N4X.js";(function(){try{var s=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},e=new Error().stack;e&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[e]="d2b9a3c2-b528-4679-9fd2-77b945030f95",s._sentryDebugIdIdentifier="sentry-dbid-d2b9a3c2-b528-4679-9fd2-77b945030f95")}catch(r){}})();{var _=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};_._sentryModuleMetadata=_._sentryModuleMetadata||{},_._sentryModuleMetadata[new Error().stack]=Object.assign({},_._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const ee={name:"Servers",components:{Table:C,TableHeader:T,TableRow:k,TableCell:w},pageMeta(){return{title:"Security - Easytouch Cloud"}},data(){return{searchTerm:"",server_type:"All Servers"}},resources:{allServers(){return{url:"press.api.security.get_servers",params:{server_filter:{server_type:this.server_type,tag:""}},auto:!0,cache:["SecurityServerList",this.server_type,this.$account.team.name]}}},computed:{servers(){if(!this.$resources.allServers.data)return[];let s=this.$resources.allServers.data.filter(e=>this.$account.hasPermission(e.name,"",!0));return this.searchTerm&&(s=s.filter(e=>e.name.toLowerCase().includes(this.searchTerm.toLowerCase()))),s.map(e=>h(b({},e),{name:e.title||e.name,route:{name:"SecurityOverview",params:{serverName:e.name}}}))}},methods:{getServerFilterHeading(){return this.serverFilter},serverFilterOptions(){return[{group:"Types",items:[{label:"All Servers",onClick:()=>this.serverFilter="All Servers"},{label:"App Servers",onClick:()=>this.serverFilter="App Servers"},{label:"Database Servers",onClick:()=>this.serverFilter="Database Servers"}]}]},serverTypeFilterOptions(){return[{label:"All Servers",value:"All Servers"},{label:"App Servers",value:"App Servers"},{label:"Database Servers",value:"Database Servers"}]},dropdownItems(s){return[{label:"View Security Updates",onClick:()=>{this.$router.push(`/security/${s.route.params.serverName}/security_update`)}},{label:"Manage Firewall",onClick:()=>{this.$router.push(`/security/${s.app_server}/firewall`)}},{label:"SSH Sessions",onClick:()=>{this.$router.push(`/security/${s.app_server}/ssh_session_log`)}}]}}},se={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-5 py-2.5"},re={class:"mx-5 mt-5"},te={class:"flex"},ae={class:"flex w-full space-x-2 pb-4"},ne={key:1,class:"w-full text-right"},oe={key:2},le={class:"mt-8 flex items-center justify-center"},ie={key:1,class:"text-base text-gray-700"};function ce(s,e,r,ue,p,m){const $=G,x=R,v=q,F=T,A=K,D=Q,V=X,B=w,I=k,N=Z,E=C;return t(),l("div",null,[i("header",se,[a($,{items:[{label:"Security",route:"/security"}]})]),i("div",null,[i("div",re,[i("div",te,[i("div",ae,[a(v,{label:"Search Servers",modelValue:p.searchTerm,"onUpdate:modelValue":e[0]||(e[0]=n=>p.searchTerm=n)},{prefix:u(()=>[a(x,{name:"search",class:"w-4 text-gray-600"})]),_:1},8,["modelValue"]),a(v,{label:"Server Type",class:"mr-8",type:"select",options:m.serverTypeFilterOptions(),modelValue:p.server_type,"onUpdate:modelValue":e[1]||(e[1]=n=>p.server_type=n)},null,8,["options","modelValue"])])]),a(E,{columns:[{label:"Server Name",name:"name"},{label:"Security Updates",name:"security_updates_status"},{label:"",name:"actions",width:.5}],rows:m.servers},{default:u(({rows:n,columns:L})=>[a(F,{class:"hidden sm:grid"}),(t(!0),l(S,null,g(n,o=>(t(),d(I,{key:o.name,row:o},{default:u(()=>[(t(!0),l(S,null,g(L,c=>(t(),d(B,null,{default:u(()=>[c.name==="security_updates_status"?(t(),d(A,{key:0,label:o[c.name],theme:o[c.name]==="Up to date"?"green":"red"},null,8,["label","theme"])):c.name=="actions"?(t(),l("div",ne,[a(V,{onClick:e[2]||(e[2]=J(()=>{},["prevent"])),options:m.dropdownItems(o)},{default:u(({open:M})=>[a(D,{variant:M?"subtle":"ghost",class:"mr-2",icon:"more-horizontal"},null,8,["variant"])]),_:2},1032,["options"])])):(t(),l("span",oe,W(o[c.name]||""),1))]),_:2},1024))),256))]),_:2},1032,["row"]))),128)),i("div",le,[s.$resources.allServers.loading&&!s.$resources.allServers.data?(t(),d(N,{key:0})):s.$resources.allServers.fetched&&n.length===0?(t(),l("div",ie," No Servers ")):Y("",!0)])]),_:1},8,["rows"])])])])}const ve=P(ee,[["render",ce]]);export{ve as default};
//# sourceMappingURL=Servers-C3SrZfZy.js.map
