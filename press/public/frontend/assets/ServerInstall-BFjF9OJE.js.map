{"version":3,"file":"ServerInstall-BFjF9OJE.js","sources":["../../../../dashboard/src/views/server/ServerInstall.vue"],"sourcesContent":["<template>\n\t<Section\n\t\tv-if=\"creationJob\"\n\t\ttitle=\"Your server is being setup ...\"\n\t\tdescription=\"Please wait while we set up your server for use\"\n\t>\n\t\t<SectionCard>\n\t\t\t<div\n\t\t\t\tv-for=\"step in creationJob.steps\"\n\t\t\t\tclass=\"flex items-center px-6 py-2 text-base\"\n\t\t\t\t:key=\"step.name\"\n\t\t\t>\n\t\t\t\t<div class=\"h-4 w-4 text-gray-800\">\n\t\t\t\t\t<Spinner\n\t\t\t\t\t\tclass=\"h-3 w-3 text-gray-500\"\n\t\t\t\t\t\tv-if=\"step.status === 'Running'\"\n\t\t\t\t\t/>\n\t\t\t\t\t<FeatherIcon\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\tclass=\"h-4 w-4\"\n\t\t\t\t\t\t:class=\"{ spin: step.status === 'Running' }\"\n\t\t\t\t\t\t:name=\"iconMap[step.status]\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<span class=\"ml-2\">{{ step.step_name }}</span>\n\t\t\t</div>\n\t\t</SectionCard>\n\t</Section>\n</template>\n\n<script>\nexport default {\n\tname: 'ServerInstall',\n\tprops: ['server'],\n\tdata() {\n\t\treturn {\n\t\t\ticonMap: {\n\t\t\t\tRunning: 'loader',\n\t\t\t\tSuccess: 'check',\n\t\t\t\tPending: 'minus'\n\t\t\t},\n\t\t\tcreationJob: null\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.$socket.on('press_job_update', this.onPressJobUpdate);\n\t\tthis.fetchJob();\n\t},\n\tunmounted() {\n\t\tthis.$socket.emit('doc_unsubscribe', 'Press Job', this.creationJob.name);\n\t\tthis.$socket.off('press_job_update', this.onPressJobUpdate);\n\t},\n\tmethods: {\n\t\tonPressJobUpdate(data) {\n\t\t\tif (\n\t\t\t\tdata.server === this.server.name &&\n\t\t\t\tdata.job_type === 'Create Server'\n\t\t\t) {\n\t\t\t\tthis.creationJob = data;\n\t\t\t\tif (\n\t\t\t\t\tdata.status === 'Success' &&\n\t\t\t\t\tthis.$route.path.startsWith(`/servers/${this.server.name}`)\n\t\t\t\t) {\n\t\t\t\t\tthis.creationJob = null;\n\t\t\t\t\tthis.$router.replace(`/servers/${this.server.name}/overview`);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tasync fetchJob() {\n\t\t\tlet jobs = await this.$call('press.api.server.press_jobs', {\n\t\t\t\tname: this.server.name\n\t\t\t});\n\t\t\tjobs.forEach(job => {\n\t\t\t\tif (job.job_type === 'Create Server') {\n\t\t\t\t\tthis.creationJob = job;\n\t\t\t\t\tthis.$socket.emit('doc_subscribe', 'Press Job', job.name);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (this.creationJob?.status === 'Success') {\n\t\t\t\tthis.$router.replace(`/servers/${this.server.name}/overview`);\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n\n<style>\n.spin {\n\tanimation: spin 4s linear infinite;\n}\n\n@keyframes spin {\n\t100% {\n\t\ttransform: rotate(360deg);\n\t}\n}\n</style>\n"],"names":["_sfc_main","data","__async","job","_a","_hoisted_1","_hoisted_2","_withCtx","_openBlock","_createElementBlock","_Fragment","_renderList","$data","step","_createElementVNode","_normalizeClass","_toDisplayString","_createCommentVNode"],"mappings":"ohCA+BA,MAAAA,EAAA,CACC,KAAA,gBACA,MAAA,CAAA,QAAA,EACA,MAAA,CACC,MAAA,CACC,QAAA,CACC,QAAA,SACA,QAAA,QACA,QAAA,SAED,YAAA,OAGF,SAAA,2DAEC,KAAA,SAAA,eAGA,KAAA,QAAA,KAAA,kBAAA,YAAA,KAAA,YAAA,IAAA,8DAGD,QAAA,qBAGGC,EAAA,SAAA,KAAA,OAAA,qCAGA,KAAA,YAAAA,sFAKC,KAAA,YAAA,sEAKH,UAAA,QAAAC,EAAA,6EAEE,KAAA,KAAA,OAAA,IACD,CAAA,GACA,QAAAC,GAAA,CACCA,EAAA,WAAA,kBACC,KAAA,YAAAA,wDAGF,CAAA,IACAC,EAAA,KAAA,cAAA,YAAAA,EAAA,UAAA,wEAGD,GACD,CACD,EAvESC,EAAA,CAAA,MAAA,uBAAA,EAYCC,EAAA,CAAA,MAAA,MAAA,qFArBR,MAAA,iCACA,YAAA,oDAJF,QAAAC,EAAA,IAAA,WAAA,QAAAA,EAAA,IAAA,EAOGC,EAAA,EAAA,EAAAC,EAAAC,EAAA,KAAAC,EAAAC,EAAA,YAAA,MAAAC,iBAEC,MAAA,qDAGAC,EAAA,MAAAT,EAAA,CAGQQ,EAAA,SAAA,0BADN,MAAA,2CAKA,MAAAE,EAAA,CAAA,UAAA,CAAA,KAAAF,EAAA,SAAA,SAAA,CAAA,CAAA,EAEC,KAAAD,EAAA,QAAAC,EAAA,MAAA,+BAGHC,EAAA,OAAAR,EAAAU,EAAAH,EAAA,SAAA,EAAA,CAAA,6BAxBJI,EAAA,GAAA,EAAA"}