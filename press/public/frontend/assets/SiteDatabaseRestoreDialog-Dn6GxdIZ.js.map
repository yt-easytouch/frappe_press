{"version":3,"file":"SiteDatabaseRestoreDialog-Dn6GxdIZ.js","sources":["../../../../dashboard/src2/components/SiteDatabaseRestoreDialog.vue"],"sourcesContent":["<template>\n\t<Dialog\n\t\t:options=\"{\n\t\t\ttitle: 'Restore',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Restore',\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\ttheme: 'red',\n\t\t\t\t\tloading: $resources.restoreBackup.loading,\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t$resources.restoreBackup.submit();\n\t\t\t\t\t\tshowRestoreDialog = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t}\"\n\t\tv-model=\"showRestoreDialog\"\n\t>\n\t\t<template v-slot:body-content>\n\t\t\t<div class=\"space-y-4\">\n\t\t\t\t<p class=\"text-base\">Restore your database using a previous backup.</p>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"flex items-center rounded border border-gray-200 bg-gray-100 p-4 text-sm text-gray-600\"\n\t\t\t\t>\n\t\t\t\t\t<i-lucide-alert-triangle class=\"mr-4 inline-block h-6 w-6\" />\n\t\t\t\t\t<div>\n\t\t\t\t\t\tThis operation will replace all <b>data</b> & <b>apps</b> in your\n\t\t\t\t\t\tsite with those from the backup\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<BackupFilesUploader v-model:backupFiles=\"selectedFiles\" />\n\t\t\t</div>\n\t\t\t<div class=\"mt-3\">\n\t\t\t\t<!-- Skip Failing Checkbox -->\n\t\t\t\t<input\n\t\t\t\t\tid=\"skip-failing\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tclass=\"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n\t\t\t\t\tv-model=\"skipFailingPatches\"\n\t\t\t\t/>\n\t\t\t\t<label for=\"skip-failing\" class=\"ml-2 text-sm text-gray-900\">\n\t\t\t\t\tSkip failing patches (if any patch fails)\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<ErrorMessage class=\"mt-2\" :message=\"$resources.restoreBackup.error\" />\n\t\t</template>\n\t</Dialog>\n</template>\n<script>\nimport { DashboardError } from '../utils/error';\n\nexport default {\n\tname: 'SiteDatabaseRestoreDialog',\n\tprops: {\n\t\tsite: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshowRestoreDialog: true,\n\t\t\tselectedFiles: {\n\t\t\t\tdatabase: null,\n\t\t\t\tpublic: null,\n\t\t\t\tprivate: null,\n\t\t\t\tconfig: null\n\t\t\t},\n\t\t\tskipFailingPatches: false\n\t\t};\n\t},\n\tresources: {\n\t\trestoreBackup() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.restore',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site,\n\t\t\t\t\tfiles: this.selectedFiles,\n\t\t\t\t\tskip_failing_patches: this.skipFailingPatches\n\t\t\t\t},\n\t\t\t\tvalidate() {\n\t\t\t\t\tif (!this.filesUploaded) {\n\t\t\t\t\t\tthrow new DashboardError(\n\t\t\t\t\t\t\t'Please upload database, public and private files to restore.'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonSuccess() {\n\t\t\t\t\tthis.selectedFiles = {};\n\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\tname: 'Site Jobs',\n\t\t\t\t\t\tparams: { name: this.site }\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tcomputed: {\n\t\tfilesUploaded() {\n\t\t\treturn this.selectedFiles.database;\n\t\t}\n\t}\n};\n</script>\n"],"names":["_sfc_main","_hoisted_1","_hoisted_2","_hoisted_3","$data","_cache","$event","_withCtx","_createElementVNode","_createTextVNode","_ctx"],"mappings":"u8BAoDA,MAAAA,EAAA,CACC,KAAA,4BACA,MAAA,8BAIC,GAED,MAAA,CACC,MAAA,sBAEC,cAAA,wFAUD,eAAA,CACC,MAAA,8BAEC,OAAA,CACC,KAAA,KAAA,8BAEA,qBAAA,KAAA,+IAUA,KAAA,cAAA,CAAA,EACA,KAAA,QAAA,KAAA,CACC,KAAA,mCAED,CAAA,CACD,EAEF,GAED,SAAA,CACC,eAAA,CACC,OAAA,KAAA,cAAA,QACD,CACD,CACD,EAnFQC,EAAA,CAAA,MAAA,WAAA,EAGHC,EAAA,CAAA,MAAA,wFAAA,EAUGC,EAAA,CAAA,MAAA,MAAA,sQAjCR,WAAAC,EAAA,kBAAA,sBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAF,EAAA,kBAAAE,KAmBmB,eAAAC,EAAA,IAAA,CAChBC,EAAA,MAAAP,EAAA,CACCI,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAAA,IAAA,CAAA,MAAA,WAAA,EAAA,iDAAA,EAAA,GACAA,EAAA,MAAAN,EAAA,oEAtBJO,EAAA,mCAAA,EA2BsCD,EAAA,IAAA,KAAA,MAAA,EA3BtCC,EAAA,KAAA,EA2BoDD,EAAA,IAAA,KAAA,MAAA,EA3BpDC,EAAA,2CAAA,eA+BiC,YAAAL,EAAA,cA/BjC,uBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAF,EAAA,cAAAE,8BAiCGE,EAAA,MAAAL,EAAA,cAGE,GAAA,eACA,KAAA,WACA,MAAA,oEAtCL,sBAAAE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAF,EAAA,mBAAAE,iEAyCW,IAAA,eAAmB,MAAA,wFAIb,MAAA,OAAc,QAAAI,EAAA,WAAA,cAAA"}