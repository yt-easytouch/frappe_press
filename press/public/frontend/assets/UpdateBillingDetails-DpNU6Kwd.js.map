{"version":3,"file":"UpdateBillingDetails-DpNU6Kwd.js","sources":["../../../../dashboard/src2/components/UpdateBillingDetails.vue"],"sourcesContent":["<template>\n\t<Dialog\n\t\t:options=\"{\n\t\t\ttitle: 'Update Billing Details',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Submit',\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tloading: $resources.updateBillingInformation.loading,\n\t\t\t\t\tonClick: () => $resources.updateBillingInformation.submit()\n\t\t\t\t}\n\t\t\t]\n\t\t}\"\n\t\t:modelValue=\"show\"\n\t\t@update:modelValue=\"$emit('update:show', $event)\"\n\t>\n\t\t<template v-slot:body-content>\n\t\t\t<p class=\"mb-5 text-sm text-gray-700\" v-if=\"message\">\n\t\t\t\t{{ message }}\n\t\t\t</p>\n\t\t\t<FormControl\n\t\t\t\tclass=\"mt-4\"\n\t\t\t\tv-model=\"billingInformation.billing_name\"\n\t\t\t\tlabel=\"Billing Name\"\n\t\t\t/>\n\t\t\t<AddressForm\n\t\t\t\tref=\"address-form\"\n\t\t\t\tclass=\"mt-4\"\n\t\t\t\tv-model:address=\"billingInformation\"\n\t\t\t/>\n\t\t\t<ErrorMessage\n\t\t\t\tclass=\"mt-2\"\n\t\t\t\t:message=\"$resources.updateBillingInformation.error\"\n\t\t\t/>\n\t\t</template>\n\t</Dialog>\n</template>\n\n<script>\nimport { DashboardError } from '../utils/error';\nimport AddressForm from './AddressForm.vue';\nimport { toast } from 'vue-sonner';\n\nexport default {\n\tname: 'UpdateBillingDetails',\n\tprops: ['message', 'show'],\n\temits: ['update:show', 'updated'],\n\tcomponents: {\n\t\tAddressForm\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tbillingInformation: {\n\t\t\t\taddress: '',\n\t\t\t\tcity: '',\n\t\t\t\tstate: '',\n\t\t\t\tpostal_code: '',\n\t\t\t\tcountry: '',\n\t\t\t\tgstin: '',\n\t\t\t\tbilling_name: ''\n\t\t\t}\n\t\t};\n\t},\n\tresources: {\n\t\tcurrentBillingInformation() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.account.get_billing_information',\n\t\t\t\tauto: true,\n\t\t\t\tonSuccess(billingInformation) {\n\t\t\t\t\tif ('country' in (billingInformation || {})) {\n\t\t\t\t\t\tObject.assign(this.billingInformation, {\n\t\t\t\t\t\t\taddress: billingInformation.address_line1,\n\t\t\t\t\t\t\tcity: billingInformation.city,\n\t\t\t\t\t\t\tstate: billingInformation.state,\n\t\t\t\t\t\t\tpostal_code: billingInformation.pincode,\n\t\t\t\t\t\t\tcountry: billingInformation.country,\n\t\t\t\t\t\t\tgstin:\n\t\t\t\t\t\t\t\tbillingInformation.gstin == 'Not Applicable'\n\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t: billingInformation.gstin,\n\t\t\t\t\t\t\tbilling_name: billingInformation.billing_name\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tupdateBillingInformation() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.account.update_billing_information',\n\t\t\t\tmakeParams() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tbilling_details: this.billingInformation\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tonSuccess() {\n\t\t\t\t\tthis.$emit('update:show', false);\n\t\t\t\t\ttoast.success('Address updated successfully!');\n\t\t\t\t\tthis.$emit('updated');\n\t\t\t\t},\n\t\t\t\tvalidate() {\n\t\t\t\t\tvar billing_name = this.billingInformation.billing_name.trim();\n\t\t\t\t\tvar billingNameRegex = /^[a-zA-Z0-9\\-\\'\\,\\.\\s]+$/;\n\t\t\t\t\tvar billingNameValid = billingNameRegex.test(billing_name);\n\t\t\t\t\tif (!billingNameValid) {\n\t\t\t\t\t\tthrow new DashboardError(\n\t\t\t\t\t\t\t'Billing Name contains invalid characters'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.billingInformation.billing_name = billing_name;\n\t\t\t\t\treturn this.$refs['address-form'].validateValues();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n};\n</script>\n"],"names":["_sfc_main","billingInformation","toast","billingNameValid","$props","_withCtx","_createCommentVNode","$data","_cache","$event","_ctx"],"mappings":"81BA2CA,MAAAA,EAAA,sDAGC,MAAA,CAAA,cAAA,SAAA,6BAIA,MAAA,CACC,MAAA,CACC,mBAAA,YAEC,KAAA,GACA,MAAA,GACA,YAAA,cAEA,MAAA,GACA,aAAA,EACD,2CAKA,MAAA,iDAEC,KAAA,gBAEC,YAAAC,GAAA,CAAA,IACC,OAAA,OAAA,KAAA,mBAAA,CACC,QAAAA,EAAA,0BAEA,MAAAA,EAAA,MACA,YAAAA,EAAA,QACA,QAAAA,EAAA,cAECA,EAAA,OAAA,iBACC,WAEF,aAAAA,EAAA,YACD,CAAA,CAEF,+BAID,MAAA,iEAGE,MAAA,CACC,gBAAA,KAAA,iCAID,KAAA,MAAA,cAAA,EAAA,EACAC,EAAA,QAAA,+BAAA,EACA,KAAA,MAAA,SAAA,yGAMA,GAAA,CAAAC,cAEE,qIAKH,EAEF,CACD,CACD,WAjGM,MAAA,gTAJH,WAAAC,EAAA,sEAGgB,eAAAC,EAAA,IAAA,yCAhBnBC,EAAA,GAAA,EAAA,OAqBI,MAAA,8HAEA,MAAA,4CAGA,IAAA,eACA,MAAA,OACQ,QAAAC,EAAA,mBA5BZ,mBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAF,EAAA,mBAAAE,6BA+BI,MAAA,OACC,QAAAC,EAAA,WAAA,yBAAA"}