var ge=Object.defineProperty,he=Object.defineProperties;var fe=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var Q=(e,t,a)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ee=(e,t)=>{for(var a in t||(t={}))_e.call(t,a)&&Q(e,a,t[a]);if(Z)for(var a of Z(t))ve.call(t,a)&&Q(e,a,t[a]);return e},te=(e,t)=>he(e,fe(t));var se=(e,t,a)=>new Promise((u,i)=>{var s=f=>{try{l(a.next(f))}catch(b){i(b)}},g=f=>{try{l(a.throw(f))}catch(b){i(b)}},l=f=>f.done?u(f.value):Promise.resolve(f.value).then(s,g);l((a=a.apply(e,t)).next())});import{x as G,q as v,o,j as S,h,u as m,a7 as be,t as A,a5 as re,A as r,B as Se,n as ye,F as q,v as le,w as c,aA as R,ag as ie,c8 as ae,a9 as $,y as ke,X as L,Y as w,l as j,J as P,ac as we,Z as O,aK as Ve,z as oe,D as ne,a8 as B,bp as W,r as U,a6 as Ce,C as Ae,k as De}from"./main-Dpl-JOF2.js";import{_ as ue}from"./Tabs-d4e9i9wh.js";import{_ as Te}from"./Breadcrumbs-yx7M4N4X.js";import{l as de}from"./loginAsAdmin-BAeVrwth.js";import{_ as K}from"./Alert-COV4XS8q.js";import{u as H}from"./FileUploader-C1pIUjCt.js";import{_ as ce}from"./CommitTag-C7m6nG0N.js";import{n as T}from"./toast-Dk0nDfLL.js";import{D as X}from"./DateTimeControl-DSJ0TMcX.js";import"./datetime-PXpIdgFA.js";import"./dayjs.min-BK4AnHlu.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},t=new Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c2e77a9e-63b8-4efc-a144-f75ea2602007",e._sentryDebugIdIdentifier="sentry-dbid-c2e77a9e-63b8-4efc-a144-f75ea2602007")}catch(a){}})();{var Y=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};Y._sentryModuleMetadata=Y._sentryModuleMetadata||{},Y._sentryModuleMetadata[new Error().stack]=Object.assign({},Y._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const Ue={name:"SiteAppUpdateCard",props:["app","selectable","selected","uninstall"],methods:{deployFrom(e){return e.will_branch_change?e.current_branch:e.current_hash?e.current_tag||e.current_hash.slice(0,7):null},deployTo(e){return e.will_branch_change?e.branch:e.next_tag||e.next_hash.slice(0,7)}},components:{CommitTag:ce}},Ge={class:"flex flex-row items-center gap-2"},Ie=["checked"],xe={class:"text-left text-lg font-medium text-gray-900"},Re={key:1,class:"ml-2 flex flex-row space-x-2"},$e=["href"];function Pe(e,t,a,u,i,s){const g=re,l=ce,f=Se;return o(),v("button",{class:ye(["flex w-full flex-row items-center justify-between rounded-lg border border-gray-100 px-4 py-2 shadow focus:outline-none",[a.selected||a.uninstall?"ring-2 ring-inset ring-gray-600":"",a.selectable?"hover:border-gray-300":"cursor-default"]]),ref:"card"},[S("div",Ge,[a.selectable?(o(),v("input",{key:0,onClick:t[0]||(t[0]=be(b=>e.$refs.card.click(),["self"])),checked:a.selected,type:"checkbox",class:"h-4 w-4 cursor-pointer rounded border-gray-300 text-gray-600 focus:ring-transparent"},null,8,Ie)):m("",!0),S("h3",xe,A(a.app.title),1)]),a.uninstall?(o(),h(g,{key:0,theme:"red",label:"Will Be Uninstalled "})):(o(),v("div",Re,[s.deployFrom(a.app)?(o(),h(l,{key:0,tag:s.deployFrom(a.app),link:`${a.app.repository_url}/commit/${a.app.current_hash}`},null,8,["tag","link"])):m("",!0),s.deployFrom(a.app)?(o(),v("a",{key:1,class:"flex cursor-pointer flex-col justify-center",href:`${a.app.repository_url}/compare/${a.app.current_hash}...${a.app.next_hash}`,target:"_blank"},[r(f,{name:"arrow-right",class:"w-4"})],8,$e)):(o(),h(g,{key:2,label:"First Deploy",theme:"green",class:"whitespace-nowrap"})),r(l,{tag:s.deployTo(a.app),link:`${a.app.repository_url}/commit/${a.app.next_hash}`},null,8,["tag","link"])]))],2)}const me=G(Ue,[["render",Pe]]),Be={name:"SiteAppUpdates",props:["apps"],components:{SiteAppUpdateCard:me},computed:{appsWithUpdates(){return this.apps.filter(e=>e.update_available)}}},Fe={class:"space-y-2 divide-y"},Me={key:0,class:"text-center text-base text-gray-500"};function Ne(e,t,a,u,i,s){const g=me;return o(),v("div",Fe,[(o(!0),v(q,null,le(s.appsWithUpdates,l=>(o(),h(g,{key:l.app,app:l},null,8,["app"]))),128)),s.appsWithUpdates.length?m("",!0):(o(),v("div",Me," Installed apps doesn't have any updates available. But the site can be updated to a newer bench. "))])}const pe=G(Be,[["render",Ne]]),Oe={name:"AlertSiteUpdate",props:["site"],components:{SiteAppUpdates:pe},data(){return{showUpdatesDialog:!1,wantToSkipFailingPatches:!1,wantToSkipBackups:!1}},resources:{updateInformation(){var e;return{url:"press.api.site.check_for_updates",params:{name:(e=this.site)==null?void 0:e.name},auto:!0}},lastMigrateFailed(){var e;return{url:"press.api.site.last_migrate_failed",params:{name:(e=this.site)==null?void 0:e.name},auto:!0}},scheduleUpdate(){var e;return{url:"press.api.site.update",params:{name:(e=this.site)==null?void 0:e.name,skip_failing_patches:this.wantToSkipFailingPatches,skip_backups:this.wantToSkipBackups},onSuccess(){this.showUpdatesDialog=!1,T({title:"Site update scheduled successfully",icon:"check",color:"green"})}}}},computed:{permissions(){return{update:this.$account.hasPermission(this.site.name,"press.api.site.update")}},show(){if(this.updateInformation)return this.site.setup_wizard_complete&&this.updateInformation.update_available&&["Active","Inactive","Suspended","Broken"].includes(this.site.status)},updateInformation(){return this.$resources.updateInformation.data},updateAvailableApps(){const e=this.updateInformation.installed_apps;return this.updateInformation.apps.filter(a=>e.find(u=>u.app===a.app))},lastMigrateFailed(){return this.$resources.lastMigrateFailed.data},skip_backups(){var e;return(e=this.$account.team)==null?void 0:e.skip_backups}}},Le={key:0,class:"mt-4"},Ye={key:1,class:"mt-2"},je={key:0,class:"mt-1 text-sm text-red-600"};function Ee(e,t,a,u,i,s){const g=L,l=ke,f=pe,b=$,C=R,y=K;return s.show?(o(),h(y,{key:0,title:"Update Available"},{actions:c(()=>[r(l,{text:s.permissions.update?"":"You don't have enough permissions to perform this action"},{default:c(()=>[r(g,{disabled:!s.permissions.update,variant:"solid",onClick:t[0]||(t[0]=n=>i.showUpdatesDialog=!0)},{default:c(()=>t[4]||(t[4]=[w(" Show updates ")])),_:1},8,["disabled"])]),_:1},8,["text"])]),default:c(()=>[t[7]||(t[7]=S("span",null," A new update is available for your site. Would you like to update your site now? ",-1)),r(C,{options:{title:"Updates available",actions:[{label:"Update Now",variant:"solid",onClick:()=>e.$resources.scheduleUpdate.fetch()}]},modelValue:i.showUpdatesDialog,"onUpdate:modelValue":t[3]||(t[3]=n=>i.showUpdatesDialog=n)},{"body-content":c(()=>[r(f,{apps:s.updateAvailableApps},null,8,["apps"]),s.updateAvailableApps.length?(o(),v("div",Le,[ie(S("input",{id:"skip-failing",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500","onUpdate:modelValue":t[1]||(t[1]=n=>i.wantToSkipFailingPatches=n)},null,512),[[ae,i.wantToSkipFailingPatches]]),t[5]||(t[5]=S("label",{for:"skip-failing",class:"ml-1 text-sm text-gray-900"}," Skip failing patches if any? ",-1))])):m("",!0),s.skip_backups?(o(),v("div",Ye,[ie(S("input",{id:"skip-backup",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500","onUpdate:modelValue":t[2]||(t[2]=n=>i.wantToSkipBackups=n)},null,512),[[ae,i.wantToSkipBackups]]),t[6]||(t[6]=S("label",{for:"skip-backup",class:"ml-1 text-sm text-gray-900"}," Update without site backup? ",-1)),i.wantToSkipBackups?(o(),v("div",je," In case of failure, you won't be able to restore the site. ")):m("",!0)])):m("",!0),r(b,{class:"mt-1",message:e.$resources.scheduleUpdate.error},null,8,["message"])]),_:1},8,["options","modelValue"])]),_:1})):m("",!0)}const Je=G(Oe,[["render",Ee]]),ze={name:"AlertSiteActivation",props:["site"],resources:{loginAsAdmin(){var e;return de((e=this.site)==null?void 0:e.name)}}};function He(e,t,a,u,i,s){const g=L,l=K;return a.site.status=="Active"&&!a.site.setup_wizard_complete?(o(),h(l,{key:0,title:"Site Activation"},{actions:c(()=>[r(g,{variant:"solid",onClick:t[0]||(t[0]=f=>e.$resources.loginAsAdmin.submit()),loading:e.$resources.loginAsAdmin.loading},{default:c(()=>t[1]||(t[1]=[w(" Login ")])),_:1},8,["loading"])]),default:c(()=>[t[2]||(t[2]=S("span",null," Please login and complete the setup wizard on your site. Analytics will be collected only after setup is complete. ",-1))]),_:1})):m("",!0)}const qe=G(ze,[["render",He]]),We={class:"space-y-2"},Ke={key:0},Xe={key:0,class:"flex flex-row items-center"},Ze={class:"flex flex-col"},Qe={class:"text-xl font-semibold text-gray-900"},et={class:"text-base text-gray-600"},tt={__name:"SiteAlerts",props:{site:Object,plan:Object},setup(e){const t=oe(()=>ne(()=>import("./SitePlansDialog-CT5IPxxz.js"),__vite__mapDeps([0,1,2,3,4,5]))),a=oe(()=>ne(()=>import("./BillingInformationDialog-B5pmLI5R.js"),__vite__mapDeps([6,1,2,7,8,9,10,11]))),u=e,i=j(!1),s=j(null),g=j(!1),l=j(!1),f=P(()=>{if(!(u.site&&u.plan))return!1;let _=u.plan.usage_in_percent;return[_.cpu,_.database,_.disk].some(d=>100>=d&&d>80)}),b=P(()=>{if(!(u.site&&u.plan))return!1;let _=u.plan.usage_in_percent;return[_.cpu,_.database,_.disk].some(d=>d>100)}),C=P(()=>{var _;return(_=u.site)==null?void 0:_.trial_end_date}),y=P(()=>{var _;return(_=u.site)!=null&&_.trial_end_date?H.methods.trialEndsInDaysText(u.site.trial_end_date):0}),n=P(()=>{var d,D;const _=(d=u.site)==null?void 0:d.site_migration.status;if(_==="Running")return"Your Site Migration is in progress";if(_==="Pending")return"Your Site Migration will start shortly";if(_==="Scheduled")return`Your Site Migration is scheduled to happen ${H.methods.formatDate((D=u.site)==null?void 0:D.site_migration.scheduled_time,"relative")}.`}),p=P(()=>{var d,D;const _=(d=u.site)==null?void 0:d.version_upgrade.status;if(_==="Running")return"Your Site Version Upgrade is in progress";if(_==="Pending")return"Your Site Version Upgrade will start shortly";if(_==="Scheduled")return`Your Site Version Upgrade is scheduled to happen ${H.methods.formatDate((D=u.site)==null?void 0:D.version_upgrade.scheduled_time,"relative")}.`}),I=we({url:"press.api.marketplace.get_promotional_banners",auto:!0});return(_,d)=>{var F,M,N;const D=L,x=K,E=Ve,J=R;return o(),v("div",We,[r(qe,{site:e.site},null,8,["site"]),r(Je,{site:e.site},null,8,["site"]),O(I).data&&O(I).data.length>0?(o(),v("div",Ke,[(o(!0),v(q,null,le(O(I).data,V=>(o(),h(x,{title:V.alert_title,key:V.name},{actions:c(()=>[r(D,{class:"whitespace-nowrap",variant:"solid",onClick:()=>{i.value=!0,s.value=V}},{default:c(()=>d[7]||(d[7]=[w(" Learn More ")])),_:2},1032,["onClick"])]),default:c(()=>[w(A(V.alert_message)+" ",1)]),_:2},1032,["title"]))),128))])):m("",!0),C.value&&_.$account.hasBillingInfo?(o(),h(x,{key:1,title:"Trial"},{actions:c(()=>[r(D,{class:"whitespace-nowrap",onClick:d[0]||(d[0]=V=>g.value=!0),variant:"solid"},{default:c(()=>d[8]||(d[8]=[w(" Add Billing Information ")])),_:1})]),default:c(()=>[w(" Your trial ends "+A(y.value)+" after which your site will get suspended. Add your billing information to avoid suspension. ",1)]),_:1})):m("",!0),C.value&&_.$account.hasBillingInfo?(o(),h(x,{key:2,title:"Trial"},{actions:c(()=>[r(D,{class:"whitespace-nowrap",onClick:d[1]||(d[1]=V=>l.value=!0),variant:"solid"},{default:c(()=>d[9]||(d[9]=[w(" Select Plan ")])),_:1})]),default:c(()=>[w(" Your trial ends "+A(y.value)+" after which your site will get suspended. Select a plan to avoid suspension. ",1)]),_:1})):m("",!0),b.value?(o(),h(x,{key:3,title:"Attention Required"},{default:c(()=>d[10]||(d[10]=[w(" Your site has exceeded the allowed usage for your plan. Upgrade your plan now. ")])),_:1})):f.value?(o(),h(x,{key:4,title:"Attention Required"},{default:c(()=>d[11]||(d[11]=[w(" Your site has exceeded 80% of the allowed usage for your plan. Upgrade your plan now. ")])),_:1})):m("",!0),(F=e.site)!=null&&F.site_migration?(o(),h(x,{key:5,title:"Site Migration"},{actions:c(()=>[e.site.site_migration.status==="Running"&&e.site.site_migration.job_id?(o(),h(D,{key:0,class:"whitespace-nowrap",variant:"solid",route:{name:"SiteJobs",params:{jobName:e.site.site_migration.job_id}}},{default:c(()=>d[12]||(d[12]=[w(" View Job ")])),_:1},8,["route"])):m("",!0)]),default:c(()=>[w(A(n.value)+" ",1)]),_:1})):m("",!0),(M=e.site)!=null&&M.version_upgrade?(o(),h(x,{key:6,title:"Version Upgrade"},{actions:c(()=>[e.site.version_upgrade.status==="Running"&&e.site.version_upgrade.job_id?(o(),h(D,{key:0,class:"whitespace-nowrap",variant:"solid",route:{name:"SiteJobs",params:{jobName:e.site.version_upgrade.job_id}}},{default:c(()=>d[13]||(d[13]=[w(" View Job ")])),_:1},8,["route"])):m("",!0)]),default:c(()=>[w(A(p.value)+" ",1)]),_:1})):m("",!0),r(J,{modelValue:i.value,"onUpdate:modelValue":d[2]||(d[2]=V=>i.value=V),onClose:d[3]||(d[3]=V=>s.value=null),options:{title:"Easytouch Cloud Marketplace",actions:[{variant:"solid",route:`/install-app/${(N=s.value)==null?void 0:N.app}`,label:"Install App"}]}},{"body-content":c(()=>[s.value?(o(),v("div",Xe,[r(E,{class:"mr-2",size:"lg",shape:"square",image:s.value.image,label:s.value.title},null,8,["image","label"]),S("div",Ze,[S("h4",Qe,A(s.value.title),1),S("p",et,A(s.value.description),1)])])):m("",!0)]),_:1},8,["modelValue","options"]),g.value?(o(),h(O(a),{key:7,modelValue:g.value,"onUpdate:modelValue":d[4]||(d[4]=V=>g.value=V)},null,8,["modelValue"])):m("",!0),r(O(t),{modelValue:l.value,"onUpdate:modelValue":d[5]||(d[5]=V=>l.value=V),site:e.site,plan:e.plan,onPlanChange:d[6]||(d[6]=()=>_.$emit("plan-change"))},null,8,["modelValue","site","plan"])])}}},st={name:"SiteTransferDialog",props:["site","modelValue"],emits:["update:modelValue"],data(){return{reason:"",emailOfTransferTeam:""}},computed:{show:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},resources:{transferSite(){return{url:"press.api.site.send_change_team_request",validate(){if(this.emailOfTransferTeam){if(!this.reason)return"Please enter reason for transfer"}else return"Please enter email of the team for transfer of site ownership"},onSuccess(){this.reason="",this.emailOfTransferTeam="",this.$emit("update:modelValue",!1),T({title:"Site transfer request sent",message:`The team ${this.emailOfTransferTeam} will receive a request to accept the site transfer.`,color:"green",icon:"check"})}}}}},it={class:"space-y-4"};function at(e,t,a,u,i,s){const g=B,l=$,f=R;return o(),h(f,{options:{title:"Transfer Site to Team",actions:[{label:"Submit",variant:"solid",onClick:()=>{var b;return e.$resources.transferSite.submit({team_mail_id:i.emailOfTransferTeam,name:(b=a.site)==null?void 0:b.name,reason:i.reason})}}]},modelValue:s.show,"onUpdate:modelValue":t[2]||(t[2]=b=>s.show=b)},{"body-content":c(()=>[S("div",it,[r(g,{label:"Enter email of the team for transfer of site ownership",modelValue:i.emailOfTransferTeam,"onUpdate:modelValue":t[0]||(t[0]=b=>i.emailOfTransferTeam=b)},null,8,["modelValue"]),r(g,{label:"Reason for transfer",modelValue:i.reason,"onUpdate:modelValue":t[1]||(t[1]=b=>i.reason=b),type:"textarea"},null,8,["modelValue"]),r(l,{message:e.$resources.transferSite.error},null,8,["message"])])]),_:1},8,["options","modelValue"])}const ot=G(st,[["render",at]]),nt={name:"SiteChangeGroupDialog",props:["site","modelValue"],emits:["update:modelValue"],data(){return{targetGroup:null,newGroupTitle:"",skipFailingPatches:!1,showCloneBenchDialog:!1}},computed:{show:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},errorMessage(){return this.$resources.changeGroupOptions.error||this.$resources.changeGroup.error||this.$resources.cloneGroup.error}},resources:{changeGroup(){return{url:"press.api.site.change_group",onSuccess(){const e=this.$resources.changeGroupOptions.data.find(t=>t.name===this.targetGroup).title;T({title:"Scheduled Bench Group Change",message:`Site scheduled to be moved to <b>${e}</b>`,color:"green",icon:"check"}),this.targetGroup=null,this.$emit("update:modelValue",!1)}}},changeGroupOptions(){var e;return{url:"press.api.site.change_group_options",params:{name:(e=this.site)==null?void 0:e.name},initialData:[],onSuccess(t){t.length>0&&(this.targetGroup=t[0].name)},auto:!0}},cloneGroup(){return{url:"press.api.site.clone_group",onSuccess(e){T({title:"Cloned Bench Group",message:"The current bench group has been cloned successfully. Redirecting to the new bench group...",color:"green",icon:"check"}),this.showCloneBenchDialog=!1,this.$router.push({name:"BenchDeploys",params:{benchName:e.bench_name,candidateName:e.candidate_name}})}}}}},rt={key:1,class:"space-y-4"},lt={key:2,class:"text-md text-base text-gray-800"};function ut(e,t,a,u,i,s){var C,y;const g=W,l=B,f=$,b=R;return o(),v(q,null,[r(b,{options:{title:"Move Site to another Bench Group",actions:[{label:"Change Bench Group",loading:e.$resources.changeGroup.loading,disabled:!((y=(C=e.$resources.changeGroupOptions)==null?void 0:C.data)!=null&&y.length),variant:"solid",onClick:()=>{var n;return e.$resources.changeGroup.submit({skip_failing_patches:i.skipFailingPatches,group:i.targetGroup,name:(n=a.site)==null?void 0:n.name})}},{label:"Clone current Bench Group",onClick:()=>{e.$emit("update:modelValue",!1),i.showCloneBenchDialog=!0}}]},modelValue:s.show,"onUpdate:modelValue":t[2]||(t[2]=n=>s.show=n)},{"body-content":c(()=>[e.$resources.changeGroupOptions.loading?(o(),h(g,{key:0,class:"mx-auto h-4 w-4"})):e.$resources.changeGroupOptions.data.length>0?(o(),v("div",rt,[r(l,{variant:"outline",label:"Select Bench Group",type:"select",options:e.$resources.changeGroupOptions.data.map(n=>({label:n.title,value:n.name})),modelValue:i.targetGroup,"onUpdate:modelValue":t[0]||(t[0]=n=>i.targetGroup=n)},null,8,["options","modelValue"]),r(l,{label:"Skip failing patches if any",type:"checkbox",modelValue:i.skipFailingPatches,"onUpdate:modelValue":t[1]||(t[1]=n=>i.skipFailingPatches=n)},null,8,["modelValue"])])):s.errorMessage?m("",!0):(o(),v("p",lt," There are no other bench groups that you own for this site to move to. You can clone this bench group to move the site. ")),r(f,{class:"mt-3",message:s.errorMessage},null,8,["message"])]),_:1},8,["options","modelValue"]),r(b,{options:{title:"Clone Bench Group",actions:[{label:"Clone Bench Group",variant:"solid",loading:e.$resources.cloneGroup.loading,onClick:()=>{var n;return e.$resources.cloneGroup.submit({name:(n=a.site)==null?void 0:n.name,new_group_title:i.newGroupTitle})}}]},modelValue:i.showCloneBenchDialog,"onUpdate:modelValue":t[4]||(t[4]=n=>i.showCloneBenchDialog=n)},{"body-content":c(()=>[r(l,{label:"New Bench Group Name",modelValue:i.newGroupTitle,"onUpdate:modelValue":t[3]||(t[3]=n=>i.newGroupTitle=n)},null,8,["modelValue"]),r(f,{message:e.$resources.cloneGroup.error},null,8,["message"])]),_:1},8,["options","modelValue"])],64)}const dt=G(nt,[["render",ut]]),ct={name:"SiteChangeRegionDialog",props:["site","modelValue"],emits:["update:modelValue"],components:{DateTimeControl:X},data(){return{targetDateTime:null,selectedRegion:null,skipFailingPatches:!1}},computed:{show:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},datetimeInIST(){return this.targetDateTime?this.$dayjs(this.targetDateTime).tz("Asia/Kolkata").format("YYYY-MM-DDTHH:mm"):null}},resources:{changeRegionOptions(){var e;return{url:"press.api.site.change_region_options",params:{name:(e=this.site)==null?void 0:e.name},auto:!0}},changeRegion(){return{url:"press.api.site.change_region",validate(){if(this.$resources.changeRegionOptions.data.current_region===this.selectedRegion)return"Site is already in this region"},onSuccess(){var t,a;const e=((t=this.$resources.changeRegionOptions.data.regions.find(u=>u.name===this.selectedRegion))==null?void 0:t.title)||this.selectedRegion;T({title:"Scheduled Region Change",message:`Site <b>${(a=this.site)==null?void 0:a.host_name}</b> scheduled to be moved to <b>${e}</b>`,color:"green",icon:"check"}),this.$emit("update:modelValue",!1)}}}},methods:{resetValues(){this.selectedRegion=null,this.targetDateTime=null}}},mt={key:1,class:"space-y-4"},pt=["src"],gt=["src"],ht={key:0,class:"space-y-4"},ft={key:1,class:"mt-4 text-sm text-gray-600"};function _t(e,t,a,u,i,s){const g=W,l=B,f=U("DateTimeControl"),b=$,C=R;return o(),h(C,{options:{title:"Change Region",actions:[{label:"Change Region",loading:e.$resources.changeRegion.loading,variant:"solid",disabled:!i.selectedRegion,onClick:()=>{var y,n;return e.$resources.changeRegion.submit({name:(y=a.site)==null?void 0:y.name,cluster:(n=i.selectedRegion)==null?void 0:n.value,scheduled_datetime:s.datetimeInIST,skip_failing_patches:i.skipFailingPatches})}}]},modelValue:s.show,"onUpdate:modelValue":t[3]||(t[3]=y=>s.show=y),onClose:s.resetValues},{"body-content":c(()=>{var y,n;return[e.$resources.changeRegionOptions.loading?(o(),h(g,{key:0,class:"mx-auto h-4 w-4"})):(o(),v("div",mt,[r(l,{variant:"outline",type:"autocomplete",label:"Choose Region",modelValue:i.selectedRegion,"onUpdate:modelValue":t[0]||(t[0]=p=>i.selectedRegion=p),options:e.$resources.changeRegionOptions.data.regions.map(p=>({label:p.title||p.name,value:p.name,image:p.image}))},{prefix:c(()=>{var p;return[S("img",{src:(p=i.selectedRegion)==null?void 0:p.image,class:"mr-2 h-4"},null,8,pt)]}),"item-prefix":c(({active:p,selected:I,option:_})=>[_!=null&&_.image?(o(),v("img",{key:0,src:_.image,class:"mr-2 h-4"},null,8,gt)):m("",!0)]),_:1},8,["modelValue","options"]),((n=(y=e.$resources.changeRegionOptions.data)==null?void 0:y.regions)==null?void 0:n.length)>0&&i.selectedRegion?(o(),v("div",ht,[r(f,{modelValue:i.targetDateTime,"onUpdate:modelValue":t[1]||(t[1]=p=>i.targetDateTime=p),label:"Schedule Time"},null,8,["modelValue"]),r(l,{label:"Skip failing patches if any",type:"checkbox",modelValue:i.skipFailingPatches,"onUpdate:modelValue":t[2]||(t[2]=p=>i.skipFailingPatches=p)},null,8,["modelValue"])])):(o(),v("p",ft," If the region you're looking for isn't available, please add from the Bench dashboard. "))])),r(b,{class:"mt-3",message:e.$resources.changeRegion.error},null,8,["message"])]}),_:1},8,["options","modelValue","onClose"])}const vt=G(ct,[["render",_t]]),bt={name:"SiteVersionUpgradeDialog",props:["site","modelValue"],emits:["update:modelValue"],components:{DateTimeControl:X},data(){return{targetDateTime:null,privateReleaseGroup:"",skipFailingPatches:!1,benchHasCommonServer:!1}},computed:{show:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},nextVersion(){var t,a,u;const e=Number((t=this.site)==null?void 0:t.frappe_version.split(" ")[1]);return isNaN(e)||((a=this.site)==null?void 0:a.frappe_version)===((u=this.site)==null?void 0:u.latest_frappe_version)?null:`Version ${e+1}`},privateReleaseGroups(){return this.$resources.getPrivateGroups.data},message(){return this.site.frappe_version===this.site.latest_frappe_version?"This site is already on the latest version.":this.site.frappe_version==="Nightly"?"This site is on a nightly version and doesn't need to be upgraded.":!this.site.group_public&&this.privateReleaseGroups.length===0?`Your team doesn't own any private benches available to upgrade this site to ${this.nextVersion}.`:this.privateReleaseGroup?!this.site.group_public&&!this.benchHasCommonServer?"The selected bench and your site doesn't have a common server. Please add site's server to the bench.":!this.site.group_public&&this.benchHasCommonServer?`The selected bench and your site have a common server. You can proceed with the upgrade to ${this.nextVersion}.`:"":""},datetimeInIST(){return this.targetDateTime?this.$dayjs(this.targetDateTime).tz("Asia/Kolkata").format("YYYY-MM-DDTHH:mm"):null},errorMessage(){return this.$resources.versionUpgrade.error||this.$resources.validateGroupforUpgrade.error||this.$resources.addServerToReleaseGroup.error||this.$resources.getPrivateGroups.error}},resources:{versionUpgrade(){var e;return{url:"press.api.site.version_upgrade",params:{name:(e=this.site)==null?void 0:e.name,destination_group:this.privateReleaseGroup,skip_failing_patches:this.skipFailingPatches,scheduled_datetime:this.datetimeInIST},onSuccess(){var t;T({title:"Site Version Upgrade",message:`Scheduled site upgrade for <b>${(t=this.site)==null?void 0:t.host_name}</b> to <b>${this.nextVersion}</b>`,icon:"check",color:"green"}),this.$emit("update:modelValue",!1)}}},getPrivateGroups(){var e,t,a,u,i,s;return{url:"press.api.site.get_private_groups_for_upgrade",params:{name:(e=this.site)==null?void 0:e.name,version:(t=this.site)==null?void 0:t.frappe_version},auto:((a=this.site)==null?void 0:a.frappe_version)&&((u=this.site)==null?void 0:u.name)&&!((i=this.site)!=null&&i.group_public)&&((s=this.site)==null?void 0:s.frappe_version)!=="Nightly",transform(g){return g.map(l=>({label:l.title||l.name,value:l.name}))},initialData:[]}},addServerToReleaseGroup(){var e;return{url:"press.api.site.add_server_to_release_group",params:{name:(e=this.site)==null?void 0:e.name,group_name:this.privateReleaseGroup},onSuccess(t){T({title:"Server Added to the Bench",message:`Added a server to <b>${this.privateReleaseGroup}</b> bench. Please wait for the bench to complete the deploy.`,icon:"check",color:"green"}),this.$router.push({name:"BenchJobs",params:{benchName:this.privateReleaseGroup,jobName:t}}),this.resetValues(),this.$emit("update:modelValue",!1)}}},validateGroupforUpgrade(){return{url:"press.api.site.validate_group_for_upgrade",onSuccess(e){this.benchHasCommonServer=e}}}},methods:{resetValues(){this.targetDateTime=null,this.privateReleaseGroup="",this.benchHasCommonServer=!1,this.$resources.getPrivateGroups.reset()}}},St={class:"space-y-4"},yt={key:0,class:"text-base"},kt={key:4,class:"text-sm text-gray-700"};function wt(e,t,a,u,i,s){var y;const g=B,l=U("DateTimeControl"),f=$,b=L,C=R;return o(),h(C,{modelValue:s.show,"onUpdate:modelValue":t[6]||(t[6]=n=>s.show=n),onClose:s.resetValues,options:{title:"Upgrade Site Version"}},Ce({"body-content":c(()=>{var n;return[S("div",St,[(n=a.site)!=null&&n.group_public&&s.nextVersion?(o(),v("p",yt,[t[7]||(t[7]=w(" The site ")),S("b",null,A(a.site.host_name),1),t[8]||(t[8]=w(" will be upgraded to ")),S("b",null,A(s.nextVersion),1)])):s.privateReleaseGroups.length>0&&s.nextVersion?(o(),h(g,{key:1,variant:"outline",label:`Please select a ${s.nextVersion} bench to upgrade your site from ${a.site.frappe_version}`,class:"w-full",type:"select",options:s.privateReleaseGroups,modelValue:i.privateReleaseGroup,"onUpdate:modelValue":t[0]||(t[0]=p=>i.privateReleaseGroup=p),onChange:t[1]||(t[1]=p=>e.$resources.validateGroupforUpgrade.submit({name:a.site.name,group_name:p.target.value}))},null,8,["label","options","modelValue"])):m("",!0),a.site.group_public&&s.nextVersion||i.benchHasCommonServer?(o(),h(l,{key:2,modelValue:i.targetDateTime,"onUpdate:modelValue":t[2]||(t[2]=p=>i.targetDateTime=p),label:"Schedule Time"},null,8,["modelValue"])):m("",!0),a.site.group_public&&s.nextVersion||i.benchHasCommonServer?(o(),h(g,{key:3,label:"Skip failing patches if any",type:"checkbox",modelValue:i.skipFailingPatches,"onUpdate:modelValue":t[3]||(t[3]=p=>i.skipFailingPatches=p)},null,8,["modelValue"])):m("",!0),s.message&&!s.errorMessage?(o(),v("p",kt,A(s.message),1)):m("",!0),r(f,{message:s.errorMessage},null,8,["message"])])]}),_:2},[(y=a.site)!=null&&y.group_public||s.privateReleaseGroups.length?{name:"actions",fn:c(()=>[a.site.group_public?m("",!0):(o(),h(b,{key:0,class:"mb-2 w-full",disabled:i.benchHasCommonServer||!i.privateReleaseGroup||!s.nextVersion,label:"Add Server to Bench",onClick:t[4]||(t[4]=n=>e.$resources.addServerToReleaseGroup.submit()),loading:e.$resources.addServerToReleaseGroup.loading||e.$resources.validateGroupforUpgrade.loading},null,8,["disabled","loading"])),r(b,{class:"w-full",variant:"solid",label:"Upgrade",disabled:(!i.benchHasCommonServer||!i.privateReleaseGroup)&&!a.site.group_public||!s.nextVersion,loading:e.$resources.versionUpgrade.loading||e.$resources.validateGroupforUpgrade.loading,onClick:t[5]||(t[5]=n=>e.$resources.versionUpgrade.submit())},null,8,["disabled","loading"])]),key:"0"}:void 0]),1032,["modelValue","onClose"])}const Vt=G(bt,[["render",wt]]),Ct={name:"SiteChangeServerDialog",props:["site","modelValue"],emits:["update:modelValue"],components:{DateTimeControl:X},data(){return{targetServer:"",targetDateTime:null,skipFailingPatches:!1}},computed:{show:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},message(){return this.$resources.changeServerOptions.data.length===0?"No servers available for your team to move the site to. Please create a server first.":this.targetServer&&!this.$resources.isServerAddedInGroup.data?"The chosen server isn't added to the bench yet. Please add the server to the bench first.":this.targetServer&&this.$resources.isServerAddedInGroup.data?"The chosen server is already added to the bench. You can now migrate the site to the server.":""},errorMessage(){return this.$resources.addServerToReleaseGroup.error||this.$resources.isServerAddedInGroup.error||this.$resources.changeServerOptions.error||this.$resources.changeServer.error},datetimeInIST(){return this.targetDateTime?this.$dayjs(this.targetDateTime).tz("Asia/Kolkata").format("YYYY-MM-DDTHH:mm"):null}},resources:{changeServerOptions(){var e;return{url:"press.api.site.change_server_options",params:{name:(e=this.site)==null?void 0:e.name},initialData:[],auto:!0,transform(t){return t.map(a=>({label:a.title||a.name,value:a.name}))}}},isServerAddedInGroup(){return{url:"press.api.site.is_server_added_in_group",initialData:!1}},changeServer(){return{url:"press.api.site.change_server",onSuccess(){var e;T({title:"Site Change Server",message:`Site <b>${(e=this.site)==null?void 0:e.name}</b> has been scheduled to move to <b>${this.targetServer}</b>`,icon:"check",color:"green"}),this.$emit("update:modelValue",!1)}}},addServerToReleaseGroup(){var e,t;return{url:"press.api.site.add_server_to_release_group",params:{name:(e=this.site)==null?void 0:e.name,group_name:(t=this.site)==null?void 0:t.group,server:this.targetServer},onSuccess(a){var u;T({title:"Server Added to the Bench",message:`Added <b>${this.targetServer}</b> to current bench. Please wait for the deploy to be completed.`,icon:"check",color:"green"}),this.$router.push({name:"BenchJobs",params:{benchName:(u=this.site)==null?void 0:u.group,jobName:a}}),this.resetValues(),this.$emit("update:modelValue",!1)}}}},methods:{resetValues(){this.targetServer="",this.targetDateTime=null,this.$resources.isServerAddedInGroup.reset()}}},At={key:2,class:"mt-4 space-y-4"},Dt={key:3,class:"mt-4 text-sm text-gray-700"};function Tt(e,t,a,u,i,s){var y,n;const g=W,l=B,f=U("DateTimeControl"),b=$,C=R;return o(),h(C,{modelValue:s.show,"onUpdate:modelValue":t[4]||(t[4]=p=>s.show=p),onClose:s.resetValues,options:{title:"Move Site to another Server",actions:[{label:"Add Server to Bench",loading:e.$resources.addServerToReleaseGroup.loading,disabled:e.$resources.isServerAddedInGroup.data||!i.targetServer,onClick:()=>e.$resources.addServerToReleaseGroup.submit()},{label:"Change Server",loading:e.$resources.changeServer.loading,variant:"solid",disabled:!((n=(y=e.$resources.changeServerOptions)==null?void 0:y.data)!=null&&n.length)||!i.targetServer||!e.$resources.isServerAddedInGroup.data,onClick:()=>{var p;e.$resources.changeServer.submit({name:(p=a.site)==null?void 0:p.name,server:i.targetServer,scheduled_datetime:s.datetimeInIST,skip_failing_patches:i.skipFailingPatches})}}]}},{"body-content":c(()=>[e.$resources.changeServerOptions.loading?(o(),h(g,{key:0,class:"mx-auto h-4 w-4"})):e.$resources.changeServerOptions.data.length>0?(o(),h(l,{key:1,label:"Select Server",variant:"outline",type:"select",options:e.$resources.changeServerOptions.data,modelValue:i.targetServer,"onUpdate:modelValue":t[0]||(t[0]=p=>i.targetServer=p),onChange:t[1]||(t[1]=p=>{var I;return e.$resources.isServerAddedInGroup.fetch({name:(I=a.site)==null?void 0:I.name,server:p.target.value})})},null,8,["options","modelValue"])):m("",!0),e.$resources.isServerAddedInGroup.data?(o(),v("div",At,[r(f,{modelValue:i.targetDateTime,"onUpdate:modelValue":t[2]||(t[2]=p=>i.targetDateTime=p),label:"Schedule Time"},null,8,["modelValue"]),r(l,{label:"Skip failing patches if any",type:"checkbox",modelValue:i.skipFailingPatches,"onUpdate:modelValue":t[3]||(t[3]=p=>i.skipFailingPatches=p)},null,8,["modelValue"])])):m("",!0),s.message&&!s.errorMessage?(o(),v("p",Dt,A(s.message),1)):m("",!0),r(b,{class:"mt-4",message:s.errorMessage},null,8,["message"])]),_:1},8,["modelValue","onClose","options"])}const Ut=G(Ct,[["render",Tt]]),Gt={name:"Site",pageMeta(){return{title:`Site - ${this.siteName} - Easytouch Cloud`}},props:["siteName"],components:{SiteAlerts:tt,Tabs:ue,SiteTransferDialog:ot,SiteChangeGroupDialog:dt,SiteChangeRegionDialog:vt,SiteChangeServerDialog:Ut,SiteVersionUpgradeDialog:Vt},data(){return{runningJob:!1,reasonForAdminLogin:"",showReasonForAdminLoginDialog:!1,showTransferSiteDialog:!1,showChangeGroupDialog:!1,showChangeRegionDialog:!1,showChangeServerDialog:!1,showVersionUpgradeDialog:!1,errorMessage:""}},resources:{site(){return{url:"press.api.site.get",params:{name:this.siteName},auto:!0,onSuccess(){this.routeToGeneral(),this.siteName!==this.site.name&&this.$router.replace({params:{siteName:this.site.name}}),!(this.site.status!=="Active"||this.site.setup_wizard_complete)&&this.$call("press.api.site.setup_wizard_complete",{name:this.siteName}).then(e=>{this.site.setup_wizard_complete=!!e}).catch(()=>this.site.setup_wizard_complete=!1)},onError:this.$routeTo404PageIfNotFound}},loginAsAdmin(){return de(this.siteName)},plan(){return{url:"press.api.site.current_plan",params:{name:this.siteName},auto:!0}}},activated(){var e;this.setupAgentJobUpdate(),((e=this.site)==null?void 0:e.status)==="Active"&&this.$socket.on("list_update",this.onSocketUpdate)},deactivated(){this.$socket.off("list_update",this.onSocketUpdate)},methods:{onSocketUpdate({doctype:e,name:t}){e==="Site"&&t===this.siteName&&this.$resources.site.reload()},setupAgentJobUpdate(){this._agentJobUpdateSet||(this._agentJobUpdateSet=!0,this.$socket.on("agent_job_update",e=>{(e.name==="New Site"||e.name==="New Site from Backup")&&e.status==="Success"&&e.site===this.siteName&&setTimeout(()=>{this.$router.push(`/sites/${this.siteName}/overview`),this.$resources.site.reload()},1e3),this.runningJob=e.site===this.siteName&&e.status!=="Success"}))},routeToGeneral(){var e,t;if(this.$route.matched.length===1){let a=["Pending","Installing"].includes((e=this.site)==null?void 0:e.status)?"jobs":"overview";this.$router.replace(`/sites/${(t=this.site)==null?void 0:t.name}/${a}`)}},proceedWithLoginAsAdmin(){if(this.errorMessage="",!this.reasonForAdminLogin.trim()){this.errorMessage="Reason is required";return}this.$resources.loginAsAdmin.submit({name:this.siteName,reason:this.reasonForAdminLogin}),this.showReasonForAdminLoginDialog=!1},handlePlanChange(){this.$resources.site.reload(),this.$resources.plan.reload()},onActivateClick(){this.$confirm({title:"Activate Site",message:"Are you sure you want to activate this site?",actionLabel:"Activate",action:()=>this.activate()})},activate(){this.$call("press.api.site.activate",{name:this.site.name}),T({title:"Site activated successfully!",message:"You can now access your site",icon:"check",color:"green"}),setTimeout(()=>window.location.reload(),1e3)}},computed:{site(){return this.$resources.site.data},regionInfo(){if(!this.$resources.site.loading&&this.$resources.site.data)return this.$resources.site.data.server_region_info},siteActions(){var e;return[{label:"View in Desk",icon:"external-link",condition:()=>this.$account.user.user_type==="System User",onClick:()=>{var t;window.open(`${window.location.protocol}//${window.location.host}/app/site/${(t=this.site)==null?void 0:t.name}`,"_blank")}},{label:"Manage Bench",icon:"tool",route:`/groups/${(e=this.site)==null?void 0:e.group}`,condition:()=>{var t;return(t=this.site)==null?void 0:t.group},onClick:()=>{var t;this.$router.push(`/groups/${(t=this.site)==null?void 0:t.group}`)}},{label:"Login As Administrator",icon:"external-link",loading:this.$resources.loginAsAdmin.loading,condition:()=>{var t;return((t=this.site)==null?void 0:t.status)==="Active"},onClick:()=>{var t;if(this.$account.team.name==((t=this.site)==null?void 0:t.notify_email))return this.$resources.loginAsAdmin.submit({name:this.siteName});this.showReasonForAdminLoginDialog=!0}},{label:"Impersonate Team",icon:"tool",condition:()=>this.$account.user.user_type==="System User",onClick:()=>se(this,null,function*(){var t,a;yield this.$account.switchTeam((t=this.site)==null?void 0:t.team),T({title:"Switched Team",message:`Switched to ${(a=this.site)==null?void 0:a.team}`,icon:"check",color:"green"})})},{label:"Transfer Site",icon:"tool",condition:()=>{var t;return((t=this.site)==null?void 0:t.status)==="Active"&&!this.$account.parent_team},onClick:()=>{this.showTransferSiteDialog=!0}},{label:"Change Bench",icon:"package",condition:()=>{var t;return((t=this.site)==null?void 0:t.status)==="Active"},onClick:()=>this.showChangeGroupDialog=!0},{label:"Change Region",icon:"globe",condition:()=>{var t;return((t=this.site)==null?void 0:t.status)==="Active"},onClick:()=>this.showChangeRegionDialog=!0},{label:"Upgrade Version",icon:"arrow-up",condition:()=>{var t;return((t=this.site)==null?void 0:t.status)==="Active"},onClick:()=>this.showVersionUpgradeDialog=!0},{label:"Change Server",icon:"server",condition:()=>{var t,a;return((t=this.site)==null?void 0:t.status)==="Active"&&!((a=this.site)!=null&&a.is_public)},onClick:()=>this.showChangeServerDialog=!0}]},hasMonitorAccess(){var e;return(e=this.$resources.plan.data)==null?void 0:e.monitor_access},tabs(){var s,g;let e="",t="",a=l=>`/sites/${this.siteName}/${l}`,u=[{label:"Overview",route:"overview"},{label:"Apps",route:"apps"},{label:"Analytics",route:"analytics"},{label:"Monitor",route:"monitor"},{label:"Database",route:"database"},{label:"Config",route:"site-config"},{label:"Jobs",route:"jobs",showRedDot:this.runningJob},{label:"Logs",route:"logs"},{label:"Settings",route:"settings"}];this.site&&((s=this.site)==null?void 0:s.hide_config)!==1&&(e="Config"),this.site&&this.hasMonitorAccess&&(t="Monitor");let i={Active:["Overview","Apps","Analytics","Database",e,"Jobs","Logs","Request Logs","Settings",t],Inactive:["Overview","Apps","Database",e,"Jobs","Logs","Settings"],Installing:["Jobs"],Pending:["Jobs"],Broken:["Overview","Apps",e,"Database","Jobs","Logs","Settings",t],Suspended:["Overview","Apps","Database","Jobs","Plan","Logs","Settings"]};if(this.site){let l=i[(g=this.site)==null?void 0:g.status];return l!=null&&l.length&&(u=u.filter(f=>l.includes(f.label))),u.map(f=>te(ee({},f),{route:a(f.route)}))}return[]}}},It={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-5 py-2.5"},xt={class:"space-x-2"},Rt={key:0,class:"p-5"},$t={class:"flex flex-col space-y-3 md:flex-row md:items-baseline md:justify-between md:space-y-0"},Pt={class:"flex items-center"},Bt={class:"text-2xl font-bold"},Ft={key:0,class:"ml-2 hidden cursor-default flex-row items-center self-end rounded-md bg-yellow-50 px-3 py-1 text-xs font-medium text-yellow-700 md:flex"},Mt=["src","alt","title"],Nt={class:"mb-10 flex flex-row justify-between md:hidden"},Ot={class:"flex flex-row"},Lt={key:0,class:"flex cursor-default flex-row items-center rounded-md bg-yellow-50 px-3 py-1 text-xs font-medium text-yellow-700"},Yt=["src","alt","title"],jt={class:"mb-2 mt-4"};function Et(e,t,a,u,i,s){var F,M,N,V;const g=L,l=Ae,f=Te,b=re,C=U("SiteAlerts"),y=U("router-view"),n=ue,p=B,I=$,_=R,d=U("SiteTransferDialog"),D=U("SiteChangeGroupDialog"),x=U("SiteChangeRegionDialog"),E=U("SiteChangeServerDialog"),J=U("SiteVersionUpgradeDialog");return o(),v("div",null,[S("header",It,[r(f,{items:[{label:"Sites",route:{name:"Sites"}},{label:((F=s.site)==null?void 0:F.host_name)||((M=s.site)==null?void 0:M.name),route:{name:"SiteOverview",params:{siteName:(N=s.site)==null?void 0:N.name}}}]},{actions:c(()=>{var k,z;return[S("div",xt,[((k=s.site)==null?void 0:k.status)==="Active"?(o(),h(g,{key:0,"icon-left":"external-link",label:"Visit Site",link:`https://${(z=s.site)==null?void 0:z.name}/apps`},null,8,["link"])):m("",!0),r(l,{options:s.siteActions},{default:c(({open:Jt})=>[r(g,{variant:"ghost",icon:"more-horizontal"})]),_:1},8,["options"])])]}),_:1},8,["items"])]),s.site?(o(),v("div",Rt,[S("div",$t,[S("div",Pt,[S("h1",Bt,A(s.site.host_name||s.site.name),1),r(b,{class:"ml-4",label:s.site.status},null,8,["label"]),s.regionInfo?(o(),v("div",Ft,[s.regionInfo.image?(o(),v("img",{key:0,class:"mr-2 h-4",src:s.regionInfo.image,alt:`Flag of ${s.regionInfo.title}`,title:s.regionInfo.image},null,8,Mt)):m("",!0),S("p",null,A(s.regionInfo.title),1)])):m("",!0)]),s.site.pending_for_long?(o(),h(g,{key:0,onClick:s.onActivateClick,variant:"solid",class:"mr-1"},{default:c(()=>t[7]||(t[7]=[w(" Activate ")])),_:1},8,["onClick"])):m("",!0),S("div",Nt,[S("div",Ot,[s.regionInfo?(o(),v("div",Lt,[s.regionInfo.image?(o(),v("img",{key:0,class:"mr-2 h-4",src:s.regionInfo.image,alt:`Flag of ${s.regionInfo.title}`,title:s.regionInfo.image},null,8,Yt)):m("",!0),S("p",null,A(s.regionInfo.title),1)])):m("",!0)])])]),S("div",jt,[s.site&&((V=e.$resources.plan)!=null&&V.data)&&!e.$resources.site.loading?(o(),h(C,{key:0,site:s.site,plan:e.$resources.plan.data,onPlanChange:s.handlePlanChange},null,8,["site","plan","onPlanChange"])):m("",!0)]),r(n,{tabs:s.tabs},{default:c(()=>[r(y,null,{default:c(({Component:k,route:z})=>[s.site?(o(),h(De(k),{key:0,site:s.site,plan:e.$resources.plan.data,onPlanChange:s.handlePlanChange},null,40,["site","plan","onPlanChange"])):m("",!0)]),_:1})]),_:1},8,["tabs"])])):m("",!0),r(_,{options:{title:"Login As Administrator",actions:[{label:"Proceed",variant:"solid",onClick:s.proceedWithLoginAsAdmin}]},modelValue:i.showReasonForAdminLoginDialog,"onUpdate:modelValue":t[1]||(t[1]=k=>i.showReasonForAdminLoginDialog=k)},{"body-content":c(()=>[r(p,{label:"Reason for logging in as Administrator",type:"textarea",modelValue:i.reasonForAdminLogin,"onUpdate:modelValue":t[0]||(t[0]=k=>i.reasonForAdminLogin=k),required:""},null,8,["modelValue"]),r(I,{class:"mt-3",message:i.errorMessage},null,8,["message"])]),_:1},8,["options","modelValue"]),r(d,{site:s.site,modelValue:i.showTransferSiteDialog,"onUpdate:modelValue":t[2]||(t[2]=k=>i.showTransferSiteDialog=k)},null,8,["site","modelValue"]),s.site?(o(),h(D,{key:1,site:s.site,modelValue:i.showChangeGroupDialog,"onUpdate:modelValue":t[3]||(t[3]=k=>i.showChangeGroupDialog=k)},null,8,["site","modelValue"])):m("",!0),s.site?(o(),h(x,{key:2,site:s.site,modelValue:i.showChangeRegionDialog,"onUpdate:modelValue":t[4]||(t[4]=k=>i.showChangeRegionDialog=k)},null,8,["site","modelValue"])):m("",!0),s.site?(o(),h(E,{key:3,site:s.site,modelValue:i.showChangeServerDialog,"onUpdate:modelValue":t[5]||(t[5]=k=>i.showChangeServerDialog=k)},null,8,["site","modelValue"])):m("",!0),s.site?(o(),h(J,{key:4,site:s.site,modelValue:i.showVersionUpgradeDialog,"onUpdate:modelValue":t[6]||(t[6]=k=>i.showVersionUpgradeDialog=k)},null,8,["site","modelValue"])):m("",!0)])}const as=G(Gt,[["render",Et]]);export{as as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/SitePlansDialog-CT5IPxxz.js","assets/main-Dpl-JOF2.js","assets/main-B0ZLDivw.css","assets/SitePlansTable-BtPUM3i9.js","assets/Alert-COV4XS8q.js","assets/toast-Dk0nDfLL.js","assets/BillingInformationDialog-B5pmLI5R.js","assets/StripeCard-BRr8QCrN.js","assets/StripeLogo-BRF2qIyd.js","assets/AddressForm-Cz0XUJgF.js","assets/Form-CIPLpg2e.js","assets/stripe.esm-D4yu_pm0.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=Site-BXOawvGz.js.map
