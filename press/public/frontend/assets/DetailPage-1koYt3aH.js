import{x as A,bE as E,r as i,q as m,o,A as b,j as n,w as $,u as d,h as a,a5 as T,aT as h,b3 as F,F as j,v as I,as as M,a9 as P,bD as q}from"./main-Dpl-JOF2.js";import{_ as C}from"./Header-BNMc-OFG.js";import{_ as H}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-CH7TZuXP.js";import{T as N}from"./TabsWithRouter-Dp0bDLIA.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},t=new Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b7aa0d47-98f9-4623-a9ee-0cbfd0f1e2af",e._sentryDebugIdIdentifier="sentry-dbid-b7aa0d47-98f9-4623-a9ee-0cbfd0f1e2af")}catch(s){}})();{var l=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};l._sentryModuleMetadata=l._sentryModuleMetadata||{},l._sentryModuleMetadata[new Error().stack]=Object.assign({},l._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}let f={};const S={name:"DetailPage",props:{id:String,objectType:{type:String,required:!0},name:{type:String,required:!0}},components:{Header:C,ActionButton:E,TabsWithRouter:N,FBreadcrumbs:H},resources:{document(){return{type:"document",doctype:this.object.doctype,name:this.name,whitelistedMethods:this.object.whitelistedMethods||{},onError(e){for(let t of(e==null?void 0:e.messages)||[])if(t.redirect){window.location.href=t.redirect;return}}}}},mounted(){f[`${this.object.doctype}:${this.name}`]||(this.$socket.emit("doc_subscribe",this.object.doctype,this.name),f[`${this.object.doctype}:${this.name}`]=!0),this.$socket.on("doc_update",e=>{e.doctype===this.object.doctype&&e.name===this.name&&this.$resources.document.reload()})},beforeUnmount(){let e=this.object.doctype;f[`${e}:${this.name}`]&&(this.$socket.emit("doc_unsubscribe",e,this.name),f[`${e}:${this.name}`]=!1)},computed:{object(){return q(this.objectType)},tabs(){return this.object.detail.tabs.filter(e=>e.condition?e.condition({documentResource:this.$resources.document}):!0)},title(){var t;let e=(t=this.$resources.document)==null?void 0:t.doc;return e?e[this.object.detail.titleField||"name"]:this.name},badge(){return this.object.detail.statusBadge?this.object.detail.statusBadge({documentResource:this.$resources.document}):null},actions(){var e;return this.object.detail.actions&&((e=this.$resources.document)!=null&&e.doc)?this.object.detail.actions({documentResource:this.$resources.document}).filter(s=>s.condition?s.condition({documentResource:this.$resources.document}):!0):[]},breadcrumbs(){var t;let e=[{label:this.object.list.title,route:this.object.list.route},{label:this.title,route:{name:`${this.object.doctype} Detail`,params:{name:this.name}}}];if(this.object.detail.breadcrumbs&&((t=this.$resources.document)!=null&&t.doc)){let s=this.object.detail.breadcrumbs({documentResource:this.$resources.document,items:e});Array.isArray(s)&&(e=s)}for(let s=0;s<e.length;s++)e[s].label.length>30&&s!==e.length-1&&(e[s].label=e[s].label.slice(0,30)+"...");return e}}},V={class:"w-full sm:flex sm:items-center sm:justify-between"},W={class:"flex items-center space-x-2"},z={key:0,class:"mt-1 flex items-center justify-between space-x-2 sm:mt-0"},O={class:"sm:hidden"},K={class:"space-x-2"},L={key:1,class:"mx-auto mt-60 w-fit rounded border border-dashed px-12 py-8 text-center text-gray-600"};function U(e,t,s,J,Q,r){var p;const w=i("FBreadcrumbs"),_=T,k=i("ActionButton"),v=i("Header"),B=i("router-view"),x=i("TabsWithRouter"),D=M,R=P;return o(),m(j,null,[b(v,{class:"sticky top-0 z-10 bg-white"},{default:$(()=>{var u,c,y;return[n("div",V,[n("div",W,[b(w,{items:r.breadcrumbs},null,8,["items"]),(u=e.$resources.document)!=null&&u.doc&&r.badge?(o(),a(_,h({key:0,class:"hidden sm:inline-flex"},r.badge),null,16)):d("",!0)]),(c=e.$resources.document)!=null&&c.doc?(o(),m("div",z,[n("div",O,[(y=e.$resources.document)!=null&&y.doc&&r.badge?(o(),a(_,F(h({key:0},r.badge)),null,16)):d("",!0)]),n("div",K,[(o(!0),m(j,null,I(r.actions,g=>(o(),a(k,h({ref_for:!0},g,{key:g.label}),null,16))),128))])])):d("",!0)])]}),_:1}),n("div",null,[!e.$resources.document.get.error&&e.$resources.document.get.fetched?(o(),a(x,{key:0,document:(p=e.$resources.document)==null?void 0:p.doc,tabs:r.tabs},{"tab-content":$(({tab:u})=>{var c;return[t[0]||(t[0]=n("div",null,null,-1)),(c=e.$resources.document)!=null&&c.doc?(o(),a(B,{key:0,tab:u,document:e.$resources.document},null,8,["tab","document"])):d("",!0)]}),_:1},8,["document","tabs"])):e.$resources.document.get.error?(o(),m("div",L,[b(D,{class:"mx-auto mb-4 h-6 w-6 text-red-600"}),b(R,{message:e.$resources.document.get.error},null,8,["message"])])):d("",!0)])],64)}const ee=A(S,[["render",U],["__scopeId","data-v-5408f69f"]]);export{ee as default};
//# sourceMappingURL=DetailPage-1koYt3aH.js.map
