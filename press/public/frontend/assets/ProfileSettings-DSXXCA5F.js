import{_ as V}from"./Card-BCzTSeNK.js";import{x as A,r as E,q as b,o as r,A as n,w as c,j as t,aK as x,n as I,t as f,X as F,Y as u,h as D,u as P,aA as U,a8 as Y,a9 as L,F as C,v as B}from"./main-Dpl-JOF2.js";import{_ as M}from"./ListItem-CkkFcC1t.js";import{_ as z}from"./FileUploader-C1pIUjCt.js";import{F as j}from"./FinalizeInvoicesDialog-A1jpR8yn.js";import{n as $}from"./toast-Dk0nDfLL.js";import{_ as N}from"./ClickToCopyField-DpU9Eau5.js";import"./datetime-PXpIdgFA.js";import"./dayjs.min-BK4AnHlu.js";(function(){try{var o=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},e=new Error().stack;e&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[e]="861f7995-aaf2-4d2d-9eea-cf638c8195bc",o._sentryDebugIdIdentifier="sentry-dbid-861f7995-aaf2-4d2d-9eea-cf638c8195bc")}catch(_){}})();{var w=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};w._sentryModuleMetadata=w._sentryModuleMetadata||{},w._sentryModuleMetadata[new Error().stack]=Object.assign({},w._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const q={name:"AccountProfile",components:{FileUploader:z,FinalizeInvoicesDialog:j},data(){return{showProfileEditDialog:!1,showEnableAccountDialog:!1,showDisableAccountDialog:!1,showBecomePublisherButton:!1,showFinalizeInvoicesDialog:!1}},computed:{teamEnabled(){return $account.team.enabled}},resources:{updateProfile(){let{first_name:o,last_name:e,email:_}=this.$account.user;return{url:"press.api.account.update_profile",params:{first_name:o,last_name:e,email:_},onSuccess(){this.showProfileEditDialog=!1,this.notifySuccess()}}},disableAccount:{url:"press.api.account.disable_account",onSuccess(o){this.showDisableAccountDialog=!1,o==="Unpaid Invoices"?this.showFinalizeInvoicesDialog=!0:($({title:"Account disabled",message:"Your account was disabled successfully",icon:"check",color:"green"}),this.$account.fetchAccount())}},enableAccount:{url:"press.api.account.enable_account",onSuccess(){$({title:"Account enabled",message:"Your account was enabled successfully",icon:"check",color:"green"}),this.$account.fetchAccount(),this.showEnableAccountDialog=!1}},becomePublisher(){return{url:"press.api.marketplace.become_publisher",onSuccess(){this.$router.push("/marketplace")}}}},methods:{onProfilePhotoChange(){this.$account.fetchAccount(),this.notifySuccess()},notifySuccess(){$({title:"Updated profile information",icon:"check",color:"green"})},confirmPublisherAccount(){this.$confirm({title:"Become a marketplace app developer?",message:"You will be able to publish apps to our Marketplace upon confirmation.",actionLabel:"Yes",action:o=>{this.$resources.becomePublisher.submit(),o()}})}}},K={class:"flex items-center border-b pb-3"},O={class:"relative"},J={class:"ml-4"},W=["onClick"],X={key:0},H={key:1},Q={class:"ml-4"},Z={class:"text-base font-semibold"},G={class:"mt-1 text-base text-gray-600"},ee={class:"ml-auto"},oe={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"};function te(o,e,_,v,s,a){const d=x,m=z,p=F,h=M,y=Y,g=L,l=U,k=V,T=E("FinalizeInvoicesDialog");return r(),b(C,null,[n(k,{title:"Profile"},{default:c(()=>[t("div",K,[t("div",O,[n(d,{size:"2xl",label:o.$account.user.first_name,image:o.$account.user.user_image},null,8,["label","image"]),n(m,{onSuccess:a.onProfilePhotoChange,fileTypes:"image/*","upload-args":{doctype:"User",docname:o.$account.user.name,method:"press.api.account.update_profile_picture"}},{default:c(({openFileSelector:i,uploading:S,progress:R,error:be})=>[t("div",J,[t("button",{onClick:_e=>i(),class:I(["absolute inset-0 grid w-full place-items-center rounded-full bg-black text-xs font-medium text-white opacity-0 transition hover:opacity-50 focus:opacity-50 focus:outline-none",{"opacity-50":S}])},[S?(r(),b("span",X,f(R)+"%",1)):(r(),b("span",H,"Edit"))],10,W)])]),_:1},8,["onSuccess","upload-args"])]),t("div",Q,[t("h3",Z,f(o.$account.user.first_name)+" "+f(o.$account.user.last_name),1),t("p",G,f(o.$account.user.email),1)]),t("div",ee,[n(p,{"icon-left":"edit",onClick:e[0]||(e[0]=i=>s.showProfileEditDialog=!0)},{default:c(()=>e[9]||(e[9]=[u(" Edit ")])),_:1})])]),t("div",null,[s.showBecomePublisherButton?(r(),D(h,{key:0,title:"Become Marketplace Developer",subtitle:"Become a marketplace app publisher"},{actions:c(()=>[n(p,{onClick:e[1]||(e[1]=i=>a.confirmPublisherAccount())},{default:c(()=>e[10]||(e[10]=[t("span",null,"Become a Publisher",-1)])),_:1})]),_:1})):P("",!0),n(h,{title:a.teamEnabled?"Disable Account":"Enable Account",subtitle:a.teamEnabled?"Disable your account and stop billing":"Enable your account and resume billing"},{actions:c(()=>[n(p,{onClick:e[2]||(e[2]=()=>{a.teamEnabled?s.showDisableAccountDialog=!0:s.showEnableAccountDialog=!0})},{default:c(()=>[t("span",{class:I({"text-red-600":a.teamEnabled})},f(a.teamEnabled?"Disable":"Enable"),3)]),_:1})]),_:1},8,["title","subtitle"])]),n(l,{options:{title:"Update Profile Information",actions:[{variant:"solid",label:"Save Changes",onClick:()=>o.$resources.updateProfile.submit()}]},modelValue:s.showProfileEditDialog,"onUpdate:modelValue":e[5]||(e[5]=i=>s.showProfileEditDialog=i)},{"body-content":c(()=>[t("div",oe,[n(y,{label:"First Name",modelValue:o.$account.user.first_name,"onUpdate:modelValue":e[3]||(e[3]=i=>o.$account.user.first_name=i)},null,8,["modelValue"]),n(y,{label:"Last Name",modelValue:o.$account.user.last_name,"onUpdate:modelValue":e[4]||(e[4]=i=>o.$account.user.last_name=i)},null,8,["modelValue"])]),n(g,{class:"mt-4",message:o.$resources.updateProfile.error},null,8,["message"])]),_:1},8,["options","modelValue"]),n(l,{options:{title:"Disable Account",actions:[{label:"Disable Account",variant:"solid",theme:"red",loading:o.$resources.disableAccount.loading,onClick:()=>o.$resources.disableAccount.submit()}]},modelValue:s.showDisableAccountDialog,"onUpdate:modelValue":e[6]||(e[6]=i=>s.showDisableAccountDialog=i)},{"body-content":c(()=>[e[11]||(e[11]=t("div",{class:"prose text-base"},[u(" By confirming this action: "),t("ul",null,[t("li",null,"Your account will be disabled"),t("li",null," Your active sites will be suspended immediately and will be deleted after a week. "),t("li",null,"Your account billing will be stopped")]),u(" You can enable your account later anytime. Do you want to continue? ")],-1)),n(g,{class:"mt-2",message:o.$resources.disableAccount.error},null,8,["message"])]),_:1},8,["options","modelValue"]),n(l,{options:{title:"Enable Account",actions:[{label:"Enable Account",variant:"solid",loading:o.$resources.enableAccount.loading,onClick:()=>o.$resources.enableAccount.submit()}]},modelValue:s.showEnableAccountDialog,"onUpdate:modelValue":e[7]||(e[7]=i=>s.showEnableAccountDialog=i)},{"body-content":c(()=>[e[12]||(e[12]=t("div",{class:"prose text-base"},[u(" By confirming this action: "),t("ul",null,[t("li",null,"Your account will be enabled"),t("li",null,"Your suspended sites will become active"),t("li",null,"Your account billing will be resumed")]),u(" Do you want to continue? ")],-1)),n(g,{class:"mt-2",message:o.$resources.enableAccount.error},null,8,["message"])]),_:1},8,["options","modelValue"])]),_:1}),n(T,{modelValue:s.showFinalizeInvoicesDialog,"onUpdate:modelValue":e[8]||(e[8]=i=>s.showFinalizeInvoicesDialog=i)},null,8,["modelValue"])],64)}const ne=A(q,[["render",te]]),se={name:"AccountRefferal",components:{ClickToCopyField:N},computed:{referralLink(){return this.$account.team.referrer_id?`${location.origin}/dashboard/signup?referrer=${this.$account.team.referrer_id}`:""},minimumSpentAmount(){return this.$account.team.country=="India"?"₹1800":"$25"},creditAmountInTeamCurrency(){return this.$account.team.country=="India"?"₹750":"$10"}}},le={class:"space-y-4"},ae={class:"text-base text-gray-700"};function ie(o,e,_,v,s,a){const d=N,m=V;return a.referralLink?(r(),D(m,{key:0,title:"Refer & Earn",subtitle:"Your unique referral link"},{default:c(()=>[t("div",le,[n(d,{textContent:a.referralLink},null,8,["textContent"]),t("h3",ae,[u(" When someone sign's up using the above link and spends at least "+f(a.minimumSpentAmount)+" on Easytouch Cloud, you ",1),t("strong",null,"get "+f(a.creditAmountInTeamCurrency)+" in Easytouch Cloud Credits",1),e[0]||(e[0]=u("! "))])])]),_:1})):P("",!0)}const ce=A(se,[["render",ie]]),re={name:"AccountEmails",resources:{getEmails(){return{url:"press.api.account.get_emails",auto:!0,onSuccess(o){this.emailData=o}}},changeEmail(){return{url:"press.api.account.update_emails",params:{data:JSON.stringify(this.emailData)},onSuccess(o){this.showEmailsEditDialog=!1}}}},data(){return{showEmailsEditDialog:!1,emailData:[]}},computed:{fieldLabelMap(){return{invoices:"Send invoices to",marketplace_notifications:"Send marketplace emails to"}}}};function ue(o,e,_,v,s,a){const d=F,m=M,p=Y,h=L,y=U,g=V;return r(),D(g,{title:"Email Notifications"},{actions:c(()=>[n(d,{"icon-left":"edit",onClick:e[0]||(e[0]=l=>s.showEmailsEditDialog=!0)},{default:c(()=>e[2]||(e[2]=[u(" Edit ")])),_:1})]),default:c(()=>[s.emailData?(r(!0),b(C,{key:0},B(s.emailData,l=>(r(),D(m,{title:a.fieldLabelMap[l.type]||l.type,description:l.value,key:l.type},null,8,["title","description"]))),128)):P("",!0),n(y,{options:{title:"Edit Emails",actions:[{label:"Save Changes",variant:"solid",onClick:()=>o.$resources.changeEmail.submit()}]},modelValue:s.showEmailsEditDialog,"onUpdate:modelValue":e[1]||(e[1]=l=>s.showEmailsEditDialog=l)},{"body-content":c(()=>[(r(!0),b(C,null,B(s.emailData,l=>(r(),b("div",{class:"mt-3",key:l.type},[n(p,{label:a.fieldLabelMap[l.type]||l.type,modelValue:l.value,"onUpdate:modelValue":k=>l.value=k},null,8,["label","modelValue","onUpdate:modelValue"])]))),128)),n(h,{class:"mt-2",message:o.$resources.changeEmail.error},null,8,["message"])]),_:1},8,["options","modelValue"])]),_:1})}const de=A(re,[["render",ue]]),me={name:"AccountSettings",pageMeta(){return{title:"Settings - Profile"}},components:{AccountProfile:ne,AccountReferral:ce,AccountEmails:de}},pe={class:"space-y-5"};function fe(o,e,_,v,s,a){const d=E("AccountProfile"),m=E("AccountEmails"),p=E("AccountReferral");return r(),b("div",pe,[n(d),n(m),n(p)])}const $e=A(me,[["render",fe]]);export{$e as default};
//# sourceMappingURL=ProfileSettings-DSXXCA5F.js.map
