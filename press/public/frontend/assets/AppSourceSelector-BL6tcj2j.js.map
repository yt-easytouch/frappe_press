{"version":3,"file":"AppSourceSelector-BL6tcj2j.js","sources":["../../../../dashboard/src/components/AppSourceSelector.vue"],"sourcesContent":["<template>\n\t<div class=\"space-y-3 max-h-96 overflow-auto px-4\">\n\t\t<button\n\t\t\tclass=\"block w-full cursor-pointer rounded-md border px-4 py-3 text-left shadow ring-inset focus:outline-none\"\n\t\t\t:class=\"\n\t\t\t\tisAppSelected(app)\n\t\t\t\t\t? 'bg-gray-50 ring-2 ring-gray-600'\n\t\t\t\t\t: 'cursor-pointer hover:border-gray-300'\n\t\t\t\"\n\t\t\tv-for=\"app in apps\"\n\t\t\t:key=\"app.name\"\n\t\t\t@click=\"toggleApp(app.name)\"\n\t\t>\n\t\t\t<div class=\"ml-1 flex items-center justify-between text-left text-base\">\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"font-semibold\">\n\t\t\t\t\t\t{{ app.title }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"text-gray-700\">\n\t\t\t\t\t\t{{ app.source.repository_owner }}/{{ app.source.repository }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<Dropdown :options=\"dropdownItems(app)\" right>\n\t\t\t\t\t<template v-slot=\"{ open }\">\n\t\t\t\t\t\t<Button type=\"white\" icon-right=\"chevron-down\">\n\t\t\t\t\t\t\t<span>{{ app.source.branch }}</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</template>\n\t\t\t\t</Dropdown>\n\t\t\t</div>\n\t\t</button>\n\t</div>\n</template>\n<script>\nexport default {\n\tname: 'AppSourceSelector',\n\tprops: ['apps', 'modelValue', 'multiple'],\n\temits: ['update:modelValue'],\n\tmethods: {\n\t\ttoggleApp(appName) {\n\t\t\tlet mapApp = app => ({ app: app.name, source: app.source });\n\n\t\t\tif (!this.multiple) {\n\t\t\t\tlet selectedApp = this.apps.find(app => app.name === appName);\n\t\t\t\tthis.$emit('update:modelValue', mapApp(selectedApp));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// multiple\n\t\t\tlet selectedAppsMap = Object.assign({}, this.selectedAppsMap);\n\t\t\tif (selectedAppsMap[appName]) {\n\t\t\t\t// exists already, remove\n\t\t\t\tselectedAppsMap[appName] = false;\n\t\t\t} else {\n\t\t\t\t// add\n\t\t\t\tselectedAppsMap[appName] = true;\n\t\t\t}\n\t\t\tlet selectedApps = this.apps\n\t\t\t\t.filter(app => selectedAppsMap[app.name])\n\t\t\t\t.map(mapApp);\n\n\t\t\tthis.$emit('update:modelValue', selectedApps);\n\t\t},\n\t\tisAppSelected(app) {\n\t\t\tif (this.multiple) {\n\t\t\t\treturn this.selectedAppsMap[app.name];\n\t\t\t}\n\t\t\treturn this.modelValue && this.modelValue.app === app.name;\n\t\t},\n\t\tdropdownItems(app) {\n\t\t\treturn app.sources.map(source => ({\n\t\t\t\tlabel: `${source.repository_owner}/${source.repository}:${source.branch}`,\n\t\t\t\tonClick: () => this.selectSource(app, source)\n\t\t\t}));\n\t\t},\n\t\tselectSource(app, source) {\n\t\t\tapp.source = source;\n\t\t\tif (this.multiple) {\n\t\t\t\tlet selectedApps = this.modelValue.map(_app => {\n\t\t\t\t\tif (app.name === _app.app) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tapp: app.name,\n\t\t\t\t\t\t\tsource\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\treturn _app;\n\t\t\t\t});\n\t\t\t\tthis.$emit('update:modelValue', selectedApps);\n\t\t\t} else {\n\t\t\t\tthis.$emit('update:modelValue', {\n\t\t\t\t\tapp: app.name,\n\t\t\t\t\tsource\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tselectedAppsMap() {\n\t\t\tif (!this.multiple) return {};\n\n\t\t\tlet out = {};\n\t\t\tlet selectedAppNames = this.modelValue.map(app => app.app);\n\t\t\tfor (let app of this.apps) {\n\t\t\t\tout[app.name] = selectedAppNames.includes(app.name);\n\t\t\t}\n\t\t\treturn out;\n\t\t}\n\t}\n};\n</script>\n"],"names":["_sfc_main","appName","selectedAppsMap","app","selectedApps","source","_app","out","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_openBlock","_createElementBlock","_Fragment","_renderList","$props","$options","$event","_createElementVNode","_toDisplayString","_withCtx"],"mappings":"mwBAkCA,MAAAA,EAAA,0BAEC,MAAA,CAAA,OAAA,aAAA,UAAA,8BAEA,QAAA,CACC,UAAAC,EAAA,yCAGC,GAAA,CAAA,KAAA,SAAA,0EAGC,MACD,mDAMCC,EAAAD,CAAA,EAAA,2BAMA,OAAAE,GAAAD,EAAAC,EAAA,IAAA,CAAA,SAGD,KAAA,MAAA,oBAAAC,CAAA,GAED,cAAAD,EAAA,CACC,OAAA,KAAA,SACC,KAAA,gBAAAA,EAAA,IAAA,iDAIF,cAAAA,EAAA,CACC,OAAAA,EAAA,QAAA,IAAAE,IAAA,CACC,MAAA,GAAAA,EAAA,gBAAA,IAAAA,EAAA,UAAA,IAAAA,EAAA,MAAA,GACA,QAAA,IAAA,KAAA,aAAAF,EAAAE,CAAA,CACD,EAAA,qBAIA,GADAF,EAAA,OAAAE,EACA,KAAA,SAAA,CACC,IAAAD,EAAA,KAAA,WAAA,IAAAE,kBAEE,uBAMF,EACA,KAAA,MAAA,oBAAAF,CAAA,OAEA,KAAA,MAAA,oBAAA,oBAGA,CAAA,CAEF,GAED,SAAA,CACC,iBAAA,4BAGC,IAAAG,EAAA,CAAA,sFAKA,OAAAA,CACD,CACD,CACD,EA3GMC,EAAA,CAAA,MAAA,uCAAA,EADNC,EAAA,CAAA,SAAA,EAaQC,EAAA,CAAA,MAAA,4DAAA,EAEEC,EAAA,CAAA,MAAA,eAAA,EAGAC,EAAA,CAAA,MAAA,eAAA,wCAjBT,OAAAC,EAAA,EAAAC,EAAA,MAAAN,EAAA,EACCK,EAAA,EAAA,EAAAC,EAAAC,EAAA,KAAAC,EAAAC,EAAA,KAAAd,sIAEce,EAAA,cAAAf,CAAA,wFAOZ,QAAAgB,GAAAD,EAAA,UAAAf,EAAA,IAAA,IAEDiB,EAAA,MAAAV,EAAA,eAEEU,EAAA,MAAAT,EAAAU,EAAAlB,EAAA,KAAA,EAAA,CAAA,EAGAiB,EAAA,MAAAR,EAAAS,EAAAlB,EAAA,OAAA,gBAAA,EAAA,IAAAkB,EAAAlB,EAAA,OAAA,UAAA,EAAA,CAAA,oCAIuC,MAAA,iCAE9B,KAAA,QAAa,aAAA,iBAxB3B,QAAAmB,EAAA,IAAA,CAyBOF,EAAA,OAAA,KAAAC,EAAAlB,EAAA,OAAA,MAAA,EAAA,CAAA,yCAzBP,EAAA,GAAAM,CAAA"}