var ie=Object.defineProperty,ae=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable;var G=(t,e,s)=>e in t?ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,O=(t,e)=>{for(var s in e||(e={}))re.call(e,s)&&G(t,s,e[s]);if(M)for(var s of M(e))pe.call(e,s)&&G(t,s,e[s]);return t},E=(t,e)=>ae(t,oe(e));var $=(t,e,s)=>new Promise((h,n)=>{var a=g=>{try{m(s.next(g))}catch(k){n(k)}},f=g=>{try{m(s.throw(g))}catch(k){n(k)}},m=g=>g.done?h(g.value):Promise.resolve(g.value).then(a,f);m((s=s.apply(t,e)).next())});import{_ as N}from"./WizardCard-D6pRuZbe.js";import{_ as z}from"./Steps-B0ktOnsZ.js";import{x as S,q as o,o as i,j as l,t as _,u as d,A as u,a9 as I,n as V,a4 as de,ae as W,a8 as H,F as C,v as F,ag as y,ah as x,h as P,w as b,a7 as ue,Y as w,X as q,c8 as ce,r as T}from"./main-Dpl-JOF2.js";import{_ as Y}from"./ChangeAppPlanSelector-B7RAZX-J.js";import{_ as me}from"./Breadcrumbs-yx7M4N4X.js";import{v as ge,_ as he}from"./FileUploader-C1pIUjCt.js";import{_ as J}from"./RichSelect-DPikL6tG.js";import{_ as K}from"./Form-CIPLpg2e.js";import{_ as X}from"./BackupFilesUploader-D7iED6IX.js";import{_ as fe}from"./Alert-COV4XS8q.js";import{D as j}from"./datetime-PXpIdgFA.js";import{_ as Q}from"./SitePlansTable-BtPUM3i9.js";import"./AppPlanCard-CuGgjNKV.js";import"./FeatureList-DXsHFT_A.js";import"./dayjs.min-BK4AnHlu.js";import"./ListItem-CkkFcC1t.js";(function(){try{var t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="bccaf52e-b2e7-4bbb-bdfa-56d883da53c6",t._sentryDebugIdIdentifier="sentry-dbid-bccaf52e-b2e7-4bbb-bdfa-56d883da53c6")}catch(s){}})();{var R=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};R._sentryModuleMetadata=R._sentryModuleMetadata||{},R._sentryModuleMetadata[new Error().stack]=Object.assign({},R._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const be={name:"Hostname",props:["modelValue"],emits:["update:modelValue","error"],data(){return{subdomainAvailable:!1,errorMessage:null}},resources:{domain(){return{url:"press.api.site.get_domain",auto:!0}}},computed:{domain(){return this.$resources.domain.data}},methods:{subdomainChange(t){return $(this,null,function*(){let e=t.target.value;this.$emit("update:modelValue",e),this.subdomainAvailable=!1;let s=this.validateSubdomain(e);s||((yield this.$call("press.api.site.exists",{subdomain:e,domain:this.domain}))?s=`${e}.${this.domain} already exists.`:this.subdomainAvailable=!0),this.errorMessage=s,this.$emit("error",s)})},validateSubdomain(t){return ge(t)}}},_e={class:"mt-4 flex"},ke=["value"],ye={class:"flex items-center rounded-r bg-gray-100 px-4 text-base"},ve={class:"mt-1"},xe={key:0,class:"text-sm text-green-600",role:"alert"};function we(t,e,s,h,n,a){const f=I;return i(),o("div",null,[e[1]||(e[1]=l("label",{class:"text-lg font-semibold"}," Choose a hostname ",-1)),e[2]||(e[2]=l("p",{class:"text-base text-gray-700"}," Give your site a unique name. It can only contain alphanumeric characters and dashes. ",-1)),l("div",_e,[l("input",{class:"form-input z-10 w-full rounded-r-none",type:"text",value:s.modelValue,placeholder:"subdomain",onChange:e[0]||(e[0]=(...m)=>a.subdomainChange&&a.subdomainChange(...m))},null,40,ke),l("div",ye," ."+_(a.domain),1)]),l("div",ve,[n.subdomainAvailable?(i(),o("div",xe,_(s.modelValue)+"."+_(a.domain)+" is available ",1)):d("",!0),u(f,{message:n.errorMessage},null,8,["message"])])])}const Pe=S(be,[["render",we]]),Se={name:"SelectableCard",props:["selected","title","image","fullCircleImage"]},Ce={class:"flex items-center"},Fe=["src","alt"],Ae={class:"my-1"},Be={class:"text-lg font-bold text-gray-900"};function $e(t,e,s,h,n,a){return i(),o("button",{class:V(["cursor-pointer rounded-lg border border-gray-100 px-4 py-2 text-left shadow focus:outline-none",s.selected?"bg-gray-50 ring-2 ring-inset ring-gray-600":"hover:border-gray-400"])},[l("div",Ce,[s.image?(i(),o("img",{key:0,src:s.image,alt:s.title,class:V(["mr-4 h-10 w-10",[s.fullCircleImage?"rounded-full":"rounded-lg"]])},null,10,Fe)):d("",!0),l("div",Ae,[l("h3",Be,_(s.title),1),de(t.$slots,"secondary-content")])])],2)}const Z=S(Se,[["render",$e]]),Re={components:{SelectableCard:Z,RichSelect:J},name:"Apps",emits:["update:selectedApps","update:selectedGroup","update:selectedRegion","update:shareDetailsConsent"],props:["selectedApps","selectedGroup","privateBench","selectedRegion","shareDetailsConsent","bench"],data(){return{selectedVersion:null,version:null}},computed:{publicApps(){return this.apps.filter(t=>t.public).map(t=>(t.marketplace=this.marketplaceApps[t.app]||null,t))},privateApps(){return this.apps.filter(t=>!t.public)},apps(){let t=this.getSelectedGroup();return t?t.apps:[]},versionOptions(){return this.versions.map(t=>t.name)},regionOptions(){let t=this.getSelectedGroup();return t?t.clusters.map(e=>({label:e.title,value:e.name,image:e.image,beta:e.beta})):[]}},watch:{selectedVersion(t){if(!this.privateBench){let e=this.versions.find(s=>s.name==t);this.$emit("update:selectedGroup",e.group.name)}},selectedGroup(){this.$emit("update:selectedApps",["frappe"]),this.regionOptions.length>0&&this.$emit("update:selectedRegion",this.regionOptions[0].value)}},methods:{toggleApp(t){t.frappe||(this.selectedApps.includes(t.app)?this.$emit("update:selectedApps",this.selectedApps.filter(e=>e!==t.app)):this.$emit("update:selectedApps",this.selectedApps.concat(t.app)))},getSelectedGroup(){return!this.versions||!this.selectedVersion||!this.selectedGroup?null:this.versions.find(e=>e.name==this.selectedVersion).group}},resources:{versions(){return{url:"press.api.site.get_new_site_options",auto:!0,params:{group:this.privateBench?this.bench:""},onSuccess(t){this.versions=t.versions.filter(e=>e.group),this.marketplaceApps=t.marketplace_apps,this.privateBench?(this.selectedVersion=this.versions.filter(e=>e.group.name===this.bench)[0].name,this.$emit("update:selectedApps",["frappe"])):this.selectedVersion=this.versions[0].name,this.regionOptions.length==1&&this.$emit("update:selectedRegion",this.regionOptions[0].value)}}}}},Te={key:0,class:"flex justify-center"},Ve={key:1,class:"space-y-6"},De={key:0},Ue={class:"mt-4"},Ie={key:1},Le={class:"mt-4"},Me={key:2},Ge={class:"mt-4 space-y-4"},Oe={key:0},Ee={class:"-mx-2 mt-4 grid max-h-56 grid-cols-2 gap-4 overflow-y-auto px-2 py-2"},je=["href"],Ne={key:1,class:"text-sm leading-snug text-gray-700"},ze={key:0,class:"h-1 py-4"},We={key:1},He={class:"mt- -mx-2 grid max-h-56 grid-cols-2 gap-4 overflow-y-auto px-2 py-2"},qe={slot:"secondary-content",class:"text-base text-gray-700"},Ye={key:3};function Je(t,e,s,h,n,a){const f=W,m=H,g=J,k=Z;return i(),o("div",null,[t.$resources.versions.loading?(i(),o("div",Te,[u(f)])):d("",!0),t.$resources.versions.data?(i(),o("div",Ve,[this.privateBench?d("",!0):(i(),o("div",De,[e[4]||(e[4]=l("h2",{class:"text-lg font-semibold"},"Select Frappe version",-1)),e[5]||(e[5]=l("p",{class:"text-base text-gray-700"}," Select the Frappe version for your site ",-1)),l("div",Ue,[u(m,{type:"select",modelValue:n.selectedVersion,"onUpdate:modelValue":e[0]||(e[0]=r=>n.selectedVersion=r),options:a.versionOptions},null,8,["modelValue","options"])])])),a.regionOptions.length>0?(i(),o("div",Ie,[e[6]||(e[6]=l("h2",{class:"text-lg font-semibold"},"Select Region",-1)),e[7]||(e[7]=l("p",{class:"text-base text-gray-700"}," Select the datacenter region where your site should be created ",-1)),l("div",Le,[u(g,{value:s.selectedRegion,onChange:e[1]||(e[1]=r=>t.$emit("update:selectedRegion",r)),options:a.regionOptions},null,8,["value","options"])])])):d("",!0),a.publicApps.length>1||a.privateApps.length?(i(),o("div",Me,[e[10]||(e[10]=l("h2",{class:"text-lg font-semibold"},"Select apps to install",-1)),e[11]||(e[11]=l("p",{class:"text-base text-gray-700"}," Choose apps to install on your site. You can select apps published on marketplace or your private apps. ",-1)),l("div",Ge,[a.publicApps.length?(i(),o("div",Oe,[e[8]||(e[8]=l("h3",{class:"sr-only"},"Marketplace Apps",-1)),l("div",Ee,[(i(!0),o(C,null,F(a.publicApps,r=>y((i(),P(k,{key:r.app,onClick:c=>a.toggleApp(r),title:r.marketplace?r.marketplace.title:r.app_title,image:r.marketplace?r.marketplace.image:null,selected:s.selectedApps.includes(r.app),fullCircleImage:""},{"secondary-content":b(()=>[r.marketplace?(i(),o("a",{key:0,class:"inline-block text-sm leading-snug text-gray-600",href:"/"+r.marketplace.route,target:"_blank",onClick:e[2]||(e[2]=ue(()=>{},["stop"]))}," Details ",8,je)):(i(),o("span",Ne,_(r.repository_owner)+"/"+_(r.repository),1))]),_:2},1032,["onClick","title","image","selected"])),[[x,!r.frappe]])),128)),a.publicApps.length>4?(i(),o("div",ze)):d("",!0)])])):d("",!0),a.privateApps.length>0?(i(),o("div",We,[e[9]||(e[9]=l("h3",{class:"text-sm font-medium"},"Your Private Apps",-1)),l("div",He,[(i(!0),o(C,null,F(a.privateApps,r=>(i(),P(k,{key:r.app,onClick:c=>a.toggleApp(r),selected:s.selectedApps.includes(r.app),title:r.app_title,fullCircleImage:""},{default:b(()=>[l("div",qe,_(r.repository_owner)+":"+_(r.branch),1)]),_:2},1032,["onClick","selected","title"]))),128))])])):d("",!0)])])):d("",!0),s.selectedApps.includes("erpnext")?(i(),o("div",Ye,[u(m,{type:"checkbox",label:"I am okay if my details are shared with local partner",onChange:e[3]||(e[3]=r=>t.$emit("update:shareDetailsConsent",r.target.checked))})])):d("",!0)])):d("",!0)])}const Ke=S(Re,[["render",Je]]),Xe={name:"Restore",emits:["update:selectedFiles","update:skipFailingPatches"],props:["selectedFiles","manualMigration","skipFailingPatches"],components:{FileUploader:he,Form:K,BackupFilesUploader:X},data(){return{restoreFrom:null,files:[{icon:"database",type:"database",ext:"application/x-gzip",title:"Database Backup",file:null},{icon:"file",type:"public",ext:"application/x-tar",title:"Public Files",file:null},{icon:"file-minus",type:"private",ext:"application/x-tar",title:"Private Files",file:null},{icon:"file-minus",type:"config",ext:"application/json",title:"Config Files",file:null}],uploadedFiles:{database:null,public:null,private:null},frappeSite:{url:"",email:"",password:""},errorMessage:null,wantToSkipFailingPatches:!1}},resources:{getBackupLinks(){let{url:t,email:e,password:s}=this.frappeSite;return{url:"press.api.site.get_backup_links",params:{url:t,email:e,password:s},validate(){let{url:h,email:n,password:a}=this.frappeSite;if(!(h&&n&&a))return"Please enter URL, Username and Password"},onSuccess(h){let n={};for(let a of h)n[a.type]=a.remote_file;this.$emit("update:selectedFiles",n)}}}},methods:{showAlert(){this.manualMigration=!0},errorContains(t){return this.$resources.getBackupLinks.error&&this.$resources.getBackupLinks.error.search(t)!==-1}},computed:{fetchedBackupFiles(){return this.$resources.getBackupLinks.data?this.$resources.getBackupLinks.data.map(t=>{let e=t.file_name.split("-")[0].split("_").join("T"),s=j.fromISO(e).toLocaleString(j.DATETIME_FULL);return E(O({},t),{timestamp:s})}):[]}},watch:{wantToSkipFailingPatches(t){this.$emit("update:skipFailingPatches",t)}}},Qe={class:"mt-4 grid grid-cols-2 gap-6"},Ze={key:0},et={key:1},tt={class:"mt-6"},st={class:"mt-2"},nt={key:1,class:"text-base font-semibold text-green-500"},lt={key:2,class:"mt-2 space-y-1"},it={class:"text-base font-medium text-gray-700"},at={key:2,class:"mt-3"};function ot(t,e,s,h,n,a){const f=q,m=fe,g=X,k=K,r=I;return i(),o("div",null,[e[10]||(e[10]=l("label",{class:"text-lg font-semibold"}," Restore an existing site ",-1)),e[11]||(e[11]=l("p",{class:"text-base text-gray-700"}," Restore an existing site from backup files or directly from site url. ",-1)),l("div",Qe,[(i(),o(C,null,F([{name:"Upload Backups",key:"backup"},{name:"Migrate from Site URL",key:"siteUrl"}],c=>u(f,{key:c.key,type:n.restoreFrom===c.key?"primary":"secondary",onClick:D=>n.restoreFrom=c.key},{default:b(()=>[w(_(c.name),1)]),_:2},1032,["type","onClick"])),64))]),n.restoreFrom==="backup"?(i(),o("div",Ze,[e[5]||(e[5]=l("div",{class:"mt-6 rounded-md border border-gray-300 px-4 py-3 text-sm text-gray-700"},[l("ol",{class:"list-decimal pl-4"},[l("li",null,"Login to your site."),l("li",null,"From the Download Backups page, download the latest backup."),l("li",null," To get files backup, click on Download Files Backup. This will generate a new files backup and you will get an email. "),l("li",null," Download the files backup from the links in the email and upload the files here. ")])],-1)),s.manualMigration?(i(),P(m,{key:0,class:"mt-5 w-full"},{default:b(()=>e[4]||(e[4]=[w(" Seems like your site is huge. Open a support ticket mentioning that you want to restore a backup and it's size and we'll take it from there. ")])),_:1})):d("",!0),u(g,{class:"mt-6",backupFiles:s.selectedFiles,"onUpdate:backupFiles":e[0]||(e[0]=c=>t.$emit("update:selectedFiles",c))},null,8,["backupFiles"])])):d("",!0),n.restoreFrom==="siteUrl"?(i(),o("div",et,[l("div",tt,[e[8]||(e[8]=l("div",{class:"rounded-md border border-gray-300 px-4 py-3 text-sm text-gray-700"},[l("ol",{class:"list-decimal pl-4"},[l("li",null,"Login to your site."),l("li",null," From the Download Backups page, click on Download Files Backup. "),l("li",null," This will generate a new files backup and you will get an email. "),l("li",null,"After that, come back here and click on Get Backups.")])],-1)),a.errorContains("Your site exceeds the limits for this operation")?(i(),P(m,{key:0,class:"mt-5 w-full"},{default:b(()=>e[6]||(e[6]=[w(" Seems like your site is huge. Open a support ticket mentioning that you want to restore a backup and it's size and we'll take it from there. ")])),_:1})):d("",!0),u(k,{class:"mt-6",fields:[{label:"Site URL",fieldtype:"Data",fieldname:"url"},{label:"Email",fieldtype:"Data",fieldname:"email"},{label:"Password",fieldtype:"Password",fieldname:"password"}],modelValue:n.frappeSite,"onUpdate:modelValue":e[1]||(e[1]=c=>n.frappeSite=c)},null,8,["modelValue"]),l("div",st,[t.$resources.getBackupLinks.data?d("",!0):(i(),P(r,{key:0,message:t.$resources.getBackupLinks.error},null,8,["message"])),t.$resources.getBackupLinks.data?(i(),o("div",nt," Found latest backups at "+_(a.fetchedBackupFiles[0].timestamp),1)):d("",!0),t.$resources.getBackupLinks.data?(i(),o("div",lt,[(i(!0),o(C,null,F(a.fetchedBackupFiles,c=>(i(),o("div",{key:c.remote_file},[l("div",it,_(c.file_name),1)]))),128))])):d("",!0)]),t.$resources.getBackupLinks.data?d("",!0):(i(),P(f,{key:1,class:"mt-2",onClick:e[2]||(e[2]=c=>t.$resources.getBackupLinks.submit()),loading:t.$resources.getBackupLinks.loading},{default:b(()=>e[7]||(e[7]=[w(" Get Backups ")])),_:1},8,["loading"]))])])):d("",!0),["backup","siteUrl"].includes(n.restoreFrom)?(i(),o("div",at,[y(l("input",{id:"skip-failing",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500","onUpdate:modelValue":e[3]||(e[3]=c=>n.wantToSkipFailingPatches=c)},null,512),[[ce,n.wantToSkipFailingPatches]]),e[9]||(e[9]=l("label",{for:"skip-failing",class:"ml-2 text-sm text-gray-900"}," Skip failing patches (if any patch fails) ",-1))])):d("",!0)])}const rt=S(Xe,[["render",ot]]),pt={name:"Plans",emits:["update:selectedPlan"],props:["bench","selectedPlan","benchTeam"],components:{SitePlansTable:Q},data(){return{plans:null}},resources:{plans(){return{url:"press.api.site.get_plans",params:{rg:this.bench},auto:!0,onSuccess(t){this.plans=t.map(e=>(e.disabled=!this.$account.hasBillingInfo,e))}}}}},dt={class:"mt-4"},ut={key:0,class:"flex justify-center"};function ct(t,e,s,h,n,a){const f=W,m=Q;return i(),o("div",null,[e[1]||(e[1]=l("label",{class:"text-lg font-semibold"}," Choose your plan ",-1)),e[2]||(e[2]=l("p",{class:"text-base text-gray-700"}," Select a plan based on the type of usage you are expecting on your site. ",-1)),l("div",dt,[t.$resources.plans.loading?(i(),o("div",ut,[u(f)])):d("",!0),n.plans?(i(),P(m,{key:1,plans:n.plans,selectedPlan:s.selectedPlan,"onUpdate:selectedPlan":e[0]||(e[0]=g=>t.$emit("update:selectedPlan",g))},null,8,["plans","selectedPlan"])):d("",!0)])])}const mt=S(pt,[["render",ct]]),gt={name:"NewSite",props:["bench"],components:{WizardCard:N,Steps:z,Hostname:Pe,Apps:Ke,Restore:rt,Plans:mt,ChangeAppPlanSelector:Y},data(){return{subdomain:null,subdomainValid:!1,privateBench:!1,benchName:null,benchTitle:null,benchTeam:null,selectedApps:[],selectedGroup:null,selectedRegion:null,selectedFiles:{database:null,public:null,private:null},skipFailingPatches:!1,selectedPlan:null,shareDetailsConsent:!1,validationMessage:null,steps:[{name:"Hostname",validate:()=>this.subdomainValid},{name:"Apps",validate:()=>{if(this.privateBench)return!0;if(this.selectedRegion)this.validationMessage=null;else return this.validationMessage="Please select the region",!1;return!0}},{name:"Restore"},{name:"Plan"}],agreedToRegionConsent:!1,selectedAppPlans:{},loadingPlans:!1}},mounted(){return $(this,null,function*(){if(this.$route.query.domain){let t=this.$route.query.domain.split(".");t&&(this.subdomain=t[0]),this.$router.replace({})}if(this.bench){this.privateBench=!0,this.selectedGroup=this.bench,this.benchTitle=this.bench;let{title:t,creation:e,team:s}=yield this.$call("press.api.bench.get_title_and_creation",{name:this.bench});if(this.benchName=this.bench,this.benchTitle=t,this.benchTeam=s,s==this.$account.team.name){this.selectedPlan={name:"Unlimited"};let h=this.steps.findIndex(n=>n.name=="Plan");this.steps.splice(h,1)}}})},resources:{newSite(){return{url:"press.api.site.new",params:{site:{name:this.subdomain,apps:this.selectedApps,group:this.selectedGroup,cluster:this.selectedRegion,plan:this.selectedPlan?this.selectedPlan.name:null,files:this.selectedFiles,share_details_consent:this.shareDetailsConsent,skip_failing_patches:this.skipFailingPatches,selected_app_plans:this.selectedAppPlans}},onSuccess(t){let{site:e,job:s=""}=t;this.$router.push(`/sites/${e}/jobs/${s}`)},validate(){let t=this.subdomainValid&&this.selectedApps.length>0&&this.selectedPlan&&(!this.wantsToRestore||this.selectedFiles.database);if(!this.agreedToRegionConsent)return"Please agree to the above consent to create site";if(!t)return"Cannot create site"}}}},computed:{wantsToRestore(){return!!this.selectedFiles.database}},methods:{nextStep(t,e){return $(this,null,function*(){if(t.name=="Apps"){if(this.loadingPlans=!0,this.appsWithPlans=yield this.$call("press.api.marketplace.get_apps_with_plans",{apps:JSON.stringify(this.selectedApps),release_group:this.selectedGroup}),this.appsWithPlans&&this.appsWithPlans.length>0){this.addPlanSelectionStep(),this.selectedAppPlans={};for(let s of this.appsWithPlans)this.selectedAppPlans[s.name]=null}else this.validationMessage=null,this.removePlanSelectionStepIfExists();this.loadingPlans=!1}e()})},addPlanSelectionStep(){const t=this.steps.findIndex(s=>s.name=="Apps");this.steps.findIndex(s=>s.name=="Select App Plans")<0&&this.steps.splice(t+1,0,{name:"Select App Plans",validate:()=>{for(let s of Object.keys(this.selectedAppPlans))if(this.selectedAppPlans[s])this.validationMessage=null;else return this.validationMessage=`Please select a plan for ${s}`,!1;return!0}})},removePlanSelectionStepIfExists(){const t=this.steps.findIndex(e=>e.name=="Select App Plans");t>=0&&this.steps.splice(t,1)}}},ht={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-5 py-2.5"},ft={class:"mb-2 text-center"},bt={key:0,class:"text-base text-gray-700"},_t={class:"font-medium"},kt={key:0},yt={class:"mt-4"},vt={key:0,class:"my-6 w-full"},xt={class:"flex items-center justify-between"};function wt(t,e,s,h,n,a){const f=me,m=T("Hostname"),g=T("Apps"),k=Y,r=T("Restore"),c=T("Plans"),D=I,ee=H,A=q,te=z,se=N;return i(),o("div",null,[l("header",ht,[u(f,{items:[{label:"Sites",route:{name:"Sites"}},{label:"New",route:{name:"NewSite"}}]})]),u(se,null,{default:b(()=>[l("div",ft,[e[12]||(e[12]=l("h1",{class:"text-2xl font-bold"},"Create a new site",-1)),n.benchTitle?(i(),o("p",bt,[e[11]||(e[11]=w(" Site will be created on bench ")),l("span",_t,_(n.benchTitle),1)])):d("",!0)]),u(te,{steps:n.steps},{default:b(({active:v,next:L,previous:ne,hasPrevious:U,hasNext:B})=>[e[17]||(e[17]=l("div",{class:"mt-8"},null,-1)),y(u(m,{modelValue:n.subdomain,"onUpdate:modelValue":e[0]||(e[0]=p=>n.subdomain=p),onError:e[1]||(e[1]=p=>n.subdomainValid=!p)},null,8,["modelValue"]),[[x,v.name==="Hostname"]]),y(u(g,{privateBench:n.privateBench,bench:n.benchName,selectedApps:n.selectedApps,"onUpdate:selectedApps":e[2]||(e[2]=p=>n.selectedApps=p),selectedGroup:n.selectedGroup,"onUpdate:selectedGroup":e[3]||(e[3]=p=>n.selectedGroup=p),selectedRegion:n.selectedRegion,"onUpdate:selectedRegion":e[4]||(e[4]=p=>n.selectedRegion=p),shareDetailsConsent:n.shareDetailsConsent,"onUpdate:shareDetailsConsent":e[5]||(e[5]=p=>n.shareDetailsConsent=p)},null,8,["privateBench","bench","selectedApps","selectedGroup","selectedRegion","shareDetailsConsent"]),[[x,v.name==="Apps"]]),v.name==="Select App Plans"?(i(),o("div",kt,[(i(!0),o(C,null,F(t.appsWithPlans,p=>(i(),P(k,{key:p.name,app:p.name,group:n.selectedGroup,editable:!1,class:"mb-9",onChange:le=>n.selectedAppPlans[p.name]=le.name},null,8,["app","group","onChange"]))),128))])):d("",!0),y(u(r,{selectedFiles:n.selectedFiles,"onUpdate:selectedFiles":e[6]||(e[6]=p=>n.selectedFiles=p),skipFailingPatches:n.skipFailingPatches,"onUpdate:skipFailingPatches":e[7]||(e[7]=p=>n.skipFailingPatches=p)},null,8,["selectedFiles","skipFailingPatches"]),[[x,v.name=="Restore"]]),y(u(c,{selectedPlan:n.selectedPlan,"onUpdate:selectedPlan":e[8]||(e[8]=p=>n.selectedPlan=p),bench:s.bench,benchTeam:n.benchTeam},null,8,["selectedPlan","bench","benchTeam"]),[[x,v.name==="Plan"]]),u(D,{message:n.validationMessage},null,8,["message"]),l("div",yt,[B?d("",!0):(i(),o("div",vt,[u(ee,{type:"checkbox",modelValue:n.agreedToRegionConsent,"onUpdate:modelValue":e[9]||(e[9]=p=>n.agreedToRegionConsent=p),label:"I agree that the laws of the region selected by me shall stand applicable to me and Easytouch."},null,8,["modelValue"])])),u(D,{class:"mb-4",message:t.$resources.newSite.error},null,8,["message"]),l("div",xt,[y(u(A,{onClick:ne},{default:b(()=>e[13]||(e[13]=[w(" Back ")])),_:2},1032,["onClick"]),[[x,U]]),y(u(A,{class:V(["ml-auto",{"mt-2":U}]),variant:"solid",onClick:p=>a.nextStep(v,L),loading:n.loadingPlans,loadingText:"Loading"},{default:b(()=>e[14]||(e[14]=[w(" Next ")])),_:2},1032,["onClick","class","loading"]),[[x,(v.name!=="Restore"||a.wantsToRestore)&&B]]),y(u(A,{class:"ml-auto",variant:"solid",onClick:p=>a.nextStep(v,L)},{default:b(()=>e[15]||(e[15]=[w(" Skip ")])),_:2},1032,["onClick"]),[[x,!a.wantsToRestore&&v.name==="Restore"&&B]]),y(u(A,{class:V(["ml-auto",{"mt-2":U}]),variant:"solid",onClick:e[10]||(e[10]=p=>t.$resources.newSite.submit()),loading:t.$resources.newSite.loading},{default:b(()=>e[16]||(e[16]=[w(" Create Site ")])),_:2},1032,["class","loading"]),[[x,!B]])])])]),_:1},8,["steps"])]),_:1})])}const Et=S(gt,[["render",wt]]);export{Et as default};
//# sourceMappingURL=NewSite-CHjCmEcW.js.map
