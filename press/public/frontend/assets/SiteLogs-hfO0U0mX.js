import{_ as a}from"./sparkle-Bm7NguED.js";import{x as l,ao as p,r as d,h as m,o as u,a2 as o,aI as c}from"./main-Dpl-JOF2.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},t=new Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="7e7d94a4-a63c-4965-ad10-6c419e3d2d6b",e._sentryDebugIdIdentifier="sentry-dbid-7e7d94a4-a63c-4965-ad10-6c419e3d2d6b")}catch(r){}})();{var s=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};s._sentryModuleMetadata=s._sentryModuleMetadata||{},s._sentryModuleMetadata[new Error().stack]=Object.assign({},s._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const g={name:"SiteLogs",props:{name:{type:String,required:!0},type:{type:String,required:!1}},components:{ObjectList:p},resources:{logs(){return{url:"press.api.site.logs",params:{name:this.name},auto:!0,initialData:[],cache:["ObjectList","press.api.site.logs",this.name]}}},computed:{logs(){const e=["frappe","scheduler","database","pdf","wkhtmltopdf","ipython"];return this.type&&!e.includes(this.type)?this.$resources.logs.data.filter(t=>!e.includes(t.name.split(".")[0])):this.$resources.logs.data.filter(t=>t.name.split(".")[0]===this.type)},logsOptions(){return this.type?{data:()=>this.logs,route(e){return{name:"Site Log",params:{logName:e.name}}},columns:[{label:"Name",fieldname:"name"},{label:"Size",fieldname:"size",class:"text-gray-600",format(e){return`${e} kB`}},{label:"Modified On",fieldname:"modified",format(e){return e?c(e,"lll"):""}}],actions:()=>[{slots:{prefix:()=>o(a)},label:"View in Log Browser",onClick:()=>{this.$router.push({name:"Log Browser",params:{mode:"site",docName:this.name}})}},{label:"Refresh",icon:"refresh-ccw",loading:this.$resources.logs.loading,onClick:()=>this.$resources.logs.reload()}]}:{data:()=>[{title:"Scheduler Logs",route:{name:"Site Logs",params:{name:this.name,type:"scheduler"}}},{title:"Database Logs",route:{name:"Site Logs",params:{name:this.name,type:"database"}}},{title:"Frappe Logs",route:{name:"Site Logs",params:{name:this.name,type:"frappe"}}},{title:"PDF Logs",route:{name:"Site Logs",params:{name:this.name,type:"pdf"}}},{title:"IPython Logs",route:{name:"Site Logs",params:{name:this.name,type:"ipython"}}},{title:"Wkhtmltopdf Logs",route:{name:"Site Logs",params:{name:this.name,type:"wkhtmltopdf"}}},{title:"Other Logs",route:{name:"Site Logs",params:{name:this.name,type:"other"}}}],columns:[{label:"Title",fieldname:"title",width:.3},{label:"",fieldname:"action",type:"Button",align:"right",Button:({row:e})=>({label:"View",type:"primary",iconRight:"arrow-right",onClick:()=>{this.$router.push(e.route)}})}],actions:()=>[{slots:{prefix:()=>o(a)},label:"View in Log Browser",onClick:()=>{this.$router.push({name:"Log Browser",params:{mode:"site",docName:this.name}})}}]}}}};function f(e,t,r,h,y,n){const i=d("ObjectList");return u(),m(i,{class:"p-5",options:n.logsOptions},null,8,["options"])}const w=l(g,[["render",f]]);export{w as default};
//# sourceMappingURL=SiteLogs-hfO0U0mX.js.map
