import{x as v,h as f,o as u,w as h,j as a,q as D,A as r,a8 as w,y as C,B as k,a9 as E,aA as x,av as B}from"./main-Dpl-JOF2.js";(function(){try{var s=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},e=new Error().stack;e&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[e]="ce88faf8-587b-4718-9c1d-5c9bb8c82142",s._sentryDebugIdIdentifier="sentry-dbid-ce88faf8-587b-4718-9c1d-5c9bb8c82142")}catch(o){}})();{var d=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};d._sentryModuleMetadata=d._sentryModuleMetadata||{},d._sentryModuleMetadata[new Error().stack]=Object.assign({},d._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const I={name:"DependencyEditorDialog",props:{group:{required:!0,type:Object},dependency:{required:!0,type:Object}},data(){return{error:"",showDialog:!0,customVersion:"",useCustomVersion:!1,selectedDependencyVersion:null,groupDocResource:B("Release Group",this.group.name)}},mounted(){this.dependency.is_custom?(this.useCustomVersion=!0,this.customVersion=this.dependency.version):this.selectedDependencyVersion=this.dependency.version},computed:{dependencyOptions(){var e;const s=new Set((e=this.$resources.dependencyVersions.data)!=null?e:[]);return this.dependency.is_custom||s.add(this.dependency.version),Array.from(s).sort().map(o=>({label:o,value:o}))},version(){return this.useCustomVersion?this.customVersion:this.selectedDependencyVersion}},resources:{dependencyVersions(){return{type:"list",doctype:"Bench Dependency Version",fields:["version"],filters:{parenttype:"Bench Dependency",parent:this.dependency.dependency,supported_frappe_version:this.group.version},transform(s){return s.map(e=>e.version)},orderBy:"version asc",pageLength:1e3,auto:!0}}},methods:{setErrorIfCannotUpdate(){if(!this.version){const s=this.useCustomVersion?"enter":"select";return this.error=`Please ${s} a version`,!0}if(this.dependency.version===this.version){const s=this.useCustomVersion?"Entered":"selected";return this.error=`${s} version is same as the previous version`,!0}return this.error="",!1},updateDependency(){this.setErrorIfCannotUpdate()||this.groupDocResource.updateDependency.submit({dependency_name:this.dependency.name,version:this.version,is_custom:this.useCustomVersion},{onSuccess:()=>{this.$emit("success"),this.showDialog=!1}})}}},U={class:"space-y-4"},R={key:0},O={class:"flex items-center gap-2"},P={class:"no-underline",target:"_blank",href:"https://easytouch.cloud/docs/benches/editing-bench-dependency-version#setting-a-custom-version"};function j(s,e,o,A,n,l){var p,m;const c=w,_=k,V=C,g=E,b=x;return u(),f(b,{options:{title:`Edit ${o.dependency.title}`,actions:[{label:"Update",variant:"solid",loading:(m=(p=n.groupDocResource)==null?void 0:p.updateDependency)==null?void 0:m.loading,onClick:l.updateDependency}]},modelValue:n.showDialog,"onUpdate:modelValue":e[3]||(e[3]=i=>n.showDialog=i)},{"body-content":h(()=>{var i,y;return[a("div",U,[n.useCustomVersion?(u(),D("div",R,[r(c,{type:"data",label:`Custom ${o.dependency.title}`,placeholder:"Please enter a custom version",description:"Please ensure entered version of this dependency exists before setting it",modelValue:n.customVersion,"onUpdate:modelValue":e[0]||(e[0]=t=>n.customVersion=t)},null,8,["label","modelValue"])])):(u(),f(c,{key:1,type:"select",disabled:n.useCustomVersion,label:o.dependency.title,placeholder:"Please select a version",options:l.dependencyOptions,modelValue:n.selectedDependencyVersion,"onUpdate:modelValue":e[1]||(e[1]=t=>n.selectedDependencyVersion=t)},null,8,["disabled","label","options","modelValue"])),a("div",O,[r(c,{type:"checkbox",label:"Use Custom Version",modelValue:n.useCustomVersion,"onUpdate:modelValue":e[2]||(e[2]=t=>n.useCustomVersion=t)},null,8,["modelValue"]),r(V,{text:"View documentation"},{default:h(()=>[a("a",P,[r(_,{name:"help-circle",class:"h-3 w-3 text-gray-700"})])]),_:1})]),r(g,{message:((y=(i=n.groupDocResource)==null?void 0:i.updateDependency)==null?void 0:y.error)||n.error},null,8,["message"])])]}),_:1},8,["options","modelValue"])}const M=v(I,[["render",j]]);export{M as default};
//# sourceMappingURL=DependencyEditorDialog-ZP2t1lFT.js.map
