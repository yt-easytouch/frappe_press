import y from"./CardWithDetails-8Q6clK2F.js";import{x as b,h as l,o as t,w as g,j as i,q as n,u as L,A as f,X as N,Y as $,t as u,aV as C,F as k,v,r as p,n as I}from"./main-Dpl-JOF2.js";import{_ as V}from"./ListItem-CkkFcC1t.js";import{_ as w}from"./CardDetails-BY8v0wfH.js";import"./Card-BCzTSeNK.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},o=new Error().stack;o&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[o]="ac1d2de1-077c-4963-a8d7-b2ccc941ce60",e._sentryDebugIdIdentifier="sentry-dbid-ac1d2de1-077c-4963-a8d7-b2ccc941ce60")}catch(s){}})();{var m=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};m._sentryModuleMetadata=m._sentryModuleMetadata||{},m._sentryModuleMetadata[new Error().stack]=Object.assign({},m._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const E={name:"BenchLogsDetail",props:["bench","instanceName","logName"],components:{CardDetails:w},inject:["viewportWidth"],resources:{log(){var e;return{url:"press.api.bench.log",params:{name:(e=this.bench)==null?void 0:e.name,bench:this.instanceName,log:this.logName},auto:!!this.logName}}},computed:{log(){return this.$resources.log.data&&this.$resources.log.data[this.logName]},logLines(){return this.log&&this.logName?this.log.split(`
`).slice(-4096):[]}}},W={class:"px-6 py-5"},j={key:0,class:"flex items-center"},z={class:"text-lg font-medium"},A={class:""},F={key:1},M={key:1,class:"text-base text-gray-600"},S={key:0,class:"flex-auto overflow-auto px-6 font-mono text-xs"},q={class:"overflow-x-auto"};function K(e,o,s,D,x,a){const c=N,_=w;return t(),l(_,{showDetails:a.log},{default:g(()=>[i("div",W,[a.log!=null?(t(),n("div",j,[f(c,{class:"mr-3 md:hidden",onClick:o[0]||(o[0]=d=>e.$router.back()),icon:"chevron-left"}),i("h4",z,[$(u(s.logName)+" ",1),i("span",A,"("+u(a.logLines.length)+" lines)",1)])])):(t(),n("div",F,[e.$resources.log.loading?(t(),l(c,{key:0,loading:!0,"loading-text":"Loading..."})):(t(),n("span",M,u(s.logName?"Invalid Log":"No log selected"),1))]))]),a.log?(t(),n("div",S,[i("div",{class:"mb-6 rounded-md bg-gray-100 px-2 py-2.5",style:C({width:a.viewportWidth<768?"calc(100vw - 6rem)":""})},[i("div",q,[(t(!0),n(k,null,v(a.logLines,(d,h)=>(t(),n("pre",{key:h},u(d),1))),128))])],4)])):L("",!0)]),_:1},8,["showDetails"])}const O=b(E,[["render",K]]),P={name:"BenchLogs",props:["bench","instanceName","logName"],components:{CardWithDetails:y,BenchLogsDetail:O},resources:{logs(){var e;return{url:"press.api.bench.logs",params:{name:(e=this.bench)==null?void 0:e.name,bench:this.instanceName},auto:!0}}}},T={key:0},X={key:1},Y={key:1,class:"text-base text-gray-600"};function H(e,o,s,D,x,a){const c=V,_=p("router-link"),d=N,h=p("BenchLogsDetail"),B=y;return t(),l(B,{title:"Logs",subtitle:`Available logs for ${s.instanceName}`,showDetails:s.logName},{details:g(()=>[f(h,{bench:s.bench,instanceName:s.instanceName,logName:s.logName},null,8,["bench","instanceName","logName"])]),default:g(()=>[e.$resources.logs.data&&e.$resources.logs.data.length?(t(),n("div",T,[(t(!0),n(k,null,v(e.$resources.logs.data,r=>(t(),l(_,{class:I(["block cursor-pointer rounded-md px-2.5",s.logName===r.name?"bg-gray-100":"hover:bg-gray-50"]),key:r.name,to:`/groups/${s.bench.name}/logs/${s.instanceName}/${r.name}`},{default:g(()=>[f(c,{title:r.name,description:`${e.formatDate(r.modified)+`
`+r.size} kB`},null,8,["title","description"]),o[0]||(o[0]=i("div",{class:"border-b"},null,-1))]),_:2},1032,["class","to"]))),128))])):(t(),n("div",X,[e.$resources.logs.loading?(t(),l(d,{key:0,loading:!0,"loading-text":"Loading..."})):(t(),n("span",Y,"No logs"))]))]),_:1},8,["subtitle","showDetails"])}const G=b(P,[["render",H]]);export{G as default};
//# sourceMappingURL=BenchLogs-AGcxZkwI.js.map
