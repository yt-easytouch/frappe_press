import h from"./CardWithDetails-8Q6clK2F.js";import{_ as I}from"./ListItem-CkkFcC1t.js";import{x as S,r as p,h as u,o as n,w as a,j as i,q as c,u as k,t as x,A as d,a5 as y,ae as H,F as A,v as C,n as L}from"./main-Dpl-JOF2.js";import{_ as v}from"./CardDetails-BY8v0wfH.js";import{I as B}from"./InfoSection-u7K-4CgM.js";import"./Card-BCzTSeNK.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},r=new Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="dd140a4c-9cbf-48e9-aa88-977890fbc4fb",e._sentryDebugIdIdentifier="sentry-dbid-dd140a4c-9cbf-48e9-aa88-977890fbc4fb")}catch(s){}})();{var l=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};l._sentryModuleMetadata=l._sentryModuleMetadata||{},l._sentryModuleMetadata[new Error().stack]=Object.assign({},l._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const j={name:"SSHSessionActivity",props:["showDetails","logId","server"],components:{CardDetails:v,InfoSection:B},inject:["viewportWidth"],resources:{SSHActivity(){var e;return{url:"press.api.security.fetch_ssh_session_activity",params:{server:(e=this.server)==null?void 0:e.name,filename:this.logId},auto:!0}}},computed:{SSHActivity(){return this.$resources.SSHActivity.data}},methods:{getLabel(e){return`User: ${e}`},getColor(e){return e==="root"?"red":"green"}}},N={class:"px-6 py-5"},$={key:0,class:"flex items-center justify-between"},z={class:"text-lg font-medium"},E={class:"justify-end"},O={key:1},T={key:1,class:"text-center text-base text-gray-600"},V={key:0,class:"flex-auto overflow-auto px-6"};function W(e,r,s,b,w,t){const _=y,m=H,f=p("InfoSection"),g=v;return n(),u(g,{showDetails:s.showDetails},{default:a(()=>[i("div",N,[s.showDetails?(n(),c("div",$,[i("div",null,[i("h4",z," Session: "+x(t.SSHActivity.session_id),1)]),i("div",E,[d(_,{class:"pointer-events-none",variant:"subtle",size:"lg",label:t.getLabel(t.SSHActivity.session_user),theme:t.getColor(t.SSHActivity.session_user)},null,8,["label","theme"])])])):(n(),c("div",O,[e.loading?(n(),u(m,{key:0})):(n(),c("span",T," No item selected "))]))]),s.showDetails?(n(),c("div",V,[d(f,{sectionName:"Activity",sectionData:t.SSHActivity.content,defaultOpen:!0},null,8,["sectionData"])])):k("",!0)]),_:1},8,["showDetails"])}const F=S(j,[["render",W]]),K={name:"SSHSession",props:["server","logId"],components:{CardWithDetails:h,SSHSessionActivity:F},resources:{sshLogs(){var e;return{url:"press.api.security.fetch_ssh_session_logs",params:{server:(e=this.server)==null?void 0:e.name},auto:!0}}},computed:{sshLogs(){return this.$resources.sshLogs.data}},methods:{getTitle(e){return`SSH Session: ${e.session_id}`},getDescription(e){return`Created On: ${e.created_at} <br> Size: ${e.size} Kb`},updateRoute(e){return`/security/${this.server.name}/ssh_session_logs/${e}`},getLabel(e){return`User: ${e}`},getColor(e){return e==="root"?"red":"green"}}};function M(e,r,s,b,w,t){const _=y,m=I,f=p("router-link"),g=p("SSHSessionActivity"),D=h;return n(),u(D,{title:"Server SSH Session Logs",subtitle:"Log of commands executed in session"},{details:a(()=>[d(g,{showDetails:s.logId,logId:s.logId,server:s.server},null,8,["showDetails","logId","server"])]),default:a(()=>[i("div",null,[(n(!0),c(A,null,C(e.$resources.sshLogs.data,o=>(n(),u(f,{class:L(["block cursor-pointer rounded-md px-2.5",s.logId===o.name?"bg-gray-100":"hover:bg-gray-50"]),key:o.name,to:t.updateRoute(o.name)},{default:a(()=>[d(m,{title:t.getTitle(o),description:t.getDescription(o)},{actions:a(()=>[d(_,{label:t.getLabel(o.user),theme:t.getColor(o.user)},null,8,["label","theme"])]),_:2},1032,["title","description"]),r[0]||(r[0]=i("div",{class:"border-b"},null,-1))]),_:2},1032,["class","to"]))),128))])]),_:1})}const X=S(K,[["render",M]]);export{X as default};
//# sourceMappingURL=SSHSession-BmeZ1zyh.js.map
