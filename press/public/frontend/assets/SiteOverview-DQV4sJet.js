var E=(t,e,s)=>new Promise((D,o)=>{var n=_=>{try{y(s.next(_))}catch(h){o(h)}},f=_=>{try{y(s.throw(_))}catch(h){o(h)}},y=_=>_.done?D(_.value):Promise.resolve(_.value).then(n,f);y((s=s.apply(t,e)).next())});import{x as k,z,r as N,h as g,u,o as a,w as l,q as d,A as r,X as A,j as i,Y as p,t as m,F as C,v as $,y as I,D as Y,a4 as H,b3 as K,b4 as W,a8 as R,ag as L,ah as O,a9 as T,aA as V,aK as X,bp as J,B as Q,a5 as Z,C as G}from"./main-Dpl-JOF2.js";import{_ as P}from"./Card-BCzTSeNK.js";import{_ as B}from"./ProgressArc-E4zT-R3H.js";import{P as F}from"./PlanIcon-xHfeoGnX.js";import{_ as ee}from"./SitePlansTable-BtPUM3i9.js";import{_ as M}from"./ListItem-CkkFcC1t.js";import{n as U}from"./toast-Dk0nDfLL.js";import{_ as j}from"./LineChart-BDXlcfBY.js";import{D as te}from"./datetime-PXpIdgFA.js";import"./tailwind.theme-XeumNAwU.js";(function(){try{var t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="e4581f71-6965-447d-a158-a9a448ef2403",t._sentryDebugIdIdentifier="sentry-dbid-e4581f71-6965-447d-a158-a9a448ef2403")}catch(s){}})();{var x=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};x._sentryModuleMetadata=x._sentryModuleMetadata||{},x._sentryModuleMetadata[new Error().stack]=Object.assign({},x._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const se={name:"SiteOverviewPlan",props:["site","plan"],components:{SitePlansTable:ee,ProgressArc:B,SitePlansDialog:z(()=>Y(()=>import("./SitePlansDialog-CT5IPxxz.js"),__vite__mapDeps([0,1,2,3,4,5]))),PlanIcon:F},data(){return{showChangePlanDialog:!1,selectedPlan:null,validationMessage:null}},watch:{selectedPlan(t){return E(this,null,function*(){if(t)try{let e=yield this.$call("validate_plan_change",{current_plan:this.plan.current_plan,new_plan:t,currency:this.$account.team.currency});this.validationMessage=e}catch(e){this.validationMessage=null}})}},resources:{plans(){var t;return{url:"press.api.site.get_plans",params:{name:(t=this.site)==null?void 0:t.name},initialData:[]}}},methods:{plan_title(t){let e=this.$account.team.country=="India",s=e?"₹":"$",D=e?"price_inr":"price_usd",o=t.current_plan[D];return o>0?`${s}${o}`:t.current_plan.plan_title},belowCurrentUsage(t){return this.plan.total_storage_usage>t.max_storage_usage||this.plan.total_database_usage>t.max_database_usage},getCurrentFormattedUsage(){let t=e=>this.formatBytes(e,0,2);return[{label:"CPU",value:`${this.plan.total_cpu_usage_hours} hours`},{label:"Database",value:t(this.plan.total_database_usage)},{label:"Storage",value:t(this.plan.total_storage_usage)}]}},computed:{permissions(){return{changePlan:this.$account.hasPermission(this.site.name,"press.api.site.change_plan")}},canChangePlan(){return this.site.can_change_plan},plans(){let t=this.$resources.plans.data.map(e=>(this.belowCurrentUsage(e)&&(e.disabled=!0),this.site.status==="Suspended"||this.plan.current_plan.name===e.name&&(e.disabled=!0),e));return this.site.status==="Suspended"&&(t=t.filter(e=>!e.disabled)),t},usage(){let t=e=>this.formatBytes(e,2,2);return!this.plan.current_plan||this.site.status==="Suspended"?this.getCurrentFormattedUsage():[{label:"CPU",value:this.plan.current_plan.dedicated_server_plan?`${this.plan.total_cpu_usage_hours} ${this.$plural(this.plan.current_plan.cpu_time_per_day,"hour","hours")}`:`${this.plan.total_cpu_usage_hours} / ${this.plan.current_plan.cpu_time_per_day} ${this.$plural(this.plan.current_plan.cpu_time_per_day,"hour","hours")}`,percentage:this.plan.total_cpu_usage_hours/this.plan.current_plan.cpu_time_per_day*100},{label:"Database",value:this.plan.current_plan.dedicated_server_plan?t(this.plan.total_database_usage):`${t(this.plan.total_database_usage)} / ${t(this.plan.current_plan.max_database_usage)}`,percentage:this.plan.total_database_usage/this.plan.current_plan.max_database_usage*100},{label:"Storage",value:this.plan.current_plan.dedicated_server_plan?t(this.plan.total_storage_usage):`${t(this.plan.total_storage_usage)} / ${t(this.plan.current_plan.max_storage_usage)}`,percentage:this.plan.total_storage_usage/this.plan.current_plan.max_storage_usage*100}]}}},ae={key:0,class:"flex items-center justify-center py-20"},ie={key:1},ne={key:0,class:"flex items-center rounded-lg bg-gray-50 p-5"},oe={class:"ml-4"},re={class:"text-4xl font-semibold text-gray-900"},le={key:0,class:"text-lg"},de={key:0,class:"text-base text-gray-700"},ue={key:1,class:"flex rounded-lg bg-gray-50 p-5"},ce={key:2,class:"mt-4 grid grid-cols-3 gap-12"},me={class:"mt-2 text-base font-medium text-gray-900"},pe={class:"mt-1 text-xs text-gray-600"},_e={key:3,class:"ml-2 mt-4 grid grid-cols-3 gap-12"},ge={class:"text-base font-medium text-gray-900"},fe={class:"mt-1 text-xs text-gray-600"};function he(t,e,s,D,o,n){const f=A,y=I,_=F,h=B,w=N("SitePlansDialog"),v=P;return s.site.status!="Inactive"?(a(),g(v,{key:0,title:"Plan",subtitle:s.site.status=="Suspended"?"Set a plan to activate your suspended site":"Upgrade or downgrade your plan based on your usage"},{actions:l(()=>[r(y,{text:n.permissions.changePlan?"Change Plan":"You don't have enough permissions to perform this action"},{default:l(()=>[["Active","Suspended"].includes(s.site.status)&&n.canChangePlan?(a(),g(f,{key:0,disabled:!n.permissions.changePlan,onClick:e[0]||(e[0]=()=>{o.showChangePlanDialog=!0,!n.plans.length&&t.$resources.plans.fetch()})},{default:l(()=>[p(m(s.site.status=="Suspended"?"Set Plan":"Change Plan"),1)]),_:1},8,["disabled"])):u("",!0)]),_:1},8,["text"])]),default:l(()=>[s.plan?(a(),d("div",ie,[s.plan.current_plan?(a(),d("div",ne,[r(_),i("div",oe,[i("h4",re,[p(m(t.$planTitle(s.plan.current_plan))+" ",1),s.plan.current_plan.price_usd>0?(a(),d("span",le," /mo ")):u("",!0)]),s.plan.current_plan.dedicated_server_plan?(a(),d("p",de,m(s.plan.current_plan.cpu_time_per_day)+" "+m(t.$plural(s.plan.current_plan.cpu_time_per_day,"hour","hours"))+" of CPU / day ",1)):u("",!0)])])):(a(),d("div",ue,e[3]||(e[3]=[i("div",null,[i("h4",{class:"font-semibold text-gray-600"},"No Plan Set")],-1)]))),s.plan.current_plan?(a(),d("div",ce,[(a(!0),d(C,null,$(n.usage,b=>(a(),d("div",{key:b.label},[r(h,{percentage:s.plan.current_plan.dedicated_server_plan?33:b.percentage},null,8,["percentage"]),i("div",me,m(b.label)+" "+m(isNaN(b.percentage)||s.plan.current_plan.dedicated_server_plan?"":`(${Number(b.percentage).toFixed(1)}%)`),1),i("div",pe,m(b.value),1)]))),128))])):(a(),d("div",_e,[(a(!0),d(C,null,$(n.usage,b=>(a(),d("div",{key:b.label},[i("div",ge,m(b.label),1),i("div",fe,m(b.value),1)]))),128))])),r(w,{site:s.site,plan:s.plan,modelValue:o.showChangePlanDialog,"onUpdate:modelValue":e[1]||(e[1]=b=>o.showChangePlanDialog=b),onPlanChange:e[2]||(e[2]=()=>t.$emit("plan-change"))},null,8,["site","plan","modelValue"])])):(a(),d("div",ae,[r(f,{loading:!0,"loading-text":"Loading"})]))]),_:1},8,["subtitle"])):u("",!0)}const ye=k(se,[["render",he]]),ve={name:"SiteDrop",props:["site"],data(){return{dialogOpen:!1,confirmSiteName:null,forceDrop:!1}},resources:{dropSite(){var t;return{url:"press.api.site.archive",params:{name:(t=this.site)==null?void 0:t.name,force:this.site.archive_failed==!0?!0:this.forceDrop},onSuccess(){this.dialogOpen=!1,this.$router.push("/sites")},validate(){var e;if(((e=this.site)==null?void 0:e.name)!==this.confirmSiteName)return"Please type the site name to confirm"}}}},methods:{showDialog(){this.dialogOpen=!0}}},be={class:"shrink-0"},De={class:"mt-4 text-base"},we={class:"font-semibold"},ke={class:"mt-4"};function Se(t,e,s,D,o,n){const f=R,y=T,_=V;return a(),d("div",be,[H(t.$slots,"default",K(W({showDialog:n.showDialog}))),r(_,{options:{title:"Drop Site",actions:[{label:s.site.archive_failed?"Force Drop Site":"Drop Site",variant:"solid",theme:"red",loading:t.$resources.dropSite.loading,onClick:()=>t.$resources.dropSite.submit()}]},modelValue:o.dialogOpen,"onUpdate:modelValue":e[2]||(e[2]=h=>o.dialogOpen=h)},{"body-content":l(()=>[e[5]||(e[5]=i("p",{class:"text-base"}," Are you sure you want to drop your site? The site will be archived and all of its files and Offsite Backups will be deleted. This action cannot be undone. ",-1)),i("p",De,[e[3]||(e[3]=p(" Please type ")),i("span",we,m(s.site.name),1),e[4]||(e[4]=p(" to confirm. "))]),r(f,{class:"mt-4 w-full",modelValue:o.confirmSiteName,"onUpdate:modelValue":e[0]||(e[0]=h=>o.confirmSiteName=h)},null,8,["modelValue"]),i("div",ke,[L(r(f,{id:"auto-update-checkbox",modelValue:o.forceDrop,"onUpdate:modelValue":e[1]||(e[1]=h=>o.forceDrop=h),type:"checkbox",label:"Force"},null,8,["modelValue"]),[[O,!s.site.archive_failed]])]),r(y,{class:"mt-2",message:t.$resources.dropSite.error},null,8,["message"])]),_:1},8,["options","modelValue"])])}const xe=k(ve,[["render",Se]]),Ce={name:"SiteOverviewInfo",props:["site","info"],components:{SiteDrop:xe},data(){return{loading:!1}},mounted(){const t=document.getElementById("auto-update-checkbox");t&&(t.checked=this.info.auto_updates_enabled)},methods:{changeAutoUpdateSettings(t){return t.preventDefault(),this.loading=!0,this.$call("press.api.site.change_auto_update",{name:this.site.name,auto_update_enabled:t.target.checked}).then(()=>{setTimeout(()=>window.location.reload(),1e3)})},onDeactivateClick(){this.$confirm({title:"Deactivate Site",message:`
					Are you sure you want to deactivate this site? The site will go in an inactive state.
					It won't be accessible and background jobs won't run. You will <strong>still be charged</strong> for it.
				`,actionLabel:"Deactivate",actionColor:"red",action:()=>this.deactivate()})},onActivateClick(){this.$confirm({title:"Activate Site",message:`Are you sure you want to activate this site?
				<br><br><strong>Note: Use this as last resort if site is broken and inaccessible</strong>`,actionLabel:"Activate",action:()=>this.activate()})},deactivate(){return this.$call("press.api.site.deactivate",{name:this.site.name}).then(()=>{setTimeout(()=>window.location.reload(),1e3)})},activate(){this.$call("press.api.site.activate",{name:this.site.name}),U({title:"Site activated successfully!",message:"You can now access your site",icon:"check",color:"green"}),setTimeout(()=>window.location.reload(),1e3)}},computed:{permissions(){return{drop:this.$account.hasPermission(this.site.name,"press.api.site.archive"),deactivate:this.$account.hasPermission(this.site.name,"press.api.site.deactivate")}}}},$e={class:"divide-y"},Ae={class:"flex items-center py-3"},Pe={class:"ml-3 flex flex-1 items-center justify-between"},Ne={class:"text-base font-medium text-gray-900"},Re={class:"text-right"},Ve={class:"text-base font-medium text-gray-900"},Ue={key:0,class:"text-right"},Ee={class:"text-base font-medium text-gray-900"};function Ie(t,e,s,D,o,n){const f=X,y=J,_=M,h=A,w=I,v=N("SiteDrop"),b=P;return a(),g(b,{title:"Site Info",subtitle:"General information about your site"},{default:l(()=>[i("div",$e,[i("div",Ae,[s.info.owner?(a(),g(f,{key:0,image:s.info.owner.user_image,label:s.info.owner.first_name},null,8,["image","label"])):u("",!0),i("div",Pe,[i("div",null,[e[1]||(e[1]=i("div",{class:"text-base text-gray-600"},"Owned By",-1)),i("div",Ne,m(s.info.owner.first_name)+" "+m(s.info.owner.last_name),1)]),i("div",Re,[e[2]||(e[2]=i("div",{class:"text-base text-gray-600"},"Created On",-1)),i("div",Ve,m(t.formatDate(s.info.created_on,"DATE_FULL")),1)]),s.info.last_deployed?(a(),d("div",Ue,[e[3]||(e[3]=i("div",{class:"text-base text-gray-600"},"Last Deployed",-1)),i("div",Ee,m(t.$date(s.info.last_deployed).toLocaleString({month:"long",day:"numeric"})),1)])):u("",!0)])]),s.site.group&&s.site.status!=="Pending"?(a(),g(_,{key:0,title:"Auto Update Site",class:"overflow-x-hidden",description:"Automatically schedule site updates whenever available"},{actions:l(()=>[o.loading?(a(),g(y,{key:0,class:"h-4 w-4"})):u("",!0),L(i("input",{id:"auto-update-checkbox",onInput:e[0]||(e[0]=(...S)=>n.changeAutoUpdateSettings&&n.changeAutoUpdateSettings(...S)),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,544),[[O,!o.loading]])]),_:1})):u("",!0),s.site.status=="Active"?(a(),g(_,{key:1,title:"Deactivate Site",description:"The site will go inactive and won't be publicly accessible"},{actions:l(()=>[r(w,{text:n.permissions.deactivate?"Deactivate Site":"You don't have enough permissions to perform this action"},{default:l(()=>[r(h,{onClick:n.onDeactivateClick,class:"shrink-0",disabled:!n.permissions.deactivate},{default:l(()=>e[4]||(e[4]=[p(" Deactivate Site ")])),_:1},8,["onClick","disabled"])]),_:1},8,["text"])]),_:1})):u("",!0),["Inactive","Broken"].includes(s.site.status)?(a(),g(_,{key:2,title:"Activate Site",description:"The site will become active and will be accessible"},{actions:l(()=>[r(h,{onClick:n.onActivateClick,class:"shrink-0",variant:s.site.status==="Broken"?"solid":"subtle"},{default:l(()=>e[5]||(e[5]=[p(" Activate Site ")])),_:1},8,["onClick","variant"])]),_:1})):u("",!0),s.site.status!=="Pending"?(a(),g(_,{key:3,title:"Drop Site",description:"Once you drop site your site, there is no going back"},{actions:l(()=>[r(v,{site:s.site},{default:l(({showDialog:S})=>[r(w,{text:n.permissions.drop?"Drop Site":"You don't have enough permissions to perform this action"},{default:l(()=>[r(h,{theme:"red",disabled:!n.permissions.drop,onClick:S},{default:l(()=>e[6]||(e[6]=[p(" Drop Site ")])),_:2},1032,["disabled","onClick"])]),_:2},1032,["text"])]),_:1},8,["site"])]),_:1})):u("",!0)])]),_:1})}const Le=k(Ce,[["render",Ie]]),Oe={name:"SiteOverviewDomains",props:["site"],data(){return{showDialog:!1,newDomain:null}},resources:{domains(){var t;return{url:"press.api.site.domains",params:{name:(t=this.site)==null?void 0:t.name},auto:!0}},checkDNS:{url:"press.api.site.check_dns",validate(){if(!this.newDomain)return"Domain cannot be empty"}},addDomain:{url:"press.api.site.add_domain",onSuccess(){this.$resources.checkDNS.reset(),this.$resources.domains.reload(),this.showDialog=!1}},removeDomain:{url:"press.api.site.remove_domain",onSuccess(){this.$resources.domains.reload()}},retryAddDomain:{url:"press.api.site.retry_add_domain",onSuccess(){this.$resources.domains.fetch()}},setHostName:{url:"press.api.site.set_host_name",onSuccess(){this.$resources.domains.reload()}},setupRedirect:{url:"press.api.site.set_redirect",onSuccess(){this.$resources.domains.reload()}},removeRedirect:{url:"press.api.site.unset_redirect",onSuccess(){this.$resources.domains.reload()}}},computed:{domains(){return this.$resources.domains},dnsVerified(){var t;return(t=this.dnsResult)==null?void 0:t.matched},dnsResult(){return this.$resources.checkDNS.data},primaryDomain(){return this.$resources.domains.data.filter(t=>t.primary)[0].domain}},watch:{newDomain(){this.$resources.checkDNS.reset()}},methods:{actionItems(t){return[{label:"Remove",onClick:()=>this.confirmRemoveDomain(t.domain)},{label:"Set Primary",condition:()=>t.status=="Active"&&!t.primary,onClick:()=>this.confirmSetPrimary(t.domain)},{label:"Redirect to Primary",condition:()=>t.status=="Active"&&!t.primary&&!t.redirect_to_primary,onClick:()=>this.confirmSetupRedirect(t.domain)},{label:"Remove Redirect",condition:()=>t.status=="Active"&&!t.primary&&t.redirect_to_primary,onClick:()=>this.confirmRemoveRedirect(t.domain)}].filter(e=>e.condition?e.condition():!0)},confirmRemoveDomain(t){this.$confirm({title:"Remove Domain",message:`Are you sure you want to remove the domain <b>${t}</b>?`,actionLabel:"Remove",actionColor:"red",action:e=>{e(),this.$resources.removeDomain.submit({name:this.site.name,domain:t})}})},confirmSetPrimary(t){let e=!1;this.$resources.domains.data.forEach(s=>{s.redirect_to_primary&&(e=!0)}),e?U({title:"Please Remove all Active Redirects",color:"red",icon:"x"}):this.$confirm({title:"Set as Primary Domain",message:`Setting as primary will make <b>${t}</b> the primary URL for your site. Do you want to continue?`,actionLabel:"Set Primary",action:s=>{s(),this.$resources.setHostName.submit({name:this.site.name,domain:t})}})},confirmSetupRedirect(t){this.$confirm({title:"Redirect to Primary Domain",message:`Redirect to Primary will redirect <b>${t}</b> to <b>${this.primaryDomain}</b>. Do you want to continue?`,actionLabel:"Redirect to Primary",action:e=>{e(),this.$resources.setupRedirect.submit({name:this.site.name,domain:t})}})},confirmRemoveRedirect(t){this.$confirm({title:"Remove Redirect",message:`Remove Redirect will remove previously set up redirect from <b>${t}</b> to <b>${this.primaryDomain}</b>. Do you want to continue?`,actionLabel:"Remove Redirect",action:e=>{e(),this.$resources.removeRedirect.submit({name:this.site.name,domain:t})}})}}},Te={key:0,class:"divide-y"},Be={class:"py-2"},Fe={class:"flex items-center"},Me={class:"flex w-2/3 text-base font-medium"},je=["href"],qe={key:1},ze={key:2,class:"flex"},Ye=["href"],He={class:"ml-auto flex items-center space-x-2"},Ke={class:"space-y-4"},We={key:0,class:"space-y-2 text-base"},Xe={class:"px-2"},Je={class:"font-semibold text-gray-700"},Qe={class:"font-semibold text-gray-700"},Ze={class:"px-2"},Ge={class:"font-semibold text-gray-700"},et={class:"font-semibold text-gray-700"},tt={key:1,class:"space-y-2"},st={class:"text-base"},at={class:"font-semibold text-gray-700"},it={key:0,class:"space-y-2"},nt={class:"flex flex-row items-center justify-between rounded-lg border-2 p-2"},ot={class:"select-all overflow-hidden font-mono text-sm text-gray-800"},rt={key:1,class:"space-y-2"},lt={class:"flex flex-row items-center justify-between rounded-lg border-2 p-2"},dt={class:"select-all overflow-hidden font-mono text-sm text-gray-800"},ut={key:2,class:"flex text-base"},ct={key:3,class:"flex text-base"};function mt(t,e,s,D,o,n){const f=A,y=Q,_=Z,h=G,w=T,v=R,b=V,S=P;return a(),g(S,{title:"Domains",subtitle:n.domains.data&&n.domains.data.length?"Domains pointing to your site":"No domains pointing to your site"},{actions:l(()=>[r(f,{onClick:e[0]||(e[0]=c=>o.showDialog=!0),disabled:s.site.status==="Suspended"},{default:l(()=>e[5]||(e[5]=[p(" Add Domain ")])),_:1},8,["disabled"])]),default:l(()=>[n.domains.data?(a(),d("div",Te,[(a(!0),d(C,null,$(n.domains.data,c=>(a(),d("div",{key:c.name},[i("div",Be,[i("div",Fe,[i("div",Me,[c.status==="Active"?(a(),d("a",{key:0,class:"text-blue-500",href:"https://"+c.domain,target:"_blank"},m(c.domain),9,je)):(a(),d("span",qe,m(c.domain),1)),c.redirect_to_primary==1&&c.status=="Active"?(a(),d("div",ze,[r(y,{name:"arrow-right",class:"mx-1 w-4"}),c.status==="Active"?(a(),d("a",{key:0,class:"text-blue-500",href:"https://"+c.domain,target:"_blank"},m(s.site.host_name),9,Ye)):u("",!0)])):u("",!0)]),i("div",He,[c.status=="Active"&&c.primary?(a(),g(_,{key:0,label:"Primary"})):c.status!="Active"?(a(),g(_,{key:1,label:c.status},null,8,["label"])):u("",!0),c.status=="Broken"&&c.retry_count<=5?(a(),g(f,{key:2,loading:t.$resources.retryAddDomain.loading,onClick:q=>t.$resources.retryAddDomain.submit({name:s.site.name,domain:c.domain})},{default:l(()=>e[6]||(e[6]=[p(" Retry ")])),_:2},1032,["loading","onClick"])):u("",!0),t.$resources.removeDomain.loading?(a(),g(f,{key:3,loading:!0},{default:l(()=>e[7]||(e[7]=[p(" Removing domain ")])),_:1})):(a(),g(h,{key:4,options:n.actionItems(c)},{default:l(({open:q})=>[r(f,{icon:"more-horizontal"})]),_:2},1032,["options"]))])]),c.status=="Broken"?(a(),g(w,{key:0,error:"We encountered an error while adding the domain."})):u("",!0),r(w,{message:t.$resources.removeDomain.error},null,8,["message"]),r(w,{message:t.$resources.setHostName.error},null,8,["message"])])]))),128))])):u("",!0),r(b,{modelValue:o.showDialog,"onUpdate:modelValue":e[4]||(e[4]=c=>o.showDialog=c),options:{title:"Add Domain"}},{"body-content":l(()=>[i("div",Ke,[e[21]||(e[21]=i("p",{class:"text-base"}," To add a custom domain, you must already own it. If you don't have one, buy it and come back here. ",-1)),r(v,{placeholder:"www.example.com",modelValue:o.newDomain,"onUpdate:modelValue":e[1]||(e[1]=c=>o.newDomain=c),readonly:n.dnsVerified},null,8,["modelValue","readonly"]),o.newDomain&&!n.dnsVerified?(a(),d("div",We,[e[14]||(e[14]=i("p",null,"Create one of the following DNS records",-1)),i("p",Xe,[e[8]||(e[8]=i("span",{class:"font-semibold text-gray-700"},"CNAME",-1)),e[9]||(e[9]=p(" record from ")),i("span",Je,m(o.newDomain),1),e[10]||(e[10]=p(" to ")),i("span",Qe,m(s.site.name),1)]),i("p",Ze,[e[11]||(e[11]=i("span",{class:"font-semibold text-gray-700"},"A",-1)),e[12]||(e[12]=p(" record from ")),i("span",Ge,m(o.newDomain),1),e[13]||(e[13]=p(" to ")),i("span",et,m(s.site.ip),1)])])):u("",!0),n.dnsResult&&!n.dnsResult.matched?(a(),d("div",tt,[i("p",st,[e[15]||(e[15]=p(" Received following DNS query responses for ")),i("span",at,m(o.newDomain),1),e[16]||(e[16]=p(". "))]),o.newDomain&&n.dnsResult.CNAME&&!n.dnsResult.CNAME.matched?(a(),d("div",it,[e[17]||(e[17]=i("p",{class:"text-base"},[i("span",{class:"font-semibold text-gray-700"},"CNAME")],-1)),i("div",nt,[i("p",ot,m(n.dnsResult.CNAME.answer),1)])])):u("",!0),o.newDomain&&n.dnsResult.A&&!n.dnsResult.A.matched?(a(),d("div",rt,[e[18]||(e[18]=i("p",{class:"text-base"},[i("span",{class:"font-semibold text-gray-700"},"A")],-1)),i("div",lt,[i("p",dt,m(n.dnsResult.A.answer),1)])])):u("",!0)])):u("",!0),n.dnsVerified===!1?(a(),d("p",ut,[r(y,{name:"x",class:"mr-2 h-5 w-5 rounded-full bg-red-100 p-1 text-red-500"}),e[19]||(e[19]=p(" DNS Verification Failed "))])):u("",!0),n.dnsVerified===!0?(a(),d("p",ct,[r(y,{name:"check",class:"mr-2 h-5 w-5 rounded-full bg-green-100 p-1 text-green-500"}),e[20]||(e[20]=p(" DNS records successfully verified. Click on Add Domain. "))])):u("",!0),r(w,{message:t.$resources.checkDNS.error},null,8,["message"]),r(w,{message:t.$resources.addDomain.error},null,8,["message"]),r(w,{message:t.$resources.retryAddDomain.error},null,8,["message"])])]),actions:l(()=>[n.dnsVerified?u("",!0):(a(),g(f,{key:0,class:"mt-2 w-full",variant:"solid",loading:t.$resources.checkDNS.loading,onClick:e[2]||(e[2]=c=>t.$resources.checkDNS.submit({name:s.site.name,domain:o.newDomain}))},{default:l(()=>e[22]||(e[22]=[p(" Verify DNS ")])),_:1},8,["loading"])),n.dnsVerified?(a(),g(f,{key:1,class:"mt-2 w-full",variant:"solid",loading:t.$resources.addDomain.loading,onClick:e[3]||(e[3]=c=>t.$resources.addDomain.submit({name:s.site.name,domain:o.newDomain}))},{default:l(()=>e[23]||(e[23]=[p(" Add Domain ")])),_:1},8,["loading"])):u("",!0)]),_:1},8,["modelValue"])]),_:1},8,["subtitle"])}const pt=k(Oe,[["render",mt]]),_t={name:"CPUUsage",props:["site"],components:{LineChart:j},resources:{requestCounter(){var e;let t=te.local().zoneName;return{url:"press.api.analytics.daily_usage",params:{name:(e=this.site)==null?void 0:e.name,timezone:t},auto:!0}}},computed:{dailyUsageData(){var s;let t=(s=this.$resources.requestCounter.data)==null?void 0:s.data;if(!t)return;let e=this.$resources.requestCounter.data.plan_limit;return{datasets:[t.map(D=>[+new Date(D.date),D.value/1e6])],markLine:{data:[{name:"Daily Compute Limit",yAxis:e,label:{formatter:"{b}: {c} seconds",position:"middle"},lineStyle:{color:"#f5222d"}}],symbol:["none","none"]}}}}};function gt(t,e,s,D,o,n){const f=N("router-link"),y=j;return a(),g(y,{type:"time",title:"Daily Usage",key:n.dailyUsageData,data:n.dailyUsageData,unit:"seconds",chartTheme:[t.$theme.colors.purple[500]],loading:t.$resources.requestCounter.loading,error:t.$resources.requestCounter.error},{actions:l(()=>[r(f,{class:"text-base text-gray-600 hover:text-gray-700",to:`/sites/${s.site.name}/analytics`},{default:l(()=>e[0]||(e[0]=[p(" All analytics → ")])),_:1},8,["to"])]),_:1},8,["data","chartTheme","loading","error"])}const ft=k(_t,[["render",gt]]),ht={name:"SiteActivity",props:["site"],resources:{activities(){var t;return{type:"list",doctype:"Site Activity",url:"press.api.site.activities",filters:{site:(t=this.site)==null?void 0:t.name},start:0,auto:!0,pageLength:20}},changeNotifyEmail(){var t,e;return{url:"press.api.site.change_notify_email",params:{name:(t=this.site)==null?void 0:t.name,email:(e=this.site)==null?void 0:e.notify_email},onSuccess(){this.showChangeNotifyEmailDialog=!1,U({title:"Notify Email Changed!",icon:"check",color:"green"})}}}},computed:{activities(){return this.$resources.activities}},data(){return{showChangeNotifyEmailDialog:!1}},methods:{getDescription(t){let e="";return t.reason&&(e+=`Reason: ${t.reason}
`),e+=this.formatDate(t.creation),e}}},yt={class:"divide-y"},vt={key:0,class:"my-2"};function bt(t,e,s,D,o,n){const f=M,y=A,_=R,h=V,w=P;return a(),g(w,{class:"h-full max-h-96 min-h-full",title:"Site Activity",subtitle:"Log of activities performed on your site"},{actions:l(()=>[r(y,{onClick:e[1]||(e[1]=v=>o.showChangeNotifyEmailDialog=!0)},{default:l(()=>e[5]||(e[5]=[p(" Change Notify Email ")])),_:1})]),default:l(()=>[i("div",yt,[(a(!0),d(C,null,$(n.activities.data,v=>(a(),g(f,{key:v.creation,title:`${v.action} by ${v.owner}`,description:n.getDescription(v)},null,8,["title","description"]))),128))]),t.$resources.activities.hasNextPage?(a(),d("div",vt,[r(y,{loading:t.$resources.activities.list.loading,loadingText:"Fetching...",onClick:e[0]||(e[0]=v=>t.$resources.activities.next())},{default:l(()=>e[4]||(e[4]=[p(" Load more ")])),_:1},8,["loading"])])):u("",!0),r(h,{options:{title:"Change Notify Email",actions:[{label:"Save Changes",variant:"solid",loading:t.$resources.changeNotifyEmail.loading,onClick:()=>t.$resources.changeNotifyEmail.submit()}]},modelValue:o.showChangeNotifyEmailDialog,"onUpdate:modelValue":e[3]||(e[3]=v=>o.showChangeNotifyEmailDialog=v)},{"body-content":l(()=>[r(_,{modelValue:s.site.notify_email,"onUpdate:modelValue":e[2]||(e[2]=v=>s.site.notify_email=v)},null,8,["modelValue"])]),_:1},8,["options","modelValue"])]),_:1})}const Dt=k(ht,[["render",bt]]),wt={key:0,class:"space-y-5"},kt={key:0,class:"grid grid-cols-1 gap-5 sm:grid-cols-2"},It={__name:"SiteOverview",props:{site:Object,plan:Object},setup(t){return(e,s)=>t.site?(a(),d("div",wt,[t.site?(a(),d("div",kt,[r(ft,{site:t.site},null,8,["site"]),r(ye,{site:t.site,plan:t.plan,onPlanChange:s[0]||(s[0]=D=>e.$emit("plan-change"))},null,8,["site","plan"]),r(Le,{site:t.site,info:t.site.info},null,8,["site","info"]),r(pt,{site:t.site},null,8,["site"]),r(Dt,{site:t.site},null,8,["site"])])):u("",!0)])):u("",!0)}};export{It as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/SitePlansDialog-CT5IPxxz.js","assets/main-Dpl-JOF2.js","assets/main-B0ZLDivw.css","assets/SitePlansTable-BtPUM3i9.js","assets/Alert-COV4XS8q.js","assets/toast-Dk0nDfLL.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=SiteOverview-DQV4sJet.js.map
