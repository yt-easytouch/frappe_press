var K=Object.defineProperty;var I=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var z=(t,s,r)=>s in t?K(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,j=(t,s)=>{for(var r in s||(s={}))X.call(s,r)&&z(t,r,s[r]);if(I)for(var r of I(s))H.call(s,r)&&z(t,r,s[r]);return t};import{x as V,bg as Q,r as k,q as i,o as n,j as a,h as p,A as l,w as u,Y as o,bI as Z,bJ as G,an as ee,u as c,X as te,F as h,t as _,y as P,v as $,k as E,$ as se,a5 as ae,aO as re,av as ne,a2 as f,aF as L,z as N,V as ie,aa as le,D as O}from"./main-Dpl-JOF2.js";import{_ as q}from"./Progress.vue_vue_type_script_setup_true_lang-DREy3z5o.js";import{_ as oe}from"./badge-check-DXteVc7W.js";import{_ as R}from"./info-BXlf1Uhm.js";import{_ as M}from"./LineChart-BDXlcfBY.js";import"./Card-BCzTSeNK.js";import"./datetime-PXpIdgFA.js";import"./tailwind.theme-XeumNAwU.js";(function(){try{var t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},s=new Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="e4dd41f6-6d5e-4929-b673-9b26b79a8435",t._sentryDebugIdIdentifier="sentry-dbid-e4dd41f6-6d5e-4929-b673-9b26b79a8435")}catch(r){}})();{var w=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};w._sentryModuleMetadata=w._sentryModuleMetadata||{},w._sentryModuleMetadata[new Error().stack]=Object.assign({},w._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const de={name:"CPUUsage",props:["site"],components:{LineChart:M},resources:{requestCounter(){let t=Q.tz.guess();return{url:"press.api.analytics.daily_usage",params:{name:this.site,timezone:t},auto:!0}}},computed:{dailyUsageData(){var r;let t=(r=this.$resources.requestCounter.data)==null?void 0:r.data;if(!t)return;let s=this.$resources.requestCounter.data.plan_limit;return{datasets:[t.map(g=>[+new Date(g.date),g.value/1e6])],markLine:{data:[{name:"Daily Compute Limit",yAxis:s,label:{formatter:"{b}: {c} seconds",position:"middle"},lineStyle:{color:"#f5222d"}}],symbol:["none","none"]}}}}},ce={class:"rounded-md border"},ue={class:"flex h-12 items-center justify-between border-b px-5"};function _e(t,s,r,g,b,e){const m=k("router-link"),y=M;return n(),i("div",ce,[a("div",ue,[s[1]||(s[1]=a("h2",{class:"text-lg font-medium text-gray-900"},"Daily Usage",-1)),l(m,{class:"text-base text-gray-600 hover:text-gray-700",to:{name:"Site Analytics"}},{default:u(()=>s[0]||(s[0]=[o(" All analytics → ")])),_:1})]),(n(),p(y,{title:"Daily Usage",type:"time",key:e.dailyUsageData,data:e.dailyUsageData,unit:"seconds",chartTheme:[t.$theme.colors.purple[500]],loading:t.$resources.requestCounter.loading,error:t.$resources.requestCounter.error,showCard:!1,class:"h-[15.55rem] p-2 pb-3"},null,8,["data","chartTheme","loading","error"]))])}const me=V(de,[["render",_e]]),ge={name:"SiteOverview",props:["site"],components:{SiteDailyUsage:me,Progress:q,AlertBanner:ee,DismissableBanner:G},data(){return{isSetupWizardComplete:!0}},mounted(){var t,s;((s=(t=this.$site)==null?void 0:t.doc)==null?void 0:s.status)==="Active"&&this.$site.isSetupWizardComplete.submit().then(r=>{this.isSetupWizardComplete=r})},methods:{showPlanChangeDialog(){let t=N(()=>O(()=>import("./ManageSitePlansDialog-CtmFAF_o.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])));L(f(t,{site:this.site}))},formatBytes(t){return this.$format.bytes(t,2,2)},loginAsAdmin(){this.$site.loginAsAdmin.submit({reason:""}).then(t=>window.open(t,"_blank"))},loginAsTeam(){var t;(t=this.$site.doc)!=null&&t.additional_system_user_created?this.$site.loginAsTeam.submit({reason:""}).then(s=>window.open(s,"_blank")):this.loginAsAdmin()},removeTag(t){ie.promise(this.$site.removeTag.submit({tag:t.tag_name}),{loading:"Removing tag...",success:`Tag ${t.tag_name} removed`,error:s=>le(s)})},showAddTagDialog(){const t=N(()=>O(()=>import("./TagsDialog-CQrOPzan.js"),__vite__mapDeps([12,1,2])));L(f(t,{doctype:"Site",docname:this.site}))},trialDays:Z},computed:{siteInformation(){var t,s,r,g,b,e,m,y,v,x;return[{label:"Owned by",value:(t=this.$site.doc)==null?void 0:t.owner_email},{label:"Created by",value:((s=this.$site.doc)==null?void 0:s.signup_by)||((r=this.$site.doc)==null?void 0:r.owner)},{label:"Created on",value:this.$format.date(((g=this.$site.doc)==null?void 0:g.signup_time)||((b=this.$site.doc)==null?void 0:b.creation))},{label:"Region",value:(e=this.$site.doc)==null?void 0:e.cluster.title,prefix:f("img",{src:(m=this.$site.doc)==null?void 0:m.cluster.image,alt:(y=this.$site.doc)==null?void 0:y.cluster.title,class:"h-4 w-4"})},{label:"Inbound IP",value:(v=this.$site.doc)==null?void 0:v.inbound_ip,suffix:f(P,{text:"Use this for adding A records for your site"},()=>f(R,{class:"h-4 w-4 text-gray-500"}))},{label:"Outbound IP",value:(x=this.$site.doc)==null?void 0:x.outbound_ip,suffix:f(P,{text:"Use this for whitelisting our server on a 3rd party service"},()=>f(R,{class:"h-4 w-4 text-gray-500"}))}]},currentPlan(){var s,r,g;if(!((r=(s=this.$site)==null?void 0:s.doc)!=null&&r.current_plan)||!((g=this.$team)!=null&&g.doc))return null;const t=this.$team.doc.currency;return j({price:t==="INR"?this.$site.doc.current_plan.price_inr:this.$site.doc.current_plan.price_usd,price_per_day:t==="INR"?this.$site.doc.current_plan.price_per_day_inr:this.$site.doc.current_plan.price_per_day_usd,currency:t==="INR"?"₹":"$"},this.$site.doc.current_plan)},currentUsage(){var t;return(t=this.$site.doc)==null?void 0:t.current_usage},$site(){return ne("Site",this.site)}}},pe={key:0,class:"grid grid-cols-1 items-start gap-5 lg:grid-cols-2"},he={class:"col-span-1 rounded-md border lg:col-span-2"},ye={class:"grid grid-cols-2 lg:grid-cols-4"},fe={class:"border-b border-r p-5 lg:border-b-0"},be={class:"flex h-full items-center justify-between"},ve={class:"mt-2 flex justify-between"},xe={class:"leading-4"},we={class:"flex items-center text-base text-gray-900"},ke={key:0},Ce={key:1},Pe={key:3,class:"ml-2 text-sm leading-3 text-gray-600"},De={class:"border-b p-5 lg:border-b-0 lg:border-r"},Ue={class:"mt-2"},Ae={class:"mt-2 flex justify-between"},Te={class:"text-sm text-gray-600"},Be={class:"border-r p-5"},Se={class:"mt-2"},Ie={class:"mt-2 flex justify-between"},ze={class:"text-sm text-gray-600"},je={class:"p-5"},$e={class:"flex min-h-[1.75rem] items-center justify-between text-base text-gray-700"},Ee={class:"mt-2"},Le={class:"mt-2 flex justify-between"},Ne={class:"text-sm text-gray-600"},Oe={class:"rounded-md border"},Re={class:"w-1/3 text-base text-gray-600"},Ve={class:"flex w-2/3 items-center space-x-2 text-base text-gray-900"},qe={key:0},Me={key:1},We={class:"col-span-1 flex items-center space-x-2 lg:col-span-2"},Fe=["onClick"];function Ye(t,s,r,g,b,e){var U,A,T,B,S;const m=te,y=k("AlertBanner"),v=k("DismissableBanner"),x=oe,W=P,C=q,F=k("SiteDailyUsage"),Y=se,D=ae,J=re;return(U=e.$site)!=null&&U.doc?(n(),i("div",pe,[b.isSetupWizardComplete?c("",!0):(n(),p(y,{key:0,class:"col-span-1 lg:col-span-2",title:`Please login and complete the setup wizard on your site. Analytics will be
			collected only after setup is complete.`},{default:u(()=>[l(m,{class:"ml-auto",variant:"outline",onClick:e.loginAsTeam,loading:e.$site.loginAsAdmin.loading},{default:u(()=>s[0]||(s[0]=[o(" Login ")])),_:1},8,["onClick","loading"])]),_:1})),(A=e.$site.doc.current_plan)!=null&&A.is_trial_plan?(n(),p(y,{key:1,class:"col-span-1 lg:col-span-2",title:"Upgrade to a paid plan to continue using your site after the trial period."},{default:u(()=>[l(m,{class:"ml-auto",variant:"outline",onClick:e.showPlanChangeDialog},{default:u(()=>s[1]||(s[1]=[o(" Upgrade ")])),_:1},8,["onClick"])]),_:1})):c("",!0),e.$site.doc.eol_versions.includes(e.$site.doc.version)?(n(),p(v,{key:2,class:"col-span-1 lg:col-span-2",title:"Your site is on an End of Life version. Upgrade to the latest version to get the latest features and security updates.",id:`${e.$site.name}-eol`},{default:u(()=>[l(m,{class:"ml-auto",variant:"outline",link:"https://easytouch.cloud/docs/sites/version-upgrade"},{default:u(()=>s[2]||(s[2]=[o(" Upgrade Now ")])),_:1})]),_:1},8,["id"])):e.$site.doc.current_plan&&!((T=e.$site.doc.current_plan)!=null&&T.private_benches)&&e.$site.doc.group_public&&!((B=e.$site.doc.current_plan)!=null&&B.is_trial_plan)?(n(),p(v,{key:3,class:"col-span-1 lg:col-span-2",title:"Your site is currently on a shared bench group. Upgrade plan to enjoy <a href='https://easytouch.cloud/shared-hosting#benches' class='underline' target='_blank'>more benefits</a>.",id:e.$site.name,type:"gray"},{default:u(()=>[l(m,{class:"ml-auto",variant:"outline",onClick:e.showPlanChangeDialog},{default:u(()=>s[3]||(s[3]=[o(" Upgrade Plan ")])),_:1},8,["onClick"])]),_:1},8,["id"])):c("",!0),a("div",he,[a("div",ye,[a("div",fe,[a("div",be,[a("div",null,[s[4]||(s[4]=a("div",{class:"text-base text-gray-700"},"Current Plan",-1)),a("div",ve,[a("div",null,[a("div",xe,[a("span",we,[e.$site.doc.trial_end_date?(n(),i(h,{key:0},[o(_(e.trialDays(e.$site.doc.trial_end_date)),1)],64)):e.currentPlan?(n(),i(h,{key:1},[o(_(t.$format.planTitle(e.currentPlan))+" ",1),e.currentPlan.price_inr&&t.$isMobile?(n(),i("span",ke," /mo ")):c("",!0),e.currentPlan.price_inr&&!t.$isMobile?(n(),i("span",Ce," /month ")):c("",!0)],64)):(n(),i(h,{key:2},[o(" No plan set ")],64)),e.currentPlan&&e.currentPlan.support_included&&!e.currentPlan.is_trial_plan?(n(),i("div",Pe,[l(W,{text:"Support included"},{default:u(()=>[l(x,{class:"h-4 w-4"})]),_:1})])):c("",!0)])])])])]),l(m,{onClick:e.showPlanChangeDialog},{default:u(()=>{var d;return[o(_((d=e.currentPlan)!=null&&d.is_trial_plan?"Upgrade":"Change"),1)]}),_:1},8,["onClick"])])]),a("div",De,[s[5]||(s[5]=a("div",{class:"flex items-center justify-between text-base text-gray-700"},[a("span",null,"Compute"),a("div",{class:"h-7"})],-1)),a("div",Ue,[l(C,{size:"md",value:e.currentPlan?e.currentUsage.cpu/e.currentPlan.cpu_time_per_day*100:0},null,8,["value"]),a("div",null,[a("div",Ae,[a("div",Te,[o(_(e.currentUsage.cpu)+" "+_(t.$format.plural(e.currentUsage.cpu,"hour","hours"))+" ",1),e.currentPlan&&!e.$site.doc.is_dedicated_server?(n(),i(h,{key:0},[o(" of "+_((S=e.currentPlan)==null?void 0:S.cpu_time_per_day)+" hours ",1)],64)):c("",!0)])])])])]),a("div",Be,[s[6]||(s[6]=a("div",{class:"flex items-center justify-between text-base text-gray-700"},[a("span",null,"Storage"),a("div",{class:"h-7"})],-1)),a("div",Se,[l(C,{size:"md",value:e.currentPlan?e.currentUsage.storage/e.currentPlan.max_storage_usage*100:0},null,8,["value"]),a("div",null,[a("div",Ie,[a("div",ze,[o(_(e.formatBytes(e.currentUsage.storage))+" ",1),e.currentPlan&&!e.$site.doc.is_dedicated_server?(n(),i(h,{key:0},[o(" of "+_(e.formatBytes(e.currentPlan.max_storage_usage)),1)],64)):c("",!0)])])])])]),a("div",je,[a("div",$e,[s[7]||(s[7]=a("span",null,"Database",-1)),(e.currentPlan?e.currentUsage.database/e.currentPlan.max_database_usage*100:0)>=80?(n(),p(m,{key:0,variant:"ghost",link:"https://easytouch.cloud/docs/faq/site#what-is-using-up-all-my-database-size",icon:"help-circle"})):c("",!0)]),a("div",Ee,[l(C,{size:"md",value:e.currentPlan?e.currentUsage.database/e.currentPlan.max_database_usage*100:0},null,8,["value"]),a("div",null,[a("div",Le,[a("div",Ne,[o(_(e.formatBytes(e.currentUsage.database))+" ",1),e.currentPlan&&!e.$site.doc.is_dedicated_server?(n(),i(h,{key:0},[o(" of "+_(e.formatBytes(e.currentPlan.max_database_usage)),1)],64)):c("",!0)])])])])])])]),a("div",Oe,[s[8]||(s[8]=a("div",{class:"h-12 border-b px-5 py-4"},[a("h2",{class:"text-lg font-medium text-gray-900"},"Site Information")],-1)),a("div",null,[(n(!0),i(h,null,$(e.siteInformation,d=>(n(),i("div",{key:d.label,class:"flex items-center px-5 py-3 last:pb-5 even:bg-gray-50/70"},[a("div",Re,_(d.label),1),a("div",Ve,[d.prefix?(n(),i("div",qe,[(n(),p(E(d.prefix)))])):c("",!0),a("span",null,_(d.value),1),d.suffix?(n(),i("div",Me,[(n(),p(E(d.suffix)))])):c("",!0)])]))),128))])]),l(F,{site:r.site},null,8,["site"]),a("div",We,[(n(!0),i(h,null,$(e.$site.doc.tags,d=>(n(),p(D,{key:d.tag,label:d.tag_name,size:"lg",class:"group"},{suffix:u(()=>[a("button",{onClick:Je=>e.removeTag(d),class:"ml-1 hidden transition group-hover:block"},[l(Y,{class:"mt-0.5 h-3 w-3"})],8,Fe)]),_:2},1032,["label"]))),128)),l(D,{variant:"outline",size:"lg",label:"Add Tag",class:"cursor-pointer",onClick:e.showAddTagDialog},{suffix:u(()=>[l(J,{class:"h-3 w-3"})]),_:1},8,["onClick"])])])):c("",!0)}const at=V(ge,[["render",Ye]]);export{at as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ManageSitePlansDialog-CtmFAF_o.js","assets/main-Dpl-JOF2.js","assets/main-B0ZLDivw.css","assets/badge-check-DXteVc7W.js","assets/Progress.vue_vue_type_script_setup_true_lang-DREy3z5o.js","assets/SitePlansCards-CxvpWJp2.js","assets/PlansCards-CiqqQthx.js","assets/CardForm-DBdGk3af.js","assets/stripe.esm-D4yu_pm0.js","assets/BillingDetails-D_ZOfa0J.js","assets/PrepaidCreditsForm-DIaFhUMJ.js","assets/StripeLogo-De_iztuU.js","assets/TagsDialog-CQrOPzan.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=SiteOverview-DibCxASP.js.map
