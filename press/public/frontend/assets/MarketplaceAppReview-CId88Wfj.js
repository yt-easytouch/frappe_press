import{x as g,q as d,o as n,j as a,h as l,u as f,A as p,w as r,F as _,v as y,ak as V,X as B,Y as v,aK as F,t as b,a8 as I,aA as L}from"./main-Dpl-JOF2.js";import h from"./CardWithDetails-8Q6clK2F.js";import{_ as k}from"./CardDetails-BY8v0wfH.js";import{_ as j}from"./ListItem-CkkFcC1t.js";import{n as T}from"./toast-Dk0nDfLL.js";import"./Card-BCzTSeNK.js";(function(){try{var s=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},e=new Error().stack;e&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[e]="b3d19fb6-14fb-4a2f-bf66-a042e314d9b3",s._sentryDebugIdIdentifier="sentry-dbid-b3d19fb6-14fb-4a2f-bf66-a042e314d9b3")}catch(o){}})();{var u=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};u._sentryModuleMetadata=u._sentryModuleMetadata||{},u._sentryModuleMetadata[new Error().stack]=Object.assign({},u._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const E={},q={class:"grid h-4 w-4 shrink-0 place-items-center rounded-full border border-gray-500 bg-gray-500"};function H(s,e){return n(),d("div",q,e[0]||(e[0]=[a("svg",{width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("path",{d:"M1.26562 3.86686L3.93229 6.53353L9.26562 1.2002",stroke:"#FBFBF8","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))}const K=g(E,[["render",H]]),U={name:"MarketplaceAppReviewStages",components:{CardWithDetails:h,CardDetails:k},props:["appName","app","reviewStages"],data(){return{showReplyDialog:!1,message:null}},methods:{getFormattedDateTime(s){return new Date(s).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}},resources:{startReview(){return{url:"press.api.marketplace.mark_app_ready_for_review",params:{name:this.appName},onSuccess(){window.location.reload()}}},communication(){return{url:"press.api.marketplace.communication",params:{name:this.appName}}},addReply(){return{url:"press.api.marketplace.add_reply",params:{name:this.appName,message:this.message},onSuccess(){this.showReplyDialog=!1,T({title:"Reply Queued",message:"Message reply is queued for sending",icon:"check",color:"green"})}}}},mounted(){this.$resources.communication.submit()},computed:{communication(){return this.$resources.communication.data}}},W={class:"h-full px-6 py-5"},O={class:"flex justify-between"},P={class:"mt-4 h-full overflow-auto py-5"},Q={class:"mb-4 overflow-auto rounded-lg bg-gray-50 p-4"},X={class:"flex justify-between"},Y={class:"flex pb-4"},z={class:"self-center text-lg font-semibold"},J={class:"text-base text-gray-600"},Z=["innerHTML"];function G(s,e,o,R,i,c){const m=V,D=K,x=j,w=B,C=F,N=k,$=h,M=I,A=L;return n(),d(_,null,[o.reviewStages?(n(),l($,{key:0,title:"Review Steps",subtitle:o.app.review_stage==="Not Started"?"Complete all the steps before submitting for a review":"App is sent for review"},{actions:r(()=>[o.app.status==="Draft"&&o.app.review_stage==="Not Started"?(n(),l(w,{key:0,disabled:o.reviewStages.some(t=>!t.completed),loading:s.$resources.startReview.isLoading,onClick:e[0]||(e[0]=t=>s.$resources.startReview.submit()),class:"py-5"},{default:r(()=>e[4]||(e[4]=[v(" Submit for Review ")])),_:1},8,["disabled","loading"])):f("",!0)]),details:r(()=>[p(N,null,{default:r(()=>[a("div",W,[a("div",O,[e[6]||(e[6]=a("div",null,[a("h2",{class:"text-xl font-semibold"},"Review Communication"),a("p",{class:"mt-1.5 text-base text-gray-600"}," Chat with the developer assigned for review ")],-1)),a("div",null,[p(w,{onClick:e[1]||(e[1]=t=>i.showReplyDialog=!0)},{default:r(()=>e[5]||(e[5]=[v(" Reply ")])),_:1})])]),a("div",P,[(n(!0),d(_,null,y(c.communication,t=>(n(),d("div",Q,[a("div",X,[a("div",Y,[p(C,{class:"mr-2",label:t.sender,image:t.user_image},null,8,["label","image"]),a("span",z,b(t.sender),1)]),a("span",J,b(c.getFormattedDateTime(t.communication_date)),1)]),a("div",{class:"text-base",innerHTML:t.content},null,8,Z)]))),256))])])]),_:1})]),default:r(()=>[(n(!0),d(_,null,y(o.reviewStages,t=>(n(),l(x,{key:t.step,title:t.step},{actions:r(()=>[t.completed?(n(),l(m,{key:0,class:"h-5 w-5"})):(n(),l(D,{key:1,class:"h-5 w-5"}))]),_:2},1032,["title"]))),128))]),_:1},8,["subtitle"])):f("",!0),p(A,{modelValue:i.showReplyDialog,"onUpdate:modelValue":e[3]||(e[3]=t=>i.showReplyDialog=t),options:{title:"Reply",actions:[{label:"Send",variant:"solid",onClick:()=>s.$resources.addReply.submit()}]}},{"body-content":r(()=>[p(M,{label:"Message",modelValue:i.message,"onUpdate:modelValue":e[2]||(e[2]=t=>i.message=t),type:"textarea",required:""},null,8,["modelValue"])]),_:1},8,["modelValue","options"])],64)}const S=g(U,[["render",G]]),ee={name:"MarketpalceAppReview",props:["appName","app"],components:{MarketplaceAppReviewStages:S},resources:{reviewStages(){return{url:"press.api.marketplace.review_steps",params:{name:this.appName},auto:!0}}}};function te(s,e,o,R,i,c){const m=S;return s.$resources.reviewStages?(n(),l(m,{key:0,appName:o.appName,app:o.app,reviewStages:s.$resources.reviewStages.data},null,8,["appName","app","reviewStages"])):f("",!0)}const le=g(ee,[["render",te]]);export{le as default};
//# sourceMappingURL=MarketplaceAppReview-CId88Wfj.js.map
