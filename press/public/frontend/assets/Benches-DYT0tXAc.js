import{x as j,z,q as o,o as s,j as d,A as r,w as c,X as P,h as i,u as m,B as U,a8 as R,F as g,v as y,a5 as H,y as q,t as w,C as K,a7 as X,n as J,ae as Q,aA as W,D as Y}from"./main-Dpl-JOF2.js";import Z from"./StripeCard-BRr8QCrN.js";import{_ as B,a as k,b as C,c as T}from"./TableHeader-DvqcS5cY.js";import{_ as G}from"./Breadcrumbs-yx7M4N4X.js";import"./StripeLogo-BRF2qIyd.js";import"./AddressForm-Cz0XUJgF.js";import"./Form-CIPLpg2e.js";import"./stripe.esm-D4yu_pm0.js";(function(){try{var t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="f7668272-41f7-409f-921a-c8680abebc9f",t._sentryDebugIdIdentifier="sentry-dbid-f7668272-41f7-409f-921a-c8680abebc9f")}catch(A){}})();{var p=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};p._sentryModuleMetadata=p._sentryModuleMetadata||{},p._sentryModuleMetadata[new Error().stack]=Object.assign({},p._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const ee={name:"BenchesScreen",data(){return{showAddCardDialog:!1,searchTerm:"",bench_status:"All",bench_tag:""}},pageMeta(){return{title:"Benches - Easytouch Cloud"}},components:{Table:T,TableHeader:C,TableRow:k,TableCell:B,StripeCard:z(()=>Y(()=>import("./StripeCard-BRr8QCrN.js"),__vite__mapDeps([0,1,2,3,4,5,6])))},resources:{paymentMethods:{url:"press.api.billing.get_payment_methods",auto:!0},allBenches(){return{url:"press.api.bench.all",params:{bench_filter:{status:this.bench_status,tag:this.bench_tag}},auto:!0,cache:["BenchList",this.bench_status,this.bench_tag,this.$account.team.name]}},benchTags:{url:"press.api.bench.bench_tags",auto:!0,initialData:[]}},computed:{benches(){if(!this.$resources.allBenches.data)return[];let t=this.$resources.allBenches.data.filter(e=>this.$account.hasPermission(e.name,"",!0));return this.searchTerm&&(t=t.filter(e=>e.title.toLowerCase().includes(this.searchTerm.toLowerCase()))),t.map(e=>({name:e.title,status:e.status,version:e.version,stats:{number_of_sites:e.number_of_sites,number_of_apps:e.number_of_apps},tags:e.tags,route:{name:"BenchSiteList",params:{benchName:e.name}}}))},benchStatusFilterOptions(){return[{label:"All",value:"All"},{label:"Active",value:"Active"},{label:"Awaiting Deploy",value:"Awaiting Deploy"}]},benchTagFilterOptions(){const t=[{label:"",value:""}];return this.$resources.benchTags.data?[...t,...this.$resources.benchTags.data.map(e=>({label:e,value:e}))]:t}},methods:{showBillingDialog(){this.$account.hasBillingInfo?this.$router.replace("/groups/new"):this.showAddCardDialog=!0},dropdownItems(t){return[{label:"New Site",onClick:()=>{this.$router.push({name:"NewBenchSite",params:{bench:t.route.params.benchName}})},condition:()=>t.status==="Active"},{label:"View Sites",onClick:()=>{this.$router.push({name:"BenchSiteList",params:{benchName:t.route.params.benchName}})}}].filter(e=>e.condition?e.condition():!0)}}},te={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-5 py-2.5"},se={class:"mx-5 mt-5"},ne={class:"flex"},ae={class:"flex w-full space-x-2 pb-4"},le={key:1,class:"hidden space-x-1 lg:flex"},oe={key:1},re={key:2,class:"hidden text-sm text-gray-600 md:block"},ie={key:3,class:"w-full text-right"},ce={class:"mt-8 flex items-center justify-center"},ue={key:1,class:"text-base text-gray-700"};function de(t,e,A,me,l,_){const v=P,$=G,D=U,h=R,S=C,b=H,V=q,x=K,N=B,I=k,F=Q,L=T,E=Z,O=W;return s(),o("div",null,[d("header",te,[r($,{items:[{label:"Benches",route:{name:"BenchesScreen"}}]},{actions:c(()=>[r(v,{variant:"solid","icon-left":"plus",label:"Create",class:"ml-2",onClick:_.showBillingDialog},null,8,["onClick"])]),_:1})]),d("div",se,[d("div",ne,[d("div",ae,[r(h,{label:"Search Benches",modelValue:l.searchTerm,"onUpdate:modelValue":e[0]||(e[0]=a=>l.searchTerm=a)},{prefix:c(()=>[r(D,{name:"search",class:"w-4 text-gray-600"})]),_:1},8,["modelValue"]),r(h,{label:"Status",class:"mr-8",type:"select",options:_.benchStatusFilterOptions,modelValue:l.bench_status,"onUpdate:modelValue":e[1]||(e[1]=a=>l.bench_status=a)},null,8,["options","modelValue"]),t.$resources.benchTags.data.length>0?(s(),i(h,{key:0,label:"Tag",class:"mr-8",type:"select",options:_.benchTagFilterOptions,modelValue:l.bench_tag,"onUpdate:modelValue":e[2]||(e[2]=a=>l.bench_tag=a)},null,8,["options","modelValue"])):m("",!0)]),e[6]||(e[6]=d("div",{class:"w-10"},null,-1))]),r(L,{columns:[{label:"Bench Name",name:"name",width:2},{label:"Status",name:"status"},{label:"Version",name:"version"},{label:"Tags",name:"tags"},{label:"Stats",name:"stats"},{label:"",name:"actions",width:.5}],rows:_.benches},{default:c(({rows:a,columns:M})=>[r(S,{class:"hidden lg:grid"}),(s(!0),o(g,null,y(a,n=>(s(),i(I,{key:n.name,row:n,class:"rounded"},{default:c(()=>[(s(!0),o(g,null,y(M,u=>(s(),i(N,null,{default:c(()=>[u.name==="status"?(s(),i(b,{key:0,label:n.status},null,8,["label"])):u.name==="tags"?(s(),o("div",le,[(s(!0),o(g,null,y(n.tags.slice(0,1),(f,_e)=>(s(),i(b,{theme:"blue",label:f},null,8,["label"]))),256)),n.tags.length>1?(s(),i(V,{key:0,text:n.tags.slice(1).join(", ")},{default:c(()=>[n.tags.length>1?(s(),i(b,{key:0,label:`+${n.tags.length-1}`},null,8,["label"])):m("",!0)]),_:2},1032,["text"])):m("",!0),n.tags.length==0?(s(),o("span",oe,"-")):m("",!0)])):u.name==="stats"?(s(),o("div",re,w(`${n.stats.number_of_sites} ${t.$plural(n.stats.number_of_sites,"Site","Sites")}`)+" Â· "+w(`${n.stats.number_of_apps} ${t.$plural(n.stats.number_of_apps,"App","Apps")}`),1)):u.name=="actions"?(s(),o("div",ie,[r(x,{onClick:e[3]||(e[3]=X(()=>{},["prevent"])),options:_.dropdownItems(n)},{default:c(({open:f})=>[r(v,{variant:f?"subtle":"ghost",class:"mr-2",icon:"more-horizontal"},null,8,["variant"])]),_:2},1032,["options"])])):(s(),o("span",{key:4,class:J({"hidden md:block":u.name==="version"})},w(n[u.name]||""),3))]),_:2},1024))),256))]),_:2},1032,["row"]))),128)),d("div",ce,[t.$resources.allBenches.loading&&!t.$resources.allBenches.data?(s(),i(F,{key:0})):t.$resources.allBenches.fetched&&a.length===0?(s(),o("div",ue," No Benches ")):m("",!0)])]),_:1},8,["rows"])]),r(O,{options:{title:"Add card to create new benches"},modelValue:l.showAddCardDialog,"onUpdate:modelValue":e[5]||(e[5]=a=>l.showAddCardDialog=a)},{"body-content":c(()=>[l.showAddCardDialog?(s(),i(E,{key:0,class:"mb-1",onComplete:e[4]||(e[4]=a=>{l.showAddCardDialog=!1,t.$resources.paymentMethods.reload()})})):m("",!0)]),_:1},8,["modelValue"])])}const Be=j(ee,[["render",de]]);export{Be as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/StripeCard-BRr8QCrN.js","assets/StripeLogo-BRF2qIyd.js","assets/main-Dpl-JOF2.js","assets/main-B0ZLDivw.css","assets/AddressForm-Cz0XUJgF.js","assets/Form-CIPLpg2e.js","assets/stripe.esm-D4yu_pm0.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=Benches-DYT0tXAc.js.map
