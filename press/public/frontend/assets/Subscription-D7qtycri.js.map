{"version":3,"mappings":"+nCAEEA,EAAA,CACA,mCACA,oBACA,0CAJD,SAAAC,EAAAC,EAAAC,EAAA,mCAOEC,EAAA,QACA,sBACA,0NCiHHC,EAAA,CACC,oBACA,2BAEC,SAAAC,UAEA,UAAAC,EACA,gBAAAC,EACA,WAAAC,EAAA,IACCC,EAAA,0FAIF,OACC,qBAEC,0CAKD,eACC,OACC,kCACA,wBAGA,QACA,UAAAC,EAAA,CACCA,GAAA,MAAAA,EAAA,eAAAA,GAAA,MAAAA,EAAA,SACC,kBAAAA,EAAA,WACCC,KAAA,OAAAD,EAAA,cAGH,IAGF,4BACC,OACC,2CACA,QACC,2EAIA,0CAEA,qCACD,EAEF,CACD,CACD,EA9KMX,EAAA,kCAGEa,EAAA,eACCC,EAAA,qDAIJ,+CAWG,cAMIC,EAAA,qDAQL,kDAMG,wBAxCVC,EAAA,YAoDYC,EAAA,4CAEGC,EAAA,8CAeHC,GAAA,qCAWDC,GAAA,qCAsBF,mFArGR,OAAAC,EAAA,EAAAC,EAAA,MAAAtB,EAAA,WADD,QAAAuB,EAAA,sBAGGpB,EAAA,MAAAA,EAAA,IAAAC,EAAA,kEACAA,EAAA,MAAAS,EAAA,yBAMQW,EAAAtB,EAAA,qCAAAsB,EAAA,gBAFPH,EAAA,EAAAC,EAAA,MAAAG,EAAA,eAAAC,EAAAxB,EAAA,qBAAAyB,EAAAzB,EAAA,2CAAAyB,EAAA,qBARJC,EAAA,SAAAC,EAAA,IAAAH,EAAAI,EAAA,0DAmBiB,aAAc,QAAA5B,EAAA,mFAC5BmB,IAAAC,EAAA,MAAAS,EAAA,2BAGG,8FACC,QAAA5B,EAAA,KAAAA,EAAA,GAAA6B,GAAAF,EAAA,qIASDT,IAAAC,EAAA,OAAAW,EAAA,mCAI8B9B,EAAA,KAAAA,EAAA,GAAAC,EAAA,2CArCpCwB,EAAA,2BAwCKP,IAAAC,EAAA,MAAAY,EAAA,0IAGoBtB,IAAAkB,EAAA,qGASlB1B,EAAA,MAAAa,EAAA,eAEEb,EAAA,OAAAc,EAAAQ,EAAAd,EAAA,eAGAT,EAAA,KAAAA,EAAA,GAAAC,EAAA,2GAEDiB,EAAA,EAAAc,EAAAC,EAAA,SA3DR,QAAAb,EAAA,IAAApB,EAAA,KAAAA,EAAA,IAAA0B,EAAA,4BAiEoBC,EAAA,cAAAlB,kBACX,mBAlETgB,EAAA,SAqEOxB,EAAA,MAAAe,GAAA,CACCf,EAAA,oBAAAsB,EAAAd,EAAA,sBAAAc,EAAAd,EAAA,+CAIAT,EAAA,KAAAA,EAAA,GAAAC,EAAA,iCACAA,EAAA,YAAAsB,EAAAxB,EAAA,YAAAU,EAAA,yCA3ER,KAAAI,CAAA,UAgFMZ,EAAA,MAAAgB,GAAA,CAESlB,EAAA,4CAOcmC,EAAAP,EAAA,2BAAAO,EAAA,QAAgCnC,EAAA,0DAIrD,gBACC,QAAAA,EAAA,uCACA,QAAAC,EAAA,KAAAA,EAAA,GAAA6B,GAAA9B,EAAA,2CA/FT,QAAAqB,EAAA,IAAApB,EAAA,KAAAA,EAAA,IAAA0B,EAAA,yCAAAD,EAAA,uBAmFQ,gBACC,QAAAzB,EAAA,KAAAA,EAAA,GAAA6B,GAAAF,EAAA,iBApFT,QAAAP,EAAA,IAAApB,EAAA,KAAAA,EAAA,IAAA0B,EAAA,yBAAAD,EAAA,2BAsGIP,IAAAC,EAAA,MAAAgB,GAAA,CACCnC,EAAA,MAAAA,EAAA,IAAAC,EAAA,iHAMC,aACC,WAAAD,EAAA,KAAAA,EAAA,GAAA6B,GAAA9B,EAAA,8CA9GP0B,EAAA,UAAAA,EAAA","names":["_hoisted_1","_sfc_render","_ctx","_cache","_createElementVNode","_sfc_main","LoginBox","TextInput","CheckCircleIcon","defineAsyncComponent","__vitePreload","data","plan","_hoisted_2","_hoisted_3","_hoisted_6","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_openBlock","_createElementBlock","_withCtx","_a","_hoisted_4","_toDisplayString","_b","_createCommentVNode","_createTextVNode","$data","_hoisted_5","$event","_hoisted_7","_hoisted_8","_createBlock","_component_Badge","_c","_hoisted_14"],"sources":["../../../../dashboard/src/components/icons/CheckCircleIcon.vue","../../../../dashboard/src/views/checkout/Subscription.vue"],"sourcesContent":["<template>\n\t<svg\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 20 20\"\n\t\tfill=\"currentColor\"\n\t\taria-hidden=\"true\"\n\t>\n\t\t<path\n\t\t\tfill-rule=\"evenodd\"\n\t\t\td=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z\"\n\t\t\tclip-rule=\"evenodd\"\n\t\t></path>\n\t</svg>\n</template>\n","<template>\n\t<div class=\"min-h-screen bg-gray-50\">\n\t\t<LoginBox>\n\t\t\t<h1 class=\"text-base text-gray-600\">Manage Subscription</h1>\n\t\t\t<div class=\"mt-4\">\n\t\t\t\t<div class=\"text-xl font-medium text-gray-900\">\n\t\t\t\t\t{{ site }}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"mt-1 text-base text-gray-700\"\n\t\t\t\t\tv-if=\"$resources.subscription.data?.trial_end_date\"\n\t\t\t\t>\n\t\t\t\t\tTrial ends\n\t\t\t\t\t{{\n\t\t\t\t\t\ttrialEndsInDaysText($resources.subscription.data?.trial_end_date)\n\t\t\t\t\t}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{{ success ? 'You have subscribed to the plan' : '' }}\n\t\t\t<ErrorMessage class=\"mt-2\" :message=\"$resources.subscription.error\" />\n\t\t\t<div class=\"mt-8\" v-if=\"$resources.subscription.data\">\n\t\t\t\t<div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"flex w-full items-center justify-between rounded-sm bg-gray-100 p-2 hover:bg-gray-200\"\n\t\t\t\t\t\t@click=\"currentStep = 1\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"text-sm font-medium text-gray-700\">\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t$resources.subscription.data.current_plan\n\t\t\t\t\t\t\t\t\t? 'Change plan'\n\t\t\t\t\t\t\t\t\t: 'Step 1: Select plan'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"text-sm font-bold text-gray-900\"\n\t\t\t\t\t\t\tv-if=\"currentStep === 2\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ selectedPlan.plan_title }}<span class=\"font-normal\">/mo</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<div class=\"mt-2 space-y-2\" v-if=\"currentStep == 1\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"block w-full rounded border px-4 py-2.5 text-left\"\n\t\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t\tplan === selectedPlan\n\t\t\t\t\t\t\t\t\t? 'border-gray- outline outline-gray-900'\n\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t\tv-for=\"plan in $resources.subscription.data.plans\"\n\t\t\t\t\t\t\t:key=\"plan.name\"\n\t\t\t\t\t\t\t@click=\"selectedPlan = plan\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span class=\"text-base font-medium text-gray-900\">\n\t\t\t\t\t\t\t\t\t\t{{ plan.plan_title }}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class=\"text-base text-gray-600\">/mo</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\tv-if=\"$resources.subscription.data.current_plan == plan.name\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tCurrent Plan\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t<CheckCircleIcon\n\t\t\t\t\t\t\t\t\tv-else-if=\"selectedPlan == plan\"\n\t\t\t\t\t\t\t\t\tclass=\"h-5 w-5\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"mt-1 text-sm text-gray-600\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\tCPU {{ plan.cpu_time_per_day }}\n\t\t\t\t\t\t\t\t\t{{ plan.cpu_time_per_day == 1 ? 'hour' : 'hours' }}/day\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class=\"mx-1\"> &middot; </span>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{{ formatBytes(plan.max_storage_usage, 0, 2) }} Database\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div class=\"flex justify-end\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tv-if=\"!$resources.subscription.data.current_plan\"\n\t\t\t\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t\t\t\t@click=\"currentStep = 2\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tNext\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tv-else-if=\"\n\t\t\t\t\t\t\t\t\tselectedPlan?.name !==\n\t\t\t\t\t\t\t\t\t$resources.subscription.data.current_plan\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t\t\t\t:loading=\"$resources.setSubscriptionPlan.loading\"\n\t\t\t\t\t\t\t\t@click=\"$resources.setSubscriptionPlan.submit()\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tChange plan\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"mt-2\" v-if=\"currentStep == 2\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"rounded-sm bg-gray-100 p-2 text-sm font-medium text-gray-700\"\n\t\t\t\t\t>\n\t\t\t\t\t\tStep 2: Setup billing\n\t\t\t\t\t</div>\n\t\t\t\t\t<StripeCard\n\t\t\t\t\t\tclass=\"mt-4\"\n\t\t\t\t\t\t@complete=\"$resources.setSubscriptionPlan.submit()\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</LoginBox>\n\t</div>\n</template>\n<script>\nimport { defineAsyncComponent } from 'vue';\nimport { Badge, ErrorMessage, TextInput } from 'frappe-ui';\nimport LoginBox from '../partials/LoginBox.vue';\nimport CheckCircleIcon from '@/components/icons/CheckCircleIcon.vue';\n\nexport default {\n\tname: 'Subscription',\n\tprops: ['site'],\n\tcomponents: {\n\t\tLoginBox,\n\t\tBadge,\n\t\tTextInput,\n\t\tCheckCircleIcon,\n\t\tStripeCard: defineAsyncComponent(() =>\n\t\t\timport('@/components/StripeCard.vue')\n\t\t),\n\t\tErrorMessage\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcurrentStep: 1,\n\t\t\tselectedPlan: null,\n\t\t\tsuccess: false\n\t\t};\n\t},\n\tresources: {\n\t\tsubscription() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.saas.subscription',\n\t\t\t\tparams: {\n\t\t\t\t\tsite: this.site\n\t\t\t\t},\n\t\t\t\tauto: true,\n\t\t\t\tonSuccess(data) {\n\t\t\t\t\tif (data?.current_plan && data?.plans) {\n\t\t\t\t\t\tthis.selectedPlan = data.plans.find(\n\t\t\t\t\t\t\tplan => plan.name === data.current_plan\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tsetSubscriptionPlan() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.saas.set_subscription_plan',\n\t\t\t\tparams: {\n\t\t\t\t\tsite: this.site,\n\t\t\t\t\tplan: this.selectedPlan?.name\n\t\t\t\t},\n\t\t\t\tonSuccess() {\n\t\t\t\t\tthis.currentStep = 1;\n\t\t\t\t\tthis.selectedPlan = null;\n\t\t\t\t\tthis.$resources.subscription.reload();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n};\n</script>\n"],"file":"assets/Subscription-D7qtycri.js"}