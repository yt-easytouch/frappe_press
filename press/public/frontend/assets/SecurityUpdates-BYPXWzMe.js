import w from"./CardWithDetails-8Q6clK2F.js";import{x as I,r as g,h as p,o as n,w as i,j as a,q as u,u as b,t as h,A as d,a5 as v,ae as C,F as S,v as L,n as B,X as $,Y as M}from"./main-Dpl-JOF2.js";import{_ as N}from"./ListItem-CkkFcC1t.js";import{_ as k}from"./CardDetails-BY8v0wfH.js";import{I as P}from"./InfoSection-u7K-4CgM.js";import"./Card-BCzTSeNK.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},t=new Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="119d478b-0616-4dbd-8d65-9a08c9250d41",e._sentryDebugIdIdentifier="sentry-dbid-119d478b-0616-4dbd-8d65-9a08c9250d41")}catch(o){}})();{var l=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};l._sentryModuleMetadata=l._sentryModuleMetadata||{},l._sentryModuleMetadata[new Error().stack]=Object.assign({},l._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const j={name:"SecurityUpdateInfo",props:["updateId","showDetails"],inject:["viewportWidth"],components:{CardDetails:k,InfoSection:P},resources:{secUpdateInfo(){return{url:"press.api.security.get_security_update_details",params:{update_id:this.updateId},auto:!0}}},computed:{secUpdateInfo(){return this.$resources.secUpdateInfo.data}},methods:{getColor(e){switch(e){case"High":return"red";case"Medium":return"orange";case"Low":return"green";default:return"gray"}},redirectToUbuntuPage(e){window.open(`https://launchpad.net/ubuntu/+source/${e}`)}}},T={class:"px-6 py-5"},V={key:0,class:"flex items-center justify-between"},E={class:"text-lg font-medium"},W={class:"mt-1 text-sm text-gray-600"},H={class:"justify-end"},z={key:1},A={key:1,class:"text-center text-base text-gray-600"},F={key:0,class:"flex-auto overflow-auto px-6"};function O(e,t,o,D,U,s){const _=v,m=C,c=g("InfoSection"),f=k;return n(),p(f,{showDetails:o.showDetails},{default:i(()=>[a("div",T,[o.showDetails?(n(),u("div",V,[a("div",null,[a("h4",E," Package: "+h(s.secUpdateInfo.package),1),a("p",W," Version: "+h(s.secUpdateInfo.version),1)]),a("div",H,[a("button",{class:"mr-4",onClick:t[0]||(t[0]=y=>s.redirectToUbuntuPage(s.secUpdateInfo.package))},t[1]||(t[1]=[a("span",{class:"text-base text-blue-600"},"More Info",-1)])),d(_,{class:"pointer-events-none",variant:"subtle",size:"lg",label:s.secUpdateInfo.priority,theme:s.getColor(s.secUpdateInfo.priority)},null,8,["label","theme"])])])):(n(),u("div",z,[e.loading?(n(),p(m,{key:0})):(n(),u("span",A," No item selected "))]))]),o.showDetails?(n(),u("div",F,[d(c,{sectionName:"Package Meta",sectionData:s.secUpdateInfo.package_meta,defaultOpen:!0},null,8,["sectionData"]),d(c,{sectionName:"Change Log",sectionData:s.secUpdateInfo.change_log},null,8,["sectionData"])])):b("",!0)]),_:1},8,["showDetails"])}const R=I(j,[["render",O]]),q={name:"SecurityUpdates",props:["server","updateId"],inject:["viewportWidth"],components:{CardWithDetails:w,SecurityUpdateInfo:R},resources:{updates(){var e;return{type:"list",doctype:"Security Update",url:"press.api.security.fetch_security_updates",filters:{server:(e=this.server)==null?void 0:e.name},orderBy:"priority_level asc",pageLength:10,start:0,auto:!0}}},methods:{updateRoute(e){return`/security/${this.server.name}/security_update/${e}`},getColor(e){switch(e){case"High":return"red";case"Medium":return"orange";case"Low":return"green";default:return"gray"}},getDescription(e){switch(e){case"High":return"Critical";case"Medium":return"Important";case"Low":return"Minor";default:return"Unknown"}}},computed:{updates(){return this.$resources.updates.data}}},K={key:0,class:"py-3"};function X(e,t,o,D,U,s){const _=v,m=N,c=g("router-link"),f=$,y=g("SecurityUpdateInfo"),x=w;return n(),p(x,{title:"Security Updates",subtitle:"Pending security updates"},{details:i(()=>[d(y,{showDetails:o.updateId,updateId:o.updateId},null,8,["showDetails","updateId"])]),default:i(()=>[a("div",null,[(n(!0),u(S,null,L(e.$resources.updates.data,r=>(n(),p(c,{class:B(["block cursor-pointer rounded-md px-2.5",o.updateId===r.name?"bg-gray-100":"hover:bg-gray-50"]),key:r.name,to:s.updateRoute(r.name)},{default:i(()=>[d(m,{title:r.package,description:e.formatDate(r.datetime)},{actions:i(()=>[d(_,{label:r.priority,theme:s.getColor(r.priority)},null,8,["label","theme"])]),_:2},1032,["title","description"]),t[1]||(t[1]=a("div",{class:"border-b"},null,-1))]),_:2},1032,["class","to"]))),128)),e.$resources.updates.hasNextPage?(n(),u("div",K,[d(f,{loading:e.$resources.updates.list.loading,loadingText:"Loading...",onClick:t[0]||(t[0]=r=>e.$resources.updates.next())},{default:i(()=>t[2]||(t[2]=[M(" Load more ")])),_:1},8,["loading"])])):b("",!0)])]),_:1})}const te=I(q,[["render",X]]);export{te as default};
//# sourceMappingURL=SecurityUpdates-BYPXWzMe.js.map
