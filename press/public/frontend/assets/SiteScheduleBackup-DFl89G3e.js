import{x as v,an as x,r as P,h as c,o as a,w as C,j as D,q as u,u as o,A as g,a8 as I,aA as A,V as F,aa as $,av as E}from"./main-Dpl-JOF2.js";(function(){try{var s=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},e=new Error().stack;e&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[e]="41d31b59-05b7-47f1-b492-8fe62627bb30",s._sentryDebugIdIdentifier="sentry-dbid-41d31b59-05b7-47f1-b492-8fe62627bb30")}catch(V){}})();{var l=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};l._sentryModuleMetadata=l._sentryModuleMetadata||{},l._sentryModuleMetadata[new Error().stack]=Object.assign({},l._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const M={props:["site","onScheduleBackupSuccess"],components:{AlertBanner:x},data(){return{show:!0,isPhysical:!1,includeFiles:!0}},watch:{isPhysical(s){s==!0&&(this.includeFiles=!1)}},resources:{scheduleBackup(){return{}}},computed:{$site(){return E("Site",this.site)}},methods:{resetValues(){},scheduleBackup(){this.$router.push({name:"Site Detail Backups",params:{name:this.$site.doc.name}});let s=this.$site.backup.submit({with_files:this.includeFiles,physical:this.isPhysical});F.promise(s,{loading:"Scheduling backup...",success:()=>(this.show=!1,this.onScheduleBackupSuccess?this.onScheduleBackupSuccess():this.$router.push({name:"Site Detail Backups",params:{name:this.$site.doc.name}}),"Backup scheduled successfully."),error:e=>$(e)})}}},N={class:"flex flex-col gap-3"},U={key:0,class:"text-md text-base text-gray-800"},j={key:2},q={key:3};function z(s,e,V,K,t,r){var h,y;const d=P("AlertBanner"),p=I,S=A;return a(),c(S,{options:{title:"Schedule Backup",actions:[{label:"Schedule Backup",loading:(y=(h=this.site)==null?void 0:h.backup)==null?void 0:y.loading,variant:"solid",onClick:r.scheduleBackup}]},modelValue:t.show,"onUpdate:modelValue":e[2]||(e[2]=i=>t.show=i),onClose:r.resetValues},{"body-content":C(()=>{var i,_,b,f,m,k,w,B;return[D("div",N,[(_=(i=this.$site)==null?void 0:i.doc)!=null&&_.allow_physical_backup_by_user?o("",!0):(a(),u("p",U," Are you sure you want to backup your site ? ")),(f=(b=this.$site)==null?void 0:b.doc)!=null&&f.allow_physical_backup_by_user?(a(),c(d,{key:1,title:"Backup can cause some downtime on your site. It depends on the size of your database.",type:"info",showIcon:!1})):o("",!0),(k=(m=this.$site)==null?void 0:m.doc)!=null&&k.allow_physical_backup_by_user?(a(),u("div",j,[g(p,{variant:"outline",type:"checkbox",label:"Physical Backup",modelValue:t.isPhysical,"onUpdate:modelValue":e[0]||(e[0]=n=>t.isPhysical=n)},null,8,["modelValue"])])):o("",!0),(B=(w=this.$site)==null?void 0:w.doc)!=null&&B.allow_physical_backup_by_user?(a(),u("div",q,[g(p,{variant:"outline",type:"checkbox",label:"Backup Public & Private Files",modelValue:t.includeFiles,"onUpdate:modelValue":e[1]||(e[1]=n=>t.includeFiles=n),disabled:t.isPhysical},null,8,["modelValue","disabled"]),t.isPhysical?(a(),c(d,{key:0,class:"mt-2",title:"Physical Backup can't backup your site's private and public files currently.",type:"warning",showIcon:!1})):o("",!0)])):o("",!0)])]}),_:1},8,["options","modelValue","onClose"])}const R=v(M,[["render",z]]);export{R as default};
//# sourceMappingURL=SiteScheduleBackup-DFl89G3e.js.map
