import{x as v,q as l,o as n,A as o,w as d,F as m,v as b,h as p,X as A,j as N,a9 as k,Y as V,t as I,u as D,ar as C,a8 as x,aA as E}from"./main-Dpl-JOF2.js";import{_ as B}from"./Card-BCzTSeNK.js";import{_ as S}from"./ListItem-CkkFcC1t.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},a=new Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="25c96451-6003-45dc-a77f-8825883988a4",e._sentryDebugIdIdentifier="sentry-dbid-25c96451-6003-45dc-a77f-8825883988a4")}catch(c){}})();{var i=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};i._sentryModuleMetadata=i._sentryModuleMetadata||{},i._sentryModuleMetadata[new Error().stack]=Object.assign({},i._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const M={name:"Tags",props:["name","doctype","resourceTags","tags"],data(){return{showAddDialog:!1,showNewTagInput:!1,chosenTag:"",newTag:"",addedTags:[],createErrorMessage:""}},resources:{addTag(){return{url:"press.api.dashboard.add_tag",params:{name:this.name,doctype:this.doctype,tag:this.newTag},validate(){if(this.addedTags.find(e=>e.name==this.newTag))return"Tag already added"},onSuccess(e){this.addedTags.push(this.tags.find(a=>a.name==e)),this.showAddDialog=!1,this.newTag="",this.chosenTag=""}}},removeTag(){return{url:"press.api.dashboard.remove_tag",onSuccess(e){this.addedTags=this.addedTags.filter(a=>a.name!=e)}}},createTag(){return{url:"press.api.dashboard.create_new_tag",params:{name:this.name,doctype:this.doctype,tag:this.newTag},validate(){if(this.tags.find(e=>e.tag===this.newTag))return"Tag already exists"},onSuccess(e){this.addedTags.push({name:e.name,tag:e.tag}),this.showNewTagInput=!1,this.newTag="",this.chosenTag=""}}}},methods:{addTag(){this.showNewTagInput?this.$resources.createTag.submit():this.$resources.addTag.submit(),this.showAddDialog=!1},removeTag(e){this.$resources.removeTag.submit({name:this.name,doctype:this.doctype,tag:e})},handleAutocompleteSelection(){this.chosenTag.value==="new_tag"?this.showNewTagInput=!0:(this.newTag=this.chosenTag.value,this.showNewTagInput=!1)}},mounted(){this.addedTags=this.resourceTags},computed:{getAutocompleteOptions(){return[{group:"New Tag",items:[{label:"Create a New Tag",value:"new_tag"}]},{group:"Existing Tags",items:this.tags.map(e=>({label:e.tag,value:e.name}))}]}}},U={key:0,class:"divide-y"},F={key:1,class:"m-4 text-center"};function O(e,a,c,$,s,r){const g=A,h=S,T=k,w=B,_=C,f=x,y=E;return n(),l(m,null,[o(w,{title:"Tags"},{actions:d(()=>[o(g,{label:"Add Tag",onClick:a[0]||(a[0]=t=>s.showAddDialog=!0)})]),default:d(()=>{var t;return[(t=s.addedTags)!=null&&t.length?(n(),l("div",U,[(n(!0),l(m,null,b(s.addedTags,u=>(n(),p(h,{key:u.name,title:u.tag},{actions:d(()=>[o(g,{icon:"x",onClick:j=>r.removeTag(u.name)},null,8,["onClick"])]),_:2},1032,["title"]))),128))])):(n(),l("div",F,a[5]||(a[5]=[N("p",{class:"text-base text-gray-500"},"No tags added yet",-1)]))),o(T,{message:e.$resources.addTag.error||e.$resources.createTag.error||e.$resources.removeTag.error},null,8,["message"])]}),_:1}),o(y,{options:{title:`Add a New Tag for ${c.doctype}`},modelValue:s.showAddDialog,"onUpdate:modelValue":a[4]||(a[4]=t=>s.showAddDialog=t)},{"body-content":d(()=>[o(_,{placeholder:"Tags",options:r.getAutocompleteOptions,modelValue:s.chosenTag,"onUpdate:modelValue":[a[1]||(a[1]=t=>s.chosenTag=t),r.handleAutocompleteSelection]},null,8,["options","modelValue","onUpdate:modelValue"]),s.showNewTagInput?(n(),p(f,{key:0,modelValue:s.newTag,"onUpdate:modelValue":a[2]||(a[2]=t=>s.newTag=t),class:"mt-4",placeholder:"Enter New Tag's name"},null,8,["modelValue"])):D("",!0)]),actions:d(()=>[o(g,{variant:"solid",class:"w-full",onClick:a[3]||(a[3]=t=>r.addTag())},{default:d(()=>[V(I(s.showNewTagInput?"Create a New Tag":"Add Tag"),1)]),_:1})]),_:1},8,["options","modelValue"])],64)}const P=v(M,[["render",O]]);export{P as _};
//# sourceMappingURL=Tags-ByxkPMV0.js.map
