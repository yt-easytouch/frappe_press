import{_ as b}from"./Card-BCzTSeNK.js";import{_ as m}from"./Report-BW6SUxnb.js";import{x as w,q as a,o as t,A as n,ae as $,w as i,u as p,X as h,Y as v,j as D}from"./main-Dpl-JOF2.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},s=new Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="4582c371-d648-465b-a2d5-7f5d4b6582a4",e._sentryDebugIdIdentifier="sentry-dbid-4582c371-d648-465b-a2d5-7f5d4b6582a4")}catch(o){}})();{var r=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};r._sentryModuleMetadata=r._sentryModuleMetadata||{},r._sentryModuleMetadata[new Error().stack]=Object.assign({},r._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const L={name:"SiteMariaDBProcessList",props:["site"],components:{Report:m},data(){return{max_lines:20}},resources:{processList(){var e;return{url:"press.api.analytics.mariadb_processlist",params:{site:(e=this.site)==null?void 0:e.name},auto:!0,pageLength:this.max_lines,keepData:!0,initialData:[]}},getPlan(){var e;return{url:"press.api.site.current_plan",params:{name:(e=this.site)==null?void 0:e.name},auto:!0}}},computed:{processData(){let e=[];return this.$resources.processList.data.forEach(s=>{let o=[{name:"ID",value:s.Id,class:"w-1/12"},{name:"User",value:s.User,class:"w-2/12"},{name:"Time",value:s.Time,class:"w-1/12"},{name:"Command",value:s.Command,class:"w-1/12"},{name:"State",value:s.State,class:"w-2/12"},{name:"Query",value:s.Info,class:"w-5/12"}];e.push(o)}),e}}},k={key:0,class:"flex items-center justify-center"},x={key:1},I={key:0,class:"px-2 py-2 text-base text-gray-600"},B={key:1,class:"py-2 text-base text-gray-600"},P={key:2,class:"flex justify-center"};function C(e,s,o,E,M,_){var d,c,u;const l=$,f=h,y=m,g=b;return(d=e.$resources.getPlan)!=null&&d.loading?(t(),a("div",k,[n(l)])):(u=(c=e.$resources.getPlan)==null?void 0:c.data)!=null&&u.monitor_access?(t(),a("div",x,[n(g,null,{default:i(()=>[n(y,{title:"MariaDB Process List",columns:[{label:"ID",name:"id",class:"w-1/12"},{label:"User",name:"user",class:"w-2/12"},{label:"Time",name:"time",class:"w-1/12"},{label:"Command",name:"command",class:"w-1/12"},{label:"State",name:"state",class:"w-2/12"},{label:"Query",name:"query",class:"w-5/12"}],data:_.processData},{actions:i(()=>[n(f,{onClick:s[0]||(s[0]=N=>e.$resources.processList.reload()),loading:e.$resources.processList.loading},{default:i(()=>s[1]||(s[1]=[v("Refresh")])),_:1},8,["loading"])]),_:1},8,["data"]),e.$resources.processList.loading&&e.$resources.processList.data.length==0?(t(),a("div",I,[n(l)])):p("",!0),!e.$resources.processList.loading&&e.$resources.processList.data.length==0?(t(),a("div",B," No data ")):p("",!0)]),_:1})])):(t(),a("div",P,s[2]||(s[2]=[D("span",{class:"mt-16 text-base text-gray-700"}," Your plan doesn't support this feature. Please upgrade your plan. ",-1)])))}const V=w(L,[["render",C]]);export{V as default};
//# sourceMappingURL=SiteMariaDBProcessList-f23vKvNR.js.map
