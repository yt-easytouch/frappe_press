{"version":3,"file":"BenchLogsDialog-FHxF99ma.js","sources":["../../../../dashboard/src2/components/group/BenchLogsDialog.vue"],"sourcesContent":["<template>\n\t<Dialog\n\t\t:options=\"{\n\t\t\ttitle: `Bench Logs - ${bench}`,\n\t\t\tsize: '6xl'\n\t\t}\"\n\t\tv-model=\"show\"\n\t>\n\t\t<template #body-content>\n\t\t\t<ObjectList v-if=\"!showLog\" :options=\"listOptions\" />\n\t\t\t<div v-else>\n\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t<Button @click=\"showLog = false\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<i-lucide-arrow-left class=\"inline-block h-4 w-4\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</Button>\n\t\t\t\t\t<h2 class=\"ml-4 text-lg font-medium text-gray-900\">{{ logName }}</h2>\n\t\t\t\t\t<div class=\"!ml-auto flex gap-2\">\n\t\t\t\t\t\t<Button @click=\"log.reload()\" :loading=\"log.loading\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<i-lucide-refresh-ccw class=\"h-4 w-4\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button @click=\"navigateToLogBrowser\">\n\t\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t\t<i-lucide-sparkle class=\"h-4 w-4\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\tView in Log Browser\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"mt-4\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"h-[34rem] overflow-scroll rounded border border-gray-100 bg-gray-900 px-2.5 py-2 text-sm text-gray-200\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<pre>{{\n\t\t\t\t\t\t\tlog.loading ? 'Loading...' : log?.data[logName] || 'No output'\n\t\t\t\t\t\t}}</pre>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n\n<script setup>\nimport { createResource } from 'frappe-ui';\nimport { defineProps, h, ref } from 'vue';\nimport LucideSparkleIcon from '~icons/lucide/sparkle';\nimport ObjectList from '../ObjectList.vue';\nimport { date } from '../../utils/format';\nimport router from '../../router';\n\nconst props = defineProps({\n\tbench: String\n});\n\nconst show = ref(true);\nconst logName = ref('');\nconst showLog = ref(false);\n\nconst log = createResource({\n\turl: 'press.api.bench.log',\n\tmakeParams() {\n\t\treturn {\n\t\t\tname: `bench-${props.bench?.split('-')[1]}`,\n\t\t\tbench: props.bench,\n\t\t\tlog: logName.value\n\t\t};\n\t}\n});\n\nconst navigateToLogBrowser = () => {\n\tshow.value = false;\n\trouter.push({\n\t\tname: 'Log Browser',\n\t\tparams: {\n\t\t\tmode: 'bench',\n\t\t\tdocName: props.bench,\n\t\t\tlogId: logName.value\n\t\t}\n\t});\n};\n\nconst listOptions = ref({\n\tresource() {\n\t\treturn {\n\t\t\turl: 'press.api.bench.logs',\n\t\t\tmakeParams() {\n\t\t\t\treturn {\n\t\t\t\t\tname: `bench-${props.bench?.split('-')[1]}`,\n\t\t\t\t\tbench: props.bench\n\t\t\t\t};\n\t\t\t},\n\t\t\tcache: ['BenchLogs', props.bench],\n\t\t\tauto: true\n\t\t};\n\t},\n\tonRowClick(row) {\n\t\tlogName.value = row.name;\n\t\tshowLog.value = true;\n\t\tlog.fetch();\n\t},\n\tcolumns: [\n\t\t{\n\t\t\tlabel: 'Name',\n\t\t\tfieldname: 'name'\n\t\t},\n\t\t{\n\t\t\tlabel: 'Size',\n\t\t\tfieldname: 'size',\n\t\t\tclass: 'text-gray-600',\n\t\t\tformat(value) {\n\t\t\t\treturn `${value} kB`;\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tlabel: 'Created On',\n\t\t\tfieldname: 'created',\n\t\t\tformat(value) {\n\t\t\t\treturn value ? date(value, 'lll') : '';\n\t\t\t}\n\t\t}\n\t],\n\tactions: () => [\n\t\t{\n\t\t\tslots: {\n\t\t\t\tprefix: () => h(LucideSparkleIcon)\n\t\t\t},\n\t\t\tlabel: 'View in Log Browser',\n\t\t\tonClick: () => {\n\t\t\t\tshow.value = false;\n\t\t\t\trouter.push({\n\t\t\t\t\tname: 'Log Browser',\n\t\t\t\t\tparams: { mode: 'bench', docName: props.bench }\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t]\n});\n</script>\n"],"names":["props","__props","show","ref","logName","showLog","log","createResource","_a","navigateToLogBrowser","router","listOptions","row","value","date","h","LucideSparkleIcon"],"mappings":"0sCAsDA,MAAAA,EAAAC,EAIAC,EAAAC,EAAA,EAAA,EACAC,EAAAD,EAAA,EAAA,EACAE,EAAAF,EAAA,EAAA,EAEAG,EAAAC,EAAA,CACA,IAAA,sBACA,YAAA,OACA,MAAA,CACA,KAAA,UAAAC,EAAAR,EAAA,QAAA,YAAAQ,EAAA,MAAA,KAAA,EAAA,GACA,MAAAR,EAAA,MACA,IAAAI,EAAA,KACA,CACA,CACA,CAAA,EAEAK,EAAA,IAAA,CACAP,EAAA,MAAA,GACAQ,EAAA,KAAA,CACA,KAAA,cACA,OAAA,CACA,KAAA,QACA,QAAAV,EAAA,MACA,MAAAI,EAAA,KACA,CACA,CAAA,CACA,EAEAO,EAAAR,EAAA,CACA,UAAA,CACA,MAAA,CACA,IAAA,uBACA,YAAA,OACA,MAAA,CACA,KAAA,UAAAK,EAAAR,EAAA,QAAA,YAAAQ,EAAA,MAAA,KAAA,EAAA,GACA,MAAAR,EAAA,KACA,CACA,EACA,MAAA,CAAA,YAAAA,EAAA,KAAA,EACA,KAAA,EACA,CACA,EACA,WAAAY,EAAA,CACAR,EAAA,MAAAQ,EAAA,KACAP,EAAA,MAAA,GACAC,EAAA,MAAA,CACA,EACA,QAAA,CACA,CACA,MAAA,OACA,UAAA,MACA,EACA,CACA,MAAA,OACA,UAAA,OACA,MAAA,gBACA,OAAAO,EAAA,CACA,MAAA,GAAAA,CAAA,KACA,CACA,EACA,CACA,MAAA,aACA,UAAA,UACA,OAAAA,EAAA,CACA,OAAAA,EAAAC,EAAAD,EAAA,KAAA,EAAA,EACA,CACA,CACA,EACA,QAAA,IAAA,CACA,CACA,MAAA,CACA,OAAA,IAAAE,EAAAC,CAAA,CACA,EACA,MAAA,sBACA,QAAA,IAAA,CACAd,EAAA,MAAA,GACAQ,EAAA,KAAA,CACA,KAAA,cACA,OAAA,CAAA,KAAA,QAAA,QAAAV,EAAA,KAAA,CACA,CAAA,CACA,CACA,CACA,CACA,CAAA"}