var A=Object.defineProperty,v=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var h=(e,a,s)=>a in e?A(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s,m=(e,a)=>{for(var s in a||(a={}))k.call(a,s)&&h(e,s,a[s]);if(p)for(var s of p(a))S.call(a,s)&&h(e,s,a[s]);return e},f=(e,a)=>v(e,w(a));var c=(e,a,s)=>new Promise((i,t)=>{var l=d=>{try{r(s.next(d))}catch(u){t(u)}},o=d=>{try{r(s.throw(d))}catch(u){t(u)}},r=d=>d.done?i(d.value):Promise.resolve(d.value).then(l,o);r((s=s.apply(e,a)).next())});import{x as D,ad as y,q as I,o as b,A as g,ag as N,ah as V,j as P,h as T,u as B,a8 as C}from"./main-Dpl-JOF2.js";import{_}from"./Form-CIPLpg2e.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},a=new Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="97c4cb48-a3db-40b4-afa9-26754f46358a",e._sentryDebugIdIdentifier="sentry-dbid-97c4cb48-a3db-40b4-afa9-26754f46358a")}catch(s){}})();{var n=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};n._sentryModuleMetadata=n._sentryModuleMetadata||{},n._sentryModuleMetadata[new Error().stack]=Object.assign({},n._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const q=["Andaman and Nicobar Islands","Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chandigarh","Chhattisgarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Goa","Gujarat","Haryana","Himachal Pradesh","Jammu and Kashmir","Jharkhand","Karnataka","Kerala","Ladakh","Lakshadweep Islands","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Other Territory","Puducherry","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal"],L={name:"AddressForm",props:["address"],emits:["update:address"],components:{Form:_},data(){return{gstApplicable:!1}},mounted(){var e;(e=this.address)!=null&&e.gstin&&this.address.gstin!=="Not Applicable"?this.gstApplicable=!0:this.update("gstin","Not Applicable")},watch:{"address.gstin"(e){this.update("gstin",e)},gstApplicable(e){e?this.update("gstin",this.address.gstin==="Not Applicable"?"":this.address.gstin):this.update("gstin","Not Applicable")}},resources:{countryList:{url:"press.api.account.country_list",auto:!0,onSuccess(){var a;let e=(a=this.$team)==null?void 0:a.doc.country;if(e){let s=this.countryList.find(i=>i.label===e);s&&this.update("country",s.value)}}},validateGST(){return{url:"press.api.billing.validate_gst",makeParams(){return{address:this.address}}}}},methods:{update(e,a){this.$emit("update:address",f(m({},this.address),{[e]:a}))},validateGST(){return c(this,null,function*(){this.update("gstin",this.gstApplicable?this.address.gstin:"Not Applicable"),yield this.$resources.validateGST.submit()})},validateValues(){return c(this,null,function*(){var i;let{country:e}=this.address,a=e=="India";if(!this.fields.flat().filter(t=>t.fieldname!="gstin"||a).map(t=>this.address[t.fieldname]).every(Boolean))throw new y("Please fill required values");try{yield this.validateGST()}catch(t){throw new y((i=t.messages)==null?void 0:i.join(`
`))}})}},computed:{countryList(){return(this.$resources.countryList.data||[]).map(e=>({label:e.name,value:e.name}))},indianStates(){return q.map(e=>({label:e,value:e}))},fields(){return[{fieldtype:"Select",label:"Country",fieldname:"country",options:this.countryList,required:1},{fieldtype:"Data",label:"Address",fieldname:"address",required:1},{fieldtype:"Data",label:"City",fieldname:"city",required:1},{fieldtype:this.address.country==="India"?"Select":"Data",label:"State / Province / Region",fieldname:"state",required:1,options:this.address.country==="India"?this.indianStates:null},{fieldtype:"Data",label:"Postal Code",fieldname:"postal_code",required:1}]}}},M={class:"mt-4"};function j(e,a,s,i,t,l){const o=_,r=C;return b(),I("div",null,[g(o,{class:"mt-4",fields:l.fields,modelValue:s.address,"onUpdate:modelValue":a[0]||(a[0]=d=>e.$emit("update:address",d))},null,8,["fields","modelValue"]),N(P("div",M,[g(r,{label:"I have GSTIN",type:"checkbox",modelValue:t.gstApplicable,"onUpdate:modelValue":a[1]||(a[1]=d=>t.gstApplicable=d)},null,8,["modelValue"]),t.gstApplicable?(b(),T(r,{key:0,class:"mt-2",label:"GSTIN",type:"text",modelValue:s.address.gstin,"onUpdate:modelValue":a[2]||(a[2]=d=>s.address.gstin=d),disabled:!t.gstApplicable},null,8,["modelValue","disabled"])):B("",!0)],512),[[V,s.address.country=="India"]])])}const G=D(L,[["render",j]]);export{G as A,q as i};
//# sourceMappingURL=AddressForm-Cz0XUJgF.js.map
