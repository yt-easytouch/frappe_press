import{x as w,B as x,y as k,r as $,q as _,u as m,o as c,A as n,j as s,w as i,Y as D,X as I,t as a,a5 as P,h as p,bZ as B,C,F as j,v as A,bD as O,bY as S}from"./main-Dpl-JOF2.js";import{J as E,_ as V}from"./JobStep-yl8qYLQg.js";import{_ as J}from"./arrow-left-DH4AOn6w.js";(function(){try{var t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="b02e0a89-4bd9-4fb2-9519-b63db38164bb",t._sentryDebugIdIdentifier="sentry-dbid-b02e0a89-4bd9-4fb2-9519-b63db38164bb")}catch(l){}})();{var r=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};r._sentryModuleMetadata=r._sentryModuleMetadata||{},r._sentryModuleMetadata[new Error().stack]=Object.assign({},r._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const N={name:"PlayPage",props:["id","objectType"],components:{Tooltip:k,FeatherIcon:x,JobStep:E},resources:{play(){return{type:"document",doctype:"Ansible Play",name:this.id,transform(t){for(let e of t.tasks)e.title=e.task,e.duration=S(e.duration),e.isOpen=!1;return t},onSuccess(){this.lastLoaded=Date.now()}}}},computed:{object(){return O(this.objectType)},play(){return this.$resources.play.doc},dropdownOptions(){return[{label:"View in Desk",icon:"external-link",condition:()=>{var t;return(t=this.$team.doc)==null?void 0:t.is_desk_user},onClick:()=>{window.open(`${window.location.protocol}//${window.location.host}/app/ansible-play/${this.id}`,"_blank")}}].filter(t=>{var e,l;return(l=(e=t.condition)==null?void 0:e.call(t))!=null?l:!0})}},mounted(){this.$socket.emit("doc_subscribe","Ansible Play",this.id),this.$socket.on("ansible_play_update",t=>{t.id===this.id&&this.reload()}),this.reloadInterval=setInterval(()=>{this.reload()},1e3*60)},beforeUnmount(){this.$socket.emit("doc_unsubscribe","Ansible Play",this.id),this.$socket.off("ansible_play_update"),clearInterval(this.reloadInterval)},methods:{reload(){!this.$resources.play.loading&&Date.now()-this.lastLoaded>5e3&&this.$resources.play.reload()}}},T={key:0,class:"p-5"},F={class:"mt-3"},L={class:"flex items-center"},M={class:"text-lg font-medium text-gray-900"},Y={class:"ml-auto space-x-2"},q={class:"mt-4 grid grid-cols-5 gap-4"},z={class:"mt-2 text-sm text-gray-900"},K={class:"mt-2 text-sm text-gray-900"},U={class:"mt-2 text-sm text-gray-900"},X={class:"mt-2 text-sm text-gray-900"},Z={class:"mt-2 text-sm text-gray-900"},H={class:"mt-8 space-y-4"};function Q(t,e,l,R,W,o){const y=J,u=I,f=P,b=B,g=V,h=C,v=$("JobStep");return o.play?(c(),_("div",T,[n(u,{route:{name:`${o.object.doctype} Detail Plays`}},{prefix:i(()=>[n(y,{class:"inline-block h-4 w-4"})]),default:i(()=>[e[1]||(e[1]=D(" All plays "))]),_:1},8,["route"]),s("div",F,[s("div",null,[s("div",L,[s("h2",M,a(o.play.play),1),n(f,{class:"ml-2",label:o.play.status},null,8,["label"]),s("div",Y,[n(u,{onClick:e[0]||(e[0]=d=>t.$resources.play.reload()),loading:t.$resources.play.loading},{icon:i(()=>[n(b,{class:"h-4 w-4"})]),_:1},8,["loading"]),o.dropdownOptions.length?(c(),p(h,{key:0,options:o.dropdownOptions},{default:i(({open:d})=>[n(u,null,{icon:i(()=>[n(g,{class:"h-4 w-4"})]),_:1})]),_:1},8,["options"])):m("",!0)])]),s("div",null,[s("div",q,[s("div",null,[e[2]||(e[2]=s("div",{class:"text-sm font-medium text-gray-500"},"Creation",-1)),s("div",z,a(t.$format.date(o.play.creation)),1)]),s("div",null,[e[3]||(e[3]=s("div",{class:"text-sm font-medium text-gray-500"},"Creator",-1)),s("div",K,a(o.play.owner),1)]),s("div",null,[e[4]||(e[4]=s("div",{class:"text-sm font-medium text-gray-500"},"Duration",-1)),s("div",U,a(t.$format.duration(o.play.duration)),1)]),s("div",null,[e[5]||(e[5]=s("div",{class:"text-sm font-medium text-gray-500"},"Start",-1)),s("div",X,a(t.$format.date(o.play.start)),1)]),s("div",null,[e[6]||(e[6]=s("div",{class:"text-sm font-medium text-gray-500"},"End",-1)),s("div",Z,a(t.$format.date(o.play.end)),1)])])])]),s("div",H,[(c(!0),_(j,null,A(o.play.tasks,d=>(c(),p(v,{step:d,key:d.name},null,8,["step"]))),128))])])])):m("",!0)}const se=w(N,[["render",Q]]);export{se as default};
//# sourceMappingURL=PlayPage-BWYvGN-p.js.map
