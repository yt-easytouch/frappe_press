import{x as b,h as f,o as g,w as m,j as s,A as r,as as _,Y as l,ag as h,c8 as k,a9 as y,aA as w,ad as D}from"./main-Dpl-JOF2.js";import{_ as F}from"./BackupFilesUploader-D7iED6IX.js";import"./FileUploader-C1pIUjCt.js";import"./datetime-PXpIdgFA.js";import"./dayjs.min-BK4AnHlu.js";import"./ListItem-CkkFcC1t.js";(function(){try{var t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="7bd148c8-abd4-437d-b8bf-2ac90b4df588",t._sentryDebugIdIdentifier="sentry-dbid-7bd148c8-abd4-437d-b8bf-2ac90b4df588")}catch(n){}})();{var i=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};i._sentryModuleMetadata=i._sentryModuleMetadata||{},i._sentryModuleMetadata[new Error().stack]=Object.assign({},i._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const v={name:"SiteDatabaseRestoreDialog",props:{site:{type:String,required:!0}},data(){return{showRestoreDialog:!0,selectedFiles:{database:null,public:null,private:null,config:null},skipFailingPatches:!1}},resources:{restoreBackup(){return{url:"press.api.site.restore",params:{name:this.site,files:this.selectedFiles,skip_failing_patches:this.skipFailingPatches},validate(){if(!this.filesUploaded)throw new D("Please upload database, public and private files to restore.")},onSuccess(){this.selectedFiles={},this.$router.push({name:"Site Jobs",params:{name:this.site}})}}}},computed:{filesUploaded(){return this.selectedFiles.database}}},x={class:"space-y-4"},B={class:"flex items-center rounded border border-gray-200 bg-gray-100 p-4 text-sm text-gray-600"},R={class:"mt-3"};function V(t,e,n,P,o,S){const d=_,p=F,u=y,c=w;return g(),f(c,{options:{title:"Restore",actions:[{label:"Restore",variant:"solid",theme:"red",loading:t.$resources.restoreBackup.loading,onClick:()=>{t.$resources.restoreBackup.submit(),o.showRestoreDialog=!1}}]},modelValue:o.showRestoreDialog,"onUpdate:modelValue":e[2]||(e[2]=a=>o.showRestoreDialog=a)},{"body-content":m(()=>[s("div",x,[e[4]||(e[4]=s("p",{class:"text-base"},"Restore your database using a previous backup.",-1)),s("div",B,[r(d,{class:"mr-4 inline-block h-6 w-6"}),e[3]||(e[3]=s("div",null,[l(" This operation will replace all "),s("b",null,"data"),l(" & "),s("b",null,"apps"),l(" in your site with those from the backup ")],-1))]),r(p,{backupFiles:o.selectedFiles,"onUpdate:backupFiles":e[0]||(e[0]=a=>o.selectedFiles=a)},null,8,["backupFiles"])]),s("div",R,[h(s("input",{id:"skip-failing",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500","onUpdate:modelValue":e[1]||(e[1]=a=>o.skipFailingPatches=a)},null,512),[[k,o.skipFailingPatches]]),e[5]||(e[5]=s("label",{for:"skip-failing",class:"ml-2 text-sm text-gray-900"}," Skip failing patches (if any patch fails) ",-1))]),r(u,{class:"mt-2",message:t.$resources.restoreBackup.error},null,8,["message"])]),_:1},8,["options","modelValue"])}const N=b(v,[["render",V]]);export{N as default};
//# sourceMappingURL=SiteDatabaseRestoreDialog-Dn6GxdIZ.js.map
