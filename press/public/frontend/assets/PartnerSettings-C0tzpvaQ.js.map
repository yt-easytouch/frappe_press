{"version":3,"file":"PartnerSettings-C0tzpvaQ.js","sources":["../../../../dashboard/src/views/settings/PartnerCustomers.vue","../../../../dashboard/src/views/settings/AccountPartner.vue","../../../../dashboard/src/views/settings/PartnerReferral.vue","../../../../dashboard/src/views/settings/PartnerRequestStatus.vue","../../../../dashboard/src/views/settings/PartnerSettings.vue"],"sourcesContent":["<template>\n\t<Card\n\t\ttitle=\"Partner Customers\"\n\t\tsubtitle=\"Customers associated with your account\"\n\t\tv-if=\"$account.team.erpnext_partner\"\n\t>\n\t\t<div class=\"max-h-96 divide-y\">\n\t\t\t<div\n\t\t\t\tclass=\"grid grid-cols-4 items-center gap-x-8 py-4 text-base text-gray-600\"\n\t\t\t>\n\t\t\t\t<span>Name</span>\n\t\t\t\t<span>Email</span>\n\t\t\t\t<span>Currency</span>\n\t\t\t\t<span>Payment Mode</span>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\t:key=\"customer.team\"\n\t\t\t\tv-for=\"customer in partnerCustomers\"\n\t\t\t\tclass=\"grid grid-cols-4 items-center gap-x-8 py-4 text-base text-gray-900\"\n\t\t\t>\n\t\t\t\t<span>{{ customer.billing_name }}</span>\n\t\t\t\t<span class=\"break-all\">{{ customer.email }}</span>\n\t\t\t\t<span>{{ customer.currency }}</span>\n\t\t\t\t<span>\n\t\t\t\t\t{{ customer.payment_mode }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t</Card>\n</template>\n<script>\nexport default {\n\tname: 'PartnerCustomers',\n\tdata() {\n\t\treturn {\n\t\t\tpartnerCustomers: []\n\t\t};\n\t},\n\tresources: {\n\t\tgetPartnerCustomers: {\n\t\t\turl: 'press.api.partner.get_partner_customers',\n\t\t\tonSuccess(data) {\n\t\t\t\tthis.partnerCustomers = data.map(d => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\temail: d.user,\n\t\t\t\t\t\tbilling_name: d.billing_name || '',\n\t\t\t\t\t\tpayment_mode: d.payment_mode || '',\n\t\t\t\t\t\tcurrency: d.currency\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t},\n\t\t\tauto: true\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<Card\n\t\ttitle=\"Frappe Partner\"\n\t\tsubtitle=\"Frappe Partner associated with your account\"\n\t\tv-if=\"!$account.team.erpnext_partner\"\n\t>\n\t\t<div>\n\t\t\t<ListItem\n\t\t\t\t:title=\"$account.partner_billing_name\"\n\t\t\t\t:subtitle=\"$account.partner_email\"\n\t\t\t\tv-if=\"$account.partner_email\"\n\t\t\t>\n\t\t\t</ListItem>\n\n\t\t\t<div class=\"py-4\">\n\t\t\t\t<h3 class=\"text-base text-gray-700\" v-if=\"$account.parent_team\">\n\t\t\t\t\tOnly parent team can link with Frappe Partner.\n\t\t\t\t</h3>\n\t\t\t\t<h3\n\t\t\t\t\tclass=\"text-base text-gray-700\"\n\t\t\t\t\tv-if=\"!$account.partner_email && !$account.parent_team\"\n\t\t\t\t>\n\t\t\t\t\tHave a Frappe Partner Referral Code? Click on\n\t\t\t\t\t<strong>Add Partner Code</strong> to link with your Partner team.\n\t\t\t\t</h3>\n\t\t\t</div>\n\t\t</div>\n\t\t<template #actions>\n\t\t\t<Button\n\t\t\t\t@click=\"showPartnerReferralDialog = true\"\n\t\t\t\tv-if=\"!$account.partner_email\"\n\t\t\t>\n\t\t\t\tAdd Partner Code\n\t\t\t</Button>\n\t\t</template>\n\t\t<Dialog\n\t\t\t:options=\"{ title: 'Partner Referral Code' }\"\n\t\t\tv-model=\"showPartnerReferralDialog\"\n\t\t>\n\t\t\t<template v-slot:body-content>\n\t\t\t\t<FormControl\n\t\t\t\t\tlabel=\"Enter Partner Referral Code\"\n\t\t\t\t\ttype=\"input\"\n\t\t\t\t\tv-model=\"referralCode\"\n\t\t\t\t\tplaceholder=\"e.g. rGjw3hJ81b\"\n\t\t\t\t\t@input=\"referralCodeChange\"\n\t\t\t\t/>\n\t\t\t\t<ErrorMessage class=\"mt-2\" :message=\"$resources.addPartner.error\" />\n\t\t\t\t<div class=\"mt-1\">\n\t\t\t\t\t<div v-if=\"partnerExists\" class=\"text-sm text-green-600\" role=\"alert\">\n\t\t\t\t\t\tReferral Code {{ referralCode }} belongs to {{ partner }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<ErrorMessage :message=\"errorMessage\" />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template #actions>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t:loading=\"$resources.addPartner.loading\"\n\t\t\t\t\tloadingText=\"Saving...\"\n\t\t\t\t\t@click=\"$resources.addPartner.submit()\"\n\t\t\t\t>\n\t\t\t\t\tAdd partner\n\t\t\t\t</Button>\n\t\t\t</template>\n\t\t</Dialog>\n\t</Card>\n</template>\n<script>\nimport { notify } from '@/utils/toast';\n\nexport default {\n\tname: 'AccountPartner',\n\tdata() {\n\t\treturn {\n\t\t\tshowPartnerReferralDialog: false,\n\t\t\treferralCode: null,\n\t\t\tpartnerExists: false,\n\t\t\terrorMessage: null,\n\t\t\tpartner: null\n\t\t};\n\t},\n\tresources: {\n\t\taddPartner() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.partner.add_partner',\n\t\t\t\tparams: {\n\t\t\t\t\treferral_code: this.referralCode\n\t\t\t\t},\n\t\t\t\tonSuccess(res) {\n\t\t\t\t\tthis.showPartnerReferralDialog = false;\n\t\t\t\t\tnotify({\n\t\t\t\t\t\ttitle: 'Email sent to Partner',\n\t\t\t\t\t\ticon: 'check',\n\t\t\t\t\t\tcolor: 'green'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tmethods: {\n\t\tasync referralCodeChange(e) {\n\t\t\tlet code = e.target.value;\n\t\t\tthis.partnerExists = false;\n\n\t\t\tlet result = await this.$call('press.api.partner.validate_partner_code', {\n\t\t\t\tcode: code\n\t\t\t});\n\n\t\t\tlet [isValidCode, partnerName] = result;\n\n\t\t\tif (isValidCode) {\n\t\t\t\tthis.partnerExists = true;\n\t\t\t\tthis.referralCode = code;\n\t\t\t\tthis.partner = partnerName;\n\t\t\t\tthis.partnerExists = true;\n\t\t\t} else {\n\t\t\t\tthis.errorMessage = `${code} is Invalid Referral Code`;\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<Card\n\t\ttitle=\"Partner Referral\"\n\t\tsubtitle=\"Your unique partner referral code\"\n\t\tv-if=\"$account.team.erpnext_partner\"\n\t>\n\t\t<div class=\"space-y-4\">\n\t\t\t<ClickToCopyField :textContent=\"referralCode\" />\n\t\t\t<h3 class=\"text-base text-gray-700\">\n\t\t\t\tPartners can share this referral code with their customers to link their\n\t\t\t\taccount with the partner.\n\t\t\t</h3>\n\t\t</div>\n\t</Card>\n</template>\n\n<script>\nimport ClickToCopyField from '@/components/ClickToCopyField.vue';\n\nexport default {\n\tname: 'PartnerReferral',\n\tcomponents: {\n\t\tClickToCopyField\n\t},\n\tcomputed: {\n\t\treferralCode() {\n\t\t\tif (\n\t\t\t\tthis.$account.team.erpnext_partner &&\n\t\t\t\tthis.$account.team.partner_referral_code\n\t\t\t) {\n\t\t\t\treturn this.$account.team.partner_referral_code;\n\t\t\t}\n\t\t\treturn '';\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<Card title=\"Partner Request Status\" v-if=\"!$account.team.erpnext_partner\">\n\t\t<template #actions>\n\t\t\t<Badge\n\t\t\t\t:variant=\"'subtle'\"\n\t\t\t\t:theme=\"this.partnerRequestStatus === 'Pending' ? 'orange' : 'green'\"\n\t\t\t\tsize=\"lg\"\n\t\t\t\t:label=\"this.partnerRequestStatus\"\n\t\t\t\tv-if=\"this.partnerRequestStatus\"\n\t\t\t/>\n\t\t</template>\n\t\t<div class=\"flex items-center\">\n\t\t\t<div v-if=\"$account.team.partnership_date\">\n\t\t\t\t<span class=\"text-base\">\n\t\t\t\t\tCustomer Partnership Start Date:\n\t\t\t\t\t<span class=\"font-semibold\">{{\n\t\t\t\t\t\t$date($account.team.partnership_date).toLocaleString({\n\t\t\t\t\t\t\tmonth: 'long',\n\t\t\t\t\t\t\tday: 'numeric',\n\t\t\t\t\t\t\tyear: 'numeric'\n\t\t\t\t\t\t})\n\t\t\t\t\t}}</span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div v-else>\n\t\t\t\t<span class=\"text-base\">\n\t\t\t\t\tTo set Customer Partnership Start Date, click on Edit button</span\n\t\t\t\t>\n\t\t\t</div>\n\t\t\t<div class=\"ml-auto\">\n\t\t\t\t<Button icon-left=\"edit\" @click=\"showDateEditDialog = true\">\n\t\t\t\t\tEdit\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<Dialog\n\t\t\t:options=\"{\n\t\t\t\ttitle: 'Update Customer Partnership Start Date',\n\t\t\t\tactions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\t\tlabel: 'Save Changes',\n\t\t\t\t\t\tonClick: () => $resources.updatePartnershipDate.submit()\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\"\n\t\t\tv-model=\"showDateEditDialog\"\n\t\t>\n\t\t\t<template v-slot:body-content>\n\t\t\t\t<FormControl\n\t\t\t\t\tlabel=\"Enter Partnership Start Date\"\n\t\t\t\t\ttype=\"date\"\n\t\t\t\t\tv-model=\"partnerDate\"\n\t\t\t\t\tdescription=\"This date will be used to calculate your partner's target achievement.\"\n\t\t\t\t/>\n\t\t\t\t<ErrorMessage\n\t\t\t\t\tclass=\"mt-2\"\n\t\t\t\t\t:message=\"$resources.updatePartnershipDate.error\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</Dialog>\n\t</Card>\n</template>\n<script>\nimport { DateTime } from 'luxon';\n\nexport default {\n\tname: 'PartnerRequestStatus',\n\tdata() {\n\t\treturn {\n\t\t\tpartnerRequestStatus: null,\n\t\t\tpartnershipDate: null,\n\t\t\tshowDateEditDialog: false,\n\t\t\tpartnerDate: null\n\t\t};\n\t},\n\tresources: {\n\t\tgetStatus: {\n\t\t\turl: 'press.api.partner.get_partner_request_status',\n\t\t\tparams: {\n\t\t\t\tteam: $account.team.name\n\t\t\t},\n\t\t\tonSuccess(data) {\n\t\t\t\tthis.partnerRequestStatus = data;\n\t\t\t},\n\t\t\tauto: true\n\t\t},\n\t\tupdatePartnershipDate() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.partner.update_partnership_date',\n\t\t\t\tparams: {\n\t\t\t\t\tteam: $account.team.name,\n\t\t\t\t\tpartnership_date: this.partnerDate || this.today\n\t\t\t\t},\n\t\t\t\tonSuccess() {\n\t\t\t\t\tthis.showDateEditDialog = false;\n\t\t\t\t},\n\t\t\t\tvalidate() {\n\t\t\t\t\tif (!$account.team.partner_email) {\n\t\t\t\t\t\treturn 'Please link your account with Partner Code first.';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tcomputed: {\n\t\ttoday() {\n\t\t\treturn DateTime.local().toISODate();\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<div class=\"mx-auto max-w-4xl space-y-5\">\n\t\t<AccountPartner />\n\t\t<PartnerReferral />\n\t\t<PartnerCustomers class=\"col-span-1 md:col-span-2\" />\n\t\t<PartnerRequestStatus />\n\t</div>\n</template>\n\n<script>\nimport PartnerCustomers from './PartnerCustomers.vue';\nimport AccountPartner from './AccountPartner.vue';\nimport PartnerReferral from './PartnerReferral.vue';\nimport PartnerRequestStatus from './PartnerRequestStatus.vue';\n\nexport default {\n\tname: 'PartnerSettings',\n\tpageMeta() {\n\t\treturn {\n\t\t\ttitle: 'Settings - Partner'\n\t\t};\n\t},\n\tcomponents: {\n\t\tAccountPartner,\n\t\tPartnerCustomers,\n\t\tPartnerReferral,\n\t\tPartnerRequestStatus\n\t}\n};\n</script>\n"],"names":["_sfc_main","data","d","_hoisted_1","_hoisted_2","_withCtx","_createElementVNode","_openBlock","_createElementBlock","_Fragment","_renderList","$data","customer","_toDisplayString","_createCommentVNode","res","notify","result","code","isValidCode","partnerName","_hoisted_4","_ctx","_cache","$event","_createTextVNode","_hoisted_3","$options","ClickToCopyField","DateTime","_hoisted_6","_hoisted_5","AccountPartner","PartnerCustomers","PartnerReferral","PartnerRequestStatus"],"mappings":"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"}