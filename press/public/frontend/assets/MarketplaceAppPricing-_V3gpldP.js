import{x as M,q as u,o as s,a0 as N,l as U,aY as F,ac as w,A as n,a6 as O,w as d,Z as i,X as q,Y as _,j as l,u as E,F as L,v as B,h as S,ag as Z,c8 as R,a8 as Y,t as K,a9 as T,aA as X}from"./main-Dpl-JOF2.js";import{_ as z}from"./Card-BCzTSeNK.js";import{A as J}from"./AppPlanCard-CuGgjNKV.js";import"./FeatureList-DXsHFT_A.js";(function(){try{var p=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},o=new Error().stack;o&&(p._sentryDebugIds=p._sentryDebugIds||{},p._sentryDebugIds[o]="a48603d3-52e2-4997-933b-4c4bf6ed7bcf",p._sentryDebugIdIdentifier="sentry-dbid-a48603d3-52e2-4997-933b-4c4bf6ed7bcf")}catch(t){}})();{var k=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};k._sentryModuleMetadata=k._sentryModuleMetadata||{},k._sentryModuleMetadata[new Error().stack]=Object.assign({},k._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const Q={},W={viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function G(p,o){return s(),u("svg",W,o[0]||(o[0]=[N('<rect x="16" y="5" width="48" height="38" rx="4" fill="white" stroke="#98A1A9" stroke-width="2"></rect><rect x="8" y="13" width="64" height="38" rx="4" fill="white" stroke="#98A1A9" stroke-width="2"></rect><rect x="2" y="21" width="76" height="54" rx="4" fill="white" stroke="#98A1A9" stroke-width="2"></rect><path d="M40 63C48.2843 63 55 56.2843 55 48C55 39.7157 48.2843 33 40 33C31.7157 33 25 39.7157 25 48C25 56.2843 31.7157 63 40 63Z" stroke="#98A1A9" stroke-width="2" stroke-miterlimit="10" stroke-linecap="square"></path><path d="M45.3466 44.0057H43.3295C43.2301 43.3807 43.0099 42.8196 42.6761 42.3366L44.8423 42.3438L45.3608 40.4545H35.9716L35.4176 42.6491H38.0881C39.4588 42.6491 40.2614 43.1605 40.5881 44.0057H35.929L35.4176 45.8665H40.6591C40.3608 46.8466 39.4872 47.4432 38.0881 47.4432H35.6307L35.6378 49.0199L40.6094 55H43.571V54.8722L39.0824 49.3679L39.1676 49.3395C41.7528 48.9986 43.017 47.7273 43.3224 45.8665H44.8423L45.3466 44.0057Z" fill="#98A1A9"></path>',5)]))}const ee=M(Q,[["render",G]]),te={class:"m-4"},le={key:0,class:"flex justify-center"},ae={key:1},ne={key:0,class:"mx-auto grid grid-cols-1 gap-2 md:grid-cols-3"},se={key:1},oe={class:"mt-7 flex flex-col items-center justify-center"},re={class:"mb-4"},ie={class:"mb-4"},de={class:"mb-8"},ue={class:"grid grid-cols-2 gap-2"},pe={class:"mb-3.5 flex w-full items-stretch"},ce={class:"mr-3 flex h-6 w-6 items-center justify-center rounded-full bg-gray-100 text-xs"},fe={class:"w-full"},ve={__name:"MarketplaceAppPricing",props:{app:Object},setup(p){var V;const o=U(!1),t=F({price_inr:0,price_usd:0,features:[""],plan_title:"",enabled:!0}),x=p,c=w({url:"press.api.marketplace.get_app_plans",params:{app:(V=x.app)==null?void 0:V.name,include_disabled:!0},auto:!0}),g=w({url:"press.api.marketplace.update_app_plan",onSuccess(){h()}}),b=w({url:"press.api.marketplace.create_app_plan",validate(){if(!t.plan_title)return"Plan name is required"},onSuccess(){h()}});function y(r){r&&(Object.assign(t,r),t.enabled=!!r.enabled,t.features=Array.from(r.features)),o.value=!0}function $(){t.features.push("")}function D(r){t.features.splice(r,1)}function I(){var r;t.name?g.submit({app_plan_name:t.name,updated_plan_data:t}):b.submit({plan_data:t,marketplace_app:(r=x.app)==null?void 0:r.name})}function h(){c.fetch(),o.value=!1,C()}function C(){Object.assign(t,{price_inr:0,price_usd:0,features:[""],plan_title:"",enabled:!0}),g.error=null,b.error=null}return(r,e)=>{const f=q,j=z,v=Y,P=T,H=X;return s(),u("div",null,[n(j,{title:"Pricing Plans",subtitle:"Set up pricing plans for this app"},O({default:d(()=>[l("div",te,[i(c).loading?(s(),u("div",le,[n(f,{loading:!0},{default:d(()=>e[7]||(e[7]=[_("Loading")])),_:1})])):i(c).data?(s(),u("div",ae,[i(c).data.length>0?(s(),u("div",ne,[(s(!0),u(L,null,B(i(c).data,a=>(s(),S(J,{plan:a,key:a.name,clickable:!1,editable:!0,onBeginEdit:m=>y(a)},null,8,["plan","onBeginEdit"]))),128))])):(s(),u("div",se,[l("div",oe,[n(ee,{class:"mb-5 h-20 w-20"}),e[9]||(e[9]=l("p",{class:"mb-1 text-2xl font-semibold text-gray-900"}," Create a plan ",-1)),e[10]||(e[10]=l("p",{class:"mb-3.5 text-base text-gray-700"}," Looks like you haven't created any plans yet ",-1)),n(f,{variant:"solid",onClick:e[0]||(e[0]=a=>y())},{default:d(()=>e[8]||(e[8]=[_("Create plan")])),_:1})])]))])):E("",!0)])]),_:2},[i(c).data&&0<i(c).data.length?{name:"actions",fn:d(()=>[n(f,{onClick:e[1]||(e[1]=a=>y())},{default:d(()=>e[11]||(e[11]=[_("New Plan")])),_:1})]),key:"0"}:void 0]),1024),n(H,{options:{title:"Edit Plan"},modelValue:o.value,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value=a)},{"body-content":d(()=>[l("div",null,[l("div",re,[Z(l("input",{type:"checkbox",id:"enabled-checkbox",class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500","onUpdate:modelValue":e[2]||(e[2]=a=>t.enabled=a)},null,512),[[R,t.enabled]]),e[12]||(e[12]=l("label",{for:"enabled-checkbox",class:"ml-1 text-sm text-gray-900"}," Enabled ",-1))]),l("div",ie,[n(v,{placeholder:"My Pro Plan",label:"Name",modelValue:t.plan_title,"onUpdate:modelValue":e[3]||(e[3]=a=>t.plan_title=a)},null,8,["modelValue"])]),l("div",de,[e[13]||(e[13]=l("h3",{class:"mb-4 text-lg font-semibold"},"Subscription Price",-1)),l("div",ue,[n(v,{label:"Price INR",modelValue:t.price_inr,"onUpdate:modelValue":e[4]||(e[4]=a=>t.price_inr=a)},null,8,["modelValue"]),n(v,{label:"Price USD",modelValue:t.price_usd,"onUpdate:modelValue":e[5]||(e[5]=a=>t.price_usd=a)},null,8,["modelValue"])])]),l("div",null,[e[15]||(e[15]=l("h3",{class:"mb-4 text-lg font-semibold"},"Features",-1)),l("div",null,[(s(!0),u(L,null,B(t.features,(a,m)=>(s(),u("div",pe,[l("div",ce,K(m+1),1),l("div",fe,[n(v,{class:"w-full",modelValue:t.features[m],"onUpdate:modelValue":A=>t.features[m]=A},null,8,["modelValue","onUpdate:modelValue"])]),m>0?(s(),S(f,{key:0,class:"ml-3 rounded-full",icon:"x",onClick:A=>D(m)},null,8,["onClick"])):E("",!0)]))),256))]),l("div",null,[n(f,{"icon-left":"plus",onClick:$},{default:d(()=>e[14]||(e[14]=[_("Add")])),_:1})]),l("div",null,[n(P,{class:"mt-3",message:i(g).error},null,8,["message"]),n(P,{class:"mt-3",message:i(b).error},null,8,["message"])])])])]),actions:d(()=>[n(f,{class:"w-full",variant:"solid",loading:i(g).loading||i(b).loading,onClick:I,onClose:C},{default:d(()=>e[16]||(e[16]=[_("Save")])),_:1},8,["loading"])]),_:1},8,["modelValue"])])}}};export{ve as default};
//# sourceMappingURL=MarketplaceAppPricing-_V3gpldP.js.map
