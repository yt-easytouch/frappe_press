import{av as B,q as l,o as c,j as u,h as G,u as w,t as f,Z as x,w as R,n as k,X as A,aB as b,V as m,ax as D,x as v,r as C,F as y,v as _,A as N}from"./main-Dpl-JOF2.js";(function(){try{var o=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},n=new Error().stack;n&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[n]="5bcc150b-a90b-4719-982d-184855736a0c",o._sentryDebugIdIdentifier="sentry-dbid-5bcc150b-a90b-4719-982d-184855736a0c")}catch(t){}})();{var p=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};p._sentryModuleMetadata=p._sentryModuleMetadata||{},p._sentryModuleMetadata[new Error().stack]=Object.assign({},p._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const L={class:"flex items-center justify-between gap-1"},$={class:"text-base font-medium"},S={class:"mt-1 text-p-base text-gray-600"},q={__name:"ReleaseGroupActionCell",props:{benchName:{type:String,required:!0},actionLabel:{type:String,required:!0},method:{type:String,required:!0},description:{type:String,required:!0},buttonLabel:{type:String,required:!0},group:{type:String,required:!1}},setup(o){const n=o,t=B("Release Group",n.benchName);function i(r){const e={"Rename Bench Group":g,"Transfer Bench Group":d,"Drop Bench Group":h};e[r]&&e[r].call(this)}function g(){b({title:"Rename Bench Group",fields:[{label:"Enter new bench group name",fieldname:"newBenchName"}],onSuccess({hide:r,values:e}){e.newBenchName?m.promise(t.setValue.submit({title:e.newBenchName},{onSuccess(){r()}}),{loading:"Renaming bench group...",success:"Bench group renamed successfully",error:"Failed to rename bench group"}):m.error("Please enter a valid bench group name")}})}function d(){b({title:"Transfer Bench Group Ownership",fields:[{label:"Enter email address of the team for transfer of bench group ownership",fieldname:"email"},{label:"Reason for transfer",fieldname:"reason",type:"textarea"}],primaryAction:{label:"Transfer",variant:"solid",onClick:({hide:r,values:e})=>{if(!e.email)throw new Error("Please enter a valid email address");return t.sendTransferRequest.submit({team_mail_id:e.email,reason:e.reason||""}).then(()=>{r(),m.success(`Transfer request sent to ${e.email} successfully.`)})}}})}function h(){b({title:"Drop Bench Group",message:`Are you sure you want to drop the bench group <b>${t.doc.title||t.name}</b>?`,fields:[{label:"Please type the bench group name to confirm",fieldname:"confirmBenchName"}],primaryAction:{label:"Drop",theme:"red",onClick:({hide:r,values:e})=>{if(!t.delete.loading){if(e.confirmBenchName!==t.doc.title)throw new Error("Bench group name does not match");m.promise(t.delete.submit(null,{onSuccess:()=>{r(),D.push({name:"Release Group List"})}}),{loading:"Dropping bench group...",success:"Bench group dropped successfully",error:s=>s.messages.length?s.messages.join(`
`):"Failed to drop bench group"})}}}})}return(r,e)=>{var a;const s=A;return c(),l("div",L,[u("div",null,[u("h3",$,f(n.actionLabel),1),u("p",S,f(n.description),1)]),(a=x(t))!=null&&a.doc?(c(),G(s,{key:0,class:"whitespace-nowrap",onClick:e[0]||(e[0]=I=>i(n.actionLabel))},{default:R(()=>[u("p",{class:k(o.group==="Dangerous Actions"?"text-red-600":"text-gray-800")},f(n.buttonLabel),3)]),_:1})):w("",!0)])}}},E={props:["releaseGroup"],components:{ReleaseGroupActionCell:q},computed:{$releaseGroup(){return B("Release Group",this.releaseGroup)},actions(){const o=this.$releaseGroup.doc.actions.reduce((n,t)=>{const i=t.group||"General Actions";return n[i]||(n[i]=[]),n[i].push(t),n},{});return Object.keys(o).map(n=>({group:n,actions:o[n]}))}}},T={key:0,class:"mx-auto max-w-3xl space-y-4"},V={class:"pb-3 text-lg font-semibold"};function j(o,n,t,i,g,d){var r,e;const h=C("ReleaseGroupActionCell");return(e=(r=d.$releaseGroup)==null?void 0:r.doc)!=null&&e.actions?(c(),l("div",T,[(c(!0),l(y,null,_(d.actions,s=>(c(),l("div",{key:s.group,class:"divide-y rounded border border-gray-200 p-5"},[u("div",V,f(s.group),1),(c(!0),l(y,null,_(s.actions,a=>(c(),l("div",{class:"py-3 first:pt-0 last:pb-0",key:a.action},[N(h,{benchName:t.releaseGroup,group:s.group,actionLabel:a.action,method:a.doc_method,description:a.description,buttonLabel:a.button_label},null,8,["benchName","group","actionLabel","method","description","buttonLabel"])]))),128))]))),128))])):w("",!0)}const P=v(E,[["render",j]]);export{P as default};
//# sourceMappingURL=ReleaseGroupActions-BYi5a0Fk.js.map
