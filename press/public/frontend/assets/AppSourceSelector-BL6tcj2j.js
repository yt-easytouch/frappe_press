import{x as y,q as c,o as p,F as g,v as b,n as w,j as i,A as u,t as d,w as m,X as A,C as x}from"./main-Dpl-JOF2.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},t=new Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2883bd73-d4cd-4045-ad27-8cb1f922f05a",e._sentryDebugIdIdentifier="sentry-dbid-2883bd73-d4cd-4045-ad27-8cb1f922f05a")}catch(s){}})();{var a=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};a._sentryModuleMetadata=a._sentryModuleMetadata||{},a._sentryModuleMetadata[new Error().stack]=Object.assign({},a._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const v={name:"AppSourceSelector",props:["apps","modelValue","multiple"],emits:["update:modelValue"],methods:{toggleApp(e){let t=o=>({app:o.name,source:o.source});if(!this.multiple){let o=this.apps.find(l=>l.name===e);this.$emit("update:modelValue",t(o));return}let s=Object.assign({},this.selectedAppsMap);s[e]?s[e]=!1:s[e]=!0;let r=this.apps.filter(o=>s[o.name]).map(t);this.$emit("update:modelValue",r)},isAppSelected(e){return this.multiple?this.selectedAppsMap[e.name]:this.modelValue&&this.modelValue.app===e.name},dropdownItems(e){return e.sources.map(t=>({label:`${t.repository_owner}/${t.repository}:${t.branch}`,onClick:()=>this.selectSource(e,t)}))},selectSource(e,t){if(e.source=t,this.multiple){let s=this.modelValue.map(r=>e.name===r.app?{app:e.name,source:t}:r);this.$emit("update:modelValue",s)}else this.$emit("update:modelValue",{app:e.name,source:t})}},computed:{selectedAppsMap(){if(!this.multiple)return{};let e={},t=this.modelValue.map(s=>s.app);for(let s of this.apps)e[s.name]=t.includes(s.name);return e}}},V={class:"space-y-3 max-h-96 overflow-auto px-4"},k=["onClick"],$={class:"ml-1 flex items-center justify-between text-left text-base"},I={class:"font-semibold"},S={class:"text-gray-700"};function C(e,t,s,r,o,l){const f=A,_=x;return p(),c("div",V,[(p(!0),c(g,null,b(s.apps,n=>(p(),c("button",{class:w(["block w-full cursor-pointer rounded-md border px-4 py-3 text-left shadow ring-inset focus:outline-none",l.isAppSelected(n)?"bg-gray-50 ring-2 ring-gray-600":"cursor-pointer hover:border-gray-300"]),key:n.name,onClick:h=>l.toggleApp(n.name)},[i("div",$,[i("div",null,[i("div",I,d(n.title),1),i("div",S,d(n.source.repository_owner)+"/"+d(n.source.repository),1)]),u(_,{options:l.dropdownItems(n),right:""},{default:m(({open:h})=>[u(f,{type:"white","icon-right":"chevron-down"},{default:m(()=>[i("span",null,d(n.source.branch),1)]),_:2},1024)]),_:2},1032,["options"])])],10,k))),128))])}const M=y(v,[["render",C]]);export{M as _};
//# sourceMappingURL=AppSourceSelector-BL6tcj2j.js.map
