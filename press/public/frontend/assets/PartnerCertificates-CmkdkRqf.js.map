{"version":3,"file":"PartnerCertificates-CmkdkRqf.js","sources":["../../../../dashboard/src2/components/partners/PartnerCertificateRequest.vue","../../../../dashboard/src2/components/partners/PartnerCertificates.vue"],"sourcesContent":["<template>\n\t<div>\n\t\t<Dialog\n\t\t\t:show=\"show\"\n\t\t\tv-model=\"show\"\n\t\t\t:options=\"{ title: 'Apply for Certification' }\"\n\t\t>\n\t\t\t<template #body-content>\n\t\t\t\t<p class=\"pb-3 text-p-base\">\n\t\t\t\t\tEnter the details to apply for a certificate.\n\t\t\t\t</p>\n\t\t\t\t<FormControl\n\t\t\t\t\tclass=\"py-2\"\n\t\t\t\t\tname=\"certificate_type\"\n\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t:options=\"courseTypes\"\n\t\t\t\t\tlabel=\"Certificate Type\"\n\t\t\t\t\tv-model=\"certificateType\"\n\t\t\t\t/>\n\t\t\t\t<FormControl\n\t\t\t\t\tclass=\"pt-2\"\n\t\t\t\t\tname=\"member_name\"\n\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t:options=\"memberList\"\n\t\t\t\t\tlabel=\"Member Name\"\n\t\t\t\t\tv-model=\"userName\"\n\t\t\t\t/>\n\n\t\t\t\t<div class=\"pt-4\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclass=\"w-full\"\n\t\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t\tlabel=\"Apply for Certificate\"\n\t\t\t\t\t\t@click=\"applyForCertificate.submit()\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</Dialog>\n\t</div>\n</template>\n\n<script setup>\nimport { defineEmits, onMounted, ref } from 'vue';\nimport { createResource } from 'frappe-ui';\nimport { getTeam } from '../../data/team';\n\nconst courseTypes = [\n\t{ label: 'Framework', value: 'frappe-developer-certification' },\n\t{ label: 'ERPNext', value: 'erpnext-distribution' },\n];\nconst show = ref(true);\n\nconst team = getTeam();\nconst memberList = ref([]);\nconst getMembers = async () => {\n\tlet members = await team.getTeamMembers.submit();\n\tmemberList.value = members.map((member) => {\n\t\treturn { label: member.full_name, value: member.name };\n\t});\n};\nonMounted(() => {\n\tgetMembers();\n});\n\nconst userName = ref('');\nconst certificateType = ref('');\nconst applyForCertificate = createResource({\n\turl: 'press.api.partner.apply_for_certificate',\n\tmakeParams: () => {\n\t\treturn {\n\t\t\tmember_name: userName.value,\n\t\t\tcertificate_type: certificateType.value,\n\t\t};\n\t},\n\tvalidate: () => {\n\t\tif (!userName.value || !certificateType.value) {\n\t\t\tthrow new Error('Please select a member and certificate type');\n\t\t}\n\t},\n\tonSuccess: () => {\n\t\tshow.value = false;\n\t\temit('success');\n\t},\n\tonError: (error) => {\n\t\tconsole.error(error);\n\t},\n});\n\nconst emit = defineEmits(['success']);\n</script>\n","<template>\n\t<div class=\"p-5\">\n\t\t<ObjectList :options=\"partnerCertificatesList\" />\n\t</div>\n</template>\n\n<script>\nimport { h } from 'vue';\nimport { FeatherIcon, Tooltip } from 'frappe-ui';\nimport { icon, renderDialog } from '../../utils/components';\nimport ObjectList from '../ObjectList.vue';\nimport PartnerCertificateRequest from './PartnerCertificateRequest.vue';\nexport default {\n\tname: 'PartnerCertificates',\n\tcomponents: {\n\t\tObjectList,\n\t\tPartnerCertificateRequest,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshowApplyForCertificateDialog: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tpartnerCertificatesList() {\n\t\t\treturn {\n\t\t\t\tdoctype: 'Partner Certificate',\n\t\t\t\tfields: ['free', 'certificate_link'],\n\t\t\t\tcolumns: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Member Name',\n\t\t\t\t\t\tfieldname: 'partner_member_name',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Member Email',\n\t\t\t\t\t\tfieldname: 'partner_member_email',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Issued On',\n\t\t\t\t\t\tfieldname: 'issue_date',\n\t\t\t\t\t\tformat(value) {\n\t\t\t\t\t\t\treturn Intl.DateTimeFormat('en-US', {\n\t\t\t\t\t\t\t\tyear: 'numeric',\n\t\t\t\t\t\t\t\tmonth: 'long',\n\t\t\t\t\t\t\t\tday: 'numeric',\n\t\t\t\t\t\t\t}).format(new Date(value));\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Course',\n\t\t\t\t\t\tfieldname: 'course',\n\t\t\t\t\t\tformat(value) {\n\t\t\t\t\t\t\treturn value == 'frappe-developer-certification'\n\t\t\t\t\t\t\t\t? 'Framework'\n\t\t\t\t\t\t\t\t: 'ERPNext';\n\t\t\t\t\t\t},\n\t\t\t\t\t\twidth: 0.6,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Version',\n\t\t\t\t\t\tfieldname: 'version',\n\t\t\t\t\t\twidth: 0.5,\n\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Free',\n\t\t\t\t\t\tfieldname: 'free',\n\t\t\t\t\t\ttype: 'Component',\n\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\twidth: 0.4,\n\t\t\t\t\t\tcomponent({ row }) {\n\t\t\t\t\t\t\tif (row.free) {\n\t\t\t\t\t\t\t\treturn h(\n\t\t\t\t\t\t\t\t\tTooltip,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttext: 'Free Certification',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\th(FeatherIcon, {\n\t\t\t\t\t\t\t\t\t\t\tname: 'check-circle',\n\t\t\t\t\t\t\t\t\t\t\tclass: 'h-4 w-4 text-green-600',\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Certificate Link',\n\t\t\t\t\t\ttype: 'Button',\n\t\t\t\t\t\talign: 'center',\n\t\t\t\t\t\tButton({ row }) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tlabel: 'View',\n\t\t\t\t\t\t\t\tslots: {\n\t\t\t\t\t\t\t\t\tprefix: icon('external-link'),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonClick: (e) => {\n\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\twindow.open(row.certificate_link);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tprimaryAction() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tlabel: 'Apply for Certification',\n\t\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\t\tslots: {\n\t\t\t\t\t\t\tprefix: icon('plus'),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdisabled: true,\n\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\trenderDialog(\n\t\t\t\t\t\t\t\th(PartnerCertificateRequest, {\n\t\t\t\t\t\t\t\t\tshow: true,\n\t\t\t\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\t\t\t\tconsole.log('success');\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tfilters: {\n\t\t\t\t\tteam: this.$team.doc.name,\n\t\t\t\t},\n\t\t\t\torderBy: 'creation desc',\n\t\t\t};\n\t\t},\n\t},\n};\n</script>\n"],"names":["courseTypes","show","ref","team","getTeam","memberList","getMembers","__async","members","member","onMounted","userName","certificateType","applyForCertificate","createResource","emit","error","__emit","_sfc_main","value","row","h","Tooltip","FeatherIcon","e","icon","_hoisted_1","_openBlock","_createElementBlock"],"mappings":"unCA8CA,MAAAA,EAAA,CACA,CAAA,MAAA,YAAA,MAAA,gCAAA,EACA,CAAA,MAAA,UAAA,MAAA,sBAAA,CACA,EACAC,EAAAC,EAAA,EAAA,EAEAC,EAAAC,EAAA,EACAC,EAAAH,EAAA,EAAA,EACAI,EAAA,IAAAC,EAAA,sBACA,IAAAC,EAAA,MAAAL,EAAA,eAAA,OAAA,EACAE,EAAA,MAAAG,EAAA,IAAAC,IACA,CAAA,MAAAA,EAAA,UAAA,MAAAA,EAAA,IAAA,EACA,CACA,GACAC,EAAA,IAAA,CACAJ,EAAA,CACA,CAAA,EAEA,MAAAK,EAAAT,EAAA,EAAA,EACAU,EAAAV,EAAA,EAAA,EACAW,EAAAC,EAAA,CACA,IAAA,0CACA,WAAA,KACA,CACA,YAAAH,EAAA,MACA,iBAAAC,EAAA,KACA,GAEA,SAAA,IAAA,CACA,GAAA,CAAAD,EAAA,OAAA,CAAAC,EAAA,MACA,MAAA,IAAA,MAAA,6CAAA,CAEA,EACA,UAAA,IAAA,CACAX,EAAA,MAAA,GACAc,EAAA,SAAA,CACA,EACA,QAAAC,GAAA,CACA,QAAA,MAAAA,CAAA,CACA,CACA,CAAA,EAEAD,EAAAE,o0BC5EAC,EAAA,kFAMC,MAAA,CACC,MAAA,CACC,8BAAA,KAGF,SAAA,2BAEE,MAAA,+BAEC,OAAA,CAAA,OAAA,kBAAA,EACA,QAAA,CACC,CACC,MAAA,cACA,UAAA,uBAED,CACC,MAAA,eACA,UAAA,wBAED,CACC,MAAA,6CAGC,OAAA,KAAA,eAAA,QAAA,CACC,KAAA,6DAMH,CACC,MAAA,SACA,UAAA,mBAEC,OAAAC,GAAA,wDAID,MAAA,IAED,CACC,MAAA,UACA,UAAA,UACA,MAAA,GACA,MAAA,UAED,cAEC,UAAA,OACA,KAAA,YACA,MAAA,SACA,MAAA,GACA,UAAA,CAAA,IAAAC,GAAA,WAEE,OAAAC,EACCC,EACA,4BAGA,IACCD,EAAAE,EAAA,CACC,KAAA,6CAED,CAAA,KAKL,wCAGC,MAAA,yBAEC,MAAA,cAEC,MAAA,wCAICC,EAAA,gBAAA,EACA,OAAA,KAAAJ,EAAA,gBAAA,OAML,eAAA,CACC,MAAA,iCAEC,QAAA,QACA,MAAA,CACC,OAAAK,EAAA,MAAA,mCAME,KAAA,GACA,UAAA,IAAA,wBAGD,CAAA,MAKJ,QAAA,qDAOJ,EAlIMC,EAAA,CAAA,MAAA,KAAA,kDAAL,OAAAC,EAAA,EAAAC,EAAA,MAAAF,EAAA"}