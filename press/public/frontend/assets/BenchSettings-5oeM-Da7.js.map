{"version":3,"file":"BenchSettings-5oeM-Da7.js","sources":["../../../../dashboard/src/views/bench/BenchRegions.vue","../../../../dashboard/src/views/bench/BenchDependencies.vue","../../../../dashboard/src/views/bench/BenchSettings.vue"],"sourcesContent":["<template>\n\t<Card\n\t\ttitle=\"Regions\"\n\t\tsubtitle=\"Regions available for your bench\"\n\t\t:loading=\"$resources.regions.loading\"\n\t>\n\t\t<template #actions>\n\t\t\t<Button\n\t\t\t\tv-if=\"showAddRegionButton\"\n\t\t\t\t@click=\"\n\t\t\t\t\t!$resources.availableRegions.data\n\t\t\t\t\t\t? $resources.availableRegions.fetch()\n\t\t\t\t\t\t: null;\n\t\t\t\t\tshowAddRegionDialog = true;\n\t\t\t\t\"\n\t\t\t>\n\t\t\t\tAdd Region\n\t\t\t</Button>\n\t\t</template>\n\n\t\t<div class=\"divide-y\">\n\t\t\t<ListItem\n\t\t\t\tv-for=\"region in $resources.regions.data\"\n\t\t\t\t:key=\"region.name\"\n\t\t\t\t:title=\"region.title\"\n\t\t\t\t:image=\"region.image\"\n\t\t\t>\n\t\t\t</ListItem>\n\t\t</div>\n\n\t\t<Dialog\n\t\t\t:options=\"{ title: 'Select secondary region for your bench' }\"\n\t\t\tv-model=\"showAddRegionDialog\"\n\t\t>\n\t\t\t<template v-slot:body-content>\n\t\t\t\t<LoadingText class=\"py-2\" v-if=\"$resources.availableRegions.loading\" />\n\n\t\t\t\t<RichSelect\n\t\t\t\t\t:value=\"selectedRegion\"\n\t\t\t\t\t@change=\"selectedRegion = $event\"\n\t\t\t\t\t:options=\"regionOptions\"\n\t\t\t\t/>\n\t\t\t</template>\n\n\t\t\t<template #actions>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\tclass=\"w-full\"\n\t\t\t\t\tv-if=\"selectedRegion\"\n\t\t\t\t\t:loading=\"$resources.addRegion.loading\"\n\t\t\t\t\t@click=\"\n\t\t\t\t\t\t$resources.addRegion.submit({\n\t\t\t\t\t\t\tname: benchName,\n\t\t\t\t\t\t\tregion: selectedRegion\n\t\t\t\t\t\t})\n\t\t\t\t\t\"\n\t\t\t\t>\n\t\t\t\t\tAdd\n\t\t\t\t</Button>\n\t\t\t</template>\n\t\t</Dialog>\n\t</Card>\n</template>\n\n<script>\nimport RichSelect from '@/components/RichSelect.vue';\n\nexport default {\n\tname: 'BenchRegions',\n\tprops: ['benchName'],\n\tcomponents: { RichSelect },\n\tdata() {\n\t\treturn {\n\t\t\tselectedRegion: null,\n\t\t\tshowAddRegionDialog: false\n\t\t};\n\t},\n\tresources: {\n\t\tregions() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.bench.regions',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.benchName\n\t\t\t\t},\n\t\t\t\tauto: true\n\t\t\t};\n\t\t},\n\t\tavailableRegions() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.bench.available_regions',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.benchName\n\t\t\t\t},\n\t\t\t\tauto: true,\n\t\t\t\tonSuccess(availableRegions) {\n\t\t\t\t\tif (availableRegions.length)\n\t\t\t\t\t\tthis.selectedRegion = availableRegions[0].name;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\taddRegion() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.bench.add_region',\n\t\t\t\tonSuccess() {\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tcomputed: {\n\t\tregionOptions() {\n\t\t\tlet availableRegions = this.$resources.availableRegions.data;\n\t\t\treturn availableRegions\n\t\t\t\t? availableRegions.map(d => ({\n\t\t\t\t\t\tlabel: d.title,\n\t\t\t\t\t\tvalue: d.name,\n\t\t\t\t\t\timage: d.image,\n\t\t\t\t\t\tbeta: d.beta\n\t\t\t\t  }))\n\t\t\t\t: [];\n\t\t},\n\t\tshowAddRegionButton() {\n\t\t\tlet regions = this.$resources.regions.data;\n\t\t\treturn regions && regions.length < 2;\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<Card\n\t\ttitle=\"Dependencies\"\n\t\tsubtitle=\"Update dependencies for your bench\"\n\t\t:loading=\"$resources.dependencies.loading\"\n\t>\n\t\t<template #actions>\n\t\t\t<Button\n\t\t\t\tv-if=\"isDirty\"\n\t\t\t\tlabel=\"Update\"\n\t\t\t\t@click=\"$resources.updateDependencies.submit()\"\n\t\t\t\t:loading=\"$resources.updateDependencies.loading\"\n\t\t\t/>\n\t\t</template>\n\t\t<FormControl\n\t\t\tv-for=\"dependency in activeDependencies\"\n\t\t\t:key=\"dependency.key\"\n\t\t\ttype=\"select\"\n\t\t\tv-model=\"dependency.value\"\n\t\t\t:options=\"dependencySelectOptions(dependency.key)\"\n\t\t\t:value=\"dependency.value\"\n\t\t\t:label=\"dependencies.dependency_title[dependency.key]\"\n\t\t\tclass=\"mx-0.5 my-2\"\n\t\t\t@input=\"isDirty = true\"\n\t\t/>\n\t\t<p\n\t\t\tv-if=\"dependencies.update_available\"\n\t\t\tclass=\"ml-0.5 mt-2.5 text-base text-red-600\"\n\t\t>\n\t\t\tThe changes will take effect in your next bench deploy.\n\t\t</p>\n\t</Card>\n</template>\n\n<script>\nimport { notify } from '@/utils/toast';\n\nexport default {\n\tname: 'BenchDependencies',\n\tprops: ['benchName'],\n\tdata() {\n\t\treturn {\n\t\t\tisDirty: false\n\t\t};\n\t},\n\tresources: {\n\t\tdependencies() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.bench.dependencies',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.benchName\n\t\t\t\t},\n\t\t\t\tauto: true,\n\t\t\t\tinitialData: []\n\t\t\t};\n\t\t},\n\t\tupdateDependencies() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.bench.update_dependencies',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.benchName,\n\t\t\t\t\tdependencies: JSON.stringify(this.dependencies.active_dependencies)\n\t\t\t\t},\n\t\t\t\tvalidate() {\n\t\t\t\t\tif (!this.isDirty) return 'No changes made';\n\t\t\t\t},\n\t\t\t\tonSuccess() {\n\t\t\t\t\tthis.isDirty = false;\n\t\t\t\t},\n\t\t\t\tonError(err) {\n\t\t\t\t\tnotify({\n\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\tmessage: (err.messages || err.message.split('_')).join(', '),\n\t\t\t\t\t\ticon: 'x',\n\t\t\t\t\t\tcolor: 'red'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tcomputed: {\n\t\tdependencies() {\n\t\t\treturn this.$resources.dependencies.data;\n\t\t},\n\t\tactiveDependencies() {\n\t\t\treturn this.dependencies.active_dependencies.filter(\n\t\t\t\tdependency =>\n\t\t\t\t\t!this.dependencies.internal_dependencies.includes(dependency.key)\n\t\t\t);\n\t\t}\n\t},\n\tmethods: {\n\t\tdependencySelectOptions(dependency) {\n\t\t\tlet versions_for_specific_package =\n\t\t\t\tthis.dependencies.supported_dependencies.filter(\n\t\t\t\t\tdep => dep.key === dependency\n\t\t\t\t);\n\t\t\treturn versions_for_specific_package.map(dep => ({\n\t\t\t\tlabel: dep.value,\n\t\t\t\tvalue: dep.value\n\t\t\t}));\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<div class=\"grid grid-cols-1 gap-5 sm:grid-cols-2\">\n\t\t<Tags\n\t\t\tv-if=\"bench\"\n\t\t\t:name=\"benchName\"\n\t\t\tdoctype=\"Release Group\"\n\t\t\t:resourceTags=\"bench.bench_tags\"\n\t\t\t:tags=\"bench.tags\"\n\t\t/>\n\t\t<BenchRegions :benchName=\"benchName\" />\n\t\t<BenchDependencies :benchName=\"benchName\" />\n\t</div>\n</template>\n\n<script>\nimport Tags from '@/components/Tags.vue';\nimport BenchRegions from './BenchRegions.vue';\nimport BenchDependencies from './BenchDependencies.vue';\n\nexport default {\n\tname: 'BenchSettings',\n\tprops: ['bench', 'benchName'],\n\tcomponents: {\n\t\tTags,\n\t\tBenchDependencies,\n\t\tBenchRegions\n\t}\n};\n</script>\n"],"names":["_sfc_main","availableRegions","regions","_hoisted_1","_ctx","_withCtx","_cache","_createTextVNode","_createCommentVNode","_createElementVNode","$data","$event","$options","notify","dependency","dep","_openBlock","_createElementBlock","_Fragment","_renderList","BenchDependencies","$props"],"mappings":"2+BAmEA,MAAAA,EAAA,CACC,KAAA,eACA,MAAA,CAAA,WAAA,4BAEA,MAAA,CACC,MAAA,CACC,eAAA,yCAKD,SAAA,CACC,MAAA,+BAEC,OAAA,CACC,KAAA,KAAA,WAED,KAAA,KAGF,kBAAA,CACC,MAAA,CACC,IAAA,oCACA,OAAA,CACC,KAAA,KAAA,WAED,KAAA,2BAGE,KAAA,eAAAC,EAAA,CAAA,EAAA,KACF,gBAID,MAAA,CACC,IAAA,iEAGA,EAEF,GAED,SAAA,CACC,eAAA,6CAEC,OAAAA,iEAMG,EAAA,EACF,CAAA,GAEF,qBAAA,CACC,IAAAC,EAAA,KAAA,WAAA,QAAA,KACA,OAAAA,GAAAA,EAAA,OAAA,CACD,CACD,CACD,EA1GOC,EAAA,CAAA,MAAA,UAAA,wEAlBL,MAAA,UACA,SAAA,mCACC,QAAAC,EAAA,WAAA,QAAA,UAEU,QAAAC,EAAA,IAAA,sKANb,QAAAA,EAAA,IAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAAAC,EAAA,cAAA,YAAAC,EAAA,GAAA,EAAA,IAAA,QAAAH,EAAA,IAAA,CAoBEI,EAAA,MAAAN,EAAA,2IAWE,QAAA,CAAA,MAAA,wCAAA,EA/BJ,WAAAO,EAAA,oBAAA,sBAAAJ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAK,GAAAD,EAAA,oBAAAC,KAkCoB,eAAAN,EAAA,IAAA,uDACH,MAAA,UAnCjBG,EAAA,GAAA,EAAA,OAsCM,MAAAE,EAAA,2DAEA,QAAAE,EAAA,6CAIQ,QAAAP,EAAA,IAAA,kCAET,QAAA,QACA,MAAA,SAEC,QAAAD,EAAA,WAAA,UAAA,4GAjDN,QAAAC,EAAA,IAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAAAC,EAAA,OAAA,0BAAAC,EAAA,GAAA,EAAA,6ECqCAR,EAAA,0BAEC,MAAA,CAAA,WAAA,EACA,MAAA,CACC,MAAA,yBAKA,cAAA,CACC,MAAA,CACC,IAAA,+BACA,OAAA,CACC,KAAA,KAAA,WAED,KAAA,oBAIF,oBAAA,CACC,MAAA,CACC,IAAA,sCACA,OAAA,CACC,KAAA,KAAA,UACA,aAAA,KAAA,UAAA,KAAA,aAAA,mBAAA,cAGA,GAAA,CAAA,KAAA,QAAA,MAAA,+BAGA,KAAA,QAAA,eAGAa,EAAA,qEAGC,KAAA,eAED,CAAA,CACD,EAEF,GAED,SAAA,CACC,cAAA,CACC,OAAA,KAAA,WAAA,aAAA,MAED,oBAAA,wDAGG,CAAA,KAAA,aAAA,sBAAA,SAAAC,EAAA,GAAA,EAEH,GAED,QAAA,CACC,wBAAAA,EAAA,+EAME,MAAAC,EAAA,MACA,MAAAA,EAAA,KACD,EAAA,CACD,CACD,CACD,WA5EG,MAAA,kGAzBD,MAAA,eACA,SAAA,qCACC,QAAAX,EAAA,WAAA,aAAA,UAEU,QAAAC,EAAA,IAAA,2BAGT,MAAA,SACC,QAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAK,GAAAP,EAAA,WAAA,mBAAA,OAAA,GACA,QAAAA,EAAA,WAAA,mBAAA,8BAXLI,EAAA,GAAA,EAAA,IAAA,QAAAH,EAAA,IAAA,EAcEW,EAAA,EAAA,EAAAC,EAAAC,EAAA,KAAAC,EAAAP,EAAA,mBAAAE,uBAGC,KAAA,+DAEC,QAAAF,EAAA,wBAAAE,EAAA,GAAA,gBAEA,MAAAF,EAAA,aAAA,iBAAAE,EAAA,GAAA,EACD,MAAA,cACC,QAAAR,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAK,GAAAD,EAAA,QAAA,oFAGKE,EAAA,aAAA,4FA1BTJ,EAAA,GAAA,EAAA,oDCmBAR,EAAA,CACC,KAAA,+DAIC,kBAAAoB,gBAED,CACD,EA1BMjB,EAAA,CAAA,MAAA,uCAAA,iFAAL,OAAAa,EAAA,EAAAC,EAAA,MAAAd,EAAA,yBAGG,KAAAkB,EAAA,UACD,QAAA,2GALHb,EAAA,GAAA,EAAA"}