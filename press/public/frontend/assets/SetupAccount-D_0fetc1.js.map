{"version":3,"file":"SetupAccount-D_0fetc1.js","sources":["../../../../dashboard/src/views/auth/SetupAccount.vue"],"sourcesContent":["<template>\n\t<LoginBox\n\t\tv-if=\"!$resources.validateRequestKey.loading && email\"\n\t\t:title=\"\n\t\t\t!isInvitation\n\t\t\t\t? 'Set up your account'\n\t\t\t\t: `Invitation to join team: ${invitationToTeam}`\n\t\t\"\n\t>\n\t\t<form\n\t\t\tclass=\"flex flex-col\"\n\t\t\t@submit.prevent=\"$resources.setupAccount.submit()\"\n\t\t>\n\t\t\t<div class=\"space-y-4\">\n\t\t\t\t<FormControl\n\t\t\t\t\tv-if=\"oauthSignup == 0\"\n\t\t\t\t\tlabel=\"Email\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t:modelValue=\"email\"\n\t\t\t\t\tdisabled\n\t\t\t\t/>\n\t\t\t\t<template v-if=\"oauthSignup == 0\">\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tlabel=\"First Name\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tv-model=\"firstName\"\n\t\t\t\t\t\tname=\"fname\"\n\t\t\t\t\t\tautocomplete=\"given-name\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tlabel=\"Last Name\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tv-model=\"lastName\"\n\t\t\t\t\t\tname=\"lname\"\n\t\t\t\t\t\tautocomplete=\"family-name\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tv-model=\"password\"\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\tautocomplete=\"new-password\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t\t<FormControl\n\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t:options=\"countries\"\n\t\t\t\t\tv-if=\"!isInvitation\"\n\t\t\t\t\tlabel=\"Country\"\n\t\t\t\t\tv-model=\"country\"\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t\t<Form\n\t\t\t\t\tv-if=\"signupFields.length > 0\"\n\t\t\t\t\t:fields=\"signupFields\"\n\t\t\t\t\tv-model=\"signupValues\"\n\t\t\t\t/>\n\t\t\t\t<div class=\"mt-4 flex items-start\">\n\t\t\t\t\t<label class=\"text-base text-gray-900\">\n\t\t\t\t\t\t<FormControl type=\"checkbox\" v-model=\"termsAccepted\" />\n\t\t\t\t\t\tBy clicking on\n\t\t\t\t\t\t<span>{{ isInvitation ? 'Accept' : 'Create account' }}</span\n\t\t\t\t\t\t>, you accept our\n\t\t\t\t\t\t<Link href=\"https://easytouch.cloud/terms\" target=\"_blank\"\n\t\t\t\t\t\t\t>Terms of Service </Link\n\t\t\t\t\t\t>,\n\t\t\t\t\t\t<Link href=\"https://easytouch.cloud/privacy\" target=\"_blank\">\n\t\t\t\t\t\t\tPrivacy Policy\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t&#38;\n\t\t\t\t\t\t<Link href=\"https://easytouch.cloud/cookie-policy\" target=\"_blank\">\n\t\t\t\t\t\t\tCookie Policy\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ErrorMessage class=\"mt-4\" :message=\"$resources.setupAccount.error\" />\n\t\t\t<Button\n\t\t\t\tclass=\"mt-4\"\n\t\t\t\tvariant=\"solid\"\n\t\t\t\t:loading=\"$resources.setupAccount.loading\"\n\t\t\t>\n\t\t\t\t{{ isInvitation ? 'Accept' : 'Create account' }}\n\t\t\t</Button>\n\t\t</form>\n\t</LoginBox>\n\t<div\n\t\tclass=\"mt-20 px-6 text-center\"\n\t\tv-else-if=\"!$resources.validateRequestKey.loading && !email\"\n\t>\n\t\tVerification link is invalid or expired.\n\t\t<Link to=\"/signup\">Sign up</Link>\n\t\tfor a new account.\n\t</div>\n\t<div v-else></div>\n</template>\n\n<script>\nimport LoginBox from '@/views/partials/LoginBox.vue';\nimport Link from '@/components/Link.vue';\nimport Form from '@/components/Form.vue';\n\nexport default {\n\tname: 'SetupAccount',\n\tcomponents: {\n\t\tLoginBox,\n\t\tLink,\n\t\tForm\n\t},\n\tprops: ['requestKey', 'joinRequest'],\n\tdata() {\n\t\treturn {\n\t\t\temail: null,\n\t\t\tfirstName: null,\n\t\t\tlastName: null,\n\t\t\tpassword: null,\n\t\t\terrorMessage: null,\n\t\t\tuserExists: null,\n\t\t\tinvitationToTeam: null,\n\t\t\tisInvitation: null,\n\t\t\toauthSignup: 0,\n\t\t\tcountry: null,\n\t\t\ttermsAccepted: false,\n\t\t\tinvitedByParentTeam: false,\n\t\t\tcountries: [],\n\t\t\tsaasProduct: null,\n\t\t\tsignupValues: {}\n\t\t};\n\t},\n\tresources: {\n\t\tvalidateRequestKey() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.account.validate_request_key',\n\t\t\t\tparams: {\n\t\t\t\t\tkey: this.requestKey,\n\t\t\t\t\ttimezone: window.Intl\n\t\t\t\t\t\t? Intl.DateTimeFormat().resolvedOptions().timeZone\n\t\t\t\t\t\t: null\n\t\t\t\t},\n\t\t\t\tauto: true,\n\t\t\t\tonSuccess(res) {\n\t\t\t\t\tif (res && res.email) {\n\t\t\t\t\t\tthis.email = res.email;\n\t\t\t\t\t\tthis.firstName = res.first_name;\n\t\t\t\t\t\tthis.lastName = res.last_name;\n\t\t\t\t\t\tthis.country = res.country;\n\t\t\t\t\t\tthis.userExists = res.user_exists;\n\t\t\t\t\t\tthis.invitationToTeam = res.team;\n\t\t\t\t\t\tthis.isInvitation = res.is_invitation;\n\t\t\t\t\t\tthis.invitedByParentTeam = res.invited_by_parent_team;\n\t\t\t\t\t\tthis.oauthSignup = res.oauth_signup;\n\t\t\t\t\t\tthis.countries = res.countries;\n\t\t\t\t\t\tthis.saasProduct = res.product_trial;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tsetupAccount() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.account.setup_account',\n\t\t\t\tparams: {\n\t\t\t\t\tkey: this.requestKey,\n\t\t\t\t\tpassword: this.password,\n\t\t\t\t\tfirst_name: this.firstName,\n\t\t\t\t\tlast_name: this.lastName,\n\t\t\t\t\tcountry: this.country,\n\t\t\t\t\tis_invitation: this.isInvitation,\n\t\t\t\t\tuser_exists: this.userExists,\n\t\t\t\t\tinvited_by_parent_team: this.invitedByParentTeam,\n\t\t\t\t\taccepted_user_terms: this.termsAccepted,\n\t\t\t\t\toauth_signup: this.oauthSignup,\n\t\t\t\t\tsignup_values: this.signupValues\n\t\t\t\t},\n\t\t\t\tonSuccess(res) {\n\t\t\t\t\tif (res) {\n\t\t\t\t\t\tthis.$router.push(res.dashboard_route || '/');\n\t\t\t\t\t}\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tmethods: {\n\t\tshowFormFields() {\n\t\t\tlet show = true;\n\t\t\tshow = !this.userExists;\n\t\t\tshow = this.oauthSignup == 0;\n\t\t\treturn show;\n\t\t}\n\t},\n\tcomputed: {\n\t\tsignupFields() {\n\t\t\tlet fields = this.saasProduct?.signup_fields || [];\n\t\t\treturn fields.map(df => {\n\t\t\t\tif (df.fieldtype == 'Select') {\n\t\t\t\t\tdf.options = df.options\n\t\t\t\t\t\t.split('\\n')\n\t\t\t\t\t\t.map(o => o.trim())\n\t\t\t\t\t\t.filter(Boolean);\n\t\t\t\t}\n\t\t\t\tdf.required = true;\n\t\t\t\treturn df;\n\t\t\t});\n\t\t}\n\t}\n};\n</script>\n"],"names":["_sfc_main","LoginBox","Form","res","show","_a","df","o","_hoisted_1","_hoisted_2","_hoisted_3","_ctx","$data","_withCtx","_cache","_withModifiers","$event","_createElementVNode","_createCommentVNode","_openBlock","_createElementBlock","_Fragment","$options","_createTextVNode","_toDisplayString","_hoisted_4","_hoisted_5"],"mappings":"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"}