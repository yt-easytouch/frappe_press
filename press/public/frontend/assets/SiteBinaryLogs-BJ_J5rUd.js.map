{"version":3,"file":"SiteBinaryLogs-BJ_J5rUd.js","sources":["../../../../dashboard/src/views/site/SiteBinaryLogs.vue"],"sourcesContent":["<template>\n\t<div\n\t\tclass=\"flex items-center justify-center\"\n\t\tv-if=\"$resources.getPlan?.loading\"\n\t>\n\t\t<LoadingText />\n\t</div>\n\t<div v-else-if=\"$resources.getPlan?.data?.monitor_access\">\n\t\t<Card>\n\t\t\t<Report\n\t\t\t\t:filters=\"filters\"\n\t\t\t\t:columns=\"[\n\t\t\t\t\t{ label: 'Timestamp', name: 'timestamp', class: 'w-3/12' },\n\t\t\t\t\t{ label: 'Query', name: 'query', class: 'w-9/12' }\n\t\t\t\t]\"\n\t\t\t\t:data=\"formatData\"\n\t\t\t\ttitle=\"MariaDB Binary Log Report\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tclass=\"px-2 py-2 text-base text-gray-600\"\n\t\t\t\tv-if=\"$resources.binaryLogs.loading\"\n\t\t\t>\n\t\t\t\t<LoadingText />\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclass=\"py-2 text-base text-gray-600\"\n\t\t\t\tv-else-if=\"$resources.binaryLogs.data.length == 0\"\n\t\t\t>\n\t\t\t\tNo data\n\t\t\t</div>\n\t\t\t<Button\n\t\t\t\tv-if=\"$resources.binaryLogs.data && $resources.binaryLogs.data.length\"\n\t\t\t\t:loading=\"$resources.binaryLogs.loading\"\n\t\t\t\tloadingText=\"Loading...\"\n\t\t\t\t@click=\"max_lines += 10\"\n\t\t\t>\n\t\t\t\tLoad more\n\t\t\t</Button>\n\t\t</Card>\n\t</div>\n\t<div class=\"flex justify-center\" v-else>\n\t\t<span class=\"mt-16 text-base text-gray-700\">\n\t\t\tYour plan doesn't support this feature. Please upgrade your plan.\n\t\t</span>\n\t</div>\n</template>\n\n<script>\nimport Report from '@/components/Report.vue';\n\nexport default {\n\tname: 'SiteBinaryLogs',\n\tprops: ['site'],\n\tcomponents: { Report },\n\tdata() {\n\t\treturn {\n\t\t\tfilters: [\n\t\t\t\t{\n\t\t\t\t\tname: 'pattern',\n\t\t\t\t\tlabel: 'Search:',\n\t\t\t\t\ttype: 'text',\n\t\t\t\t\tvalue: this.pattern\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'start_datetime',\n\t\t\t\t\tlabel: 'From:',\n\t\t\t\t\ttype: 'datetime-local',\n\t\t\t\t\tvalue: ''\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'end_datetime',\n\t\t\t\t\tlabel: 'To:',\n\t\t\t\t\ttype: 'datetime-local',\n\t\t\t\t\tvalue: ''\n\t\t\t\t}\n\t\t\t],\n\t\t\ttoday: new Date().toISOString().slice(0, 10),\n\t\t\tmax_lines: 100\n\t\t};\n\t},\n\twatch: {\n\t\tpatternFilter() {\n\t\t\tthis.reset();\n\t\t},\n\t\tstartTime() {\n\t\t\tthis.reset();\n\t\t},\n\t\tendTime() {\n\t\t\tthis.reset();\n\t\t}\n\t},\n\tresources: {\n\t\tbinaryLogs() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.analytics.binary_logs',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site?.name,\n\t\t\t\t\tstart_time: this.startTime || this.today,\n\t\t\t\t\tend_time: this.endTime || this.today,\n\t\t\t\t\tpattern: this.patternFilter,\n\t\t\t\t\tmax_lines: this.max_lines\n\t\t\t\t},\n\t\t\t\tauto: true,\n\t\t\t\tpageLength: 10,\n\t\t\t\tkeepData: true,\n\t\t\t\tinitialData: []\n\t\t\t};\n\t\t},\n\t\tgetPlan() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.current_plan',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site?.name\n\t\t\t\t},\n\t\t\t\tauto: true\n\t\t\t};\n\t\t}\n\t},\n\tmethods: {\n\t\treset() {\n\t\t\tthis.$resources.binaryLogs.reset();\n\t\t}\n\t},\n\tcomputed: {\n\t\tstartTime() {\n\t\t\treturn this.filters[1].value;\n\t\t},\n\t\tendTime() {\n\t\t\treturn this.filters[2].value;\n\t\t},\n\t\tpatternFilter() {\n\t\t\treturn this.filters[0].value;\n\t\t},\n\t\tformatData() {\n\t\t\tlet binaryData = this.$resources.binaryLogs.data;\n\t\t\tlet data = [];\n\t\t\tbinaryData.forEach(row => {\n\t\t\t\tlet timestamp = this.formatDate(\n\t\t\t\t\trow.timestamp,\n\t\t\t\t\t'TIME_24_WITH_SHORT_OFFSET'\n\t\t\t\t);\n\t\t\t\tlet out = [\n\t\t\t\t\t{ name: 'Timestamp', value: timestamp, class: 'w-3/12' },\n\t\t\t\t\t{ name: 'Query', value: row.query, class: 'w-9/12' }\n\t\t\t\t];\n\t\t\t\tdata.push(out);\n\t\t\t});\n\t\t\treturn data;\n\t\t}\n\t}\n};\n</script>\n"],"names":["_sfc_main","Report","_a","binaryData","out","row","data","_openBlock","_createElementBlock","_hoisted_1","_c","_b","_ctx","_hoisted_2","_withCtx","$data","$options","_hoisted_3","_createCommentVNode","_cache","$event","_createTextVNode","_hoisted_5","_createElementVNode"],"mappings":"60BAkDA,MAAAA,EAAA,CACC,KAAA,iBACA,MAAA,CAAA,MAAA,EACA,WAAA,CAAAC,OAAAA,CAAA,EACA,MAAA,CACC,MAAA,CACC,QAAA,CACC,CACC,KAAA,UACA,MAAA,sBAEA,MAAA,KAAA,SAED,CACC,KAAA,+BAEA,KAAA,iBACA,MAAA,IAED,CACC,KAAA,2BAEA,KAAA,iBACA,MAAA,EACD,GAED,MAAA,IAAA,OAAA,YAAA,EAAA,MAAA,EAAA,EAAA,kBAIF,MAAA,CACC,eAAA,yCAMA,SAAA,aAEA,iCAIC,MAAA,CACC,IAAA,kCACA,OAAA,CACC,MAAAC,EAAA,KAAA,OAAA,YAAAA,EAAA,KACA,WAAA,KAAA,WAAA,KAAA,MACA,SAAA,KAAA,SAAA,KAAA,2DAID,KAAA,8CAMF,SAAA,OACC,MAAA,CACC,IAAA,8BACA,OAAA,CACC,MAAAA,EAAA,KAAA,OAAA,YAAAA,EAAA,MAED,KAAA,GAEF,GAED,QAAA,CACC,OAAA,CACC,KAAA,WAAA,WAAA,MAAA,CACD,GAED,SAAA,2CAIC,SAAA,+BAGA,eAAA,4CAIC,IAAAC,EAAA,KAAA,WAAA,WAAA,+BAOC,IAAAC,EAAA,kGAEC,CAAA,KAAA,QAAA,MAAAC,EAAA,MAAA,MAAA,QAAA,GAEDC,EAAA,KAAAF,CAAA,CACD,CAAA,GAED,CACD,CACD,WApJE,MAAA,uDAiBE,MAAA,8CAMA,MAAA,yCAeE,MAAA,gIAvCLG,IAAAC,EAAA,MAAAC,EAAA,UAMgBC,GAAAC,EAAAC,EAAA,WAAA,UAAA,YAAAD,EAAA,OAAA,MAAAD,EAAA,gBAAhBH,IAAAC,EAAA,MAAAK,EAAA,WAPD,QAAAC,EAAA,IAAA,MAUK,QAAAC,EAAA,QACA,QAAA,gGAGA,EACA,KAAAC,EAAA,WACD,MAAA,yFAEDT,IAAAC,EAAA,MAAAS,EAAA,SAQYL,EAAA,WAAA,WAAA,KAAA,QAAA,+BA1BfM,EAAA,GAAA,EAAA,oFAgCK,QAAAN,EAAA,WAAA,WAAA,QACD,YAAA,aACC,QAAAO,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAL,EAAA,WAAA,MAlCL,QAAAD,EAAA,IAAAK,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAAAE,EAAA,aAAA,0BAAAH,EAAA,GAAA,EAAA,cAwCCX,EAAA,EAAAC,EAAA,MAAAc,EAAAH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CACCI,EAAA,OAAA,CAAA,MAAA,+BAAA,EAAA,sEAAA,EAAA"}