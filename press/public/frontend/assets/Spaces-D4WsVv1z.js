import{_ as T,a as B,b as A,c as V}from"./TableHeader-DvqcS5cY.js";import{x as $,r as H,q as a,o as s,u as v,F as y,v as k,j as l,A as o,w as r,t as f,a5 as D,a6 as R,X as U,Y as C,B as Y,a8 as q,h,C as K,a7 as P,ae as X}from"./main-Dpl-JOF2.js";import{_ as J}from"./Alert-COV4XS8q.js";import{_ as Q}from"./Breadcrumbs-yx7M4N4X.js";import{F as W}from"./fuse.basic.esm-KoNXVm3X.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},t=new Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="13738b4a-df5c-4a17-be6e-1555213719a6",e._sentryDebugIdIdentifier="sentry-dbid-13738b4a-df5c-4a17-be6e-1555213719a6")}catch(i){}})();{var b=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};b._sentryModuleMetadata=b._sentryModuleMetadata||{},b._sentryModuleMetadata[new Error().stack]=Object.assign({},b._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const Z={name:"SpacesList",data(){return{recentlyCreatedSites:[]}},props:{spaces:{type:Object,default:()=>{}}}};function G(e,t,i,w,d,_){return null}const ee=$(Z,[["render",G]]),se={name:"CodeServersList",props:{servers:{type:Object,default:()=>{}}}},te={class:"sm:rounded-md sm:border sm:border-gray-100 sm:py-1 sm:px-2 sm:shadow"},ae={key:0,class:"py-2 text-base text-gray-600 sm:px-2"},ne={class:"flex items-center justify-between"},oe={class:"flex items-center justify-between"},le={class:"hover:text-ellipses truncate break-all text-base w-1/3 sm:w-4/12"},re={class:"text-base w-1/3 sm:w-4/12"},ce={class:"text-base w-1/3 sm:w-4/12 hidden sm:block"},ie={class:"hover:text-ellipses truncate break-all hover:w-full"};function de(e,t,i,w,d,_){const p=D,g=H("router-link");return s(),a("div",te,[i.servers&&i.servers.length===0?(s(),a("div",ae," No Code Servers ")):v("",!0),(s(!0),a(y,null,k(i.servers,(c,x)=>(s(),a("div",{class:"py-2",key:c.name},[l("div",ne,[o(g,{to:`/codeservers/${c.name}/overview`,class:"block w-full rounded-md py-2 hover:bg-gray-50 sm:px-2"},{default:r(()=>[l("div",oe,[l("div",le,f(c.name),1),l("div",re,[o(p,{class:"ml-4 hidden md:inline-block",label:c.status,colorMap:e.$badgeStatusColorMap},null,8,["label","colorMap"])]),l("div",ce,[l("div",ie,f(c.title),1)])])]),_:2},1032,["to"])])]))),128))])}const _e=$(se,[["render",de]]),ue={name:"Spaces",components:{SpacesList:ee,CodeServersList:_e,Table:V,TableHeader:A,TableRow:B,TableCell:T},data(){return{searchTerm:"",space_status:"All"}},resources:{spaces(){return{url:"press.api.spaces.spaces",auto:!0,params:{space_filter:{status:this.space_status}},cache:["SpaceList",this.space_status,this.$account.team.name],onSuccess:e=>{this.fuse=new W(e.servers,{keys:["name"]})}}}},methods:{showBillingDialog(){this.$account.hasBillingInfo?this.$router.replace("/codeservers/new"):this.showAddCardDialog=!0},spaceStatusFilterOptions(){return[{label:"All",value:"All"},{label:"Active",value:"Active"},{label:"Broken",value:"Broken"}]},dropdownItems(e){return[{label:"Open",onClick:()=>{window.open(`https://${e.name}`,"_blank")}}]}},computed:{servers(){return this.$resources.spaces.data?this.searchTerm?this.fuse.search(this.searchTerm).map(e=>e.item):this.$resources.spaces.data.servers.map(e=>({name:e.name,status:e.status,route:`/codeservers/${e.name}/overview`})):[]}}},pe={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-5 py-2.5"},me={key:0,class:"mb-2"},fe={class:"mx-5 mt-5"},be={class:"pb-20"},he={class:"flex"},ge={class:"flex w-full space-x-2 pb-4"},ve={key:1,class:"hidden sm:block"},ye={key:2,class:"hidden sm:block"},ke=["src","alt","title"],$e={key:1,class:"text-base text-gray-700"},we={key:3,class:"w-full text-right"},xe={key:4},Se={class:"mt-8 flex items-center justify-center"},Ce={key:1,class:"text-base text-gray-700"};function Te(e,t,i,w,d,_){const p=U,g=Q,c=J,x=Y,S=q,F=A,I=D,j=K,L=T,N=B,E=X,M=V;return s(),a("div",null,[l("header",pe,[o(g,{items:[{label:"Spaces",route:"/spaces"}]},R({_:2},[this.$account.team.enabled?{name:"actions",fn:r(()=>[o(p,{variant:"solid",iconLeft:"plus",label:"Create",class:"ml-2",onClick:_.showBillingDialog},null,8,["onClick"])]),key:"0"}:void 0]),1024)]),e.$account.team.enabled?v("",!0):(s(),a("div",me,[o(c,{title:"Your account is disabled"},{actions:r(()=>[o(p,{variant:"solid",route:"/settings"},{default:r(()=>t[3]||(t[3]=[C(" Enable Account ")])),_:1})]),default:r(()=>[t[4]||(t[4]=C(" Enable your account to start creating spaces "))]),_:1})])),l("div",fe,[l("div",be,[l("div",he,[l("div",ge,[o(S,{label:"Search Spaces",modelValue:d.searchTerm,"onUpdate:modelValue":t[0]||(t[0]=u=>d.searchTerm=u)},{prefix:r(()=>[o(x,{name:"search",class:"w-4 text-gray-600"})]),_:1},8,["modelValue"]),o(S,{label:"Status",class:"mr-8",type:"select",options:_.spaceStatusFilterOptions(),modelValue:d.space_status,"onUpdate:modelValue":t[1]||(t[1]=u=>d.space_status=u)},null,8,["options","modelValue"])])]),o(M,{columns:[{label:"Space Name",name:"name",width:2},{label:"Status",name:"status"},{label:"",name:"actions",width:.5}],rows:_.servers},{default:r(({rows:u,columns:O})=>[o(F,{class:"hidden sm:grid"}),(s(!0),a(y,null,k(u,n=>(s(),h(N,{key:n.name,row:n},{default:r(()=>[(s(!0),a(y,null,k(O,m=>(s(),h(L,null,{default:r(()=>[m.name==="status"?(s(),h(I,{key:0,label:e.$siteStatus(n)},null,8,["label"])):m.name==="plan"?(s(),a("span",ve,f(n.plan?`${e.$planTitle(n.plan)}${n.plan.price_usd>0?"/mo":""}`:""),1)):m.name==="region"?(s(),a("div",ye,[n.server_region_info.image?(s(),a("img",{key:0,class:"h-4",src:n.server_region_info.image,alt:`Flag of ${n.server_region_info.title}`,title:n.server_region_info.title},null,8,ke)):(s(),a("span",$e,f(n.server_region_info.title),1))])):m.name=="actions"?(s(),a("div",we,[o(j,{onClick:t[2]||(t[2]=P(()=>{},["prevent"])),options:_.dropdownItems(n)},{default:r(({open:z})=>[o(p,{variant:z?"subtle":"ghost",icon:"more-horizontal"},null,8,["variant"])]),_:2},1032,["options"])])):(s(),a("span",xe,f(n[m.name]||""),1))]),_:2},1024))),256))]),_:2},1032,["row"]))),128)),l("div",Se,[e.$resources.spaces.loading&&!e.$resources.spaces.data?(s(),h(E,{key:0})):e.$resources.spaces.fetched&&u.length===0?(s(),a("div",Ce," No Spaces ")):v("",!0)])]),_:1},8,["rows"])])])])}const Ie=$(ue,[["render",Te]]);export{Ie as default};
//# sourceMappingURL=Spaces-D4WsVv1z.js.map
