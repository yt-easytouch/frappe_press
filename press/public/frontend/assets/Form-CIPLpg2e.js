import{x as g,q as a,o as r,F as c,v as m,ag as y,ah as b,h as i,u as w,aT as p,a8 as k,a9 as T}from"./main-Dpl-JOF2.js";(function(){try{var e=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},t=new Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="830620a7-c7ec-4a35-a3ca-7f3b52b1caeb",e._sentryDebugIdIdentifier="sentry-dbid-830620a7-c7ec-4a35-a3ca-7f3b52b1caeb")}catch(s){}})();{var o=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};o._sentryModuleMetadata=o._sentryModuleMetadata||{},o._sentryModuleMetadata[new Error().stack]=Object.assign({},o._sentryModuleMetadata[new Error().stack],{"_sentryBundlerPluginAppKey:press-dashboard":!0})}const h={"Asia/Calcutta":"Asia/Kolkata"},q={name:"Form",props:["fields","modelValue"],emits:["update:modelValue"],data(){return{requiredFieldNotSet:[],guessedTimezone:""}},mounted(){this.guessedTimezone=this.guessTimezone()},watch:{fields:{handler(e){let t=e.filter(s=>s.fieldtype==="Select"&&s.fieldname.endsWith("_tz"));for(let s of t)s.options||(s.options=[]),this.guessedTimezone&&s.options.includes(this.guessedTimezone)&&this.onChange(this.guessedTimezone,s)},deep:!0}},methods:{onChange(e,t){this.checkRequired(t,e),this.updateValue(t.fieldname,e)},updateValue(e,t){let s=Object.assign({},this.modelValue,{[e]:t});this.$emit("update:modelValue",s)},checkRequired(e,t){if(e.required)if(t)this.requiredFieldNotSet=this.requiredFieldNotSet.filter(s=>s!==e);else return this.requiredFieldNotSet.push(e),!1;return!0},getBindProps(e){return{label:e.label||e.fieldname,type:this.getInputType(e),options:e.options,name:e.fieldname,modelValue:this.modelValue[e.fieldname],disabled:e.disabled,required:e.required||!1,rows:e.rows,placeholder:e.placeholder,"onUpdate:modelValue":t=>this.onChange(t,e),onBlur:t=>this.checkRequired(e,t)}},getInputType(e){return{Data:"text",Int:"number",Select:"select",Check:"checkbox",Password:"password",Text:"textarea",Date:"date"}[e.fieldtype||"Data"]},guessTimezone(){try{let e=Intl.DateTimeFormat().resolvedOptions().timeZone;return h[e]?h[e]:e}catch(e){return console.error("Couldn't guess timezone",e),null}}}},z={class:"space-y-4"},F={key:0,class:"flex space-x-4"};function I(e,t,s,x,_,d){const u=k,f=T;return r(),a("div",z,[(r(!0),a(c,null,m(s.fields,n=>y((r(),a("div",{key:n.fieldname},[Array.isArray(n)?(r(),a("div",F,[(r(!0),a(c,null,m(n,l=>(r(),i(u,p({ref_for:!0},d.getBindProps(l),{key:l.fieldname,class:"w-full"}),null,16))),128))])):(r(),i(u,p({key:1,ref_for:!0},d.getBindProps(n)),null,16)),_.requiredFieldNotSet.includes(n)?(r(),i(f,{key:2,class:"mt-1",error:"This field is required"})):w("",!0)])),[[b,n.condition?n.condition():!0]])),128))])}const C=g(q,[["render",I]]);export{C as _};
//# sourceMappingURL=Form-CIPLpg2e.js.map
