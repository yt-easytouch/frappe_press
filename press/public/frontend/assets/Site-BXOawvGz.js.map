{"version":3,"mappings":"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","names":["_sfc_main","app","CommitTag","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_5","$props","_createElementVNode","_cache","_withModifiers","$event","_ctx","_createCommentVNode","_toDisplayString","_openBlock","_createElementBlock","_hoisted_4","$options","SiteAppUpdateCard","_Fragment","_renderList","_a","notify","_withCtx","$data","_createTextVNode","loginAsAdmin","SitePlansDialog","defineAsyncComponent","__vitePreload","BillingInformationDialog","props","__props","showPromotionalDialog","ref","clickedPromotion","showBillingDialog","showChangePlanDialog","closeToLimits","computed","usage","x","limitExceeded","isInTrial","trialEndsText","utils","siteMigrationText","status","_b","siteVersionUpgradeText","marketplacePromotionalBanners","createResource","value","group","destinationGroupTitle","data","DateTimeControl","regionName","region","r","active","selected","option","nextNumber","_d","_f","_createSlots","d","s","SiteTransferDialog","SiteChangeGroupDialog","complete","doctype","name","__async","siteConfig","siteMonitorTab","tabs","tabsByStatus","tabsToShow","tab","__spreadProps","__spreadValues","_hoisted_6","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_12","_hoisted_13","_c","_hoisted_7","_hoisted_11","Component","route"],"sources":["../../../../dashboard/src/components/SiteAppUpdateCard.vue","../../../../dashboard/src/components/SiteAppUpdates.vue","../../../../dashboard/src/components/AlertSiteUpdate.vue","../../../../dashboard/src/components/AlertSiteActivation.vue","../../../../dashboard/src/views/site/SiteAlerts.vue","../../../../dashboard/src/views/site/SiteTransferDialog.vue","../../../../dashboard/src/views/site/SiteChangeGroupDialog.vue","../../../../dashboard/src/views/site/SiteChangeRegionDialog.vue","../../../../dashboard/src/views/site/SiteVersionUpgradeDialog.vue","../../../../dashboard/src/views/site/SiteChangeServerDialog.vue","../../../../dashboard/src/views/site/Site.vue"],"sourcesContent":["<template>\n\t<button\n\t\tclass=\"flex w-full flex-row items-center justify-between rounded-lg border border-gray-100 px-4 py-2 shadow focus:outline-none\"\n\t\t:class=\"[\n\t\t\tselected || uninstall ? 'ring-2 ring-inset ring-gray-600' : '',\n\t\t\tselectable ? 'hover:border-gray-300' : 'cursor-default'\n\t\t]\"\n\t\tref=\"card\"\n\t>\n\t\t<div class=\"flex flex-row items-center gap-2\">\n\t\t\t<input\n\t\t\t\tv-if=\"selectable\"\n\t\t\t\t@click.self=\"$refs['card'].click()\"\n\t\t\t\t:checked=\"selected\"\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tclass=\"h-4 w-4 cursor-pointer rounded border-gray-300 text-gray-600 focus:ring-transparent\"\n\t\t\t/>\n\t\t\t<h3 class=\"text-left text-lg font-medium text-gray-900\">\n\t\t\t\t{{ app.title }}\n\t\t\t</h3>\n\t\t</div>\n\t\t<Badge v-if=\"uninstall\" theme=\"red\" label=\"Will Be Uninstalled \" />\n\t\t<div v-else class=\"ml-2 flex flex-row space-x-2\">\n\t\t\t<CommitTag\n\t\t\t\tv-if=\"deployFrom(app)\"\n\t\t\t\t:tag=\"deployFrom(app)\"\n\t\t\t\t:link=\"`${app.repository_url}/commit/${app.current_hash}`\"\n\t\t\t/>\n\t\t\t<a\n\t\t\t\tv-if=\"deployFrom(app)\"\n\t\t\t\tclass=\"flex cursor-pointer flex-col justify-center\"\n\t\t\t\t:href=\"`${app.repository_url}/compare/${app.current_hash}...${app.next_hash}`\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t>\n\t\t\t\t<FeatherIcon name=\"arrow-right\" class=\"w-4\" />\n\t\t\t</a>\n\t\t\t<Badge\n\t\t\t\tv-else\n\t\t\t\tlabel=\"First Deploy\"\n\t\t\t\ttheme=\"green\"\n\t\t\t\tclass=\"whitespace-nowrap\"\n\t\t\t/>\n\t\t\t<CommitTag\n\t\t\t\t:tag=\"deployTo(app)\"\n\t\t\t\t:link=\"`${app.repository_url}/commit/${app.next_hash}`\"\n\t\t\t/>\n\t\t</div>\n\t</button>\n</template>\n\n<script>\nimport CommitTag from './utils/CommitTag.vue';\nexport default {\n\tname: 'SiteAppUpdateCard',\n\tprops: ['app', 'selectable', 'selected', 'uninstall'],\n\tmethods: {\n\t\tdeployFrom(app) {\n\t\t\tif (app.will_branch_change) {\n\t\t\t\treturn app.current_branch;\n\t\t\t}\n\t\t\treturn app.current_hash\n\t\t\t\t? app.current_tag || app.current_hash.slice(0, 7)\n\t\t\t\t: null;\n\t\t},\n\t\tdeployTo(app) {\n\t\t\tif (app.will_branch_change) {\n\t\t\t\treturn app.branch;\n\t\t\t}\n\t\t\treturn app.next_tag || app.next_hash.slice(0, 7);\n\t\t}\n\t},\n\tcomponents: { CommitTag }\n};\n</script>\n","<template>\n\t<div class=\"space-y-2 divide-y\">\n\t\t<SiteAppUpdateCard\n\t\t\tv-for=\"app in appsWithUpdates\"\n\t\t\t:key=\"app.app\"\n\t\t\t:app=\"app\"\n\t\t/>\n\t\t<div\n\t\t\tv-if=\"!appsWithUpdates.length\"\n\t\t\tclass=\"text-center text-base text-gray-500\"\n\t\t>\n\t\t\tInstalled apps doesn't have any updates available. But the site can be\n\t\t\tupdated to a newer bench.\n\t\t</div>\n\t</div>\n</template>\n<script>\nimport SiteAppUpdateCard from './SiteAppUpdateCard.vue';\n\nexport default {\n\tname: 'SiteAppUpdates',\n\tprops: ['apps'],\n\tcomponents: {\n\t\tSiteAppUpdateCard\n\t},\n\tcomputed: {\n\t\tappsWithUpdates() {\n\t\t\treturn this.apps.filter(app => app.update_available);\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<Alert title=\"Update Available\" v-if=\"show\">\n\t\t<span>\n\t\t\tA new update is available for your site. Would you like to update your\n\t\t\tsite now?\n\t\t</span>\n\t\t<template #actions>\n\t\t\t<Tooltip\n\t\t\t\t:text=\"\n\t\t\t\t\t!permissions.update\n\t\t\t\t\t\t? `You don't have enough permissions to perform this action`\n\t\t\t\t\t\t: ''\n\t\t\t\t\"\n\t\t\t>\n\t\t\t\t<Button\n\t\t\t\t\t:disabled=\"!permissions.update\"\n\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t@click=\"showUpdatesDialog = true\"\n\t\t\t\t>\n\t\t\t\t\tShow updates\n\t\t\t\t</Button>\n\t\t\t</Tooltip>\n\t\t</template>\n\t\t<Dialog\n\t\t\t:options=\"{\n\t\t\t\ttitle: 'Updates available',\n\t\t\t\tactions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Update Now',\n\t\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\t\tonClick: () => $resources.scheduleUpdate.fetch()\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\"\n\t\t\tv-model=\"showUpdatesDialog\"\n\t\t>\n\t\t\t<template v-slot:body-content>\n\t\t\t\t<SiteAppUpdates :apps=\"updateAvailableApps\" />\n\t\t\t\t<div class=\"mt-4\" v-if=\"updateAvailableApps.length\">\n\t\t\t\t\t<!-- Skip Failing Checkbox -->\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"skip-failing\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tclass=\"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n\t\t\t\t\t\tv-model=\"wantToSkipFailingPatches\"\n\t\t\t\t\t/>\n\t\t\t\t\t<label for=\"skip-failing\" class=\"ml-1 text-sm text-gray-900\">\n\t\t\t\t\t\tSkip failing patches if any?\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"mt-2\" v-if=\"skip_backups\">\n\t\t\t\t\t<!-- Skip Site Backup -->\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"skip-backup\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tclass=\"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n\t\t\t\t\t\tv-model=\"wantToSkipBackups\"\n\t\t\t\t\t/>\n\t\t\t\t\t<label for=\"skip-backup\" class=\"ml-1 text-sm text-gray-900\">\n\t\t\t\t\t\tUpdate without site backup?\n\t\t\t\t\t</label>\n\t\t\t\t\t<div class=\"mt-1 text-sm text-red-600\" v-if=\"wantToSkipBackups\">\n\t\t\t\t\t\tIn case of failure, you won't be able to restore the site.\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<ErrorMessage class=\"mt-1\" :message=\"$resources.scheduleUpdate.error\" />\n\t\t\t</template>\n\t\t</Dialog>\n\t</Alert>\n</template>\n<script>\nimport SiteAppUpdates from './SiteAppUpdates.vue';\nimport { notify } from '@/utils/toast';\nexport default {\n\tname: 'AlertSiteUpdate',\n\tprops: ['site'],\n\tcomponents: {\n\t\tSiteAppUpdates\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshowUpdatesDialog: false,\n\t\t\twantToSkipFailingPatches: false,\n\t\t\twantToSkipBackups: false\n\t\t};\n\t},\n\tresources: {\n\t\tupdateInformation() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.check_for_updates',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site?.name\n\t\t\t\t},\n\t\t\t\tauto: true\n\t\t\t};\n\t\t},\n\t\tlastMigrateFailed() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.last_migrate_failed',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site?.name\n\t\t\t\t},\n\t\t\t\tauto: true\n\t\t\t};\n\t\t},\n\t\tscheduleUpdate() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.update',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site?.name,\n\t\t\t\t\tskip_failing_patches: this.wantToSkipFailingPatches,\n\t\t\t\t\tskip_backups: this.wantToSkipBackups\n\t\t\t\t},\n\t\t\t\tonSuccess() {\n\t\t\t\t\tthis.showUpdatesDialog = false;\n\t\t\t\t\tnotify({\n\t\t\t\t\t\ttitle: 'Site update scheduled successfully',\n\t\t\t\t\t\ticon: 'check',\n\t\t\t\t\t\tcolor: 'green'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tcomputed: {\n\t\tpermissions() {\n\t\t\treturn {\n\t\t\t\tupdate: this.$account.hasPermission(\n\t\t\t\t\tthis.site.name,\n\t\t\t\t\t'press.api.site.update'\n\t\t\t\t)\n\t\t\t};\n\t\t},\n\t\tshow() {\n\t\t\tif (this.updateInformation) {\n\t\t\t\treturn (\n\t\t\t\t\tthis.site.setup_wizard_complete &&\n\t\t\t\t\tthis.updateInformation.update_available &&\n\t\t\t\t\t['Active', 'Inactive', 'Suspended', 'Broken'].includes(\n\t\t\t\t\t\tthis.site.status\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tupdateInformation() {\n\t\t\treturn this.$resources.updateInformation.data;\n\t\t},\n\t\tupdateAvailableApps() {\n\t\t\tconst installedApps = this.updateInformation.installed_apps;\n\t\t\tconst updateAvailableApps = this.updateInformation.apps;\n\n\t\t\treturn updateAvailableApps.filter(app =>\n\t\t\t\tinstalledApps.find(installedApp => installedApp.app === app.app)\n\t\t\t);\n\t\t},\n\t\tlastMigrateFailed() {\n\t\t\treturn this.$resources.lastMigrateFailed.data;\n\t\t},\n\t\tskip_backups() {\n\t\t\treturn this.$account.team?.skip_backups;\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<Alert\n\t\ttitle=\"Site Activation\"\n\t\tv-if=\"site.status == 'Active' && !site.setup_wizard_complete\"\n\t>\n\t\t<span>\n\t\t\tPlease login and complete the setup wizard on your site. Analytics will be\n\t\t\tcollected only after setup is complete.\n\t\t</span>\n\t\t<template #actions>\n\t\t\t<Button\n\t\t\t\tvariant=\"solid\"\n\t\t\t\t@click=\"$resources.loginAsAdmin.submit()\"\n\t\t\t\t:loading=\"$resources.loginAsAdmin.loading\"\n\t\t\t>\n\t\t\t\tLogin\n\t\t\t</Button>\n\t\t</template>\n\t</Alert>\n</template>\n<script>\nimport { loginAsAdmin } from '@/controllers/loginAsAdmin';\nexport default {\n\tname: 'AlertSiteActivation',\n\tprops: ['site'],\n\tresources: {\n\t\tloginAsAdmin() {\n\t\t\treturn loginAsAdmin(this.site?.name);\n\t\t}\n\t}\n};\n</script>\n","<script setup>\nimport { computed, ref, defineAsyncComponent } from 'vue';\nimport { utils } from '@/utils';\nimport { createResource } from 'frappe-ui';\nimport AlertSiteUpdate from '@/components/AlertSiteUpdate.vue';\nimport AlertSiteActivation from '@/components/AlertSiteActivation.vue';\n\nconst SitePlansDialog = defineAsyncComponent(() =>\n\timport('./SitePlansDialog.vue')\n);\nconst BillingInformationDialog = defineAsyncComponent(() =>\n\timport('@/components/BillingInformationDialog.vue')\n);\n\nconst props = defineProps({ site: Object, plan: Object });\nconst showPromotionalDialog = ref(false);\nconst clickedPromotion = ref(null);\nconst showBillingDialog = ref(false);\nconst showChangePlanDialog = ref(false);\n\nconst closeToLimits = computed(() => {\n\tif (!(props.site && props.plan)) return false;\n\tlet usage = props.plan.usage_in_percent;\n\treturn [usage.cpu, usage.database, usage.disk].some(x => 100 >= x && x > 80);\n});\n\nconst limitExceeded = computed(() => {\n\tif (!(props.site && props.plan)) return false;\n\tlet usage = props.plan.usage_in_percent;\n\treturn [usage.cpu, usage.database, usage.disk].some(x => x > 100);\n});\n\nconst isInTrial = computed(() => {\n\treturn props.site?.trial_end_date;\n});\n\nconst trialEndsText = computed(() => {\n\tif (!props.site?.trial_end_date) {\n\t\treturn 0;\n\t}\n\treturn utils.methods.trialEndsInDaysText(props.site.trial_end_date);\n});\n\nconst siteMigrationText = computed(() => {\n\tconst status = props.site?.site_migration.status;\n\n\tif (status === 'Running') {\n\t\treturn 'Your Site Migration is in progress';\n\t} else if (status === 'Pending') {\n\t\treturn 'Your Site Migration will start shortly';\n\t} else if (status === 'Scheduled') {\n\t\treturn `Your Site Migration is scheduled to happen ${utils.methods.formatDate(\n\t\t\tprops.site?.site_migration.scheduled_time,\n\t\t\t'relative'\n\t\t)}.`;\n\t}\n});\n\nconst siteVersionUpgradeText = computed(() => {\n\tconst status = props.site?.version_upgrade.status;\n\n\tif (status === 'Running') {\n\t\treturn 'Your Site Version Upgrade is in progress';\n\t} else if (status === 'Pending') {\n\t\treturn 'Your Site Version Upgrade will start shortly';\n\t} else if (status === 'Scheduled') {\n\t\treturn `Your Site Version Upgrade is scheduled to happen ${utils.methods.formatDate(\n\t\t\tprops.site?.version_upgrade.scheduled_time,\n\t\t\t'relative'\n\t\t)}.`;\n\t}\n});\n\nconst marketplacePromotionalBanners = createResource({\n\turl: 'press.api.marketplace.get_promotional_banners',\n\tauto: true\n});\n</script>\n\n<template>\n\t<div class=\"space-y-2\">\n\t\t<AlertSiteActivation :site=\"site\" />\n\t\t<AlertSiteUpdate :site=\"site\" />\n\n\t\t<div\n\t\t\tv-if=\"\n\t\t\t\tmarketplacePromotionalBanners.data &&\n\t\t\t\tmarketplacePromotionalBanners.data.length > 0\n\t\t\t\"\n\t\t>\n\t\t\t<Alert\n\t\t\t\tv-for=\"banner in marketplacePromotionalBanners.data\"\n\t\t\t\t:title=\"banner.alert_title\"\n\t\t\t\t:key=\"banner.name\"\n\t\t\t>\n\t\t\t\t{{ banner.alert_message }}\n\n\t\t\t\t<template #actions>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclass=\"whitespace-nowrap\"\n\t\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t\t@click=\"\n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\tshowPromotionalDialog = true;\n\t\t\t\t\t\t\t\tclickedPromotion = banner;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t\tLearn More\n\t\t\t\t\t</Button>\n\t\t\t\t</template>\n\t\t\t</Alert>\n\t\t</div>\n\t\t<Alert title=\"Trial\" v-if=\"isInTrial && $account.hasBillingInfo\">\n\t\t\tYour trial ends {{ trialEndsText }} after which your site will get\n\t\t\tsuspended. Add your billing information to avoid suspension.\n\n\t\t\t<template #actions>\n\t\t\t\t<Button\n\t\t\t\t\tclass=\"whitespace-nowrap\"\n\t\t\t\t\t@click=\"showBillingDialog = true\"\n\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t>\n\t\t\t\t\tAdd Billing Information\n\t\t\t\t</Button>\n\t\t\t</template>\n\t\t</Alert>\n\t\t<Alert title=\"Trial\" v-if=\"isInTrial && $account.hasBillingInfo\">\n\t\t\tYour trial ends {{ trialEndsText }} after which your site will get\n\t\t\tsuspended. Select a plan to avoid suspension.\n\n\t\t\t<template #actions>\n\t\t\t\t<Button\n\t\t\t\t\tclass=\"whitespace-nowrap\"\n\t\t\t\t\t@click=\"showChangePlanDialog = true\"\n\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t>\n\t\t\t\t\tSelect Plan\n\t\t\t\t</Button>\n\t\t\t</template>\n\t\t</Alert>\n\t\t<Alert title=\"Attention Required\" v-if=\"limitExceeded\">\n\t\t\tYour site has exceeded the allowed usage for your plan. Upgrade your plan\n\t\t\tnow.\n\t\t</Alert>\n\t\t<Alert title=\"Attention Required\" v-else-if=\"closeToLimits\">\n\t\t\tYour site has exceeded 80% of the allowed usage for your plan. Upgrade\n\t\t\tyour plan now.\n\t\t</Alert>\n\n\t\t<Alert title=\"Site Migration\" v-if=\"site?.site_migration\">\n\t\t\t{{ siteMigrationText }}\n\t\t\t<template #actions>\n\t\t\t\t<Button\n\t\t\t\t\tv-if=\"\n\t\t\t\t\t\tsite.site_migration.status === 'Running' &&\n\t\t\t\t\t\tsite.site_migration.job_id\n\t\t\t\t\t\"\n\t\t\t\t\tclass=\"whitespace-nowrap\"\n\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t:route=\"{\n\t\t\t\t\t\tname: 'SiteJobs',\n\t\t\t\t\t\tparams: { jobName: site.site_migration.job_id }\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\tView Job\n\t\t\t\t</Button>\n\t\t\t</template>\n\t\t</Alert>\n\n\t\t<Alert title=\"Version Upgrade\" v-if=\"site?.version_upgrade\">\n\t\t\t{{ siteVersionUpgradeText }}\n\t\t\t<template #actions>\n\t\t\t\t<Button\n\t\t\t\t\tv-if=\"\n\t\t\t\t\t\tsite.version_upgrade.status === 'Running' &&\n\t\t\t\t\t\tsite.version_upgrade.job_id\n\t\t\t\t\t\"\n\t\t\t\t\tclass=\"whitespace-nowrap\"\n\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t:route=\"{\n\t\t\t\t\t\tname: 'SiteJobs',\n\t\t\t\t\t\tparams: { jobName: site.version_upgrade.job_id }\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\tView Job\n\t\t\t\t</Button>\n\t\t\t</template>\n\t\t</Alert>\n\n\t\t<Dialog\n\t\t\tv-model=\"showPromotionalDialog\"\n\t\t\t@close=\"e => (clickedPromotion = null)\"\n\t\t\t:options=\"{\n\t\t\t\ttitle: 'Easytouch Cloud Marketplace',\n\t\t\t\tactions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\t\troute: `/install-app/${clickedPromotion?.app}`,\n\t\t\t\t\t\tlabel: 'Install App'\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\"\n\t\t>\n\t\t\t<template #body-content>\n\t\t\t\t<div v-if=\"clickedPromotion\" class=\"flex flex-row items-center\">\n\t\t\t\t\t<Avatar\n\t\t\t\t\t\tclass=\"mr-2\"\n\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\tshape=\"square\"\n\t\t\t\t\t\t:image=\"clickedPromotion.image\"\n\t\t\t\t\t\t:label=\"clickedPromotion.title\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div class=\"flex flex-col\">\n\t\t\t\t\t\t<h4 class=\"text-xl font-semibold text-gray-900\">\n\t\t\t\t\t\t\t{{ clickedPromotion.title }}\n\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t<p class=\"text-base text-gray-600\">\n\t\t\t\t\t\t\t{{ clickedPromotion.description }}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</Dialog>\n\n\t\t<BillingInformationDialog\n\t\t\tv-model=\"showBillingDialog\"\n\t\t\tv-if=\"showBillingDialog\"\n\t\t/>\n\n\t\t<SitePlansDialog\n\t\t\tv-model=\"showChangePlanDialog\"\n\t\t\t:site=\"site\"\n\t\t\t:plan=\"plan\"\n\t\t\t@plan-change=\"() => $emit('plan-change')\"\n\t\t/>\n\t</div>\n</template>\n","<template>\n\t<Dialog\n\t\t:options=\"{\n\t\t\ttitle: 'Transfer Site to Team',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Submit',\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tonClick: () =>\n\t\t\t\t\t\t$resources.transferSite.submit({\n\t\t\t\t\t\t\tteam_mail_id: emailOfTransferTeam,\n\t\t\t\t\t\t\tname: site?.name,\n\t\t\t\t\t\t\treason\n\t\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t]\n\t\t}\"\n\t\tv-model=\"show\"\n\t>\n\t\t<template #body-content>\n\t\t\t<div class=\"space-y-4\">\n\t\t\t\t<FormControl\n\t\t\t\t\tlabel=\"Enter email of the team for transfer of site ownership\"\n\t\t\t\t\tv-model=\"emailOfTransferTeam\"\n\t\t\t\t/>\n\t\t\t\t<FormControl\n\t\t\t\t\tlabel=\"Reason for transfer\"\n\t\t\t\t\tv-model=\"reason\"\n\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t/>\n\t\t\t\t<ErrorMessage :message=\"$resources.transferSite.error\" />\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n\n<script>\nimport { notify } from '@/utils/toast';\n\nexport default {\n\tname: 'SiteTransferDialog',\n\tprops: ['site', 'modelValue'],\n\temits: ['update:modelValue'],\n\tdata() {\n\t\treturn {\n\t\t\treason: '',\n\t\t\temailOfTransferTeam: ''\n\t\t};\n\t},\n\tcomputed: {\n\t\tshow: {\n\t\t\tget() {\n\t\t\t\treturn this.modelValue;\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tthis.$emit('update:modelValue', value);\n\t\t\t}\n\t\t}\n\t},\n\tresources: {\n\t\ttransferSite() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.send_change_team_request',\n\t\t\t\tvalidate() {\n\t\t\t\t\tif (!this.emailOfTransferTeam) {\n\t\t\t\t\t\treturn 'Please enter email of the team for transfer of site ownership';\n\t\t\t\t\t} else if (!this.reason) {\n\t\t\t\t\t\treturn 'Please enter reason for transfer';\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonSuccess() {\n\t\t\t\t\tthis.reason = '';\n\t\t\t\t\tthis.emailOfTransferTeam = '';\n\t\t\t\t\tthis.$emit('update:modelValue', false);\n\t\t\t\t\tnotify({\n\t\t\t\t\t\ttitle: 'Site transfer request sent',\n\t\t\t\t\t\tmessage: `The team ${this.emailOfTransferTeam} will receive a request to accept the site transfer.`,\n\t\t\t\t\t\tcolor: 'green',\n\t\t\t\t\t\ticon: 'check'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<Dialog\n\t\t:options=\"{\n\t\t\ttitle: 'Move Site to another Bench Group',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Change Bench Group',\n\t\t\t\t\tloading: $resources.changeGroup.loading,\n\t\t\t\t\tdisabled: !$resources.changeGroupOptions?.data?.length,\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tonClick: () =>\n\t\t\t\t\t\t$resources.changeGroup.submit({\n\t\t\t\t\t\t\tskip_failing_patches: skipFailingPatches,\n\t\t\t\t\t\t\tgroup: targetGroup,\n\t\t\t\t\t\t\tname: site?.name\n\t\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Clone current Bench Group',\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t$emit('update:modelValue', false);\n\t\t\t\t\t\tshowCloneBenchDialog = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t}\"\n\t\tv-model=\"show\"\n\t>\n\t\t<template #body-content>\n\t\t\t<LoadingIndicator\n\t\t\t\tclass=\"mx-auto h-4 w-4\"\n\t\t\t\tv-if=\"$resources.changeGroupOptions.loading\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tv-else-if=\"$resources.changeGroupOptions.data.length > 0\"\n\t\t\t\tclass=\"space-y-4\"\n\t\t\t>\n\t\t\t\t<FormControl\n\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\tlabel=\"Select Bench Group\"\n\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t:options=\"\n\t\t\t\t\t\t$resources.changeGroupOptions.data.map(group => ({\n\t\t\t\t\t\t\tlabel: group.title,\n\t\t\t\t\t\t\tvalue: group.name\n\t\t\t\t\t\t}))\n\t\t\t\t\t\"\n\t\t\t\t\tv-model=\"targetGroup\"\n\t\t\t\t/>\n\t\t\t\t<FormControl\n\t\t\t\t\tlabel=\"Skip failing patches if any\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tv-model=\"skipFailingPatches\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<p v-else-if=\"!errorMessage\" class=\"text-md text-base text-gray-800\">\n\t\t\t\tThere are no other bench groups that you own for this site to move to.\n\t\t\t\tYou can clone this bench group to move the site.\n\t\t\t</p>\n\t\t\t<ErrorMessage class=\"mt-3\" :message=\"errorMessage\" />\n\t\t</template>\n\t</Dialog>\n\t<Dialog\n\t\t:options=\"{\n\t\t\ttitle: 'Clone Bench Group',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Clone Bench Group',\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tloading: $resources.cloneGroup.loading,\n\t\t\t\t\tonClick: () =>\n\t\t\t\t\t\t$resources.cloneGroup.submit({\n\t\t\t\t\t\t\tname: site?.name,\n\t\t\t\t\t\t\tnew_group_title: newGroupTitle\n\t\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t]\n\t\t}\"\n\t\tv-model=\"showCloneBenchDialog\"\n\t>\n\t\t<template #body-content>\n\t\t\t<FormControl label=\"New Bench Group Name\" v-model=\"newGroupTitle\" />\n\t\t\t<ErrorMessage :message=\"$resources.cloneGroup.error\" />\n\t\t</template>\n\t</Dialog>\n</template>\n\n<script>\nimport { notify } from '@/utils/toast';\n\nexport default {\n\tname: 'SiteChangeGroupDialog',\n\tprops: ['site', 'modelValue'],\n\temits: ['update:modelValue'],\n\tdata() {\n\t\treturn {\n\t\t\ttargetGroup: null,\n\t\t\tnewGroupTitle: '',\n\t\t\tskipFailingPatches: false,\n\t\t\tshowCloneBenchDialog: false\n\t\t};\n\t},\n\tcomputed: {\n\t\tshow: {\n\t\t\tget() {\n\t\t\t\treturn this.modelValue;\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tthis.$emit('update:modelValue', value);\n\t\t\t}\n\t\t},\n\t\terrorMessage() {\n\t\t\treturn (\n\t\t\t\tthis.$resources.changeGroupOptions.error ||\n\t\t\t\tthis.$resources.changeGroup.error ||\n\t\t\t\tthis.$resources.cloneGroup.error\n\t\t\t);\n\t\t}\n\t},\n\tresources: {\n\t\tchangeGroup() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.change_group',\n\t\t\t\tonSuccess() {\n\t\t\t\t\tconst destinationGroupTitle =\n\t\t\t\t\t\tthis.$resources.changeGroupOptions.data.find(\n\t\t\t\t\t\t\tgroup => group.name === this.targetGroup\n\t\t\t\t\t\t).title;\n\n\t\t\t\t\tnotify({\n\t\t\t\t\t\ttitle: 'Scheduled Bench Group Change',\n\t\t\t\t\t\tmessage: `Site scheduled to be moved to <b>${destinationGroupTitle}</b>`,\n\t\t\t\t\t\tcolor: 'green',\n\t\t\t\t\t\ticon: 'check'\n\t\t\t\t\t});\n\t\t\t\t\tthis.targetGroup = null;\n\t\t\t\t\tthis.$emit('update:modelValue', false);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tchangeGroupOptions() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.change_group_options',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site?.name\n\t\t\t\t},\n\t\t\t\tinitialData: [],\n\t\t\t\tonSuccess(data) {\n\t\t\t\t\tif (data.length > 0) this.targetGroup = data[0].name;\n\t\t\t\t},\n\t\t\t\tauto: true\n\t\t\t};\n\t\t},\n\t\tcloneGroup() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.clone_group',\n\t\t\t\tonSuccess(data) {\n\t\t\t\t\tnotify({\n\t\t\t\t\t\ttitle: 'Cloned Bench Group',\n\t\t\t\t\t\tmessage: `The current bench group has been cloned successfully. Redirecting to the new bench group...`,\n\t\t\t\t\t\tcolor: 'green',\n\t\t\t\t\t\ticon: 'check'\n\t\t\t\t\t});\n\t\t\t\t\tthis.showCloneBenchDialog = false;\n\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\tname: 'BenchDeploys',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tbenchName: data.bench_name,\n\t\t\t\t\t\t\tcandidateName: data.candidate_name\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<Dialog\n\t\t:options=\"{\n\t\t\ttitle: 'Change Region',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Change Region',\n\t\t\t\t\tloading: $resources.changeRegion.loading,\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tdisabled: !selectedRegion,\n\t\t\t\t\tonClick: () =>\n\t\t\t\t\t\t$resources.changeRegion.submit({\n\t\t\t\t\t\t\tname: site?.name,\n\t\t\t\t\t\t\tcluster: selectedRegion?.value,\n\t\t\t\t\t\t\tscheduled_datetime: datetimeInIST,\n\t\t\t\t\t\t\tskip_failing_patches: skipFailingPatches\n\t\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t]\n\t\t}\"\n\t\tv-model=\"show\"\n\t\t@close=\"resetValues\"\n\t>\n\t\t<template #body-content>\n\t\t\t<LoadingIndicator\n\t\t\t\tclass=\"mx-auto h-4 w-4\"\n\t\t\t\tv-if=\"$resources.changeRegionOptions.loading\"\n\t\t\t/>\n\t\t\t<div v-else class=\"space-y-4\">\n\t\t\t\t<FormControl\n\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\ttype=\"autocomplete\"\n\t\t\t\t\tlabel=\"Choose Region\"\n\t\t\t\t\tv-model=\"selectedRegion\"\n\t\t\t\t\t:options=\"\n\t\t\t\t\t\t$resources.changeRegionOptions.data.regions.map(r => ({\n\t\t\t\t\t\t\tlabel: r.title || r.name,\n\t\t\t\t\t\t\tvalue: r.name,\n\t\t\t\t\t\t\timage: r.image\n\t\t\t\t\t\t}))\n\t\t\t\t\t\"\n\t\t\t\t>\n\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t<img :src=\"selectedRegion?.image\" class=\"mr-2 h-4\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t<template #item-prefix=\"{ active, selected, option }\">\n\t\t\t\t\t\t<img v-if=\"option?.image\" :src=\"option.image\" class=\"mr-2 h-4\" />\n\t\t\t\t\t</template>\n\t\t\t\t</FormControl>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"space-y-4\"\n\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t$resources.changeRegionOptions.data?.regions?.length > 0 &&\n\t\t\t\t\t\tselectedRegion\n\t\t\t\t\t\"\n\t\t\t\t>\n\t\t\t\t\t<DateTimeControl v-model=\"targetDateTime\" label=\"Schedule Time\" />\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tlabel=\"Skip failing patches if any\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tv-model=\"skipFailingPatches\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<p v-else class=\"mt-4 text-sm text-gray-600\">\n\t\t\t\t\tIf the region you're looking for isn't available, please add from the\n\t\t\t\t\tBench dashboard.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<ErrorMessage class=\"mt-3\" :message=\"$resources.changeRegion.error\" />\n\t\t</template>\n\t</Dialog>\n</template>\n\n<script>\nimport { notify } from '@/utils/toast';\nimport DateTimeControl from '../../../src2/components/DateTimeControl.vue';\n\nexport default {\n\tname: 'SiteChangeRegionDialog',\n\tprops: ['site', 'modelValue'],\n\temits: ['update:modelValue'],\n\tcomponents: {\n\t\tDateTimeControl\n\t},\n\tdata() {\n\t\treturn {\n\t\t\ttargetDateTime: null,\n\t\t\tselectedRegion: null,\n\t\t\tskipFailingPatches: false\n\t\t};\n\t},\n\tcomputed: {\n\t\tshow: {\n\t\t\tget() {\n\t\t\t\treturn this.modelValue;\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tthis.$emit('update:modelValue', value);\n\t\t\t}\n\t\t},\n\t\tdatetimeInIST() {\n\t\t\tif (!this.targetDateTime) return null;\n\t\t\tconst datetimeInIST = this.$dayjs(this.targetDateTime)\n\t\t\t\t.tz('Asia/Kolkata')\n\t\t\t\t.format('YYYY-MM-DDTHH:mm');\n\n\t\t\treturn datetimeInIST;\n\t\t}\n\t},\n\tresources: {\n\t\tchangeRegionOptions() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.change_region_options',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site?.name\n\t\t\t\t},\n\t\t\t\tauto: true\n\t\t\t};\n\t\t},\n\t\tchangeRegion() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.change_region',\n\t\t\t\tvalidate() {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.$resources.changeRegionOptions.data.current_region ===\n\t\t\t\t\t\tthis.selectedRegion\n\t\t\t\t\t)\n\t\t\t\t\t\treturn 'Site is already in this region';\n\t\t\t\t},\n\t\t\t\tonSuccess() {\n\t\t\t\t\tconst regionName =\n\t\t\t\t\t\tthis.$resources.changeRegionOptions.data.regions.find(\n\t\t\t\t\t\t\tregion => region.name === this.selectedRegion\n\t\t\t\t\t\t)?.title || this.selectedRegion;\n\n\t\t\t\t\tnotify({\n\t\t\t\t\t\ttitle: 'Scheduled Region Change',\n\t\t\t\t\t\tmessage: `Site <b>${this.site?.host_name}</b> scheduled to be moved to <b>${regionName}</b>`,\n\t\t\t\t\t\tcolor: 'green',\n\t\t\t\t\t\ticon: 'check'\n\t\t\t\t\t});\n\t\t\t\t\tthis.$emit('update:modelValue', false);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tmethods: {\n\t\tresetValues() {\n\t\t\tthis.selectedRegion = null;\n\t\t\tthis.targetDateTime = null;\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t@close=\"resetValues\"\n\t\t:options=\"{ title: 'Upgrade Site Version' }\"\n\t>\n\t\t<template #body-content>\n\t\t\t<div class=\"space-y-4\">\n\t\t\t\t<p v-if=\"site?.group_public && nextVersion\" class=\"text-base\">\n\t\t\t\t\tThe site <b>{{ site.host_name }}</b> will be upgraded to\n\t\t\t\t\t<b>{{ nextVersion }}</b>\n\t\t\t\t</p>\n\t\t\t\t<FormControl\n\t\t\t\t\tv-else-if=\"privateReleaseGroups.length > 0 && nextVersion\"\n\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t:label=\"`Please select a ${nextVersion} bench to upgrade your site from ${site.frappe_version}`\"\n\t\t\t\t\tclass=\"w-full\"\n\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t:options=\"privateReleaseGroups\"\n\t\t\t\t\tv-model=\"privateReleaseGroup\"\n\t\t\t\t\t@change=\"\n\t\t\t\t\t\tvalue =>\n\t\t\t\t\t\t\t$resources.validateGroupforUpgrade.submit({\n\t\t\t\t\t\t\t\tname: site.name,\n\t\t\t\t\t\t\t\tgroup_name: value.target.value\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\"\n\t\t\t\t/>\n\t\t\t\t<DateTimeControl\n\t\t\t\t\tv-if=\"(site.group_public && nextVersion) || benchHasCommonServer\"\n\t\t\t\t\tv-model=\"targetDateTime\"\n\t\t\t\t\tlabel=\"Schedule Time\"\n\t\t\t\t/>\n\t\t\t\t<FormControl\n\t\t\t\t\tv-if=\"(site.group_public && nextVersion) || benchHasCommonServer\"\n\t\t\t\t\tlabel=\"Skip failing patches if any\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tv-model=\"skipFailingPatches\"\n\t\t\t\t/>\n\t\t\t\t<p v-if=\"message && !errorMessage\" class=\"text-sm text-gray-700\">\n\t\t\t\t\t{{ message }}\n\t\t\t\t</p>\n\t\t\t\t<ErrorMessage :message=\"errorMessage\" />\n\t\t\t</div>\n\t\t</template>\n\t\t<template v-if=\"site?.group_public || privateReleaseGroups.length\" #actions>\n\t\t\t<Button\n\t\t\t\tv-if=\"!site.group_public\"\n\t\t\t\tclass=\"mb-2 w-full\"\n\t\t\t\t:disabled=\"benchHasCommonServer || !privateReleaseGroup || !nextVersion\"\n\t\t\t\tlabel=\"Add Server to Bench\"\n\t\t\t\t@click=\"$resources.addServerToReleaseGroup.submit()\"\n\t\t\t\t:loading=\"\n\t\t\t\t\t$resources.addServerToReleaseGroup.loading ||\n\t\t\t\t\t$resources.validateGroupforUpgrade.loading\n\t\t\t\t\"\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\tclass=\"w-full\"\n\t\t\t\tvariant=\"solid\"\n\t\t\t\tlabel=\"Upgrade\"\n\t\t\t\t:disabled=\"\n\t\t\t\t\t((!benchHasCommonServer || !privateReleaseGroup) &&\n\t\t\t\t\t\t!site.group_public) ||\n\t\t\t\t\t!nextVersion\n\t\t\t\t\"\n\t\t\t\t:loading=\"\n\t\t\t\t\t$resources.versionUpgrade.loading ||\n\t\t\t\t\t$resources.validateGroupforUpgrade.loading\n\t\t\t\t\"\n\t\t\t\t@click=\"$resources.versionUpgrade.submit()\"\n\t\t\t/>\n\t\t</template>\n\t</Dialog>\n</template>\n\n<script>\nimport { notify } from '@/utils/toast';\nimport DateTimeControl from '../../../src2/components/DateTimeControl.vue';\n\nexport default {\n\tname: 'SiteVersionUpgradeDialog',\n\tprops: ['site', 'modelValue'],\n\temits: ['update:modelValue'],\n\tcomponents: { DateTimeControl },\n\tdata() {\n\t\treturn {\n\t\t\ttargetDateTime: null,\n\t\t\tprivateReleaseGroup: '',\n\t\t\tskipFailingPatches: false,\n\t\t\tbenchHasCommonServer: false\n\t\t};\n\t},\n\tcomputed: {\n\t\tshow: {\n\t\t\tget() {\n\t\t\t\treturn this.modelValue;\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tthis.$emit('update:modelValue', value);\n\t\t\t}\n\t\t},\n\t\tnextVersion() {\n\t\t\tconst nextNumber = Number(this.site?.frappe_version.split(' ')[1]);\n\t\t\tif (\n\t\t\t\tisNaN(nextNumber) ||\n\t\t\t\tthis.site?.frappe_version === this.site?.latest_frappe_version\n\t\t\t)\n\t\t\t\treturn null;\n\n\t\t\treturn `Version ${nextNumber + 1}`;\n\t\t},\n\t\tprivateReleaseGroups() {\n\t\t\treturn this.$resources.getPrivateGroups.data;\n\t\t},\n\t\tmessage() {\n\t\t\tif (this.site.frappe_version === this.site.latest_frappe_version) {\n\t\t\t\treturn 'This site is already on the latest version.';\n\t\t\t} else if (this.site.frappe_version === 'Nightly') {\n\t\t\t\treturn \"This site is on a nightly version and doesn't need to be upgraded.\";\n\t\t\t} else if (\n\t\t\t\t!this.site.group_public &&\n\t\t\t\tthis.privateReleaseGroups.length === 0\n\t\t\t)\n\t\t\t\treturn `Your team doesn't own any private benches available to upgrade this site to ${this.nextVersion}.`;\n\t\t\telse if (!this.privateReleaseGroup) {\n\t\t\t\treturn '';\n\t\t\t} else if (!this.site.group_public && !this.benchHasCommonServer)\n\t\t\t\treturn `The selected bench and your site doesn't have a common server. Please add site's server to the bench.`;\n\t\t\telse if (!this.site.group_public && this.benchHasCommonServer)\n\t\t\t\treturn `The selected bench and your site have a common server. You can proceed with the upgrade to ${this.nextVersion}.`;\n\t\t\telse return '';\n\t\t},\n\t\tdatetimeInIST() {\n\t\t\tif (!this.targetDateTime) return null;\n\t\t\tconst datetimeInIST = this.$dayjs(this.targetDateTime)\n\t\t\t\t.tz('Asia/Kolkata')\n\t\t\t\t.format('YYYY-MM-DDTHH:mm');\n\n\t\t\treturn datetimeInIST;\n\t\t},\n\t\terrorMessage() {\n\t\t\treturn (\n\t\t\t\tthis.$resources.versionUpgrade.error ||\n\t\t\t\tthis.$resources.validateGroupforUpgrade.error ||\n\t\t\t\tthis.$resources.addServerToReleaseGroup.error ||\n\t\t\t\tthis.$resources.getPrivateGroups.error\n\t\t\t);\n\t\t}\n\t},\n\tresources: {\n\t\tversionUpgrade() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.version_upgrade',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site?.name,\n\t\t\t\t\tdestination_group: this.privateReleaseGroup,\n\t\t\t\t\tskip_failing_patches: this.skipFailingPatches,\n\t\t\t\t\tscheduled_datetime: this.datetimeInIST\n\t\t\t\t},\n\t\t\t\tonSuccess() {\n\t\t\t\t\tnotify({\n\t\t\t\t\t\ttitle: 'Site Version Upgrade',\n\t\t\t\t\t\tmessage: `Scheduled site upgrade for <b>${this.site?.host_name}</b> to <b>${this.nextVersion}</b>`,\n\t\t\t\t\t\ticon: 'check',\n\t\t\t\t\t\tcolor: 'green'\n\t\t\t\t\t});\n\t\t\t\t\tthis.$emit('update:modelValue', false);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tgetPrivateGroups() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.get_private_groups_for_upgrade',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site?.name,\n\t\t\t\t\tversion: this.site?.frappe_version\n\t\t\t\t},\n\t\t\t\tauto:\n\t\t\t\t\tthis.site?.frappe_version &&\n\t\t\t\t\tthis.site?.name &&\n\t\t\t\t\t!this.site?.group_public &&\n\t\t\t\t\tthis.site?.frappe_version !== 'Nightly',\n\t\t\t\ttransform(data) {\n\t\t\t\t\treturn data.map(group => ({\n\t\t\t\t\t\tlabel: group.title || group.name,\n\t\t\t\t\t\tvalue: group.name\n\t\t\t\t\t}));\n\t\t\t\t},\n\t\t\t\tinitialData: []\n\t\t\t};\n\t\t},\n\t\taddServerToReleaseGroup() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.add_server_to_release_group',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site?.name,\n\t\t\t\t\tgroup_name: this.privateReleaseGroup\n\t\t\t\t},\n\t\t\t\tonSuccess(data) {\n\t\t\t\t\tnotify({\n\t\t\t\t\t\ttitle: 'Server Added to the Bench',\n\t\t\t\t\t\tmessage: `Added a server to <b>${this.privateReleaseGroup}</b> bench. Please wait for the bench to complete the deploy.`,\n\t\t\t\t\t\ticon: 'check',\n\t\t\t\t\t\tcolor: 'green'\n\t\t\t\t\t});\n\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\tname: 'BenchJobs',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tbenchName: this.privateReleaseGroup,\n\t\t\t\t\t\t\tjobName: data\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.resetValues();\n\t\t\t\t\tthis.$emit('update:modelValue', false);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tvalidateGroupforUpgrade() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.validate_group_for_upgrade',\n\t\t\t\tonSuccess(data) {\n\t\t\t\t\tthis.benchHasCommonServer = data;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tmethods: {\n\t\tresetValues() {\n\t\t\tthis.targetDateTime = null;\n\t\t\tthis.privateReleaseGroup = '';\n\t\t\tthis.benchHasCommonServer = false;\n\t\t\tthis.$resources.getPrivateGroups.reset();\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t@close=\"resetValues\"\n\t\t:options=\"{\n\t\t\ttitle: 'Move Site to another Server',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Add Server to Bench',\n\t\t\t\t\tloading: $resources.addServerToReleaseGroup.loading,\n\t\t\t\t\tdisabled: $resources.isServerAddedInGroup.data || !targetServer,\n\t\t\t\t\tonClick: () => $resources.addServerToReleaseGroup.submit()\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Change Server',\n\t\t\t\t\tloading: $resources.changeServer.loading,\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tdisabled:\n\t\t\t\t\t\t!$resources.changeServerOptions?.data?.length ||\n\t\t\t\t\t\t!targetServer ||\n\t\t\t\t\t\t!$resources.isServerAddedInGroup.data,\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t$resources.changeServer.submit({\n\t\t\t\t\t\t\tname: site?.name,\n\t\t\t\t\t\t\tserver: targetServer,\n\t\t\t\t\t\t\tscheduled_datetime: datetimeInIST,\n\t\t\t\t\t\t\tskip_failing_patches: skipFailingPatches\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t}\"\n\t>\n\t\t<template #body-content>\n\t\t\t<LoadingIndicator\n\t\t\t\tclass=\"mx-auto h-4 w-4\"\n\t\t\t\tv-if=\"$resources.changeServerOptions.loading\"\n\t\t\t/>\n\t\t\t<FormControl\n\t\t\t\tv-else-if=\"$resources.changeServerOptions.data.length > 0\"\n\t\t\t\tlabel=\"Select Server\"\n\t\t\t\tvariant=\"outline\"\n\t\t\t\ttype=\"select\"\n\t\t\t\t:options=\"$resources.changeServerOptions.data\"\n\t\t\t\tv-model=\"targetServer\"\n\t\t\t\t@change=\"\n\t\t\t\t\te =>\n\t\t\t\t\t\t$resources.isServerAddedInGroup.fetch({\n\t\t\t\t\t\t\tname: site?.name,\n\t\t\t\t\t\t\tserver: e.target.value\n\t\t\t\t\t\t})\n\t\t\t\t\"\n\t\t\t/>\n\t\t\t<div v-if=\"$resources.isServerAddedInGroup.data\" class=\"mt-4 space-y-4\">\n\t\t\t\t<DateTimeControl v-model=\"targetDateTime\" label=\"Schedule Time\" />\n\t\t\t\t<FormControl\n\t\t\t\t\tlabel=\"Skip failing patches if any\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tv-model=\"skipFailingPatches\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<p v-if=\"message && !errorMessage\" class=\"mt-4 text-sm text-gray-700\">\n\t\t\t\t{{ message }}\n\t\t\t</p>\n\t\t\t<ErrorMessage class=\"mt-4\" :message=\"errorMessage\" />\n\t\t</template>\n\t</Dialog>\n</template>\n\n<script>\nimport { notify } from '@/utils/toast';\nimport DateTimeControl from '../../../src2/components/DateTimeControl.vue';\n\nexport default {\n\tname: 'SiteChangeServerDialog',\n\tprops: ['site', 'modelValue'],\n\temits: ['update:modelValue'],\n\tcomponents: { DateTimeControl },\n\tdata() {\n\t\treturn {\n\t\t\ttargetServer: '',\n\t\t\ttargetDateTime: null,\n\t\t\tskipFailingPatches: false\n\t\t};\n\t},\n\tcomputed: {\n\t\tshow: {\n\t\t\tget() {\n\t\t\t\treturn this.modelValue;\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tthis.$emit('update:modelValue', value);\n\t\t\t}\n\t\t},\n\t\tmessage() {\n\t\t\tif (this.$resources.changeServerOptions.data.length === 0) {\n\t\t\t\treturn 'No servers available for your team to move the site to. Please create a server first.';\n\t\t\t} else if (\n\t\t\t\tthis.targetServer &&\n\t\t\t\t!this.$resources.isServerAddedInGroup.data\n\t\t\t) {\n\t\t\t\treturn \"The chosen server isn't added to the bench yet. Please add the server to the bench first.\";\n\t\t\t} else if (\n\t\t\t\tthis.targetServer &&\n\t\t\t\tthis.$resources.isServerAddedInGroup.data\n\t\t\t) {\n\t\t\t\treturn 'The chosen server is already added to the bench. You can now migrate the site to the server.';\n\t\t\t} else return '';\n\t\t},\n\t\terrorMessage() {\n\t\t\treturn (\n\t\t\t\tthis.$resources.addServerToReleaseGroup.error ||\n\t\t\t\tthis.$resources.isServerAddedInGroup.error ||\n\t\t\t\tthis.$resources.changeServerOptions.error ||\n\t\t\t\tthis.$resources.changeServer.error\n\t\t\t);\n\t\t},\n\t\tdatetimeInIST() {\n\t\t\tif (!this.targetDateTime) return null;\n\t\t\tconst datetimeInIST = this.$dayjs(this.targetDateTime)\n\t\t\t\t.tz('Asia/Kolkata')\n\t\t\t\t.format('YYYY-MM-DDTHH:mm');\n\n\t\t\treturn datetimeInIST;\n\t\t}\n\t},\n\tresources: {\n\t\tchangeServerOptions() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.change_server_options',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site?.name\n\t\t\t\t},\n\t\t\t\tinitialData: [],\n\t\t\t\tauto: true,\n\t\t\t\ttransform(d) {\n\t\t\t\t\treturn d.map(s => ({\n\t\t\t\t\t\tlabel: s.title || s.name,\n\t\t\t\t\t\tvalue: s.name\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tisServerAddedInGroup() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.is_server_added_in_group',\n\t\t\t\tinitialData: false\n\t\t\t};\n\t\t},\n\t\tchangeServer() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.change_server',\n\t\t\t\tonSuccess() {\n\t\t\t\t\tnotify({\n\t\t\t\t\t\ttitle: 'Site Change Server',\n\t\t\t\t\t\tmessage: `Site <b>${this.site?.name}</b> has been scheduled to move to <b>${this.targetServer}</b>`,\n\t\t\t\t\t\ticon: 'check',\n\t\t\t\t\t\tcolor: 'green'\n\t\t\t\t\t});\n\t\t\t\t\tthis.$emit('update:modelValue', false);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\taddServerToReleaseGroup() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.add_server_to_release_group',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.site?.name,\n\t\t\t\t\tgroup_name: this.site?.group,\n\t\t\t\t\tserver: this.targetServer\n\t\t\t\t},\n\t\t\t\tonSuccess(data) {\n\t\t\t\t\tnotify({\n\t\t\t\t\t\ttitle: 'Server Added to the Bench',\n\t\t\t\t\t\tmessage: `Added <b>${this.targetServer}</b> to current bench. Please wait for the deploy to be completed.`,\n\t\t\t\t\t\ticon: 'check',\n\t\t\t\t\t\tcolor: 'green'\n\t\t\t\t\t});\n\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\tname: 'BenchJobs',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tbenchName: this.site?.group,\n\t\t\t\t\t\t\tjobName: data\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.resetValues();\n\t\t\t\t\tthis.$emit('update:modelValue', false);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\tmethods: {\n\t\tresetValues() {\n\t\t\tthis.targetServer = '';\n\t\t\tthis.targetDateTime = null;\n\t\t\tthis.$resources.isServerAddedInGroup.reset();\n\t\t}\n\t}\n};\n</script>\n","<template>\n\t<div>\n\t\t<header\n\t\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-5 py-2.5\"\n\t\t>\n\t\t\t<Breadcrumbs\n\t\t\t\t:items=\"[\n\t\t\t\t\t{ label: 'Sites', route: { name: 'Sites' } },\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: site?.host_name || site?.name,\n\t\t\t\t\t\troute: { name: 'SiteOverview', params: { siteName: site?.name } }\n\t\t\t\t\t}\n\t\t\t\t]\"\n\t\t\t>\n\t\t\t\t<template #actions>\n\t\t\t\t\t<div class=\"space-x-2\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tv-if=\"site?.status === 'Active'\"\n\t\t\t\t\t\t\ticon-left=\"external-link\"\n\t\t\t\t\t\t\tlabel=\"Visit Site\"\n\t\t\t\t\t\t\t:link=\"`https://${site?.name}/apps`\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Dropdown :options=\"siteActions\">\n\t\t\t\t\t\t\t<template v-slot=\"{ open }\">\n\t\t\t\t\t\t\t\t<Button variant=\"ghost\" icon=\"more-horizontal\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</Breadcrumbs>\n\t\t</header>\n\t\t<div class=\"p-5\" v-if=\"site\">\n\t\t\t<div\n\t\t\t\tclass=\"flex flex-col space-y-3 md:flex-row md:items-baseline md:justify-between md:space-y-0\"\n\t\t\t>\n\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t<h1 class=\"text-2xl font-bold\">\n\t\t\t\t\t\t{{ site.host_name || site.name }}\n\t\t\t\t\t</h1>\n\t\t\t\t\t<Badge class=\"ml-4\" :label=\"site.status\" />\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"regionInfo\"\n\t\t\t\t\t\tclass=\"ml-2 hidden cursor-default flex-row items-center self-end rounded-md bg-yellow-50 px-3 py-1 text-xs font-medium text-yellow-700 md:flex\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tv-if=\"regionInfo.image\"\n\t\t\t\t\t\t\tclass=\"mr-2 h-4\"\n\t\t\t\t\t\t\t:src=\"regionInfo.image\"\n\t\t\t\t\t\t\t:alt=\"`Flag of ${regionInfo.title}`\"\n\t\t\t\t\t\t\t:title=\"regionInfo.image\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<p>{{ regionInfo.title }}</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<Button\n\t\t\t\t\t@click=\"onActivateClick\"\n\t\t\t\t\tv-if=\"site.pending_for_long\"\n\t\t\t\t\t:variant=\"'solid'\"\n\t\t\t\t\tclass=\"mr-1\"\n\t\t\t\t>\n\t\t\t\t\tActivate\n\t\t\t\t</Button>\n\t\t\t\t<div class=\"mb-10 flex flex-row justify-between md:hidden\">\n\t\t\t\t\t<div class=\"flex flex-row\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"regionInfo\"\n\t\t\t\t\t\t\tclass=\"flex cursor-default flex-row items-center rounded-md bg-yellow-50 px-3 py-1 text-xs font-medium text-yellow-700\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tv-if=\"regionInfo.image\"\n\t\t\t\t\t\t\t\tclass=\"mr-2 h-4\"\n\t\t\t\t\t\t\t\t:src=\"regionInfo.image\"\n\t\t\t\t\t\t\t\t:alt=\"`Flag of ${regionInfo.title}`\"\n\t\t\t\t\t\t\t\t:title=\"regionInfo.image\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<p>{{ regionInfo.title }}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"mb-2 mt-4\">\n\t\t\t\t<SiteAlerts\n\t\t\t\t\tv-if=\"site && $resources.plan?.data && !$resources.site.loading\"\n\t\t\t\t\t:site=\"site\"\n\t\t\t\t\t:plan=\"$resources.plan.data\"\n\t\t\t\t\t@plan-change=\"handlePlanChange\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<Tabs :tabs=\"tabs\">\n\t\t\t\t<router-view v-slot=\"{ Component, route }\">\n\t\t\t\t\t<component\n\t\t\t\t\t\tv-if=\"site\"\n\t\t\t\t\t\t:is=\"Component\"\n\t\t\t\t\t\t:site=\"site\"\n\t\t\t\t\t\t:plan=\"$resources.plan.data\"\n\t\t\t\t\t\t@plan-change=\"handlePlanChange\"\n\t\t\t\t\t/>\n\t\t\t\t</router-view>\n\t\t\t</Tabs>\n\t\t</div>\n\n\t\t<Dialog\n\t\t\t:options=\"{\n\t\t\t\ttitle: 'Login As Administrator',\n\t\t\t\tactions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Proceed',\n\t\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\t\tonClick: proceedWithLoginAsAdmin\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\"\n\t\t\tv-model=\"showReasonForAdminLoginDialog\"\n\t\t>\n\t\t\t<template v-slot:body-content>\n\t\t\t\t<FormControl\n\t\t\t\t\tlabel=\"Reason for logging in as Administrator\"\n\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\tv-model=\"reasonForAdminLogin\"\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t\t<ErrorMessage class=\"mt-3\" :message=\"errorMessage\" />\n\t\t\t</template>\n\t\t</Dialog>\n\n\t\t<SiteTransferDialog :site=\"site\" v-model=\"showTransferSiteDialog\" />\n\n\t\t<SiteChangeGroupDialog\n\t\t\tv-if=\"site\"\n\t\t\t:site=\"site\"\n\t\t\tv-model=\"showChangeGroupDialog\"\n\t\t/>\n\t\t<SiteChangeRegionDialog\n\t\t\tv-if=\"site\"\n\t\t\t:site=\"site\"\n\t\t\tv-model=\"showChangeRegionDialog\"\n\t\t/>\n\t\t<SiteChangeServerDialog\n\t\t\tv-if=\"site\"\n\t\t\t:site=\"site\"\n\t\t\tv-model=\"showChangeServerDialog\"\n\t\t/>\n\t\t<SiteVersionUpgradeDialog\n\t\t\tv-if=\"site\"\n\t\t\t:site=\"site\"\n\t\t\tv-model=\"showVersionUpgradeDialog\"\n\t\t/>\n\t</div>\n</template>\n\n<script>\nimport Tabs from '@/components/Tabs.vue';\nimport { loginAsAdmin } from '@/controllers/loginAsAdmin';\nimport SiteAlerts from './SiteAlerts.vue';\nimport { notify } from '@/utils/toast';\nimport SiteTransferDialog from './SiteTransferDialog.vue';\nimport SiteChangeGroupDialog from './SiteChangeGroupDialog.vue';\nimport SiteChangeRegionDialog from './SiteChangeRegionDialog.vue';\nimport SiteVersionUpgradeDialog from './SiteVersionUpgradeDialog.vue';\nimport SiteChangeServerDialog from './SiteChangeServerDialog.vue';\n\nexport default {\n\tname: 'Site',\n\tpageMeta() {\n\t\treturn {\n\t\t\ttitle: `Site - ${this.siteName} - Easytouch Cloud`\n\t\t};\n\t},\n\tprops: ['siteName'],\n\tcomponents: {\n\t\tSiteAlerts,\n\t\tTabs,\n\t\tSiteTransferDialog,\n\t\tSiteChangeGroupDialog,\n\t\tSiteChangeRegionDialog,\n\t\tSiteChangeServerDialog,\n\t\tSiteVersionUpgradeDialog\n\t},\n\tdata() {\n\t\treturn {\n\t\t\trunningJob: false,\n\t\t\treasonForAdminLogin: '',\n\t\t\tshowReasonForAdminLoginDialog: false,\n\t\t\tshowTransferSiteDialog: false,\n\t\t\tshowChangeGroupDialog: false,\n\t\t\tshowChangeRegionDialog: false,\n\t\t\tshowChangeServerDialog: false,\n\t\t\tshowVersionUpgradeDialog: false,\n\t\t\terrorMessage: ''\n\t\t};\n\t},\n\tresources: {\n\t\tsite() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.get',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.siteName\n\t\t\t\t},\n\t\t\t\tauto: true,\n\t\t\t\tonSuccess() {\n\t\t\t\t\tthis.routeToGeneral();\n\n\t\t\t\t\tif (this.siteName !== this.site.name) {\n\t\t\t\t\t\tthis.$router.replace({ params: { siteName: this.site.name } });\n\t\t\t\t\t}\n\t\t\t\t\tif (this.site.status !== 'Active' || this.site.setup_wizard_complete)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tthis.$call('press.api.site.setup_wizard_complete', {\n\t\t\t\t\t\tname: this.siteName\n\t\t\t\t\t})\n\t\t\t\t\t\t.then(complete => {\n\t\t\t\t\t\t\tthis.site.setup_wizard_complete = Boolean(complete);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(() => (this.site.setup_wizard_complete = false));\n\t\t\t\t},\n\t\t\t\tonError: this.$routeTo404PageIfNotFound\n\t\t\t};\n\t\t},\n\t\tloginAsAdmin() {\n\t\t\treturn loginAsAdmin(this.siteName);\n\t\t},\n\t\tplan() {\n\t\t\treturn {\n\t\t\t\turl: 'press.api.site.current_plan',\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.siteName\n\t\t\t\t},\n\t\t\t\tauto: true\n\t\t\t};\n\t\t}\n\t},\n\tactivated() {\n\t\tthis.setupAgentJobUpdate();\n\n\t\tif (this.site?.status === 'Active') {\n\t\t\tthis.$socket.on('list_update', this.onSocketUpdate);\n\t\t}\n\t},\n\tdeactivated() {\n\t\tthis.$socket.off('list_update', this.onSocketUpdate);\n\t},\n\tmethods: {\n\t\tonSocketUpdate({ doctype, name }) {\n\t\t\tif (doctype === 'Site' && name === this.siteName) {\n\t\t\t\tthis.$resources.site.reload();\n\t\t\t}\n\t\t},\n\t\tsetupAgentJobUpdate() {\n\t\t\tif (this._agentJobUpdateSet) return;\n\t\t\tthis._agentJobUpdateSet = true;\n\n\t\t\tthis.$socket.on('agent_job_update', data => {\n\t\t\t\tif (data.name === 'New Site' || data.name === 'New Site from Backup') {\n\t\t\t\t\tif (data.status === 'Success' && data.site === this.siteName) {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t// running reload immediately doesn't work for some reason\n\t\t\t\t\t\t\tthis.$router.push(`/sites/${this.siteName}/overview`);\n\t\t\t\t\t\t\tthis.$resources.site.reload();\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.runningJob =\n\t\t\t\t\tdata.site === this.siteName && data.status !== 'Success';\n\t\t\t});\n\t\t},\n\t\trouteToGeneral() {\n\t\t\tif (this.$route.matched.length === 1) {\n\t\t\t\tlet tab = ['Pending', 'Installing'].includes(this.site?.status)\n\t\t\t\t\t? 'jobs'\n\t\t\t\t\t: 'overview';\n\t\t\t\tthis.$router.replace(`/sites/${this.site?.name}/${tab}`);\n\t\t\t}\n\t\t},\n\t\tproceedWithLoginAsAdmin() {\n\t\t\tthis.errorMessage = '';\n\n\t\t\tif (!this.reasonForAdminLogin.trim()) {\n\t\t\t\t// The input is empty\n\t\t\t\tthis.errorMessage = 'Reason is required';\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$resources.loginAsAdmin.submit({\n\t\t\t\tname: this.siteName,\n\t\t\t\treason: this.reasonForAdminLogin\n\t\t\t});\n\n\t\t\tthis.showReasonForAdminLoginDialog = false;\n\t\t},\n\t\thandlePlanChange() {\n\t\t\tthis.$resources.site.reload();\n\t\t\tthis.$resources.plan.reload();\n\t\t},\n\t\tonActivateClick() {\n\t\t\tthis.$confirm({\n\t\t\t\ttitle: 'Activate Site',\n\t\t\t\tmessage: `Are you sure you want to activate this site?`,\n\t\t\t\tactionLabel: 'Activate',\n\t\t\t\taction: () => this.activate()\n\t\t\t});\n\t\t},\n\t\tactivate() {\n\t\t\tthis.$call('press.api.site.activate', {\n\t\t\t\tname: this.site.name\n\t\t\t});\n\t\t\tnotify({\n\t\t\t\ttitle: 'Site activated successfully!',\n\t\t\t\tmessage: 'You can now access your site',\n\t\t\t\ticon: 'check',\n\t\t\t\tcolor: 'green'\n\t\t\t});\n\t\t\tsetTimeout(() => window.location.reload(), 1000);\n\t\t}\n\t},\n\tcomputed: {\n\t\tsite() {\n\t\t\treturn this.$resources.site.data;\n\t\t},\n\n\t\tregionInfo() {\n\t\t\tif (!this.$resources.site.loading && this.$resources.site.data) {\n\t\t\t\treturn this.$resources.site.data.server_region_info;\n\t\t\t}\n\t\t},\n\n\t\tsiteActions() {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'View in Desk',\n\t\t\t\t\ticon: 'external-link',\n\t\t\t\t\tcondition: () => this.$account.user.user_type === 'System User',\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.open(\n\t\t\t\t\t\t\t`${window.location.protocol}//${window.location.host}/app/site/${this.site?.name}`,\n\t\t\t\t\t\t\t'_blank'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Manage Bench',\n\t\t\t\t\ticon: 'tool',\n\t\t\t\t\troute: `/groups/${this.site?.group}`,\n\t\t\t\t\tcondition: () => this.site?.group,\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\tthis.$router.push(`/groups/${this.site?.group}`);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Login As Administrator',\n\t\t\t\t\ticon: 'external-link',\n\t\t\t\t\tloading: this.$resources.loginAsAdmin.loading,\n\t\t\t\t\tcondition: () => this.site?.status === 'Active',\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\tif (this.$account.team.name == this.site?.notify_email) {\n\t\t\t\t\t\t\treturn this.$resources.loginAsAdmin.submit({\n\t\t\t\t\t\t\t\tname: this.siteName\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.showReasonForAdminLoginDialog = true;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Impersonate Team',\n\t\t\t\t\ticon: 'tool',\n\t\t\t\t\tcondition: () => this.$account.user.user_type === 'System User',\n\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\tawait this.$account.switchTeam(this.site?.team);\n\t\t\t\t\t\tnotify({\n\t\t\t\t\t\t\ttitle: 'Switched Team',\n\t\t\t\t\t\t\tmessage: `Switched to ${this.site?.team}`,\n\t\t\t\t\t\t\ticon: 'check',\n\t\t\t\t\t\t\tcolor: 'green'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Transfer Site',\n\t\t\t\t\ticon: 'tool',\n\t\t\t\t\tcondition: () =>\n\t\t\t\t\t\tthis.site?.status === 'Active' && !this.$account.parent_team,\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\tthis.showTransferSiteDialog = true;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Change Bench',\n\t\t\t\t\ticon: 'package',\n\t\t\t\t\tcondition: () => this.site?.status === 'Active',\n\t\t\t\t\tonClick: () => (this.showChangeGroupDialog = true)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Change Region',\n\t\t\t\t\ticon: 'globe',\n\t\t\t\t\tcondition: () => this.site?.status === 'Active',\n\t\t\t\t\tonClick: () => (this.showChangeRegionDialog = true)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Upgrade Version',\n\t\t\t\t\ticon: 'arrow-up',\n\t\t\t\t\tcondition: () => this.site?.status === 'Active',\n\t\t\t\t\tonClick: () => (this.showVersionUpgradeDialog = true)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Change Server',\n\t\t\t\t\ticon: 'server',\n\t\t\t\t\tcondition: () =>\n\t\t\t\t\t\tthis.site?.status === 'Active' && !this.site?.is_public,\n\t\t\t\t\tonClick: () => (this.showChangeServerDialog = true)\n\t\t\t\t}\n\t\t\t];\n\t\t},\n\n\t\thasMonitorAccess() {\n\t\t\treturn this.$resources.plan.data?.monitor_access;\n\t\t},\n\n\t\ttabs() {\n\t\t\tlet siteConfig = '';\n\t\t\tlet siteMonitorTab = '';\n\t\t\tlet tabRoute = subRoute => `/sites/${this.siteName}/${subRoute}`;\n\t\t\tlet tabs = [\n\t\t\t\t{ label: 'Overview', route: 'overview' },\n\t\t\t\t{ label: 'Apps', route: 'apps' },\n\t\t\t\t{ label: 'Analytics', route: 'analytics' },\n\t\t\t\t{ label: 'Monitor', route: 'monitor' },\n\t\t\t\t{ label: 'Database', route: 'database' },\n\t\t\t\t{ label: 'Config', route: 'site-config' },\n\t\t\t\t{ label: 'Jobs', route: 'jobs', showRedDot: this.runningJob },\n\t\t\t\t{ label: 'Logs', route: 'logs' },\n\t\t\t\t{ label: 'Settings', route: 'settings' }\n\t\t\t];\n\n\t\t\tif (this.site && this.site?.hide_config !== 1) {\n\t\t\t\tsiteConfig = 'Config';\n\t\t\t}\n\n\t\t\tif (this.site && this.hasMonitorAccess) {\n\t\t\t\tsiteMonitorTab = 'Monitor';\n\t\t\t}\n\n\t\t\tlet tabsByStatus = {\n\t\t\t\tActive: [\n\t\t\t\t\t'Overview',\n\t\t\t\t\t'Apps',\n\t\t\t\t\t'Analytics',\n\t\t\t\t\t'Database',\n\t\t\t\t\tsiteConfig,\n\t\t\t\t\t'Jobs',\n\t\t\t\t\t'Logs',\n\t\t\t\t\t'Request Logs',\n\t\t\t\t\t'Settings',\n\t\t\t\t\tsiteMonitorTab\n\t\t\t\t],\n\t\t\t\tInactive: [\n\t\t\t\t\t'Overview',\n\t\t\t\t\t'Apps',\n\t\t\t\t\t'Database',\n\t\t\t\t\tsiteConfig,\n\t\t\t\t\t'Jobs',\n\t\t\t\t\t'Logs',\n\t\t\t\t\t'Settings'\n\t\t\t\t],\n\t\t\t\tInstalling: ['Jobs'],\n\t\t\t\tPending: ['Jobs'],\n\t\t\t\tBroken: [\n\t\t\t\t\t'Overview',\n\t\t\t\t\t'Apps',\n\t\t\t\t\tsiteConfig,\n\t\t\t\t\t'Database',\n\t\t\t\t\t'Jobs',\n\t\t\t\t\t'Logs',\n\t\t\t\t\t'Settings',\n\t\t\t\t\tsiteMonitorTab\n\t\t\t\t],\n\t\t\t\tSuspended: [\n\t\t\t\t\t'Overview',\n\t\t\t\t\t'Apps',\n\t\t\t\t\t'Database',\n\t\t\t\t\t'Jobs',\n\t\t\t\t\t'Plan',\n\t\t\t\t\t'Logs',\n\t\t\t\t\t'Settings'\n\t\t\t\t]\n\t\t\t};\n\t\t\tif (this.site) {\n\t\t\t\tlet tabsToShow = tabsByStatus[this.site?.status];\n\t\t\t\tif (tabsToShow?.length) {\n\t\t\t\t\ttabs = tabs.filter(tab => tabsToShow.includes(tab.label));\n\t\t\t\t}\n\t\t\t\treturn tabs.map(tab => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...tab,\n\t\t\t\t\t\troute: tabRoute(tab.route)\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn [];\n\t\t}\n\t}\n};\n</script>\n"],"file":"assets/Site-BXOawvGz.js"}